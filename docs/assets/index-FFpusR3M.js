(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,s){var o=null;if(s!==void 0&&(o=""+s),r.key!==void 0&&(o=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:i,type:n,key:o,ref:r!==void 0?r:null,props:s}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=t,reactJsxRuntime_production.jsxs=t,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function m(B){return B===null||typeof B!="object"?null:(B=g&&B[g]||B["@@iterator"],typeof B=="function"?B:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function S(B,z,te){this.props=B,this.context=z,this.refs=E,this.updater=te||y}S.prototype.isReactComponent={},S.prototype.setState=function(B,z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,z,"setState")},S.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function b(){}b.prototype=S.prototype;function C(B,z,te){this.props=B,this.context=z,this.refs=E,this.updater=te||y}var T=C.prototype=new b;T.constructor=C,_(T,S.prototype),T.isPureReactComponent=!0;var A=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function k(B,z,te,ne,Q,ue){return te=ue.ref,{$$typeof:i,type:B,key:z,ref:te!==void 0?te:null,props:ue}}function j(B,z){return k(B.type,z,void 0,void 0,void 0,B.props)}function F(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}function U(B){var z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(te){return z[te]})}var q=/\/+/g;function J(B,z){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):z.toString(36)}function ee(){}function Y(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(ee,ee):(B.status="pending",B.then(function(z){B.status==="pending"&&(B.status="fulfilled",B.value=z)},function(z){B.status==="pending"&&(B.status="rejected",B.reason=z)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function $(B,z,te,ne,Q){var ue=typeof B;(ue==="undefined"||ue==="boolean")&&(B=null);var me=!1;if(B===null)me=!0;else switch(ue){case"bigint":case"string":case"number":me=!0;break;case"object":switch(B.$$typeof){case i:case e:me=!0;break;case p:return me=B._init,$(me(B._payload),z,te,ne,Q)}}if(me)return Q=Q(B),me=ne===""?"."+J(B,0):ne,A(Q)?(te="",me!=null&&(te=me.replace(q,"$&/")+"/"),$(Q,z,te,"",function(qe){return qe})):Q!=null&&(F(Q)&&(Q=j(Q,te+(Q.key==null||B&&B.key===Q.key?"":(""+Q.key).replace(q,"$&/")+"/")+me)),z.push(Q)),1;me=0;var be=ne===""?".":ne+":";if(A(B))for(var Ae=0;Ae<B.length;Ae++)ne=B[Ae],ue=be+J(ne,Ae),me+=$(ne,z,te,ue,Q);else if(Ae=m(B),typeof Ae=="function")for(B=Ae.call(B),Ae=0;!(ne=B.next()).done;)ne=ne.value,ue=be+J(ne,Ae++),me+=$(ne,z,te,ue,Q);else if(ue==="object"){if(typeof B.then=="function")return $(Y(B),z,te,ne,Q);throw z=String(B),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return me}function D(B,z,te){if(B==null)return B;var ne=[],Q=0;return $(B,ne,"","",function(ue){return z.call(te,ue,Q++)}),ne}function V(B){if(B._status===-1){var z=B._result;z=z(),z.then(function(te){(B._status===0||B._status===-1)&&(B._status=1,B._result=te)},function(te){(B._status===0||B._status===-1)&&(B._status=2,B._result=te)}),B._status===-1&&(B._status=0,B._result=z)}if(B._status===1)return B._result.default;throw B._result}var P=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function I(){}return react_production.Children={map:D,forEach:function(B,z,te){D(B,function(){z.apply(this,arguments)},te)},count:function(B){var z=0;return D(B,function(){z++}),z},toArray:function(B){return D(B,function(z){return z})||[]},only:function(B){if(!F(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},react_production.Component=S,react_production.Fragment=t,react_production.Profiler=r,react_production.PureComponent=C,react_production.StrictMode=n,react_production.Suspense=u,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(B){return N.H.useMemoCache(B)}},react_production.cache=function(B){return function(){return B.apply(null,arguments)}},react_production.cloneElement=function(B,z,te){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ne=_({},B.props),Q=B.key,ue=void 0;if(z!=null)for(me in z.ref!==void 0&&(ue=void 0),z.key!==void 0&&(Q=""+z.key),z)!L.call(z,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&z.ref===void 0||(ne[me]=z[me]);var me=arguments.length-2;if(me===1)ne.children=te;else if(1<me){for(var be=Array(me),Ae=0;Ae<me;Ae++)be[Ae]=arguments[Ae+2];ne.children=be}return k(B.type,Q,void 0,void 0,ue,ne)},react_production.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:s,_context:B},B},react_production.createElement=function(B,z,te){var ne,Q={},ue=null;if(z!=null)for(ne in z.key!==void 0&&(ue=""+z.key),z)L.call(z,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(Q[ne]=z[ne]);var me=arguments.length-2;if(me===1)Q.children=te;else if(1<me){for(var be=Array(me),Ae=0;Ae<me;Ae++)be[Ae]=arguments[Ae+2];Q.children=be}if(B&&B.defaultProps)for(ne in me=B.defaultProps,me)Q[ne]===void 0&&(Q[ne]=me[ne]);return k(B,ue,void 0,void 0,null,Q)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(B){return{$$typeof:l,render:B}},react_production.isValidElement=F,react_production.lazy=function(B){return{$$typeof:p,_payload:{_status:-1,_result:B},_init:V}},react_production.memo=function(B,z){return{$$typeof:d,type:B,compare:z===void 0?null:z}},react_production.startTransition=function(B){var z=N.T,te={};N.T=te;try{var ne=B(),Q=N.S;Q!==null&&Q(te,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(I,P)}catch(ue){P(ue)}finally{N.T=z}},react_production.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},react_production.use=function(B){return N.H.use(B)},react_production.useActionState=function(B,z,te){return N.H.useActionState(B,z,te)},react_production.useCallback=function(B,z){return N.H.useCallback(B,z)},react_production.useContext=function(B){return N.H.useContext(B)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(B,z){return N.H.useDeferredValue(B,z)},react_production.useEffect=function(B,z,te){var ne=N.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(B,z)},react_production.useId=function(){return N.H.useId()},react_production.useImperativeHandle=function(B,z,te){return N.H.useImperativeHandle(B,z,te)},react_production.useInsertionEffect=function(B,z){return N.H.useInsertionEffect(B,z)},react_production.useLayoutEffect=function(B,z){return N.H.useLayoutEffect(B,z)},react_production.useMemo=function(B,z){return N.H.useMemo(B,z)},react_production.useOptimistic=function(B,z){return N.H.useOptimistic(B,z)},react_production.useReducer=function(B,z,te){return N.H.useReducer(B,z,te)},react_production.useRef=function(B){return N.H.useRef(B)},react_production.useState=function(B){return N.H.useState(B)},react_production.useSyncExternalStore=function(B,z,te){return N.H.useSyncExternalStore(B,z,te)},react_production.useTransition=function(){return N.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(i){function e(D,V){var P=D.length;D.push(V);e:for(;0<P;){var I=P-1>>>1,B=D[I];if(0<r(B,V))D[I]=V,D[P]=B,P=I;else break e}}function t(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var V=D[0],P=D.pop();if(P!==V){D[0]=P;e:for(var I=0,B=D.length,z=B>>>1;I<z;){var te=2*(I+1)-1,ne=D[te],Q=te+1,ue=D[Q];if(0>r(ne,P))Q<B&&0>r(ue,ne)?(D[I]=ue,D[Q]=P,I=Q):(D[I]=ne,D[te]=P,I=te);else if(Q<B&&0>r(ue,P))D[I]=ue,D[Q]=P,I=Q;else break e}}return V}function r(D,V){var P=D.sortIndex-V.sortIndex;return P!==0?P:D.id-V.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,g=null,m=3,y=!1,_=!1,E=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(D){for(var V=t(d);V!==null;){if(V.callback===null)n(d);else if(V.startTime<=D)n(d),V.sortIndex=V.expirationTime,e(u,V);else break;V=t(d)}}function N(D){if(E=!1,A(D),!_)if(t(u)!==null)_=!0,L||(L=!0,J());else{var V=t(d);V!==null&&$(N,V.startTime-D)}}var L=!1,k=-1,j=5,F=-1;function U(){return S?!0:!(i.unstable_now()-F<j)}function q(){if(S=!1,L){var D=i.unstable_now();F=D;var V=!0;try{e:{_=!1,E&&(E=!1,C(k),k=-1),y=!0;var P=m;try{t:{for(A(D),g=t(u);g!==null&&!(g.expirationTime>D&&U());){var I=g.callback;if(typeof I=="function"){g.callback=null,m=g.priorityLevel;var B=I(g.expirationTime<=D);if(D=i.unstable_now(),typeof B=="function"){g.callback=B,A(D),V=!0;break t}g===t(u)&&n(u),A(D)}else n(u);g=t(u)}if(g!==null)V=!0;else{var z=t(d);z!==null&&$(N,z.startTime-D),V=!1}}break e}finally{g=null,m=P,y=!1}V=void 0}}finally{V?J():L=!1}}}var J;if(typeof T=="function")J=function(){T(q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Y=ee.port2;ee.port1.onmessage=q,J=function(){Y.postMessage(null)}}else J=function(){b(q,0)};function $(D,V){k=b(function(){D(i.unstable_now())},V)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(D){D.callback=null},i.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_next=function(D){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var P=m;m=V;try{return D()}finally{m=P}},i.unstable_requestPaint=function(){S=!0},i.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var P=m;m=D;try{return V()}finally{m=P}},i.unstable_scheduleCallback=function(D,V,P){var I=i.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?I+P:I):P=I,D){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=P+B,D={id:p++,callback:V,priorityLevel:D,startTime:P,expirationTime:B,sortIndex:-1},P>I?(D.sortIndex=P,e(d,D),t(u)===null&&D===t(d)&&(E?(C(k),k=-1):E=!0,$(N,P-I))):(D.sortIndex=B,e(u,D),_||y||(_=!0,L||(L=!0,J()))),D},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(D){var V=m;return function(){var P=m;m=V;try{return D.apply(this,arguments)}finally{m=P}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var i=requireReact();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(u,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:u,containerInfo:d,implementation:p}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,reactDom_production.createPortal=function(u,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(u,d,null,p)},reactDom_production.flushSync=function(u){var d=o.T,p=n.p;try{if(o.T=null,n.p=2,u)return u()}finally{o.T=d,n.p=p,n.d.f()}},reactDom_production.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(u,d))},reactDom_production.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},reactDom_production.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var p=d.as,g=l(p,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?n.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:y}):p==="script"&&n.d.X(u,{crossOrigin:g,integrity:m,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},reactDom_production.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=l(d.as,d.crossOrigin);n.d.M(u,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(u)},reactDom_production.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=l(p,d.crossOrigin);n.d.L(u,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},reactDom_production.preloadModule=function(u,d){if(typeof u=="string")if(d){var p=l(d.as,d.crossOrigin);n.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(u)},reactDom_production.requestFormReset=function(u){n.d.r(u)},reactDom_production.unstable_batchedUpdates=function(u,d){return u(d)},reactDom_production.useFormState=function(u,d,p){return o.H.useFormState(u,d,p)},reactDom_production.useFormStatus=function(){return o.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var i=requireScheduler(),e=requireReact(),t=requireReactDom();function n(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(n(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(n(188));return c!==a?null:a}for(var f=a,x=c;;){var M=f.return;if(M===null)break;var R=M.alternate;if(R===null){if(x=M.return,x!==null){f=x;continue}break}if(M.child===R.child){for(R=M.child;R;){if(R===f)return l(M),a;if(R===x)return l(M),c;R=R.sibling}throw Error(n(188))}if(f.return!==x.return)f=M,x=R;else{for(var O=!1,H=M.child;H;){if(H===f){O=!0,f=M,x=R;break}if(H===x){O=!0,x=M,f=R;break}H=H.sibling}if(!O){for(H=R.child;H;){if(H===f){O=!0,f=R,x=M;break}if(H===x){O=!0,x=R,f=M;break}H=H.sibling}if(!O)throw Error(n(189))}}if(f.alternate!==x)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function J(a){return a===null||typeof a!="object"?null:(a=q&&a[q]||a["@@iterator"],typeof a=="function"?a:null)}var ee=Symbol.for("react.client.reference");function Y(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ee?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case L:return"SuspenseList";case F:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case y:return"Portal";case T:return(a.displayName||"Context")+".Provider";case C:return(a._context.displayName||"Context")+".Consumer";case A:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case k:return c=a.displayName||null,c!==null?c:Y(a.type)||"Memo";case j:c=a._payload,a=a._init;try{return Y(a(c))}catch{}}return null}var $=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},I=[],B=-1;function z(a){return{current:a}}function te(a){0>B||(a.current=I[B],I[B]=null,B--)}function ne(a,c){B++,I[B]=a.current,a.current=c}var Q=z(null),ue=z(null),me=z(null),be=z(null);function Ae(a,c){switch(ne(me,c),ne(ue,a),ne(Q,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?Uh(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=Uh(c),a=zh(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}te(Q),ne(Q,a)}function qe(){te(Q),te(ue),te(me)}function Be(a){a.memoizedState!==null&&ne(be,a);var c=Q.current,f=zh(c,a.type);c!==f&&(ne(ue,a),ne(Q,f))}function it(a){ue.current===a&&(te(Q),te(ue)),be.current===a&&(te(be),bs._currentValue=P)}var st=Object.prototype.hasOwnProperty,Oe=i.unstable_scheduleCallback,Z=i.unstable_cancelCallback,jt=i.unstable_shouldYield,ot=i.unstable_requestPaint,Ye=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,dt=i.unstable_ImmediatePriority,Ue=i.unstable_UserBlockingPriority,K=i.unstable_NormalPriority,G=i.unstable_LowPriority,he=i.unstable_IdlePriority,Ee=i.log,Te=i.unstable_setDisableYieldValue,ve=null,Ne=null;function Pe(a){if(typeof Ee=="function"&&Te(a),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(ve,a)}catch{}}var De=Math.clz32?Math.clz32:Ge,ct=Math.log,Re=Math.LN2;function Ge(a){return a>>>=0,a===0?32:31-(ct(a)/Re|0)|0}var Qe=256,et=4194304;function Ve(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ut(a,c,f){var x=a.pendingLanes;if(x===0)return 0;var M=0,R=a.suspendedLanes,O=a.pingedLanes;a=a.warmLanes;var H=x&134217727;return H!==0?(x=H&~R,x!==0?M=Ve(x):(O&=H,O!==0?M=Ve(O):f||(f=H&~a,f!==0&&(M=Ve(f))))):(H=x&~R,H!==0?M=Ve(H):O!==0?M=Ve(O):f||(f=x&~a,f!==0&&(M=Ve(f)))),M===0?0:c!==0&&c!==M&&(c&R)===0&&(R=M&-M,f=c&-c,R>=f||R===32&&(f&4194048)!==0)?c:M}function at(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function Ct(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function se(){var a=Qe;return Qe<<=1,(Qe&4194048)===0&&(Qe=256),a}function Ie(){var a=et;return et<<=1,(et&62914560)===0&&(et=4194304),a}function ye(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function we(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Fe(a,c,f,x,M,R){var O=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var H=a.entanglements,ie=a.expirationTimes,de=a.hiddenUpdates;for(f=O&~f;0<f;){var _e=31-De(f),Me=1<<_e;H[_e]=0,ie[_e]=-1;var pe=de[_e];if(pe!==null)for(de[_e]=null,_e=0;_e<pe.length;_e++){var fe=pe[_e];fe!==null&&(fe.lane&=-536870913)}f&=~Me}x!==0&&je(a,x,0),R!==0&&M===0&&a.tag!==0&&(a.suspendedLanes|=R&~(O&~c))}function je(a,c,f){a.pendingLanes|=c,a.suspendedLanes&=~c;var x=31-De(c);a.entangledLanes|=c,a.entanglements[x]=a.entanglements[x]|1073741824|f&4194090}function lt(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var x=31-De(f),M=1<<x;M&c|a[x]&c&&(a[x]|=c),f&=~M}}function Lt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ht(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function _t(){var a=V.p;return a!==0?a:(a=window.event,a===void 0?32:ld(a.type))}function vi(a,c){var f=V.p;try{return V.p=a,c()}finally{V.p=f}}var Jt=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Jt,ri="__reactProps$"+Jt,pi="__reactContainer$"+Jt,In="__reactEvents$"+Jt,Ms="__reactListeners$"+Jt,Ts="__reactHandles$"+Jt,jn="__reactResources$"+Jt,ln="__reactMarker$"+Jt;function un(a){delete a[Yt],delete a[ri],delete a[In],delete a[Ms],delete a[Ts]}function zi(a){var c=a[Yt];if(c)return c;for(var f=a.parentNode;f;){if(c=f[pi]||f[Yt]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=Wh(a);a!==null;){if(f=a[Yt])return f;a=Wh(a)}return c}a=f,f=a.parentNode}return null}function $i(a){if(a=a[Yt]||a[pi]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Vn(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(n(33))}function hn(a){var c=a[jn];return c||(c=a[jn]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Wt(a){a[ln]=!0}var Cs=new Set,As={};function Gi(a,c){W(a,c),W(a+"Capture",c)}function W(a,c){for(As[a]=c,a=0;a<c.length;a++)Cs.add(c[a])}var oe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ge={},xe={};function le(a){return st.call(xe,a)?!0:st.call(ge,a)?!1:oe.test(a)?xe[a]=!0:(ge[a]=!0,!1)}function Ce(a,c,f){if(le(c))if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var x=c.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+f)}}function Le(a,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+f)}}function ke(a,c,f,x){if(x===null)a.removeAttribute(f);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(c,f,""+x)}}var ze,nt;function Ke(a){if(ze===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);ze=c&&c[1]||"",nt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+a+nt}var Xe=!1;function ft(a,c){if(!a||Xe)return"";Xe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(fe){var pe=fe}Reflect.construct(a,[],Me)}else{try{Me.call()}catch(fe){pe=fe}a.call(Me.prototype)}}else{try{throw Error()}catch(fe){pe=fe}(Me=a())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(fe){if(fe&&pe&&typeof fe.stack=="string")return[fe.stack,pe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=x.DetermineComponentFrameRoot(),O=R[0],H=R[1];if(O&&H){var ie=O.split(`
`),de=H.split(`
`);for(M=x=0;x<ie.length&&!ie[x].includes("DetermineComponentFrameRoot");)x++;for(;M<de.length&&!de[M].includes("DetermineComponentFrameRoot");)M++;if(x===ie.length||M===de.length)for(x=ie.length-1,M=de.length-1;1<=x&&0<=M&&ie[x]!==de[M];)M--;for(;1<=x&&0<=M;x--,M--)if(ie[x]!==de[M]){if(x!==1||M!==1)do if(x--,M--,0>M||ie[x]!==de[M]){var _e=`
`+ie[x].replace(" at new "," at ");return a.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",a.displayName)),_e}while(1<=x&&0<=M);break}}}finally{Xe=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?Ke(f):""}function Et(a){switch(a.tag){case 26:case 27:case 5:return Ke(a.type);case 16:return Ke("Lazy");case 13:return Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 15:return ft(a.type,!1);case 11:return ft(a.type.render,!1);case 1:return ft(a.type,!0);case 31:return Ke("Activity");default:return""}}function Ft(a){try{var c="";do c+=Et(a),a=a.return;while(a);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function xt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function vt(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ze(a){var c=vt(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),x=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var M=f.get,R=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return M.call(this)},set:function(O){x=""+O,R.call(this,O)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(O){x=""+O},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Ot(a){a._valueTracker||(a._valueTracker=Ze(a))}function bt(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),x="";return a&&(x=vt(a)?a.checked?"true":"false":a.value),a=x,a!==f?(c.setValue(a),!0):!1}function ci(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var dn=/[\n"\\]/g;function kt(a){return a.replace(dn,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Hi(a,c,f,x,M,R,O,H){a.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.type=O:a.removeAttribute("type"),c!=null?O==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+xt(c)):a.value!==""+xt(c)&&(a.value=""+xt(c)):O!=="submit"&&O!=="reset"||a.removeAttribute("value"),c!=null?ui(a,O,xt(c)):f!=null?ui(a,O,xt(f)):x!=null&&a.removeAttribute("value"),M==null&&R!=null&&(a.defaultChecked=!!R),M!=null&&(a.checked=M&&typeof M!="function"&&typeof M!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?a.name=""+xt(H):a.removeAttribute("name")}function Dt(a,c,f,x,M,R,O,H){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(a.type=R),c!=null||f!=null){if(!(R!=="submit"&&R!=="reset"||c!=null))return;f=f!=null?""+xt(f):"",c=c!=null?""+xt(c):f,H||c===a.value||(a.value=c),a.defaultValue=c}x=x??M,x=typeof x!="function"&&typeof x!="symbol"&&!!x,a.checked=H?a.checked:!!x,a.defaultChecked=!!x,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(a.name=O)}function ui(a,c,f){c==="number"&&ci(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function Kt(a,c,f,x){if(a=a.options,c){c={};for(var M=0;M<f.length;M++)c["$"+f[M]]=!0;for(f=0;f<a.length;f++)M=c.hasOwnProperty("$"+a[f].value),a[f].selected!==M&&(a[f].selected=M),M&&x&&(a[f].defaultSelected=!0)}else{for(f=""+xt(f),c=null,M=0;M<a.length;M++){if(a[M].value===f){a[M].selected=!0,x&&(a[M].defaultSelected=!0);return}c!==null||a[M].disabled||(c=a[M])}c!==null&&(c.selected=!0)}}function ei(a,c,f){if(c!=null&&(c=""+xt(c),c!==a.value&&(a.value=c),f==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=f!=null?""+xt(f):""}function si(a,c,f,x){if(c==null){if(x!=null){if(f!=null)throw Error(n(92));if($(x)){if(1<x.length)throw Error(n(93));x=x[0]}f=x}f==null&&(f=""),c=f}f=xt(c),a.defaultValue=f,x=a.textContent,x===f&&x!==""&&x!==null&&(a.value=x)}function ji(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var Wi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ol(a,c,f){var x=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?x?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":x?a.setProperty(c,f):typeof f!="number"||f===0||Wi.has(c)?c==="float"?a.cssFloat=f:a[c]=(""+f).trim():a[c]=f+"px"}function Ul(a,c,f){if(c!=null&&typeof c!="object")throw Error(n(62));if(a=a.style,f!=null){for(var x in f)!f.hasOwnProperty(x)||c!=null&&c.hasOwnProperty(x)||(x.indexOf("--")===0?a.setProperty(x,""):x==="float"?a.cssFloat="":a[x]="");for(var M in c)x=c[M],c.hasOwnProperty(M)&&f[M]!==x&&Ol(a,M,x)}else for(var R in c)c.hasOwnProperty(R)&&Ol(a,R,c[R])}function Va(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_d=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rs(a){return _d.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Fa=null;function Ba(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var er=null,tr=null;function zl(a){var c=$i(a);if(c&&(a=c.stateNode)){var f=a[ri]||null;e:switch(a=c.stateNode,c.type){case"input":if(Hi(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+kt(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var x=f[c];if(x!==a&&x.form===a.form){var M=x[ri]||null;if(!M)throw Error(n(90));Hi(x,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(c=0;c<f.length;c++)x=f[c],x.form===a.form&&bt(x)}break e;case"textarea":ei(a,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Kt(a,!!f.multiple,c,!1)}}}var Oa=!1;function $l(a,c,f){if(Oa)return a(c,f);Oa=!0;try{var x=a(c);return x}finally{if(Oa=!1,(er!==null||tr!==null)&&(fa(),er&&(c=er,a=tr,tr=er=null,zl(c),a)))for(c=0;c<a.length;c++)zl(a[c])}}function Lr(a,c){var f=a.stateNode;if(f===null)return null;var x=f[ri]||null;if(x===null)return null;f=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(a=a.type,x=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!x;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(n(231,c,typeof f));return f}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ua=!1;if(qi)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{Ua=!1}var pn=null,za=null,Ps=null;function Gl(){if(Ps)return Ps;var a,c=za,f=c.length,x,M="value"in pn?pn.value:pn.textContent,R=M.length;for(a=0;a<f&&c[a]===M[a];a++);var O=f-a;for(x=1;x<=O&&c[f-x]===M[R-x];x++);return Ps=M.slice(a,1<x?1-x:void 0)}function Ds(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Ns(){return!0}function Hl(){return!1}function fi(a){function c(f,x,M,R,O){this._reactName=f,this._targetInst=M,this.type=x,this.nativeEvent=R,this.target=O,this.currentTarget=null;for(var H in a)a.hasOwnProperty(H)&&(f=a[H],this[H]=f?f(R):R[H]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Ns:Hl,this.isPropagationStopped=Hl,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),c}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=fi(Fn),Ir=p({},Fn,{view:0,detail:0}),Ed=fi(Ir),$a,Ga,jr,ks=p({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wa,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==jr&&(jr&&a.type==="mousemove"?($a=a.screenX-jr.screenX,Ga=a.screenY-jr.screenY):Ga=$a=0,jr=a),$a)},movementY:function(a){return"movementY"in a?a.movementY:Ga}}),Wl=fi(ks),Sd=p({},ks,{dataTransfer:0}),wd=fi(Sd),Md=p({},Ir,{relatedTarget:0}),Ha=fi(Md),Td=p({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Cd=fi(Td),Ad=p({},Fn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Rd=fi(Ad),Pd=p({},Fn,{data:0}),ql=fi(Pd),Dd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ld={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kd(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Ld[a])?!!c[a]:!1}function Wa(){return kd}var Id=p({},Ir,{key:function(a){if(a.key){var c=Dd[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Ds(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wa,charCode:function(a){return a.type==="keypress"?Ds(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ds(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),jd=fi(Id),Vd=p({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xl=fi(Vd),Fd=p({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wa}),Bd=fi(Fd),Od=p({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ud=fi(Od),zd=p({},ks,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),$d=fi(zd),Gd=p({},Fn,{newState:0,oldState:0}),Hd=fi(Gd),Wd=[9,13,27,32],qa=qi&&"CompositionEvent"in window,Vr=null;qi&&"documentMode"in document&&(Vr=document.documentMode);var qd=qi&&"TextEvent"in window&&!Vr,Yl=qi&&(!qa||Vr&&8<Vr&&11>=Vr),Kl=" ",Zl=!1;function Ql(a,c){switch(a){case"keyup":return Wd.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jl(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ir=!1;function Xd(a,c){switch(a){case"compositionend":return Jl(c);case"keypress":return c.which!==32?null:(Zl=!0,Kl);case"textInput":return a=c.data,a===Kl&&Zl?null:a;default:return null}}function Yd(a,c){if(ir)return a==="compositionend"||!qa&&Ql(a,c)?(a=Gl(),Ps=za=pn=null,ir=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Yl&&c.locale!=="ko"?null:c.data;default:return null}}var Kd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ec(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!Kd[a.type]:c==="textarea"}function tc(a,c,f,x){er?tr?tr.push(x):tr=[x]:er=x,c=ba(c,"onChange"),0<c.length&&(f=new Ls("onChange","change",null,f,x),a.push({event:f,listeners:c}))}var Fr=null,Br=null;function Zd(a){jh(a,0)}function Is(a){var c=Vn(a);if(bt(c))return a}function ic(a,c){if(a==="change")return c}var nc=!1;if(qi){var Xa;if(qi){var Ya="oninput"in document;if(!Ya){var rc=document.createElement("div");rc.setAttribute("oninput","return;"),Ya=typeof rc.oninput=="function"}Xa=Ya}else Xa=!1;nc=Xa&&(!document.documentMode||9<document.documentMode)}function sc(){Fr&&(Fr.detachEvent("onpropertychange",ac),Br=Fr=null)}function ac(a){if(a.propertyName==="value"&&Is(Br)){var c=[];tc(c,Br,a,Ba(a)),$l(Zd,c)}}function Qd(a,c,f){a==="focusin"?(sc(),Fr=c,Br=f,Fr.attachEvent("onpropertychange",ac)):a==="focusout"&&sc()}function Jd(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Is(Br)}function ep(a,c){if(a==="click")return Is(c)}function tp(a,c){if(a==="input"||a==="change")return Is(c)}function np(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var yi=typeof Object.is=="function"?Object.is:np;function Or(a,c){if(yi(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),x=Object.keys(c);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var M=f[x];if(!st.call(c,M)||!yi(a[M],c[M]))return!1}return!0}function oc(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function lc(a,c){var f=oc(a);a=0;for(var x;f;){if(f.nodeType===3){if(x=a+f.textContent.length,a<=c&&x>=c)return{node:f,offset:c-a};a=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=oc(f)}}function cc(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?cc(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function uc(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=ci(a.document);c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=ci(a.document)}return c}function Ka(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var rp=qi&&"documentMode"in document&&11>=document.documentMode,nr=null,Za=null,Ur=null,Qa=!1;function hc(a,c,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Qa||nr==null||nr!==ci(x)||(x=nr,"selectionStart"in x&&Ka(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Ur&&Or(Ur,x)||(Ur=x,x=ba(Za,"onSelect"),0<x.length&&(c=new Ls("onSelect","select",null,c,f),a.push({event:c,listeners:x}),c.target=nr)))}function Bn(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var rr={animationend:Bn("Animation","AnimationEnd"),animationiteration:Bn("Animation","AnimationIteration"),animationstart:Bn("Animation","AnimationStart"),transitionrun:Bn("Transition","TransitionRun"),transitionstart:Bn("Transition","TransitionStart"),transitioncancel:Bn("Transition","TransitionCancel"),transitionend:Bn("Transition","TransitionEnd")},Ja={},dc={};qi&&(dc=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function On(a){if(Ja[a])return Ja[a];if(!rr[a])return a;var c=rr[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in dc)return Ja[a]=c[f];return a}var pc=On("animationend"),fc=On("animationiteration"),mc=On("animationstart"),sp=On("transitionrun"),ap=On("transitionstart"),lp=On("transitioncancel"),gc=On("transitionend"),xc=new Map,eo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eo.push("scrollEnd");function Li(a,c){xc.set(a,c),Gi(c,[a])}var vc=new WeakMap;function Ti(a,c){if(typeof a=="object"&&a!==null){var f=vc.get(a);return f!==void 0?f:(c={value:a,source:c,stack:Ft(c)},vc.set(a,c),c)}return{value:a,source:c,stack:Ft(c)}}var Ci=[],sr=0,to=0;function js(){for(var a=sr,c=to=sr=0;c<a;){var f=Ci[c];Ci[c++]=null;var x=Ci[c];Ci[c++]=null;var M=Ci[c];Ci[c++]=null;var R=Ci[c];if(Ci[c++]=null,x!==null&&M!==null){var O=x.pending;O===null?M.next=M:(M.next=O.next,O.next=M),x.pending=M}R!==0&&yc(f,M,R)}}function Vs(a,c,f,x){Ci[sr++]=a,Ci[sr++]=c,Ci[sr++]=f,Ci[sr++]=x,to|=x,a.lanes|=x,a=a.alternate,a!==null&&(a.lanes|=x)}function io(a,c,f,x){return Vs(a,c,f,x),Fs(a)}function ar(a,c){return Vs(a,null,null,c),Fs(a)}function yc(a,c,f){a.lanes|=f;var x=a.alternate;x!==null&&(x.lanes|=f);for(var M=!1,R=a.return;R!==null;)R.childLanes|=f,x=R.alternate,x!==null&&(x.childLanes|=f),R.tag===22&&(a=R.stateNode,a===null||a._visibility&1||(M=!0)),a=R,R=R.return;return a.tag===3?(R=a.stateNode,M&&c!==null&&(M=31-De(f),a=R.hiddenUpdates,x=a[M],x===null?a[M]=[c]:x.push(c),c.lane=f|536870912),R):null}function Fs(a){if(50<ds)throw ds=0,cl=null,Error(n(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var or={};function cp(a,c,f,x){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(a,c,f,x){return new cp(a,c,f,x)}function no(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Xi(a,c){var f=a.alternate;return f===null?(f=bi(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function bc(a,c){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,c=f.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function Bs(a,c,f,x,M,R){var O=0;if(x=a,typeof a=="function")no(a)&&(O=1);else if(typeof a=="string")O=df(a,f,Q.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case F:return a=bi(31,f,c,M),a.elementType=F,a.lanes=R,a;case _:return Un(f.children,M,R,c);case E:O=8,M|=24;break;case S:return a=bi(12,f,c,M|2),a.elementType=S,a.lanes=R,a;case N:return a=bi(13,f,c,M),a.elementType=N,a.lanes=R,a;case L:return a=bi(19,f,c,M),a.elementType=L,a.lanes=R,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case b:case T:O=10;break e;case C:O=9;break e;case A:O=11;break e;case k:O=14;break e;case j:O=16,x=null;break e}O=29,f=Error(n(130,a===null?"null":typeof a,"")),x=null}return c=bi(O,f,c,M),c.elementType=a,c.type=x,c.lanes=R,c}function Un(a,c,f,x){return a=bi(7,a,x,c),a.lanes=f,a}function ro(a,c,f){return a=bi(6,a,null,c),a.lanes=f,a}function so(a,c,f){return c=bi(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var lr=[],cr=0,Os=null,Us=0,Ai=[],Ri=0,zn=null,Yi=1,Ki="";function $n(a,c){lr[cr++]=Us,lr[cr++]=Os,Os=a,Us=c}function _c(a,c,f){Ai[Ri++]=Yi,Ai[Ri++]=Ki,Ai[Ri++]=zn,zn=a;var x=Yi;a=Ki;var M=32-De(x)-1;x&=~(1<<M),f+=1;var R=32-De(c)+M;if(30<R){var O=M-M%5;R=(x&(1<<O)-1).toString(32),x>>=O,M-=O,Yi=1<<32-De(c)+M|f<<M|x,Ki=R+a}else Yi=1<<R|f<<M|x,Ki=a}function ao(a){a.return!==null&&($n(a,1),_c(a,1,0))}function oo(a){for(;a===Os;)Os=lr[--cr],lr[cr]=null,Us=lr[--cr],lr[cr]=null;for(;a===zn;)zn=Ai[--Ri],Ai[Ri]=null,Ki=Ai[--Ri],Ai[Ri]=null,Yi=Ai[--Ri],Ai[Ri]=null}var di=null,Ut=null,wt=!1,Gn=null,Vi=!1,lo=Error(n(519));function Hn(a){var c=Error(n(418,""));throw Gr(Ti(c,a)),lo}function Ec(a){var c=a.stateNode,f=a.type,x=a.memoizedProps;switch(c[Yt]=a,c[ri]=x,f){case"dialog":gt("cancel",c),gt("close",c);break;case"iframe":case"object":case"embed":gt("load",c);break;case"video":case"audio":for(f=0;f<fs.length;f++)gt(fs[f],c);break;case"source":gt("error",c);break;case"img":case"image":case"link":gt("error",c),gt("load",c);break;case"details":gt("toggle",c);break;case"input":gt("invalid",c),Dt(c,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),Ot(c);break;case"select":gt("invalid",c);break;case"textarea":gt("invalid",c),si(c,x.value,x.defaultValue,x.children),Ot(c)}f=x.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||x.suppressHydrationWarning===!0||Oh(c.textContent,f)?(x.popover!=null&&(gt("beforetoggle",c),gt("toggle",c)),x.onScroll!=null&&gt("scroll",c),x.onScrollEnd!=null&&gt("scrollend",c),x.onClick!=null&&(c.onclick=_a),c=!0):c=!1,c||Hn(a)}function Sc(a){for(di=a.return;di;)switch(di.tag){case 5:case 13:Vi=!1;return;case 27:case 3:Vi=!0;return;default:di=di.return}}function zr(a){if(a!==di)return!1;if(!wt)return Sc(a),wt=!0,!1;var c=a.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||Ml(a.type,a.memoizedProps)),f=!f),f&&Ut&&Hn(a),Sc(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(c===0){Ut=Ii(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;a=a.nextSibling}Ut=null}}else c===27?(c=Ut,Rn(a.type)?(a=Rl,Rl=null,Ut=a):Ut=c):Ut=di?Ii(a.stateNode.nextSibling):null;return!0}function $r(){Ut=di=null,wt=!1}function wc(){var a=Gn;return a!==null&&(xi===null?xi=a:xi.push.apply(xi,a),Gn=null),a}function Gr(a){Gn===null?Gn=[a]:Gn.push(a)}var co=z(null),Wn=null,Zi=null;function fn(a,c,f){ne(co,c._currentValue),c._currentValue=f}function Qi(a){a._currentValue=co.current,te(co)}function uo(a,c,f){for(;a!==null;){var x=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),a===f)break;a=a.return}}function ho(a,c,f,x){var M=a.child;for(M!==null&&(M.return=a);M!==null;){var R=M.dependencies;if(R!==null){var O=M.child;R=R.firstContext;e:for(;R!==null;){var H=R;R=M;for(var ie=0;ie<c.length;ie++)if(H.context===c[ie]){R.lanes|=f,H=R.alternate,H!==null&&(H.lanes|=f),uo(R.return,f,a),x||(O=null);break e}R=H.next}}else if(M.tag===18){if(O=M.return,O===null)throw Error(n(341));O.lanes|=f,R=O.alternate,R!==null&&(R.lanes|=f),uo(O,f,a),O=null}else O=M.child;if(O!==null)O.return=M;else for(O=M;O!==null;){if(O===a){O=null;break}if(M=O.sibling,M!==null){M.return=O.return,O=M;break}O=O.return}M=O}}function Hr(a,c,f,x){a=null;for(var M=c,R=!1;M!==null;){if(!R){if((M.flags&524288)!==0)R=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var O=M.alternate;if(O===null)throw Error(n(387));if(O=O.memoizedProps,O!==null){var H=M.type;yi(M.pendingProps.value,O.value)||(a!==null?a.push(H):a=[H])}}else if(M===be.current){if(O=M.alternate,O===null)throw Error(n(387));O.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(a!==null?a.push(bs):a=[bs])}M=M.return}a!==null&&ho(c,a,f,x),c.flags|=262144}function zs(a){for(a=a.firstContext;a!==null;){if(!yi(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function qn(a){Wn=a,Zi=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function hi(a){return Mc(Wn,a)}function $s(a,c){return Wn===null&&qn(a),Mc(a,c)}function Mc(a,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Zi===null){if(a===null)throw Error(n(308));Zi=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Zi=Zi.next=c;return f}var up=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(f,x){a.push(x)}};this.abort=function(){c.aborted=!0,a.forEach(function(f){return f()})}},hp=i.unstable_scheduleCallback,dp=i.unstable_NormalPriority,Zt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function po(){return{controller:new up,data:new Map,refCount:0}}function Wr(a){a.refCount--,a.refCount===0&&hp(dp,function(){a.controller.abort()})}var qr=null,fo=0,ur=0,hr=null;function pp(a,c){if(qr===null){var f=qr=[];fo=0,ur=gl(),hr={status:"pending",value:void 0,then:function(x){f.push(x)}}}return fo++,c.then(Tc,Tc),c}function Tc(){if(--fo===0&&qr!==null){hr!==null&&(hr.status="fulfilled");var a=qr;qr=null,ur=0,hr=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function fp(a,c){var f=[],x={status:"pending",value:null,reason:null,then:function(M){f.push(M)}};return a.then(function(){x.status="fulfilled",x.value=c;for(var M=0;M<f.length;M++)(0,f[M])(c)},function(M){for(x.status="rejected",x.reason=M,M=0;M<f.length;M++)(0,f[M])(void 0)}),x}var Cc=D.S;D.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&pp(a,c),Cc!==null&&Cc(a,c)};var Xn=z(null);function mo(){var a=Xn.current;return a!==null?a:It.pooledCache}function Gs(a,c){c===null?ne(Xn,Xn.current):ne(Xn,c.pool)}function Ac(){var a=mo();return a===null?null:{parent:Zt._currentValue,pool:a}}var Xr=Error(n(460)),Rc=Error(n(474)),Hs=Error(n(542)),go={then:function(){}};function Pc(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ws(){}function Dc(a,c,f){switch(f=a[f],f===void 0?a.push(c):f!==c&&(c.then(Ws,Ws),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,Lc(a),a;default:if(typeof c.status=="string")c.then(Ws,Ws);else{if(a=It,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=c,a.status="pending",a.then(function(x){if(c.status==="pending"){var M=c;M.status="fulfilled",M.value=x}},function(x){if(c.status==="pending"){var M=c;M.status="rejected",M.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,Lc(a),a}throw Yr=c,Xr}}var Yr=null;function Nc(){if(Yr===null)throw Error(n(459));var a=Yr;return Yr=null,a}function Lc(a){if(a===Xr||a===Hs)throw Error(n(483))}var mn=!1;function xo(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vo(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function gn(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function xn(a,c,f){var x=a.updateQueue;if(x===null)return null;if(x=x.shared,(Mt&2)!==0){var M=x.pending;return M===null?c.next=c:(c.next=M.next,M.next=c),x.pending=c,c=Fs(a),yc(a,null,f),c}return Vs(a,x,c,f),Fs(a)}function Kr(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var x=c.lanes;x&=a.pendingLanes,f|=x,c.lanes=f,lt(a,f)}}function yo(a,c){var f=a.updateQueue,x=a.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var M=null,R=null;if(f=f.firstBaseUpdate,f!==null){do{var O={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};R===null?M=R=O:R=R.next=O,f=f.next}while(f!==null);R===null?M=R=c:R=R.next=c}else M=R=c;f={baseState:x.baseState,firstBaseUpdate:M,lastBaseUpdate:R,shared:x.shared,callbacks:x.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}var bo=!1;function Zr(){if(bo){var a=hr;if(a!==null)throw a}}function Qr(a,c,f,x){bo=!1;var M=a.updateQueue;mn=!1;var R=M.firstBaseUpdate,O=M.lastBaseUpdate,H=M.shared.pending;if(H!==null){M.shared.pending=null;var ie=H,de=ie.next;ie.next=null,O===null?R=de:O.next=de,O=ie;var _e=a.alternate;_e!==null&&(_e=_e.updateQueue,H=_e.lastBaseUpdate,H!==O&&(H===null?_e.firstBaseUpdate=de:H.next=de,_e.lastBaseUpdate=ie))}if(R!==null){var Me=M.baseState;O=0,_e=de=ie=null,H=R;do{var pe=H.lane&-536870913,fe=pe!==H.lane;if(fe?(yt&pe)===pe:(x&pe)===pe){pe!==0&&pe===ur&&(bo=!0),_e!==null&&(_e=_e.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var rt=a,Je=H;pe=c;var Pt=f;switch(Je.tag){case 1:if(rt=Je.payload,typeof rt=="function"){Me=rt.call(Pt,Me,pe);break e}Me=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=Je.payload,pe=typeof rt=="function"?rt.call(Pt,Me,pe):rt,pe==null)break e;Me=p({},Me,pe);break e;case 2:mn=!0}}pe=H.callback,pe!==null&&(a.flags|=64,fe&&(a.flags|=8192),fe=M.callbacks,fe===null?M.callbacks=[pe]:fe.push(pe))}else fe={lane:pe,tag:H.tag,payload:H.payload,callback:H.callback,next:null},_e===null?(de=_e=fe,ie=Me):_e=_e.next=fe,O|=pe;if(H=H.next,H===null){if(H=M.shared.pending,H===null)break;fe=H,H=fe.next,fe.next=null,M.lastBaseUpdate=fe,M.shared.pending=null}}while(!0);_e===null&&(ie=Me),M.baseState=ie,M.firstBaseUpdate=de,M.lastBaseUpdate=_e,R===null&&(M.shared.lanes=0),Mn|=O,a.lanes=O,a.memoizedState=Me}}function kc(a,c){if(typeof a!="function")throw Error(n(191,a));a.call(c)}function Ic(a,c){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)kc(f[a],c)}var dr=z(null),qs=z(0);function jc(a,c){a=an,ne(qs,a),ne(dr,c),an=a|c.baseLanes}function _o(){ne(qs,an),ne(dr,dr.current)}function Eo(){an=qs.current,te(dr),te(qs)}var vn=0,ht=null,At=null,qt=null,Xs=!1,pr=!1,Yn=!1,Ys=0,Jr=0,mr=null,mp=0;function $t(){throw Error(n(321))}function So(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!yi(a[f],c[f]))return!1;return!0}function wo(a,c,f,x,M,R){return vn=R,ht=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,D.H=a===null||a.memoizedState===null?yu:bu,Yn=!1,R=f(x,M),Yn=!1,pr&&(R=Fc(c,f,x,M)),Vc(a),R}function Vc(a){D.H=ta;var c=At!==null&&At.next!==null;if(vn=0,qt=At=ht=null,Xs=!1,Jr=0,mr=null,c)throw Error(n(300));a===null||ti||(a=a.dependencies,a!==null&&zs(a)&&(ti=!0))}function Fc(a,c,f,x){ht=a;var M=0;do{if(pr&&(mr=null),Jr=0,pr=!1,25<=M)throw Error(n(301));if(M+=1,qt=At=null,a.updateQueue!=null){var R=a.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}D.H=Ep,R=c(f,x)}while(pr);return R}function gp(){var a=D.H,c=a.useState()[0];return c=typeof c.then=="function"?es(c):c,a=a.useState()[0],(At!==null?At.memoizedState:null)!==a&&(ht.flags|=1024),c}function Mo(){var a=Ys!==0;return Ys=0,a}function To(a,c,f){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~f}function Co(a){if(Xs){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Xs=!1}vn=0,qt=At=ht=null,pr=!1,Jr=Ys=0,mr=null}function mi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?ht.memoizedState=qt=a:qt=qt.next=a,qt}function Xt(){if(At===null){var a=ht.alternate;a=a!==null?a.memoizedState:null}else a=At.next;var c=qt===null?ht.memoizedState:qt.next;if(c!==null)qt=c,At=a;else{if(a===null)throw ht.alternate===null?Error(n(467)):Error(n(310));At=a,a={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},qt===null?ht.memoizedState=qt=a:qt=qt.next=a}return qt}function Ao(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function es(a){var c=Jr;return Jr+=1,mr===null&&(mr=[]),a=Dc(mr,a,c),c=ht,(qt===null?c.memoizedState:qt.next)===null&&(c=c.alternate,D.H=c===null||c.memoizedState===null?yu:bu),a}function Ks(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return es(a);if(a.$$typeof===T)return hi(a)}throw Error(n(438,String(a)))}function Ro(a){var c=null,f=ht.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var x=ht.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(M){return M.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Ao(),ht.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(a),x=0;x<a;x++)f[x]=U;return c.index++,f}function Ji(a,c){return typeof c=="function"?c(a):c}function Zs(a){var c=Xt();return Po(c,At,a)}function Po(a,c,f){var x=a.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=f;var M=a.baseQueue,R=x.pending;if(R!==null){if(M!==null){var O=M.next;M.next=R.next,R.next=O}c.baseQueue=M=R,x.pending=null}if(R=a.baseState,M===null)a.memoizedState=R;else{c=M.next;var H=O=null,ie=null,de=c,_e=!1;do{var Me=de.lane&-536870913;if(Me!==de.lane?(yt&Me)===Me:(vn&Me)===Me){var pe=de.revertLane;if(pe===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),Me===ur&&(_e=!0);else if((vn&pe)===pe){de=de.next,pe===ur&&(_e=!0);continue}else Me={lane:0,revertLane:de.revertLane,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},ie===null?(H=ie=Me,O=R):ie=ie.next=Me,ht.lanes|=pe,Mn|=pe;Me=de.action,Yn&&f(R,Me),R=de.hasEagerState?de.eagerState:f(R,Me)}else pe={lane:Me,revertLane:de.revertLane,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},ie===null?(H=ie=pe,O=R):ie=ie.next=pe,ht.lanes|=Me,Mn|=Me;de=de.next}while(de!==null&&de!==c);if(ie===null?O=R:ie.next=H,!yi(R,a.memoizedState)&&(ti=!0,_e&&(f=hr,f!==null)))throw f;a.memoizedState=R,a.baseState=O,a.baseQueue=ie,x.lastRenderedState=R}return M===null&&(x.lanes=0),[a.memoizedState,x.dispatch]}function Do(a){var c=Xt(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=a;var x=f.dispatch,M=f.pending,R=c.memoizedState;if(M!==null){f.pending=null;var O=M=M.next;do R=a(R,O.action),O=O.next;while(O!==M);yi(R,c.memoizedState)||(ti=!0),c.memoizedState=R,c.baseQueue===null&&(c.baseState=R),f.lastRenderedState=R}return[R,x]}function Bc(a,c,f){var x=ht,M=Xt(),R=wt;if(R){if(f===void 0)throw Error(n(407));f=f()}else f=c();var O=!yi((At||M).memoizedState,f);O&&(M.memoizedState=f,ti=!0),M=M.queue;var H=zc.bind(null,x,M,a);if(ts(2048,8,H,[a]),M.getSnapshot!==c||O||qt!==null&&qt.memoizedState.tag&1){if(x.flags|=2048,gr(9,Qs(),Uc.bind(null,x,M,f,c),null),It===null)throw Error(n(349));R||(vn&124)!==0||Oc(x,c,f)}return f}function Oc(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=ht.updateQueue,c===null?(c=Ao(),ht.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function Uc(a,c,f,x){c.value=f,c.getSnapshot=x,$c(c)&&Gc(a)}function zc(a,c,f){return f(function(){$c(c)&&Gc(a)})}function $c(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!yi(a,f)}catch{return!0}}function Gc(a){var c=ar(a,2);c!==null&&Mi(c,a,2)}function No(a){var c=mi();if(typeof a=="function"){var f=a;if(a=f(),Yn){Pe(!0);try{f()}finally{Pe(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:a},c}function Hc(a,c,f,x){return a.baseState=f,Po(a,At,typeof x=="function"?x:Ji)}function xp(a,c,f,x,M){if(ea(a))throw Error(n(485));if(a=c.action,a!==null){var R={payload:M,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){R.listeners.push(O)}};D.T!==null?f(!0):R.isTransition=!1,x(R),f=c.pending,f===null?(R.next=c.pending=R,Wc(c,R)):(R.next=f.next,c.pending=f.next=R)}}function Wc(a,c){var f=c.action,x=c.payload,M=a.state;if(c.isTransition){var R=D.T,O={};D.T=O;try{var H=f(M,x),ie=D.S;ie!==null&&ie(O,H),qc(a,c,H)}catch(de){Lo(a,c,de)}finally{D.T=R}}else try{R=f(M,x),qc(a,c,R)}catch(de){Lo(a,c,de)}}function qc(a,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(x){Xc(a,c,x)},function(x){return Lo(a,c,x)}):Xc(a,c,f)}function Xc(a,c,f){c.status="fulfilled",c.value=f,Yc(c),a.state=f,c=a.pending,c!==null&&(f=c.next,f===c?a.pending=null:(f=f.next,c.next=f,Wc(a,f)))}function Lo(a,c,f){var x=a.pending;if(a.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=f,Yc(c),c=c.next;while(c!==x)}a.action=null}function Yc(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function Kc(a,c){return c}function Zc(a,c){if(wt){var f=It.formState;if(f!==null){e:{var x=ht;if(wt){if(Ut){t:{for(var M=Ut,R=Vi;M.nodeType!==8;){if(!R){M=null;break t}if(M=Ii(M.nextSibling),M===null){M=null;break t}}R=M.data,M=R==="F!"||R==="F"?M:null}if(M){Ut=Ii(M.nextSibling),x=M.data==="F!";break e}}Hn(x)}x=!1}x&&(c=f[0])}}return f=mi(),f.memoizedState=f.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kc,lastRenderedState:c},f.queue=x,f=gu.bind(null,ht,x),x.dispatch=f,x=No(!1),R=Fo.bind(null,ht,!1,x.queue),x=mi(),M={state:c,dispatch:null,action:a,pending:null},x.queue=M,f=xp.bind(null,ht,M,R,f),M.dispatch=f,x.memoizedState=a,[c,f,!1]}function Qc(a){var c=Xt();return Jc(c,At,a)}function Jc(a,c,f){if(c=Po(a,c,Kc)[0],a=Zs(Ji)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=es(c)}catch(O){throw O===Xr?Hs:O}else x=c;c=Xt();var M=c.queue,R=M.dispatch;return f!==c.memoizedState&&(ht.flags|=2048,gr(9,Qs(),vp.bind(null,M,f),null)),[x,R,a]}function vp(a,c){a.action=c}function eu(a){var c=Xt(),f=At;if(f!==null)return Jc(c,f,a);Xt(),c=c.memoizedState,f=Xt();var x=f.queue.dispatch;return f.memoizedState=a,[c,x,!1]}function gr(a,c,f,x){return a={tag:a,create:f,deps:x,inst:c,next:null},c=ht.updateQueue,c===null&&(c=Ao(),ht.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=a.next=a:(x=f.next,f.next=a,a.next=x,c.lastEffect=a),a}function Qs(){return{destroy:void 0,resource:void 0}}function tu(){return Xt().memoizedState}function Js(a,c,f,x){var M=mi();x=x===void 0?null:x,ht.flags|=a,M.memoizedState=gr(1|c,Qs(),f,x)}function ts(a,c,f,x){var M=Xt();x=x===void 0?null:x;var R=M.memoizedState.inst;At!==null&&x!==null&&So(x,At.memoizedState.deps)?M.memoizedState=gr(c,R,f,x):(ht.flags|=a,M.memoizedState=gr(1|c,R,f,x))}function iu(a,c){Js(8390656,8,a,c)}function nu(a,c){ts(2048,8,a,c)}function ru(a,c){return ts(4,2,a,c)}function su(a,c){return ts(4,4,a,c)}function au(a,c){if(typeof c=="function"){a=a();var f=c(a);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function ou(a,c,f){f=f!=null?f.concat([a]):null,ts(4,4,au.bind(null,c,a),f)}function ko(){}function lu(a,c){var f=Xt();c=c===void 0?null:c;var x=f.memoizedState;return c!==null&&So(c,x[1])?x[0]:(f.memoizedState=[a,c],a)}function cu(a,c){var f=Xt();c=c===void 0?null:c;var x=f.memoizedState;if(c!==null&&So(c,x[1]))return x[0];if(x=a(),Yn){Pe(!0);try{a()}finally{Pe(!1)}}return f.memoizedState=[x,c],x}function Io(a,c,f){return f===void 0||(vn&1073741824)!==0?a.memoizedState=c:(a.memoizedState=f,a=dh(),ht.lanes|=a,Mn|=a,f)}function uu(a,c,f,x){return yi(f,c)?f:dr.current!==null?(a=Io(a,f,x),yi(a,c)||(ti=!0),a):(vn&42)===0?(ti=!0,a.memoizedState=f):(a=dh(),ht.lanes|=a,Mn|=a,c)}function hu(a,c,f,x,M){var R=V.p;V.p=R!==0&&8>R?R:8;var O=D.T,H={};D.T=H,Fo(a,!1,c,f);try{var ie=M(),de=D.S;if(de!==null&&de(H,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var _e=fp(ie,x);is(a,c,_e,wi(a))}else is(a,c,x,wi(a))}catch(Me){is(a,c,{then:function(){},status:"rejected",reason:Me},wi())}finally{V.p=R,D.T=O}}function yp(){}function jo(a,c,f,x){if(a.tag!==5)throw Error(n(476));var M=du(a).queue;hu(a,M,c,P,f===null?yp:function(){return pu(a),f(x)})}function du(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:P},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:f},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function pu(a){var c=du(a).next.queue;is(a,c,{},wi())}function Vo(){return hi(bs)}function fu(){return Xt().memoizedState}function mu(){return Xt().memoizedState}function bp(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var f=wi();a=gn(f);var x=xn(c,a,f);x!==null&&(Mi(x,c,f),Kr(x,c,f)),c={cache:po()},a.payload=c;return}c=c.return}}function _p(a,c,f){var x=wi();f={lane:x,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},ea(a)?xu(c,f):(f=io(a,c,f,x),f!==null&&(Mi(f,a,x),vu(f,c,x)))}function gu(a,c,f){var x=wi();is(a,c,f,x)}function is(a,c,f,x){var M={lane:x,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(ea(a))xu(c,M);else{var R=a.alternate;if(a.lanes===0&&(R===null||R.lanes===0)&&(R=c.lastRenderedReducer,R!==null))try{var O=c.lastRenderedState,H=R(O,f);if(M.hasEagerState=!0,M.eagerState=H,yi(H,O))return Vs(a,c,M,0),It===null&&js(),!1}catch{}finally{}if(f=io(a,c,M,x),f!==null)return Mi(f,a,x),vu(f,c,x),!0}return!1}function Fo(a,c,f,x){if(x={lane:2,revertLane:gl(),action:x,hasEagerState:!1,eagerState:null,next:null},ea(a)){if(c)throw Error(n(479))}else c=io(a,f,x,2),c!==null&&Mi(c,a,2)}function ea(a){var c=a.alternate;return a===ht||c!==null&&c===ht}function xu(a,c){pr=Xs=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function vu(a,c,f){if((f&4194048)!==0){var x=c.lanes;x&=a.pendingLanes,f|=x,c.lanes=f,lt(a,f)}}var ta={readContext:hi,use:Ks,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t},yu={readContext:hi,use:Ks,useCallback:function(a,c){return mi().memoizedState=[a,c===void 0?null:c],a},useContext:hi,useEffect:iu,useImperativeHandle:function(a,c,f){f=f!=null?f.concat([a]):null,Js(4194308,4,au.bind(null,c,a),f)},useLayoutEffect:function(a,c){return Js(4194308,4,a,c)},useInsertionEffect:function(a,c){Js(4,2,a,c)},useMemo:function(a,c){var f=mi();c=c===void 0?null:c;var x=a();if(Yn){Pe(!0);try{a()}finally{Pe(!1)}}return f.memoizedState=[x,c],x},useReducer:function(a,c,f){var x=mi();if(f!==void 0){var M=f(c);if(Yn){Pe(!0);try{f(c)}finally{Pe(!1)}}}else M=c;return x.memoizedState=x.baseState=M,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:M},x.queue=a,a=a.dispatch=_p.bind(null,ht,a),[x.memoizedState,a]},useRef:function(a){var c=mi();return a={current:a},c.memoizedState=a},useState:function(a){a=No(a);var c=a.queue,f=gu.bind(null,ht,c);return c.dispatch=f,[a.memoizedState,f]},useDebugValue:ko,useDeferredValue:function(a,c){var f=mi();return Io(f,a,c)},useTransition:function(){var a=No(!1);return a=hu.bind(null,ht,a.queue,!0,!1),mi().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,f){var x=ht,M=mi();if(wt){if(f===void 0)throw Error(n(407));f=f()}else{if(f=c(),It===null)throw Error(n(349));(yt&124)!==0||Oc(x,c,f)}M.memoizedState=f;var R={value:f,getSnapshot:c};return M.queue=R,iu(zc.bind(null,x,R,a),[a]),x.flags|=2048,gr(9,Qs(),Uc.bind(null,x,R,f,c),null),f},useId:function(){var a=mi(),c=It.identifierPrefix;if(wt){var f=Ki,x=Yi;f=(x&~(1<<32-De(x)-1)).toString(32)+f,c=""+c+"R"+f,f=Ys++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=mp++,c=""+c+"r"+f.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:Vo,useFormState:Zc,useActionState:Zc,useOptimistic:function(a){var c=mi();c.memoizedState=c.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=Fo.bind(null,ht,!0,f),f.dispatch=c,[a,c]},useMemoCache:Ro,useCacheRefresh:function(){return mi().memoizedState=bp.bind(null,ht)}},bu={readContext:hi,use:Ks,useCallback:lu,useContext:hi,useEffect:nu,useImperativeHandle:ou,useInsertionEffect:ru,useLayoutEffect:su,useMemo:cu,useReducer:Zs,useRef:tu,useState:function(){return Zs(Ji)},useDebugValue:ko,useDeferredValue:function(a,c){var f=Xt();return uu(f,At.memoizedState,a,c)},useTransition:function(){var a=Zs(Ji)[0],c=Xt().memoizedState;return[typeof a=="boolean"?a:es(a),c]},useSyncExternalStore:Bc,useId:fu,useHostTransitionStatus:Vo,useFormState:Qc,useActionState:Qc,useOptimistic:function(a,c){var f=Xt();return Hc(f,At,a,c)},useMemoCache:Ro,useCacheRefresh:mu},Ep={readContext:hi,use:Ks,useCallback:lu,useContext:hi,useEffect:nu,useImperativeHandle:ou,useInsertionEffect:ru,useLayoutEffect:su,useMemo:cu,useReducer:Do,useRef:tu,useState:function(){return Do(Ji)},useDebugValue:ko,useDeferredValue:function(a,c){var f=Xt();return At===null?Io(f,a,c):uu(f,At.memoizedState,a,c)},useTransition:function(){var a=Do(Ji)[0],c=Xt().memoizedState;return[typeof a=="boolean"?a:es(a),c]},useSyncExternalStore:Bc,useId:fu,useHostTransitionStatus:Vo,useFormState:eu,useActionState:eu,useOptimistic:function(a,c){var f=Xt();return At!==null?Hc(f,At,a,c):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:Ro,useCacheRefresh:mu},xr=null,ns=0;function ia(a){var c=ns;return ns+=1,xr===null&&(xr=[]),Dc(xr,a,c)}function rs(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function na(a,c){throw c.$$typeof===g?Error(n(525)):(a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function _u(a){var c=a._init;return c(a._payload)}function Eu(a){function c(ae,re){if(a){var ce=ae.deletions;ce===null?(ae.deletions=[re],ae.flags|=16):ce.push(re)}}function f(ae,re){if(!a)return null;for(;re!==null;)c(ae,re),re=re.sibling;return null}function x(ae){for(var re=new Map;ae!==null;)ae.key!==null?re.set(ae.key,ae):re.set(ae.index,ae),ae=ae.sibling;return re}function M(ae,re){return ae=Xi(ae,re),ae.index=0,ae.sibling=null,ae}function R(ae,re,ce){return ae.index=ce,a?(ce=ae.alternate,ce!==null?(ce=ce.index,ce<re?(ae.flags|=67108866,re):ce):(ae.flags|=67108866,re)):(ae.flags|=1048576,re)}function O(ae){return a&&ae.alternate===null&&(ae.flags|=67108866),ae}function H(ae,re,ce,Se){return re===null||re.tag!==6?(re=ro(ce,ae.mode,Se),re.return=ae,re):(re=M(re,ce),re.return=ae,re)}function ie(ae,re,ce,Se){var He=ce.type;return He===_?_e(ae,re,ce.props.children,Se,ce.key):re!==null&&(re.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===j&&_u(He)===re.type)?(re=M(re,ce.props),rs(re,ce),re.return=ae,re):(re=Bs(ce.type,ce.key,ce.props,null,ae.mode,Se),rs(re,ce),re.return=ae,re)}function de(ae,re,ce,Se){return re===null||re.tag!==4||re.stateNode.containerInfo!==ce.containerInfo||re.stateNode.implementation!==ce.implementation?(re=so(ce,ae.mode,Se),re.return=ae,re):(re=M(re,ce.children||[]),re.return=ae,re)}function _e(ae,re,ce,Se,He){return re===null||re.tag!==7?(re=Un(ce,ae.mode,Se,He),re.return=ae,re):(re=M(re,ce),re.return=ae,re)}function Me(ae,re,ce){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=ro(""+re,ae.mode,ce),re.return=ae,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case m:return ce=Bs(re.type,re.key,re.props,null,ae.mode,ce),rs(ce,re),ce.return=ae,ce;case y:return re=so(re,ae.mode,ce),re.return=ae,re;case j:var Se=re._init;return re=Se(re._payload),Me(ae,re,ce)}if($(re)||J(re))return re=Un(re,ae.mode,ce,null),re.return=ae,re;if(typeof re.then=="function")return Me(ae,ia(re),ce);if(re.$$typeof===T)return Me(ae,$s(ae,re),ce);na(ae,re)}return null}function pe(ae,re,ce,Se){var He=re!==null?re.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return He!==null?null:H(ae,re,""+ce,Se);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case m:return ce.key===He?ie(ae,re,ce,Se):null;case y:return ce.key===He?de(ae,re,ce,Se):null;case j:return He=ce._init,ce=He(ce._payload),pe(ae,re,ce,Se)}if($(ce)||J(ce))return He!==null?null:_e(ae,re,ce,Se,null);if(typeof ce.then=="function")return pe(ae,re,ia(ce),Se);if(ce.$$typeof===T)return pe(ae,re,$s(ae,ce),Se);na(ae,ce)}return null}function fe(ae,re,ce,Se,He){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return ae=ae.get(ce)||null,H(re,ae,""+Se,He);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case m:return ae=ae.get(Se.key===null?ce:Se.key)||null,ie(re,ae,Se,He);case y:return ae=ae.get(Se.key===null?ce:Se.key)||null,de(re,ae,Se,He);case j:var pt=Se._init;return Se=pt(Se._payload),fe(ae,re,ce,Se,He)}if($(Se)||J(Se))return ae=ae.get(ce)||null,_e(re,ae,Se,He,null);if(typeof Se.then=="function")return fe(ae,re,ce,ia(Se),He);if(Se.$$typeof===T)return fe(ae,re,ce,$s(re,Se),He);na(re,Se)}return null}function rt(ae,re,ce,Se){for(var He=null,pt=null,We=re,tt=re=0,ni=null;We!==null&&tt<ce.length;tt++){We.index>tt?(ni=We,We=null):ni=We.sibling;var St=pe(ae,We,ce[tt],Se);if(St===null){We===null&&(We=ni);break}a&&We&&St.alternate===null&&c(ae,We),re=R(St,re,tt),pt===null?He=St:pt.sibling=St,pt=St,We=ni}if(tt===ce.length)return f(ae,We),wt&&$n(ae,tt),He;if(We===null){for(;tt<ce.length;tt++)We=Me(ae,ce[tt],Se),We!==null&&(re=R(We,re,tt),pt===null?He=We:pt.sibling=We,pt=We);return wt&&$n(ae,tt),He}for(We=x(We);tt<ce.length;tt++)ni=fe(We,ae,tt,ce[tt],Se),ni!==null&&(a&&ni.alternate!==null&&We.delete(ni.key===null?tt:ni.key),re=R(ni,re,tt),pt===null?He=ni:pt.sibling=ni,pt=ni);return a&&We.forEach(function(kn){return c(ae,kn)}),wt&&$n(ae,tt),He}function Je(ae,re,ce,Se){if(ce==null)throw Error(n(151));for(var He=null,pt=null,We=re,tt=re=0,ni=null,St=ce.next();We!==null&&!St.done;tt++,St=ce.next()){We.index>tt?(ni=We,We=null):ni=We.sibling;var kn=pe(ae,We,St.value,Se);if(kn===null){We===null&&(We=ni);break}a&&We&&kn.alternate===null&&c(ae,We),re=R(kn,re,tt),pt===null?He=kn:pt.sibling=kn,pt=kn,We=ni}if(St.done)return f(ae,We),wt&&$n(ae,tt),He;if(We===null){for(;!St.done;tt++,St=ce.next())St=Me(ae,St.value,Se),St!==null&&(re=R(St,re,tt),pt===null?He=St:pt.sibling=St,pt=St);return wt&&$n(ae,tt),He}for(We=x(We);!St.done;tt++,St=ce.next())St=fe(We,ae,tt,St.value,Se),St!==null&&(a&&St.alternate!==null&&We.delete(St.key===null?tt:St.key),re=R(St,re,tt),pt===null?He=St:pt.sibling=St,pt=St);return a&&We.forEach(function(wf){return c(ae,wf)}),wt&&$n(ae,tt),He}function Pt(ae,re,ce,Se){if(typeof ce=="object"&&ce!==null&&ce.type===_&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case m:e:{for(var He=ce.key;re!==null;){if(re.key===He){if(He=ce.type,He===_){if(re.tag===7){f(ae,re.sibling),Se=M(re,ce.props.children),Se.return=ae,ae=Se;break e}}else if(re.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===j&&_u(He)===re.type){f(ae,re.sibling),Se=M(re,ce.props),rs(Se,ce),Se.return=ae,ae=Se;break e}f(ae,re);break}else c(ae,re);re=re.sibling}ce.type===_?(Se=Un(ce.props.children,ae.mode,Se,ce.key),Se.return=ae,ae=Se):(Se=Bs(ce.type,ce.key,ce.props,null,ae.mode,Se),rs(Se,ce),Se.return=ae,ae=Se)}return O(ae);case y:e:{for(He=ce.key;re!==null;){if(re.key===He)if(re.tag===4&&re.stateNode.containerInfo===ce.containerInfo&&re.stateNode.implementation===ce.implementation){f(ae,re.sibling),Se=M(re,ce.children||[]),Se.return=ae,ae=Se;break e}else{f(ae,re);break}else c(ae,re);re=re.sibling}Se=so(ce,ae.mode,Se),Se.return=ae,ae=Se}return O(ae);case j:return He=ce._init,ce=He(ce._payload),Pt(ae,re,ce,Se)}if($(ce))return rt(ae,re,ce,Se);if(J(ce)){if(He=J(ce),typeof He!="function")throw Error(n(150));return ce=He.call(ce),Je(ae,re,ce,Se)}if(typeof ce.then=="function")return Pt(ae,re,ia(ce),Se);if(ce.$$typeof===T)return Pt(ae,re,$s(ae,ce),Se);na(ae,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,re!==null&&re.tag===6?(f(ae,re.sibling),Se=M(re,ce),Se.return=ae,ae=Se):(f(ae,re),Se=ro(ce,ae.mode,Se),Se.return=ae,ae=Se),O(ae)):f(ae,re)}return function(ae,re,ce,Se){try{ns=0;var He=Pt(ae,re,ce,Se);return xr=null,He}catch(We){if(We===Xr||We===Hs)throw We;var pt=bi(29,We,null,ae.mode);return pt.lanes=Se,pt.return=ae,pt}finally{}}}var vr=Eu(!0),Su=Eu(!1),Pi=z(null),Fi=null;function yn(a){var c=a.alternate;ne(Qt,Qt.current&1),ne(Pi,a),Fi===null&&(c===null||dr.current!==null||c.memoizedState!==null)&&(Fi=a)}function wu(a){if(a.tag===22){if(ne(Qt,Qt.current),ne(Pi,a),Fi===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(Fi=a)}}else bn()}function bn(){ne(Qt,Qt.current),ne(Pi,Pi.current)}function en(a){te(Pi),Fi===a&&(Fi=null),te(Qt)}var Qt=z(0);function ra(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Al(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Bo(a,c,f,x){c=a.memoizedState,f=f(x,c),f=f==null?c:p({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Oo={enqueueSetState:function(a,c,f){a=a._reactInternals;var x=wi(),M=gn(x);M.payload=c,f!=null&&(M.callback=f),c=xn(a,M,x),c!==null&&(Mi(c,a,x),Kr(c,a,x))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var x=wi(),M=gn(x);M.tag=1,M.payload=c,f!=null&&(M.callback=f),c=xn(a,M,x),c!==null&&(Mi(c,a,x),Kr(c,a,x))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=wi(),x=gn(f);x.tag=2,c!=null&&(x.callback=c),c=xn(a,x,f),c!==null&&(Mi(c,a,f),Kr(c,a,f))}};function Mu(a,c,f,x,M,R,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(x,R,O):c.prototype&&c.prototype.isPureReactComponent?!Or(f,x)||!Or(M,R):!0}function Tu(a,c,f,x){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,x),c.state!==a&&Oo.enqueueReplaceState(c,c.state,null)}function Kn(a,c){var f=c;if("ref"in c){f={};for(var x in c)x!=="ref"&&(f[x]=c[x])}if(a=a.defaultProps){f===c&&(f=p({},f));for(var M in a)f[M]===void 0&&(f[M]=a[M])}return f}var sa=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Cu(a){sa(a)}function Au(a){console.error(a)}function Ru(a){sa(a)}function aa(a,c){try{var f=a.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function Pu(a,c,f){try{var x=a.onCaughtError;x(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function Uo(a,c,f){return f=gn(f),f.tag=3,f.payload={element:null},f.callback=function(){aa(a,c)},f}function Du(a){return a=gn(a),a.tag=3,a}function Nu(a,c,f,x){var M=f.type.getDerivedStateFromError;if(typeof M=="function"){var R=x.value;a.payload=function(){return M(R)},a.callback=function(){Pu(c,f,x)}}var O=f.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(a.callback=function(){Pu(c,f,x),typeof M!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var H=x.stack;this.componentDidCatch(x.value,{componentStack:H!==null?H:""})})}function Sp(a,c,f,x,M){if(f.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=f.alternate,c!==null&&Hr(c,f,M,!0),f=Pi.current,f!==null){switch(f.tag){case 13:return Fi===null?hl():f.alternate===null&&zt===0&&(zt=3),f.flags&=-257,f.flags|=65536,f.lanes=M,x===go?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([x]):c.add(x),pl(a,x,M)),!1;case 22:return f.flags|=65536,x===go?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([x]):f.add(x)),pl(a,x,M)),!1}throw Error(n(435,f.tag))}return pl(a,x,M),hl(),!1}if(wt)return c=Pi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=M,x!==lo&&(a=Error(n(422),{cause:x}),Gr(Ti(a,f)))):(x!==lo&&(c=Error(n(423),{cause:x}),Gr(Ti(c,f))),a=a.current.alternate,a.flags|=65536,M&=-M,a.lanes|=M,x=Ti(x,f),M=Uo(a.stateNode,x,M),yo(a,M),zt!==4&&(zt=2)),!1;var R=Error(n(520),{cause:x});if(R=Ti(R,f),hs===null?hs=[R]:hs.push(R),zt!==4&&(zt=2),c===null)return!0;x=Ti(x,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,a=M&-M,f.lanes|=a,a=Uo(f.stateNode,x,a),yo(f,a),!1;case 1:if(c=f.type,R=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Tn===null||!Tn.has(R))))return f.flags|=65536,M&=-M,f.lanes|=M,M=Du(M),Nu(M,a,f,x),yo(f,M),!1}f=f.return}while(f!==null);return!1}var Lu=Error(n(461)),ti=!1;function ai(a,c,f,x){c.child=a===null?Su(c,null,f,x):vr(c,a.child,f,x)}function ku(a,c,f,x,M){f=f.render;var R=c.ref;if("ref"in x){var O={};for(var H in x)H!=="ref"&&(O[H]=x[H])}else O=x;return qn(c),x=wo(a,c,f,O,R,M),H=Mo(),a!==null&&!ti?(To(a,c,M),tn(a,c,M)):(wt&&H&&ao(c),c.flags|=1,ai(a,c,x,M),c.child)}function Iu(a,c,f,x,M){if(a===null){var R=f.type;return typeof R=="function"&&!no(R)&&R.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=R,ju(a,c,R,x,M)):(a=Bs(f.type,null,x,c,c.mode,M),a.ref=c.ref,a.return=c,c.child=a)}if(R=a.child,!Yo(a,M)){var O=R.memoizedProps;if(f=f.compare,f=f!==null?f:Or,f(O,x)&&a.ref===c.ref)return tn(a,c,M)}return c.flags|=1,a=Xi(R,x),a.ref=c.ref,a.return=c,c.child=a}function ju(a,c,f,x,M){if(a!==null){var R=a.memoizedProps;if(Or(R,x)&&a.ref===c.ref)if(ti=!1,c.pendingProps=x=R,Yo(a,M))(a.flags&131072)!==0&&(ti=!0);else return c.lanes=a.lanes,tn(a,c,M)}return zo(a,c,f,x,M)}function Vu(a,c,f){var x=c.pendingProps,M=x.children,R=a!==null?a.memoizedState:null;if(x.mode==="hidden"){if((c.flags&128)!==0){if(x=R!==null?R.baseLanes|f:f,a!==null){for(M=c.child=a.child,R=0;M!==null;)R=R|M.lanes|M.childLanes,M=M.sibling;c.childLanes=R&~x}else c.childLanes=0,c.child=null;return Fu(a,c,x,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&Gs(c,R!==null?R.cachePool:null),R!==null?jc(c,R):_o(),wu(c);else return c.lanes=c.childLanes=536870912,Fu(a,c,R!==null?R.baseLanes|f:f,f)}else R!==null?(Gs(c,R.cachePool),jc(c,R),bn(),c.memoizedState=null):(a!==null&&Gs(c,null),_o(),bn());return ai(a,c,M,f),c.child}function Fu(a,c,f,x){var M=mo();return M=M===null?null:{parent:Zt._currentValue,pool:M},c.memoizedState={baseLanes:f,cachePool:M},a!==null&&Gs(c,null),_o(),wu(c),a!==null&&Hr(a,c,x,!0),null}function oa(a,c){var f=c.ref;if(f===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(a===null||a.ref!==f)&&(c.flags|=4194816)}}function zo(a,c,f,x,M){return qn(c),f=wo(a,c,f,x,void 0,M),x=Mo(),a!==null&&!ti?(To(a,c,M),tn(a,c,M)):(wt&&x&&ao(c),c.flags|=1,ai(a,c,f,M),c.child)}function Bu(a,c,f,x,M,R){return qn(c),c.updateQueue=null,f=Fc(c,x,f,M),Vc(a),x=Mo(),a!==null&&!ti?(To(a,c,R),tn(a,c,R)):(wt&&x&&ao(c),c.flags|=1,ai(a,c,f,R),c.child)}function Ou(a,c,f,x,M){if(qn(c),c.stateNode===null){var R=or,O=f.contextType;typeof O=="object"&&O!==null&&(R=hi(O)),R=new f(x,R),c.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Oo,c.stateNode=R,R._reactInternals=c,R=c.stateNode,R.props=x,R.state=c.memoizedState,R.refs={},xo(c),O=f.contextType,R.context=typeof O=="object"&&O!==null?hi(O):or,R.state=c.memoizedState,O=f.getDerivedStateFromProps,typeof O=="function"&&(Bo(c,f,O,x),R.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(O=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),O!==R.state&&Oo.enqueueReplaceState(R,R.state,null),Qr(c,x,R,M),Zr(),R.state=c.memoizedState),typeof R.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(a===null){R=c.stateNode;var H=c.memoizedProps,ie=Kn(f,H);R.props=ie;var de=R.context,_e=f.contextType;O=or,typeof _e=="object"&&_e!==null&&(O=hi(_e));var Me=f.getDerivedStateFromProps;_e=typeof Me=="function"||typeof R.getSnapshotBeforeUpdate=="function",H=c.pendingProps!==H,_e||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(H||de!==O)&&Tu(c,R,x,O),mn=!1;var pe=c.memoizedState;R.state=pe,Qr(c,x,R,M),Zr(),de=c.memoizedState,H||pe!==de||mn?(typeof Me=="function"&&(Bo(c,f,Me,x),de=c.memoizedState),(ie=mn||Mu(c,f,ie,x,pe,de,O))?(_e||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(c.flags|=4194308)):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=de),R.props=x,R.state=de,R.context=O,x=ie):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{R=c.stateNode,vo(a,c),O=c.memoizedProps,_e=Kn(f,O),R.props=_e,Me=c.pendingProps,pe=R.context,de=f.contextType,ie=or,typeof de=="object"&&de!==null&&(ie=hi(de)),H=f.getDerivedStateFromProps,(de=typeof H=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(O!==Me||pe!==ie)&&Tu(c,R,x,ie),mn=!1,pe=c.memoizedState,R.state=pe,Qr(c,x,R,M),Zr();var fe=c.memoizedState;O!==Me||pe!==fe||mn||a!==null&&a.dependencies!==null&&zs(a.dependencies)?(typeof H=="function"&&(Bo(c,f,H,x),fe=c.memoizedState),(_e=mn||Mu(c,f,_e,x,pe,fe,ie)||a!==null&&a.dependencies!==null&&zs(a.dependencies))?(de||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(x,fe,ie),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(x,fe,ie)),typeof R.componentDidUpdate=="function"&&(c.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof R.componentDidUpdate!="function"||O===a.memoizedProps&&pe===a.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||O===a.memoizedProps&&pe===a.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=fe),R.props=x,R.state=fe,R.context=ie,x=_e):(typeof R.componentDidUpdate!="function"||O===a.memoizedProps&&pe===a.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||O===a.memoizedProps&&pe===a.memoizedState||(c.flags|=1024),x=!1)}return R=x,oa(a,c),x=(c.flags&128)!==0,R||x?(R=c.stateNode,f=x&&typeof f.getDerivedStateFromError!="function"?null:R.render(),c.flags|=1,a!==null&&x?(c.child=vr(c,a.child,null,M),c.child=vr(c,null,f,M)):ai(a,c,f,M),c.memoizedState=R.state,a=c.child):a=tn(a,c,M),a}function Uu(a,c,f,x){return $r(),c.flags|=256,ai(a,c,f,x),c.child}var $o={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Go(a){return{baseLanes:a,cachePool:Ac()}}function Ho(a,c,f){return a=a!==null?a.childLanes&~f:0,c&&(a|=Di),a}function zu(a,c,f){var x=c.pendingProps,M=!1,R=(c.flags&128)!==0,O;if((O=R)||(O=a!==null&&a.memoizedState===null?!1:(Qt.current&2)!==0),O&&(M=!0,c.flags&=-129),O=(c.flags&32)!==0,c.flags&=-33,a===null){if(wt){if(M?yn(c):bn(),wt){var H=Ut,ie;if(ie=H){e:{for(ie=H,H=Vi;ie.nodeType!==8;){if(!H){H=null;break e}if(ie=Ii(ie.nextSibling),ie===null){H=null;break e}}H=ie}H!==null?(c.memoizedState={dehydrated:H,treeContext:zn!==null?{id:Yi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},ie=bi(18,null,null,0),ie.stateNode=H,ie.return=c,c.child=ie,di=c,Ut=null,ie=!0):ie=!1}ie||Hn(c)}if(H=c.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return Al(H)?c.lanes=32:c.lanes=536870912,null;en(c)}return H=x.children,x=x.fallback,M?(bn(),M=c.mode,H=la({mode:"hidden",children:H},M),x=Un(x,M,f,null),H.return=c,x.return=c,H.sibling=x,c.child=H,M=c.child,M.memoizedState=Go(f),M.childLanes=Ho(a,O,f),c.memoizedState=$o,x):(yn(c),Wo(c,H))}if(ie=a.memoizedState,ie!==null&&(H=ie.dehydrated,H!==null)){if(R)c.flags&256?(yn(c),c.flags&=-257,c=qo(a,c,f)):c.memoizedState!==null?(bn(),c.child=a.child,c.flags|=128,c=null):(bn(),M=x.fallback,H=c.mode,x=la({mode:"visible",children:x.children},H),M=Un(M,H,f,null),M.flags|=2,x.return=c,M.return=c,x.sibling=M,c.child=x,vr(c,a.child,null,f),x=c.child,x.memoizedState=Go(f),x.childLanes=Ho(a,O,f),c.memoizedState=$o,c=M);else if(yn(c),Al(H)){if(O=H.nextSibling&&H.nextSibling.dataset,O)var de=O.dgst;O=de,x=Error(n(419)),x.stack="",x.digest=O,Gr({value:x,source:null,stack:null}),c=qo(a,c,f)}else if(ti||Hr(a,c,f,!1),O=(f&a.childLanes)!==0,ti||O){if(O=It,O!==null&&(x=f&-f,x=(x&42)!==0?1:Lt(x),x=(x&(O.suspendedLanes|f))!==0?0:x,x!==0&&x!==ie.retryLane))throw ie.retryLane=x,ar(a,x),Mi(O,a,x),Lu;H.data==="$?"||hl(),c=qo(a,c,f)}else H.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=ie.treeContext,Ut=Ii(H.nextSibling),di=c,wt=!0,Gn=null,Vi=!1,a!==null&&(Ai[Ri++]=Yi,Ai[Ri++]=Ki,Ai[Ri++]=zn,Yi=a.id,Ki=a.overflow,zn=c),c=Wo(c,x.children),c.flags|=4096);return c}return M?(bn(),M=x.fallback,H=c.mode,ie=a.child,de=ie.sibling,x=Xi(ie,{mode:"hidden",children:x.children}),x.subtreeFlags=ie.subtreeFlags&65011712,de!==null?M=Xi(de,M):(M=Un(M,H,f,null),M.flags|=2),M.return=c,x.return=c,x.sibling=M,c.child=x,x=M,M=c.child,H=a.child.memoizedState,H===null?H=Go(f):(ie=H.cachePool,ie!==null?(de=Zt._currentValue,ie=ie.parent!==de?{parent:de,pool:de}:ie):ie=Ac(),H={baseLanes:H.baseLanes|f,cachePool:ie}),M.memoizedState=H,M.childLanes=Ho(a,O,f),c.memoizedState=$o,x):(yn(c),f=a.child,a=f.sibling,f=Xi(f,{mode:"visible",children:x.children}),f.return=c,f.sibling=null,a!==null&&(O=c.deletions,O===null?(c.deletions=[a],c.flags|=16):O.push(a)),c.child=f,c.memoizedState=null,f)}function Wo(a,c){return c=la({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function la(a,c){return a=bi(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function qo(a,c,f){return vr(c,a.child,null,f),a=Wo(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function $u(a,c,f){a.lanes|=c;var x=a.alternate;x!==null&&(x.lanes|=c),uo(a.return,c,f)}function Xo(a,c,f,x,M){var R=a.memoizedState;R===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:M}:(R.isBackwards=c,R.rendering=null,R.renderingStartTime=0,R.last=x,R.tail=f,R.tailMode=M)}function Gu(a,c,f){var x=c.pendingProps,M=x.revealOrder,R=x.tail;if(ai(a,c,x.children,f),x=Qt.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&$u(a,f,c);else if(a.tag===19)$u(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}x&=1}switch(ne(Qt,x),M){case"forwards":for(f=c.child,M=null;f!==null;)a=f.alternate,a!==null&&ra(a)===null&&(M=f),f=f.sibling;f=M,f===null?(M=c.child,c.child=null):(M=f.sibling,f.sibling=null),Xo(c,!1,M,f,R);break;case"backwards":for(f=null,M=c.child,c.child=null;M!==null;){if(a=M.alternate,a!==null&&ra(a)===null){c.child=M;break}a=M.sibling,M.sibling=f,f=M,M=a}Xo(c,!0,f,null,R);break;case"together":Xo(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function tn(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),Mn|=c.lanes,(f&c.childLanes)===0)if(a!==null){if(Hr(a,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,f=Xi(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=Xi(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function Yo(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&zs(a)))}function wp(a,c,f){switch(c.tag){case 3:Ae(c,c.stateNode.containerInfo),fn(c,Zt,a.memoizedState.cache),$r();break;case 27:case 5:Be(c);break;case 4:Ae(c,c.stateNode.containerInfo);break;case 10:fn(c,c.type,c.memoizedProps.value);break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(yn(c),c.flags|=128,null):(f&c.child.childLanes)!==0?zu(a,c,f):(yn(c),a=tn(a,c,f),a!==null?a.sibling:null);yn(c);break;case 19:var M=(a.flags&128)!==0;if(x=(f&c.childLanes)!==0,x||(Hr(a,c,f,!1),x=(f&c.childLanes)!==0),M){if(x)return Gu(a,c,f);c.flags|=128}if(M=c.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),ne(Qt,Qt.current),x)break;return null;case 22:case 23:return c.lanes=0,Vu(a,c,f);case 24:fn(c,Zt,a.memoizedState.cache)}return tn(a,c,f)}function Hu(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps)ti=!0;else{if(!Yo(a,f)&&(c.flags&128)===0)return ti=!1,wp(a,c,f);ti=(a.flags&131072)!==0}else ti=!1,wt&&(c.flags&1048576)!==0&&_c(c,Us,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var x=c.elementType,M=x._init;if(x=M(x._payload),c.type=x,typeof x=="function")no(x)?(a=Kn(x,a),c.tag=1,c=Ou(null,c,x,a,f)):(c.tag=0,c=zo(null,c,x,a,f));else{if(x!=null){if(M=x.$$typeof,M===A){c.tag=11,c=ku(null,c,x,a,f);break e}else if(M===k){c.tag=14,c=Iu(null,c,x,a,f);break e}}throw c=Y(x)||x,Error(n(306,c,""))}}return c;case 0:return zo(a,c,c.type,c.pendingProps,f);case 1:return x=c.type,M=Kn(x,c.pendingProps),Ou(a,c,x,M,f);case 3:e:{if(Ae(c,c.stateNode.containerInfo),a===null)throw Error(n(387));x=c.pendingProps;var R=c.memoizedState;M=R.element,vo(a,c),Qr(c,x,null,f);var O=c.memoizedState;if(x=O.cache,fn(c,Zt,x),x!==R.cache&&ho(c,[Zt],f,!0),Zr(),x=O.element,R.isDehydrated)if(R={element:x,isDehydrated:!1,cache:O.cache},c.updateQueue.baseState=R,c.memoizedState=R,c.flags&256){c=Uu(a,c,x,f);break e}else if(x!==M){M=Ti(Error(n(424)),c),Gr(M),c=Uu(a,c,x,f);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ut=Ii(a.firstChild),di=c,wt=!0,Gn=null,Vi=!0,f=Su(c,null,x,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if($r(),x===M){c=tn(a,c,f);break e}ai(a,c,x,f)}c=c.child}return c;case 26:return oa(a,c),a===null?(f=Kh(c.type,null,c.pendingProps,null))?c.memoizedState=f:wt||(f=c.type,a=c.pendingProps,x=Ea(me.current).createElement(f),x[Yt]=c,x[ri]=a,li(x,f,a),Wt(x),c.stateNode=x):c.memoizedState=Kh(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Be(c),a===null&&wt&&(x=c.stateNode=qh(c.type,c.pendingProps,me.current),di=c,Vi=!0,M=Ut,Rn(c.type)?(Rl=M,Ut=Ii(x.firstChild)):Ut=M),ai(a,c,c.pendingProps.children,f),oa(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&wt&&((M=x=Ut)&&(x=Qp(x,c.type,c.pendingProps,Vi),x!==null?(c.stateNode=x,di=c,Ut=Ii(x.firstChild),Vi=!1,M=!0):M=!1),M||Hn(c)),Be(c),M=c.type,R=c.pendingProps,O=a!==null?a.memoizedProps:null,x=R.children,Ml(M,R)?x=null:O!==null&&Ml(M,O)&&(c.flags|=32),c.memoizedState!==null&&(M=wo(a,c,gp,null,null,f),bs._currentValue=M),oa(a,c),ai(a,c,x,f),c.child;case 6:return a===null&&wt&&((a=f=Ut)&&(f=Jp(f,c.pendingProps,Vi),f!==null?(c.stateNode=f,di=c,Ut=null,a=!0):a=!1),a||Hn(c)),null;case 13:return zu(a,c,f);case 4:return Ae(c,c.stateNode.containerInfo),x=c.pendingProps,a===null?c.child=vr(c,null,x,f):ai(a,c,x,f),c.child;case 11:return ku(a,c,c.type,c.pendingProps,f);case 7:return ai(a,c,c.pendingProps,f),c.child;case 8:return ai(a,c,c.pendingProps.children,f),c.child;case 12:return ai(a,c,c.pendingProps.children,f),c.child;case 10:return x=c.pendingProps,fn(c,c.type,x.value),ai(a,c,x.children,f),c.child;case 9:return M=c.type._context,x=c.pendingProps.children,qn(c),M=hi(M),x=x(M),c.flags|=1,ai(a,c,x,f),c.child;case 14:return Iu(a,c,c.type,c.pendingProps,f);case 15:return ju(a,c,c.type,c.pendingProps,f);case 19:return Gu(a,c,f);case 31:return x=c.pendingProps,f=c.mode,x={mode:x.mode,children:x.children},a===null?(f=la(x,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=Xi(a.child,x),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return Vu(a,c,f);case 24:return qn(c),x=hi(Zt),a===null?(M=mo(),M===null&&(M=It,R=po(),M.pooledCache=R,R.refCount++,R!==null&&(M.pooledCacheLanes|=f),M=R),c.memoizedState={parent:x,cache:M},xo(c),fn(c,Zt,M)):((a.lanes&f)!==0&&(vo(a,c),Qr(c,null,null,f),Zr()),M=a.memoizedState,R=c.memoizedState,M.parent!==x?(M={parent:x,cache:x},c.memoizedState=M,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=M),fn(c,Zt,x)):(x=R.cache,fn(c,Zt,x),x!==M.cache&&ho(c,[Zt],f,!0))),ai(a,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function nn(a){a.flags|=4}function Wu(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!td(c)){if(c=Pi.current,c!==null&&((yt&4194048)===yt?Fi!==null:(yt&62914560)!==yt&&(yt&536870912)===0||c!==Fi))throw Yr=go,Rc;a.flags|=8192}}function ca(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?Ie():536870912,a.lanes|=c,Er|=c)}function ss(a,c){if(!wt)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:x.sibling=null}}function Bt(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,x=0;if(c)for(var M=a.child;M!==null;)f|=M.lanes|M.childLanes,x|=M.subtreeFlags&65011712,x|=M.flags&65011712,M.return=a,M=M.sibling;else for(M=a.child;M!==null;)f|=M.lanes|M.childLanes,x|=M.subtreeFlags,x|=M.flags,M.return=a,M=M.sibling;return a.subtreeFlags|=x,a.childLanes=f,c}function Mp(a,c,f){var x=c.pendingProps;switch(oo(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(c),null;case 1:return Bt(c),null;case 3:return f=c.stateNode,x=null,a!==null&&(x=a.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),Qi(Zt),qe(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(zr(c)?nn(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,wc())),Bt(c),null;case 26:return f=c.memoizedState,a===null?(nn(c),f!==null?(Bt(c),Wu(c,f)):(Bt(c),c.flags&=-16777217)):f?f!==a.memoizedState?(nn(c),Bt(c),Wu(c,f)):(Bt(c),c.flags&=-16777217):(a.memoizedProps!==x&&nn(c),Bt(c),c.flags&=-16777217),null;case 27:it(c),f=me.current;var M=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==x&&nn(c);else{if(!x){if(c.stateNode===null)throw Error(n(166));return Bt(c),null}a=Q.current,zr(c)?Ec(c):(a=qh(M,x,f),c.stateNode=a,nn(c))}return Bt(c),null;case 5:if(it(c),f=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==x&&nn(c);else{if(!x){if(c.stateNode===null)throw Error(n(166));return Bt(c),null}if(a=Q.current,zr(c))Ec(c);else{switch(M=Ea(me.current),a){case 1:a=M.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=M.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=M.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=M.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=M.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof x.is=="string"?M.createElement("select",{is:x.is}):M.createElement("select"),x.multiple?a.multiple=!0:x.size&&(a.size=x.size);break;default:a=typeof x.is=="string"?M.createElement(f,{is:x.is}):M.createElement(f)}}a[Yt]=c,a[ri]=x;e:for(M=c.child;M!==null;){if(M.tag===5||M.tag===6)a.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===c)break e;for(;M.sibling===null;){if(M.return===null||M.return===c)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}c.stateNode=a;e:switch(li(a,f,x),f){case"button":case"input":case"select":case"textarea":a=!!x.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&nn(c)}}return Bt(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==x&&nn(c);else{if(typeof x!="string"&&c.stateNode===null)throw Error(n(166));if(a=me.current,zr(c)){if(a=c.stateNode,f=c.memoizedProps,x=null,M=di,M!==null)switch(M.tag){case 27:case 5:x=M.memoizedProps}a[Yt]=c,a=!!(a.nodeValue===f||x!==null&&x.suppressHydrationWarning===!0||Oh(a.nodeValue,f)),a||Hn(c)}else a=Ea(a).createTextNode(x),a[Yt]=c,c.stateNode=a}return Bt(c),null;case 13:if(x=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(M=zr(c),x!==null&&x.dehydrated!==null){if(a===null){if(!M)throw Error(n(318));if(M=c.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[Yt]=c}else $r(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Bt(c),M=!1}else M=wc(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=M),M=!0;if(!M)return c.flags&256?(en(c),c):(en(c),null)}if(en(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=x!==null,a=a!==null&&a.memoizedState!==null,f){x=c.child,M=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(M=x.alternate.memoizedState.cachePool.pool);var R=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(R=x.memoizedState.cachePool.pool),R!==M&&(x.flags|=2048)}return f!==a&&f&&(c.child.flags|=8192),ca(c,c.updateQueue),Bt(c),null;case 4:return qe(),a===null&&bl(c.stateNode.containerInfo),Bt(c),null;case 10:return Qi(c.type),Bt(c),null;case 19:if(te(Qt),M=c.memoizedState,M===null)return Bt(c),null;if(x=(c.flags&128)!==0,R=M.rendering,R===null)if(x)ss(M,!1);else{if(zt!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(R=ra(a),R!==null){for(c.flags|=128,ss(M,!1),a=R.updateQueue,c.updateQueue=a,ca(c,a),c.subtreeFlags=0,a=f,f=c.child;f!==null;)bc(f,a),f=f.sibling;return ne(Qt,Qt.current&1|2),c.child}a=a.sibling}M.tail!==null&&Ye()>da&&(c.flags|=128,x=!0,ss(M,!1),c.lanes=4194304)}else{if(!x)if(a=ra(R),a!==null){if(c.flags|=128,x=!0,a=a.updateQueue,c.updateQueue=a,ca(c,a),ss(M,!0),M.tail===null&&M.tailMode==="hidden"&&!R.alternate&&!wt)return Bt(c),null}else 2*Ye()-M.renderingStartTime>da&&f!==536870912&&(c.flags|=128,x=!0,ss(M,!1),c.lanes=4194304);M.isBackwards?(R.sibling=c.child,c.child=R):(a=M.last,a!==null?a.sibling=R:c.child=R,M.last=R)}return M.tail!==null?(c=M.tail,M.rendering=c,M.tail=c.sibling,M.renderingStartTime=Ye(),c.sibling=null,a=Qt.current,ne(Qt,x?a&1|2:a&1),c):(Bt(c),null);case 22:case 23:return en(c),Eo(),x=c.memoizedState!==null,a!==null?a.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(f&536870912)!==0&&(c.flags&128)===0&&(Bt(c),c.subtreeFlags&6&&(c.flags|=8192)):Bt(c),f=c.updateQueue,f!==null&&ca(c,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==f&&(c.flags|=2048),a!==null&&te(Xn),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Qi(Zt),Bt(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function Tp(a,c){switch(oo(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Qi(Zt),qe(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return it(c),null;case 13:if(en(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));$r()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return te(Qt),null;case 4:return qe(),null;case 10:return Qi(c.type),null;case 22:case 23:return en(c),Eo(),a!==null&&te(Xn),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Qi(Zt),null;case 25:return null;default:return null}}function qu(a,c){switch(oo(c),c.tag){case 3:Qi(Zt),qe();break;case 26:case 27:case 5:it(c);break;case 4:qe();break;case 13:en(c);break;case 19:te(Qt);break;case 10:Qi(c.type);break;case 22:case 23:en(c),Eo(),a!==null&&te(Xn);break;case 24:Qi(Zt)}}function as(a,c){try{var f=c.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var M=x.next;f=M;do{if((f.tag&a)===a){x=void 0;var R=f.create,O=f.inst;x=R(),O.destroy=x}f=f.next}while(f!==M)}}catch(H){Nt(c,c.return,H)}}function _n(a,c,f){try{var x=c.updateQueue,M=x!==null?x.lastEffect:null;if(M!==null){var R=M.next;x=R;do{if((x.tag&a)===a){var O=x.inst,H=O.destroy;if(H!==void 0){O.destroy=void 0,M=c;var ie=f,de=H;try{de()}catch(_e){Nt(M,ie,_e)}}}x=x.next}while(x!==R)}}catch(_e){Nt(c,c.return,_e)}}function Xu(a){var c=a.updateQueue;if(c!==null){var f=a.stateNode;try{Ic(c,f)}catch(x){Nt(a,a.return,x)}}}function Yu(a,c,f){f.props=Kn(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(x){Nt(a,c,x)}}function os(a,c){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var x=a.stateNode;break;case 30:x=a.stateNode;break;default:x=a.stateNode}typeof f=="function"?a.refCleanup=f(x):f.current=x}}catch(M){Nt(a,c,M)}}function Bi(a,c){var f=a.ref,x=a.refCleanup;if(f!==null)if(typeof x=="function")try{x()}catch(M){Nt(a,c,M)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(M){Nt(a,c,M)}else f.current=null}function Ku(a){var c=a.type,f=a.memoizedProps,x=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&x.focus();break e;case"img":f.src?x.src=f.src:f.srcSet&&(x.srcset=f.srcSet)}}catch(M){Nt(a,a.return,M)}}function Ko(a,c,f){try{var x=a.stateNode;qp(x,a.type,f,c),x[ri]=c}catch(M){Nt(a,a.return,M)}}function Zu(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Rn(a.type)||a.tag===4}function Zo(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Zu(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Rn(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Qo(a,c,f){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(a),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=_a));else if(x!==4&&(x===27&&Rn(a.type)&&(f=a.stateNode,c=null),a=a.child,a!==null))for(Qo(a,c,f),a=a.sibling;a!==null;)Qo(a,c,f),a=a.sibling}function ua(a,c,f){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(x!==4&&(x===27&&Rn(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(ua(a,c,f),a=a.sibling;a!==null;)ua(a,c,f),a=a.sibling}function Qu(a){var c=a.stateNode,f=a.memoizedProps;try{for(var x=a.type,M=c.attributes;M.length;)c.removeAttributeNode(M[0]);li(c,x,f),c[Yt]=a,c[ri]=f}catch(R){Nt(a,a.return,R)}}var rn=!1,Gt=!1,Jo=!1,Ju=typeof WeakSet=="function"?WeakSet:Set,ii=null;function Cp(a,c){if(a=a.containerInfo,Sl=Aa,a=uc(a),Ka(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var M=x.anchorOffset,R=x.focusNode;x=x.focusOffset;try{f.nodeType,R.nodeType}catch{f=null;break e}var O=0,H=-1,ie=-1,de=0,_e=0,Me=a,pe=null;t:for(;;){for(var fe;Me!==f||M!==0&&Me.nodeType!==3||(H=O+M),Me!==R||x!==0&&Me.nodeType!==3||(ie=O+x),Me.nodeType===3&&(O+=Me.nodeValue.length),(fe=Me.firstChild)!==null;)pe=Me,Me=fe;for(;;){if(Me===a)break t;if(pe===f&&++de===M&&(H=O),pe===R&&++_e===x&&(ie=O),(fe=Me.nextSibling)!==null)break;Me=pe,pe=Me.parentNode}Me=fe}f=H===-1||ie===-1?null:{start:H,end:ie}}else f=null}f=f||{start:0,end:0}}else f=null;for(wl={focusedElem:a,selectionRange:f},Aa=!1,ii=c;ii!==null;)if(c=ii,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,ii=a;else for(;ii!==null;){switch(c=ii,R=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&R!==null){a=void 0,f=c,M=R.memoizedProps,R=R.memoizedState,x=f.stateNode;try{var rt=Kn(f.type,M,f.elementType===f.type);a=x.getSnapshotBeforeUpdate(rt,R),x.__reactInternalSnapshotBeforeUpdate=a}catch(Je){Nt(f,f.return,Je)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,f=a.nodeType,f===9)Cl(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Cl(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=c.sibling,a!==null){a.return=c.return,ii=a;break}ii=c.return}}function eh(a,c,f){var x=f.flags;switch(f.tag){case 0:case 11:case 15:En(a,f),x&4&&as(5,f);break;case 1:if(En(a,f),x&4)if(a=f.stateNode,c===null)try{a.componentDidMount()}catch(O){Nt(f,f.return,O)}else{var M=Kn(f.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(M,c,a.__reactInternalSnapshotBeforeUpdate)}catch(O){Nt(f,f.return,O)}}x&64&&Xu(f),x&512&&os(f,f.return);break;case 3:if(En(a,f),x&64&&(a=f.updateQueue,a!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{Ic(a,c)}catch(O){Nt(f,f.return,O)}}break;case 27:c===null&&x&4&&Qu(f);case 26:case 5:En(a,f),c===null&&x&4&&Ku(f),x&512&&os(f,f.return);break;case 12:En(a,f);break;case 13:En(a,f),x&4&&nh(a,f),x&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=jp.bind(null,f),ef(a,f))));break;case 22:if(x=f.memoizedState!==null||rn,!x){c=c!==null&&c.memoizedState!==null||Gt,M=rn;var R=Gt;rn=x,(Gt=c)&&!R?Sn(a,f,(f.subtreeFlags&8772)!==0):En(a,f),rn=M,Gt=R}break;case 30:break;default:En(a,f)}}function th(a){var c=a.alternate;c!==null&&(a.alternate=null,th(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&un(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Vt=null,gi=!1;function sn(a,c,f){for(f=f.child;f!==null;)ih(a,c,f),f=f.sibling}function ih(a,c,f){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(ve,f)}catch{}switch(f.tag){case 26:Gt||Bi(f,c),sn(a,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Gt||Bi(f,c);var x=Vt,M=gi;Rn(f.type)&&(Vt=f.stateNode,gi=!1),sn(a,c,f),gs(f.stateNode),Vt=x,gi=M;break;case 5:Gt||Bi(f,c);case 6:if(x=Vt,M=gi,Vt=null,sn(a,c,f),Vt=x,gi=M,Vt!==null)if(gi)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(f.stateNode)}catch(R){Nt(f,c,R)}else try{Vt.removeChild(f.stateNode)}catch(R){Nt(f,c,R)}break;case 18:Vt!==null&&(gi?(a=Vt,Hh(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),ws(a)):Hh(Vt,f.stateNode));break;case 4:x=Vt,M=gi,Vt=f.stateNode.containerInfo,gi=!0,sn(a,c,f),Vt=x,gi=M;break;case 0:case 11:case 14:case 15:Gt||_n(2,f,c),Gt||_n(4,f,c),sn(a,c,f);break;case 1:Gt||(Bi(f,c),x=f.stateNode,typeof x.componentWillUnmount=="function"&&Yu(f,c,x)),sn(a,c,f);break;case 21:sn(a,c,f);break;case 22:Gt=(x=Gt)||f.memoizedState!==null,sn(a,c,f),Gt=x;break;default:sn(a,c,f)}}function nh(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{ws(a)}catch(f){Nt(c,c.return,f)}}function Ap(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new Ju),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new Ju),c;default:throw Error(n(435,a.tag))}}function el(a,c){var f=Ap(a);c.forEach(function(x){var M=Vp.bind(null,a,x);f.has(x)||(f.add(x),x.then(M,M))})}function _i(a,c){var f=c.deletions;if(f!==null)for(var x=0;x<f.length;x++){var M=f[x],R=a,O=c,H=O;e:for(;H!==null;){switch(H.tag){case 27:if(Rn(H.type)){Vt=H.stateNode,gi=!1;break e}break;case 5:Vt=H.stateNode,gi=!1;break e;case 3:case 4:Vt=H.stateNode.containerInfo,gi=!0;break e}H=H.return}if(Vt===null)throw Error(n(160));ih(R,O,M),Vt=null,gi=!1,R=M.alternate,R!==null&&(R.return=null),M.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)rh(c,a),c=c.sibling}var ki=null;function rh(a,c){var f=a.alternate,x=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:_i(c,a),Ei(a),x&4&&(_n(3,a,a.return),as(3,a),_n(5,a,a.return));break;case 1:_i(c,a),Ei(a),x&512&&(Gt||f===null||Bi(f,f.return)),x&64&&rn&&(a=a.updateQueue,a!==null&&(x=a.callbacks,x!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?x:f.concat(x))));break;case 26:var M=ki;if(_i(c,a),Ei(a),x&512&&(Gt||f===null||Bi(f,f.return)),x&4){var R=f!==null?f.memoizedState:null;if(x=a.memoizedState,f===null)if(x===null)if(a.stateNode===null){e:{x=a.type,f=a.memoizedProps,M=M.ownerDocument||M;t:switch(x){case"title":R=M.getElementsByTagName("title")[0],(!R||R[ln]||R[Yt]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=M.createElement(x),M.head.insertBefore(R,M.querySelector("head > title"))),li(R,x,f),R[Yt]=a,Wt(R),x=R;break e;case"link":var O=Jh("link","href",M).get(x+(f.href||""));if(O){for(var H=0;H<O.length;H++)if(R=O[H],R.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&R.getAttribute("rel")===(f.rel==null?null:f.rel)&&R.getAttribute("title")===(f.title==null?null:f.title)&&R.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){O.splice(H,1);break t}}R=M.createElement(x),li(R,x,f),M.head.appendChild(R);break;case"meta":if(O=Jh("meta","content",M).get(x+(f.content||""))){for(H=0;H<O.length;H++)if(R=O[H],R.getAttribute("content")===(f.content==null?null:""+f.content)&&R.getAttribute("name")===(f.name==null?null:f.name)&&R.getAttribute("property")===(f.property==null?null:f.property)&&R.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&R.getAttribute("charset")===(f.charSet==null?null:f.charSet)){O.splice(H,1);break t}}R=M.createElement(x),li(R,x,f),M.head.appendChild(R);break;default:throw Error(n(468,x))}R[Yt]=a,Wt(R),x=R}a.stateNode=x}else ed(M,a.type,a.stateNode);else a.stateNode=Qh(M,x,a.memoizedProps);else R!==x?(R===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):R.count--,x===null?ed(M,a.type,a.stateNode):Qh(M,x,a.memoizedProps)):x===null&&a.stateNode!==null&&Ko(a,a.memoizedProps,f.memoizedProps)}break;case 27:_i(c,a),Ei(a),x&512&&(Gt||f===null||Bi(f,f.return)),f!==null&&x&4&&Ko(a,a.memoizedProps,f.memoizedProps);break;case 5:if(_i(c,a),Ei(a),x&512&&(Gt||f===null||Bi(f,f.return)),a.flags&32){M=a.stateNode;try{ji(M,"")}catch(fe){Nt(a,a.return,fe)}}x&4&&a.stateNode!=null&&(M=a.memoizedProps,Ko(a,M,f!==null?f.memoizedProps:M)),x&1024&&(Jo=!0);break;case 6:if(_i(c,a),Ei(a),x&4){if(a.stateNode===null)throw Error(n(162));x=a.memoizedProps,f=a.stateNode;try{f.nodeValue=x}catch(fe){Nt(a,a.return,fe)}}break;case 3:if(Ma=null,M=ki,ki=Sa(c.containerInfo),_i(c,a),ki=M,Ei(a),x&4&&f!==null&&f.memoizedState.isDehydrated)try{ws(c.containerInfo)}catch(fe){Nt(a,a.return,fe)}Jo&&(Jo=!1,sh(a));break;case 4:x=ki,ki=Sa(a.stateNode.containerInfo),_i(c,a),Ei(a),ki=x;break;case 12:_i(c,a),Ei(a);break;case 13:_i(c,a),Ei(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(al=Ye()),x&4&&(x=a.updateQueue,x!==null&&(a.updateQueue=null,el(a,x)));break;case 22:M=a.memoizedState!==null;var ie=f!==null&&f.memoizedState!==null,de=rn,_e=Gt;if(rn=de||M,Gt=_e||ie,_i(c,a),Gt=_e,rn=de,Ei(a),x&8192)e:for(c=a.stateNode,c._visibility=M?c._visibility&-2:c._visibility|1,M&&(f===null||ie||rn||Gt||Zn(a)),f=null,c=a;;){if(c.tag===5||c.tag===26){if(f===null){ie=f=c;try{if(R=ie.stateNode,M)O=R.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{H=ie.stateNode;var Me=ie.memoizedProps.style,pe=Me!=null&&Me.hasOwnProperty("display")?Me.display:null;H.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(fe){Nt(ie,ie.return,fe)}}}else if(c.tag===6){if(f===null){ie=c;try{ie.stateNode.nodeValue=M?"":ie.memoizedProps}catch(fe){Nt(ie,ie.return,fe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}x&4&&(x=a.updateQueue,x!==null&&(f=x.retryQueue,f!==null&&(x.retryQueue=null,el(a,f))));break;case 19:_i(c,a),Ei(a),x&4&&(x=a.updateQueue,x!==null&&(a.updateQueue=null,el(a,x)));break;case 30:break;case 21:break;default:_i(c,a),Ei(a)}}function Ei(a){var c=a.flags;if(c&2){try{for(var f,x=a.return;x!==null;){if(Zu(x)){f=x;break}x=x.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var M=f.stateNode,R=Zo(a);ua(a,R,M);break;case 5:var O=f.stateNode;f.flags&32&&(ji(O,""),f.flags&=-33);var H=Zo(a);ua(a,H,O);break;case 3:case 4:var ie=f.stateNode.containerInfo,de=Zo(a);Qo(a,de,ie);break;default:throw Error(n(161))}}catch(_e){Nt(a,a.return,_e)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function sh(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;sh(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function En(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)eh(a,c.alternate,c),c=c.sibling}function Zn(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:_n(4,c,c.return),Zn(c);break;case 1:Bi(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&Yu(c,c.return,f),Zn(c);break;case 27:gs(c.stateNode);case 26:case 5:Bi(c,c.return),Zn(c);break;case 22:c.memoizedState===null&&Zn(c);break;case 30:Zn(c);break;default:Zn(c)}a=a.sibling}}function Sn(a,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,M=a,R=c,O=R.flags;switch(R.tag){case 0:case 11:case 15:Sn(M,R,f),as(4,R);break;case 1:if(Sn(M,R,f),x=R,M=x.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(de){Nt(x,x.return,de)}if(x=R,M=x.updateQueue,M!==null){var H=x.stateNode;try{var ie=M.shared.hiddenCallbacks;if(ie!==null)for(M.shared.hiddenCallbacks=null,M=0;M<ie.length;M++)kc(ie[M],H)}catch(de){Nt(x,x.return,de)}}f&&O&64&&Xu(R),os(R,R.return);break;case 27:Qu(R);case 26:case 5:Sn(M,R,f),f&&x===null&&O&4&&Ku(R),os(R,R.return);break;case 12:Sn(M,R,f);break;case 13:Sn(M,R,f),f&&O&4&&nh(M,R);break;case 22:R.memoizedState===null&&Sn(M,R,f),os(R,R.return);break;case 30:break;default:Sn(M,R,f)}c=c.sibling}}function tl(a,c){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&Wr(f))}function il(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Wr(a))}function Oi(a,c,f,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)ah(a,c,f,x),c=c.sibling}function ah(a,c,f,x){var M=c.flags;switch(c.tag){case 0:case 11:case 15:Oi(a,c,f,x),M&2048&&as(9,c);break;case 1:Oi(a,c,f,x);break;case 3:Oi(a,c,f,x),M&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Wr(a)));break;case 12:if(M&2048){Oi(a,c,f,x),a=c.stateNode;try{var R=c.memoizedProps,O=R.id,H=R.onPostCommit;typeof H=="function"&&H(O,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ie){Nt(c,c.return,ie)}}else Oi(a,c,f,x);break;case 13:Oi(a,c,f,x);break;case 23:break;case 22:R=c.stateNode,O=c.alternate,c.memoizedState!==null?R._visibility&2?Oi(a,c,f,x):ls(a,c):R._visibility&2?Oi(a,c,f,x):(R._visibility|=2,yr(a,c,f,x,(c.subtreeFlags&10256)!==0)),M&2048&&tl(O,c);break;case 24:Oi(a,c,f,x),M&2048&&il(c.alternate,c);break;default:Oi(a,c,f,x)}}function yr(a,c,f,x,M){for(M=M&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var R=a,O=c,H=f,ie=x,de=O.flags;switch(O.tag){case 0:case 11:case 15:yr(R,O,H,ie,M),as(8,O);break;case 23:break;case 22:var _e=O.stateNode;O.memoizedState!==null?_e._visibility&2?yr(R,O,H,ie,M):ls(R,O):(_e._visibility|=2,yr(R,O,H,ie,M)),M&&de&2048&&tl(O.alternate,O);break;case 24:yr(R,O,H,ie,M),M&&de&2048&&il(O.alternate,O);break;default:yr(R,O,H,ie,M)}c=c.sibling}}function ls(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=a,x=c,M=x.flags;switch(x.tag){case 22:ls(f,x),M&2048&&tl(x.alternate,x);break;case 24:ls(f,x),M&2048&&il(x.alternate,x);break;default:ls(f,x)}c=c.sibling}}var cs=8192;function br(a){if(a.subtreeFlags&cs)for(a=a.child;a!==null;)oh(a),a=a.sibling}function oh(a){switch(a.tag){case 26:br(a),a.flags&cs&&a.memoizedState!==null&&ff(ki,a.memoizedState,a.memoizedProps);break;case 5:br(a);break;case 3:case 4:var c=ki;ki=Sa(a.stateNode.containerInfo),br(a),ki=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=cs,cs=16777216,br(a),cs=c):br(a));break;default:br(a)}}function lh(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function us(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var x=c[f];ii=x,uh(x,a)}lh(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ch(a),a=a.sibling}function ch(a){switch(a.tag){case 0:case 11:case 15:us(a),a.flags&2048&&_n(9,a,a.return);break;case 3:us(a);break;case 12:us(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,ha(a)):us(a);break;default:us(a)}}function ha(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var x=c[f];ii=x,uh(x,a)}lh(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:_n(8,c,c.return),ha(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,ha(c));break;default:ha(c)}a=a.sibling}}function uh(a,c){for(;ii!==null;){var f=ii;switch(f.tag){case 0:case 11:case 15:_n(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var x=f.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Wr(f.memoizedState.cache)}if(x=f.child,x!==null)x.return=f,ii=x;else e:for(f=a;ii!==null;){x=ii;var M=x.sibling,R=x.return;if(th(x),x===f){ii=null;break e}if(M!==null){M.return=R,ii=M;break e}ii=R}}}var Rp={getCacheForType:function(a){var c=hi(Zt),f=c.data.get(a);return f===void 0&&(f=a(),c.data.set(a,f)),f}},Pp=typeof WeakMap=="function"?WeakMap:Map,Mt=0,It=null,mt=null,yt=0,Tt=0,Si=null,wn=!1,_r=!1,nl=!1,an=0,zt=0,Mn=0,Qn=0,rl=0,Di=0,Er=0,hs=null,xi=null,sl=!1,al=0,da=1/0,pa=null,Tn=null,oi=0,Cn=null,Sr=null,wr=0,ol=0,ll=null,hh=null,ds=0,cl=null;function wi(){if((Mt&2)!==0&&yt!==0)return yt&-yt;if(D.T!==null){var a=ur;return a!==0?a:gl()}return _t()}function dh(){Di===0&&(Di=(yt&536870912)===0||wt?se():536870912);var a=Pi.current;return a!==null&&(a.flags|=32),Di}function Mi(a,c,f){(a===It&&(Tt===2||Tt===9)||a.cancelPendingCommit!==null)&&(Mr(a,0),An(a,yt,Di,!1)),we(a,f),((Mt&2)===0||a!==It)&&(a===It&&((Mt&2)===0&&(Qn|=f),zt===4&&An(a,yt,Di,!1)),Ui(a))}function ph(a,c,f){if((Mt&6)!==0)throw Error(n(327));var x=!f&&(c&124)===0&&(c&a.expiredLanes)===0||at(a,c),M=x?Lp(a,c):dl(a,c,!0),R=x;do{if(M===0){_r&&!x&&An(a,c,0,!1);break}else{if(f=a.current.alternate,R&&!Dp(f)){M=dl(a,c,!1),R=!1;continue}if(M===2){if(R=c,a.errorRecoveryDisabledLanes&R)var O=0;else O=a.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){c=O;e:{var H=a;M=hs;var ie=H.current.memoizedState.isDehydrated;if(ie&&(Mr(H,O).flags|=256),O=dl(H,O,!1),O!==2){if(nl&&!ie){H.errorRecoveryDisabledLanes|=R,Qn|=R,M=4;break e}R=xi,xi=M,R!==null&&(xi===null?xi=R:xi.push.apply(xi,R))}M=O}if(R=!1,M!==2)continue}}if(M===1){Mr(a,0),An(a,c,0,!0);break}e:{switch(x=a,R=M,R){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:An(x,c,Di,!wn);break e;case 2:xi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(M=al+300-Ye(),10<M)){if(An(x,c,Di,!wn),ut(x,0,!0)!==0)break e;x.timeoutHandle=$h(fh.bind(null,x,f,xi,pa,sl,c,Di,Qn,Er,wn,R,2,-0,0),M);break e}fh(x,f,xi,pa,sl,c,Di,Qn,Er,wn,R,0,-0,0)}}break}while(!0);Ui(a)}function fh(a,c,f,x,M,R,O,H,ie,de,_e,Me,pe,fe){if(a.timeoutHandle=-1,Me=c.subtreeFlags,(Me&8192||(Me&16785408)===16785408)&&(ys={stylesheets:null,count:0,unsuspend:pf},oh(c),Me=mf(),Me!==null)){a.cancelPendingCommit=Me(Eh.bind(null,a,c,R,f,x,M,O,H,ie,_e,1,pe,fe)),An(a,R,O,!de);return}Eh(a,c,R,f,x,M,O,H,ie)}function Dp(a){for(var c=a;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var x=0;x<f.length;x++){var M=f[x],R=M.getSnapshot;M=M.value;try{if(!yi(R(),M))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function An(a,c,f,x){c&=~rl,c&=~Qn,a.suspendedLanes|=c,a.pingedLanes&=~c,x&&(a.warmLanes|=c),x=a.expirationTimes;for(var M=c;0<M;){var R=31-De(M),O=1<<R;x[R]=-1,M&=~O}f!==0&&je(a,f,c)}function fa(){return(Mt&6)===0?(ps(0),!1):!0}function ul(){if(mt!==null){if(Tt===0)var a=mt.return;else a=mt,Zi=Wn=null,Co(a),xr=null,ns=0,a=mt;for(;a!==null;)qu(a.alternate,a),a=a.return;mt=null}}function Mr(a,c){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,Yp(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),ul(),It=a,mt=f=Xi(a.current,null),yt=c,Tt=0,Si=null,wn=!1,_r=at(a,c),nl=!1,Er=Di=rl=Qn=Mn=zt=0,xi=hs=null,sl=!1,(c&8)!==0&&(c|=c&32);var x=a.entangledLanes;if(x!==0)for(a=a.entanglements,x&=c;0<x;){var M=31-De(x),R=1<<M;c|=a[M],x&=~R}return an=c,js(),f}function mh(a,c){ht=null,D.H=ta,c===Xr||c===Hs?(c=Nc(),Tt=3):c===Rc?(c=Nc(),Tt=4):Tt=c===Lu?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Si=c,mt===null&&(zt=1,aa(a,Ti(c,a.current)))}function gh(){var a=D.H;return D.H=ta,a===null?ta:a}function xh(){var a=D.A;return D.A=Rp,a}function hl(){zt=4,wn||(yt&4194048)!==yt&&Pi.current!==null||(_r=!0),(Mn&134217727)===0&&(Qn&134217727)===0||It===null||An(It,yt,Di,!1)}function dl(a,c,f){var x=Mt;Mt|=2;var M=gh(),R=xh();(It!==a||yt!==c)&&(pa=null,Mr(a,c)),c=!1;var O=zt;e:do try{if(Tt!==0&&mt!==null){var H=mt,ie=Si;switch(Tt){case 8:ul(),O=6;break e;case 3:case 2:case 9:case 6:Pi.current===null&&(c=!0);var de=Tt;if(Tt=0,Si=null,Tr(a,H,ie,de),f&&_r){O=0;break e}break;default:de=Tt,Tt=0,Si=null,Tr(a,H,ie,de)}}Np(),O=zt;break}catch(_e){mh(a,_e)}while(!0);return c&&a.shellSuspendCounter++,Zi=Wn=null,Mt=x,D.H=M,D.A=R,mt===null&&(It=null,yt=0,js()),O}function Np(){for(;mt!==null;)yh(mt)}function Lp(a,c){var f=Mt;Mt|=2;var x=gh(),M=xh();It!==a||yt!==c?(pa=null,da=Ye()+500,Mr(a,c)):_r=at(a,c);e:do try{if(Tt!==0&&mt!==null){c=mt;var R=Si;t:switch(Tt){case 1:Tt=0,Si=null,Tr(a,c,R,1);break;case 2:case 9:if(Pc(R)){Tt=0,Si=null,bh(c);break}c=function(){Tt!==2&&Tt!==9||It!==a||(Tt=7),Ui(a)},R.then(c,c);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:Pc(R)?(Tt=0,Si=null,bh(c)):(Tt=0,Si=null,Tr(a,c,R,7));break;case 5:var O=null;switch(mt.tag){case 26:O=mt.memoizedState;case 5:case 27:var H=mt;if(!O||td(O)){Tt=0,Si=null;var ie=H.sibling;if(ie!==null)mt=ie;else{var de=H.return;de!==null?(mt=de,ma(de)):mt=null}break t}}Tt=0,Si=null,Tr(a,c,R,5);break;case 6:Tt=0,Si=null,Tr(a,c,R,6);break;case 8:ul(),zt=6;break e;default:throw Error(n(462))}}kp();break}catch(_e){mh(a,_e)}while(!0);return Zi=Wn=null,D.H=x,D.A=M,Mt=f,mt!==null?0:(It=null,yt=0,js(),zt)}function kp(){for(;mt!==null&&!jt();)yh(mt)}function yh(a){var c=Hu(a.alternate,a,an);a.memoizedProps=a.pendingProps,c===null?ma(a):mt=c}function bh(a){var c=a,f=c.alternate;switch(c.tag){case 15:case 0:c=Bu(f,c,c.pendingProps,c.type,void 0,yt);break;case 11:c=Bu(f,c,c.pendingProps,c.type.render,c.ref,yt);break;case 5:Co(c);default:qu(f,c),c=mt=bc(c,an),c=Hu(f,c,an)}a.memoizedProps=a.pendingProps,c===null?ma(a):mt=c}function Tr(a,c,f,x){Zi=Wn=null,Co(c),xr=null,ns=0;var M=c.return;try{if(Sp(a,M,c,f,yt)){zt=1,aa(a,Ti(f,a.current)),mt=null;return}}catch(R){if(M!==null)throw mt=M,R;zt=1,aa(a,Ti(f,a.current)),mt=null;return}c.flags&32768?(wt||x===1?a=!0:_r||(yt&536870912)!==0?a=!1:(wn=a=!0,(x===2||x===9||x===3||x===6)&&(x=Pi.current,x!==null&&x.tag===13&&(x.flags|=16384))),_h(c,a)):ma(c)}function ma(a){var c=a;do{if((c.flags&32768)!==0){_h(c,wn);return}a=c.return;var f=Mp(c.alternate,c,an);if(f!==null){mt=f;return}if(c=c.sibling,c!==null){mt=c;return}mt=c=a}while(c!==null);zt===0&&(zt=5)}function _h(a,c){do{var f=Tp(a.alternate,a);if(f!==null){f.flags&=32767,mt=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(a=a.sibling,a!==null)){mt=a;return}mt=a=f}while(a!==null);zt=6,mt=null}function Eh(a,c,f,x,M,R,O,H,ie){a.cancelPendingCommit=null;do ga();while(oi!==0);if((Mt&6)!==0)throw Error(n(327));if(c!==null){if(c===a.current)throw Error(n(177));if(R=c.lanes|c.childLanes,R|=to,Fe(a,f,R,O,H,ie),a===It&&(mt=It=null,yt=0),Sr=c,Cn=a,wr=f,ol=R,ll=M,hh=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Fp(K,function(){return Ch(),null})):(a.callbackNode=null,a.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=D.T,D.T=null,M=V.p,V.p=2,O=Mt,Mt|=4;try{Cp(a,c,f)}finally{Mt=O,V.p=M,D.T=x}}oi=1,Sh(),wh(),Mh()}}function Sh(){if(oi===1){oi=0;var a=Cn,c=Sr,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=D.T,D.T=null;var x=V.p;V.p=2;var M=Mt;Mt|=4;try{rh(c,a);var R=wl,O=uc(a.containerInfo),H=R.focusedElem,ie=R.selectionRange;if(O!==H&&H&&H.ownerDocument&&cc(H.ownerDocument.documentElement,H)){if(ie!==null&&Ka(H)){var de=ie.start,_e=ie.end;if(_e===void 0&&(_e=de),"selectionStart"in H)H.selectionStart=de,H.selectionEnd=Math.min(_e,H.value.length);else{var Me=H.ownerDocument||document,pe=Me&&Me.defaultView||window;if(pe.getSelection){var fe=pe.getSelection(),rt=H.textContent.length,Je=Math.min(ie.start,rt),Pt=ie.end===void 0?Je:Math.min(ie.end,rt);!fe.extend&&Je>Pt&&(O=Pt,Pt=Je,Je=O);var ae=lc(H,Je),re=lc(H,Pt);if(ae&&re&&(fe.rangeCount!==1||fe.anchorNode!==ae.node||fe.anchorOffset!==ae.offset||fe.focusNode!==re.node||fe.focusOffset!==re.offset)){var ce=Me.createRange();ce.setStart(ae.node,ae.offset),fe.removeAllRanges(),Je>Pt?(fe.addRange(ce),fe.extend(re.node,re.offset)):(ce.setEnd(re.node,re.offset),fe.addRange(ce))}}}}for(Me=[],fe=H;fe=fe.parentNode;)fe.nodeType===1&&Me.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Me.length;H++){var Se=Me[H];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Aa=!!Sl,wl=Sl=null}finally{Mt=M,V.p=x,D.T=f}}a.current=c,oi=2}}function wh(){if(oi===2){oi=0;var a=Cn,c=Sr,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=D.T,D.T=null;var x=V.p;V.p=2;var M=Mt;Mt|=4;try{eh(a,c.alternate,c)}finally{Mt=M,V.p=x,D.T=f}}oi=3}}function Mh(){if(oi===4||oi===3){oi=0,ot();var a=Cn,c=Sr,f=wr,x=hh;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?oi=5:(oi=0,Sr=Cn=null,Th(a,a.pendingLanes));var M=a.pendingLanes;if(M===0&&(Tn=null),Ht(f),c=c.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(ve,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=D.T,M=V.p,V.p=2,D.T=null;try{for(var R=a.onRecoverableError,O=0;O<x.length;O++){var H=x[O];R(H.value,{componentStack:H.stack})}}finally{D.T=c,V.p=M}}(wr&3)!==0&&ga(),Ui(a),M=a.pendingLanes,(f&4194090)!==0&&(M&42)!==0?a===cl?ds++:(ds=0,cl=a):ds=0,ps(0)}}function Th(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,Wr(c)))}function ga(a){return Sh(),wh(),Mh(),Ch()}function Ch(){if(oi!==5)return!1;var a=Cn,c=ol;ol=0;var f=Ht(wr),x=D.T,M=V.p;try{V.p=32>f?32:f,D.T=null,f=ll,ll=null;var R=Cn,O=wr;if(oi=0,Sr=Cn=null,wr=0,(Mt&6)!==0)throw Error(n(331));var H=Mt;if(Mt|=4,ch(R.current),ah(R,R.current,O,f),Mt=H,ps(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(ve,R)}catch{}return!0}finally{V.p=M,D.T=x,Th(a,c)}}function Ah(a,c,f){c=Ti(f,c),c=Uo(a.stateNode,c,2),a=xn(a,c,2),a!==null&&(we(a,2),Ui(a))}function Nt(a,c,f){if(a.tag===3)Ah(a,a,f);else for(;c!==null;){if(c.tag===3){Ah(c,a,f);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Tn===null||!Tn.has(x))){a=Ti(f,a),f=Du(2),x=xn(c,f,2),x!==null&&(Nu(f,x,c,a),we(x,2),Ui(x));break}}c=c.return}}function pl(a,c,f){var x=a.pingCache;if(x===null){x=a.pingCache=new Pp;var M=new Set;x.set(c,M)}else M=x.get(c),M===void 0&&(M=new Set,x.set(c,M));M.has(f)||(nl=!0,M.add(f),a=Ip.bind(null,a,c,f),c.then(a,a))}function Ip(a,c,f){var x=a.pingCache;x!==null&&x.delete(c),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,It===a&&(yt&f)===f&&(zt===4||zt===3&&(yt&62914560)===yt&&300>Ye()-al?(Mt&2)===0&&Mr(a,0):rl|=f,Er===yt&&(Er=0)),Ui(a)}function Rh(a,c){c===0&&(c=Ie()),a=ar(a,c),a!==null&&(we(a,c),Ui(a))}function jp(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),Rh(a,f)}function Vp(a,c){var f=0;switch(a.tag){case 13:var x=a.stateNode,M=a.memoizedState;M!==null&&(f=M.retryLane);break;case 19:x=a.stateNode;break;case 22:x=a.stateNode._retryCache;break;default:throw Error(n(314))}x!==null&&x.delete(c),Rh(a,f)}function Fp(a,c){return Oe(a,c)}var xa=null,Cr=null,fl=!1,va=!1,ml=!1,Jn=0;function Ui(a){a!==Cr&&a.next===null&&(Cr===null?xa=Cr=a:Cr=Cr.next=a),va=!0,fl||(fl=!0,Op())}function ps(a,c){if(!ml&&va){ml=!0;do for(var f=!1,x=xa;x!==null;){if(a!==0){var M=x.pendingLanes;if(M===0)var R=0;else{var O=x.suspendedLanes,H=x.pingedLanes;R=(1<<31-De(42|a)+1)-1,R&=M&~(O&~H),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(f=!0,Lh(x,R))}else R=yt,R=ut(x,x===It?R:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(R&3)===0||at(x,R)||(f=!0,Lh(x,R));x=x.next}while(f);ml=!1}}function Bp(){Ph()}function Ph(){va=fl=!1;var a=0;Jn!==0&&(Xp()&&(a=Jn),Jn=0);for(var c=Ye(),f=null,x=xa;x!==null;){var M=x.next,R=Dh(x,c);R===0?(x.next=null,f===null?xa=M:f.next=M,M===null&&(Cr=f)):(f=x,(a!==0||(R&3)!==0)&&(va=!0)),x=M}ps(a)}function Dh(a,c){for(var f=a.suspendedLanes,x=a.pingedLanes,M=a.expirationTimes,R=a.pendingLanes&-62914561;0<R;){var O=31-De(R),H=1<<O,ie=M[O];ie===-1?((H&f)===0||(H&x)!==0)&&(M[O]=Ct(H,c)):ie<=c&&(a.expiredLanes|=H),R&=~H}if(c=It,f=yt,f=ut(a,a===c?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),x=a.callbackNode,f===0||a===c&&(Tt===2||Tt===9)||a.cancelPendingCommit!==null)return x!==null&&x!==null&&Z(x),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||at(a,f)){if(c=f&-f,c===a.callbackPriority)return c;switch(x!==null&&Z(x),Ht(f)){case 2:case 8:f=Ue;break;case 32:f=K;break;case 268435456:f=he;break;default:f=K}return x=Nh.bind(null,a),f=Oe(f,x),a.callbackPriority=c,a.callbackNode=f,c}return x!==null&&x!==null&&Z(x),a.callbackPriority=2,a.callbackNode=null,2}function Nh(a,c){if(oi!==0&&oi!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(ga()&&a.callbackNode!==f)return null;var x=yt;return x=ut(a,a===It?x:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),x===0?null:(ph(a,x,c),Dh(a,Ye()),a.callbackNode!=null&&a.callbackNode===f?Nh.bind(null,a):null)}function Lh(a,c){if(ga())return null;ph(a,c,!0)}function Op(){Kp(function(){(Mt&6)!==0?Oe(dt,Bp):Ph()})}function gl(){return Jn===0&&(Jn=se()),Jn}function kh(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Rs(""+a)}function Ih(a,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,a.id&&f.setAttribute("form",a.id),c.parentNode.insertBefore(f,c),a=new FormData(a),f.parentNode.removeChild(f),a}function Up(a,c,f,x,M){if(c==="submit"&&f&&f.stateNode===M){var R=kh((M[ri]||null).action),O=x.submitter;O&&(c=(c=O[ri]||null)?kh(c.formAction):O.getAttribute("formAction"),c!==null&&(R=c,O=null));var H=new Ls("action","action",null,x,M);a.push({event:H,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Jn!==0){var ie=O?Ih(M,O):new FormData(M);jo(f,{pending:!0,data:ie,method:M.method,action:R},null,ie)}}else typeof R=="function"&&(H.preventDefault(),ie=O?Ih(M,O):new FormData(M),jo(f,{pending:!0,data:ie,method:M.method,action:R},R,ie))},currentTarget:M}]})}}for(var xl=0;xl<eo.length;xl++){var vl=eo[xl],zp=vl.toLowerCase(),$p=vl[0].toUpperCase()+vl.slice(1);Li(zp,"on"+$p)}Li(pc,"onAnimationEnd"),Li(fc,"onAnimationIteration"),Li(mc,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(sp,"onTransitionRun"),Li(ap,"onTransitionStart"),Li(lp,"onTransitionCancel"),Li(gc,"onTransitionEnd"),W("onMouseEnter",["mouseout","mouseover"]),W("onMouseLeave",["mouseout","mouseover"]),W("onPointerEnter",["pointerout","pointerover"]),W("onPointerLeave",["pointerout","pointerover"]),Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fs));function jh(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var x=a[f],M=x.event;x=x.listeners;e:{var R=void 0;if(c)for(var O=x.length-1;0<=O;O--){var H=x[O],ie=H.instance,de=H.currentTarget;if(H=H.listener,ie!==R&&M.isPropagationStopped())break e;R=H,M.currentTarget=de;try{R(M)}catch(_e){sa(_e)}M.currentTarget=null,R=ie}else for(O=0;O<x.length;O++){if(H=x[O],ie=H.instance,de=H.currentTarget,H=H.listener,ie!==R&&M.isPropagationStopped())break e;R=H,M.currentTarget=de;try{R(M)}catch(_e){sa(_e)}M.currentTarget=null,R=ie}}}}function gt(a,c){var f=c[In];f===void 0&&(f=c[In]=new Set);var x=a+"__bubble";f.has(x)||(Vh(c,a,2,!1),f.add(x))}function yl(a,c,f){var x=0;c&&(x|=4),Vh(f,a,x,c)}var ya="_reactListening"+Math.random().toString(36).slice(2);function bl(a){if(!a[ya]){a[ya]=!0,Cs.forEach(function(f){f!=="selectionchange"&&(Gp.has(f)||yl(f,!1,a),yl(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[ya]||(c[ya]=!0,yl("selectionchange",!1,c))}}function Vh(a,c,f,x){switch(ld(c)){case 2:var M=vf;break;case 8:M=yf;break;default:M=kl}f=M.bind(null,c,f,a),M=void 0,!Ua||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(M=!0),x?M!==void 0?a.addEventListener(c,f,{capture:!0,passive:M}):a.addEventListener(c,f,!0):M!==void 0?a.addEventListener(c,f,{passive:M}):a.addEventListener(c,f,!1)}function _l(a,c,f,x,M){var R=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var O=x.tag;if(O===3||O===4){var H=x.stateNode.containerInfo;if(H===M)break;if(O===4)for(O=x.return;O!==null;){var ie=O.tag;if((ie===3||ie===4)&&O.stateNode.containerInfo===M)return;O=O.return}for(;H!==null;){if(O=zi(H),O===null)return;if(ie=O.tag,ie===5||ie===6||ie===26||ie===27){x=R=O;continue e}H=H.parentNode}}x=x.return}$l(function(){var de=R,_e=Ba(f),Me=[];e:{var pe=xc.get(a);if(pe!==void 0){var fe=Ls,rt=a;switch(a){case"keypress":if(Ds(f)===0)break e;case"keydown":case"keyup":fe=jd;break;case"focusin":rt="focus",fe=Ha;break;case"focusout":rt="blur",fe=Ha;break;case"beforeblur":case"afterblur":fe=Ha;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=wd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Bd;break;case pc:case fc:case mc:fe=Cd;break;case gc:fe=Ud;break;case"scroll":case"scrollend":fe=Ed;break;case"wheel":fe=$d;break;case"copy":case"cut":case"paste":fe=Rd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Xl;break;case"toggle":case"beforetoggle":fe=Hd}var Je=(c&4)!==0,Pt=!Je&&(a==="scroll"||a==="scrollend"),ae=Je?pe!==null?pe+"Capture":null:pe;Je=[];for(var re=de,ce;re!==null;){var Se=re;if(ce=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ce===null||ae===null||(Se=Lr(re,ae),Se!=null&&Je.push(ms(re,Se,ce))),Pt)break;re=re.return}0<Je.length&&(pe=new fe(pe,rt,null,f,_e),Me.push({event:pe,listeners:Je}))}}if((c&7)===0){e:{if(pe=a==="mouseover"||a==="pointerover",fe=a==="mouseout"||a==="pointerout",pe&&f!==Fa&&(rt=f.relatedTarget||f.fromElement)&&(zi(rt)||rt[pi]))break e;if((fe||pe)&&(pe=_e.window===_e?_e:(pe=_e.ownerDocument)?pe.defaultView||pe.parentWindow:window,fe?(rt=f.relatedTarget||f.toElement,fe=de,rt=rt?zi(rt):null,rt!==null&&(Pt=s(rt),Je=rt.tag,rt!==Pt||Je!==5&&Je!==27&&Je!==6)&&(rt=null)):(fe=null,rt=de),fe!==rt)){if(Je=Wl,Se="onMouseLeave",ae="onMouseEnter",re="mouse",(a==="pointerout"||a==="pointerover")&&(Je=Xl,Se="onPointerLeave",ae="onPointerEnter",re="pointer"),Pt=fe==null?pe:Vn(fe),ce=rt==null?pe:Vn(rt),pe=new Je(Se,re+"leave",fe,f,_e),pe.target=Pt,pe.relatedTarget=ce,Se=null,zi(_e)===de&&(Je=new Je(ae,re+"enter",rt,f,_e),Je.target=ce,Je.relatedTarget=Pt,Se=Je),Pt=Se,fe&&rt)t:{for(Je=fe,ae=rt,re=0,ce=Je;ce;ce=Ar(ce))re++;for(ce=0,Se=ae;Se;Se=Ar(Se))ce++;for(;0<re-ce;)Je=Ar(Je),re--;for(;0<ce-re;)ae=Ar(ae),ce--;for(;re--;){if(Je===ae||ae!==null&&Je===ae.alternate)break t;Je=Ar(Je),ae=Ar(ae)}Je=null}else Je=null;fe!==null&&Fh(Me,pe,fe,Je,!1),rt!==null&&Pt!==null&&Fh(Me,Pt,rt,Je,!0)}}e:{if(pe=de?Vn(de):window,fe=pe.nodeName&&pe.nodeName.toLowerCase(),fe==="select"||fe==="input"&&pe.type==="file")var He=ic;else if(ec(pe))if(nc)He=tp;else{He=Jd;var pt=Qd}else fe=pe.nodeName,!fe||fe.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?de&&Va(de.elementType)&&(He=ic):He=ep;if(He&&(He=He(a,de))){tc(Me,He,f,_e);break e}pt&&pt(a,pe,de),a==="focusout"&&de&&pe.type==="number"&&de.memoizedProps.value!=null&&ui(pe,"number",pe.value)}switch(pt=de?Vn(de):window,a){case"focusin":(ec(pt)||pt.contentEditable==="true")&&(nr=pt,Za=de,Ur=null);break;case"focusout":Ur=Za=nr=null;break;case"mousedown":Qa=!0;break;case"contextmenu":case"mouseup":case"dragend":Qa=!1,hc(Me,f,_e);break;case"selectionchange":if(rp)break;case"keydown":case"keyup":hc(Me,f,_e)}var We;if(qa)e:{switch(a){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else ir?Ql(a,f)&&(tt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(tt="onCompositionStart");tt&&(Yl&&f.locale!=="ko"&&(ir||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&ir&&(We=Gl()):(pn=_e,za="value"in pn?pn.value:pn.textContent,ir=!0)),pt=ba(de,tt),0<pt.length&&(tt=new ql(tt,a,null,f,_e),Me.push({event:tt,listeners:pt}),We?tt.data=We:(We=Jl(f),We!==null&&(tt.data=We)))),(We=qd?Xd(a,f):Yd(a,f))&&(tt=ba(de,"onBeforeInput"),0<tt.length&&(pt=new ql("onBeforeInput","beforeinput",null,f,_e),Me.push({event:pt,listeners:tt}),pt.data=We)),Up(Me,a,de,f,_e)}jh(Me,c)})}function ms(a,c,f){return{instance:a,listener:c,currentTarget:f}}function ba(a,c){for(var f=c+"Capture",x=[];a!==null;){var M=a,R=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||R===null||(M=Lr(a,f),M!=null&&x.unshift(ms(a,M,R)),M=Lr(a,c),M!=null&&x.push(ms(a,M,R))),a.tag===3)return x;a=a.return}return[]}function Ar(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Fh(a,c,f,x,M){for(var R=c._reactName,O=[];f!==null&&f!==x;){var H=f,ie=H.alternate,de=H.stateNode;if(H=H.tag,ie!==null&&ie===x)break;H!==5&&H!==26&&H!==27||de===null||(ie=de,M?(de=Lr(f,R),de!=null&&O.unshift(ms(f,de,ie))):M||(de=Lr(f,R),de!=null&&O.push(ms(f,de,ie)))),f=f.return}O.length!==0&&a.push({event:c,listeners:O})}var Hp=/\r\n?/g,Wp=/\u0000|\uFFFD/g;function Bh(a){return(typeof a=="string"?a:""+a).replace(Hp,`
`).replace(Wp,"")}function Oh(a,c){return c=Bh(c),Bh(a)===c}function _a(){}function Rt(a,c,f,x,M,R){switch(f){case"children":typeof x=="string"?c==="body"||c==="textarea"&&x===""||ji(a,x):(typeof x=="number"||typeof x=="bigint")&&c!=="body"&&ji(a,""+x);break;case"className":Le(a,"class",x);break;case"tabIndex":Le(a,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Le(a,f,x);break;case"style":Ul(a,x,R);break;case"data":if(c!=="object"){Le(a,"data",x);break}case"src":case"href":if(x===""&&(c!=="a"||f!=="href")){a.removeAttribute(f);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){a.removeAttribute(f);break}x=Rs(""+x),a.setAttribute(f,x);break;case"action":case"formAction":if(typeof x=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(f==="formAction"?(c!=="input"&&Rt(a,c,"name",M.name,M,null),Rt(a,c,"formEncType",M.formEncType,M,null),Rt(a,c,"formMethod",M.formMethod,M,null),Rt(a,c,"formTarget",M.formTarget,M,null)):(Rt(a,c,"encType",M.encType,M,null),Rt(a,c,"method",M.method,M,null),Rt(a,c,"target",M.target,M,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){a.removeAttribute(f);break}x=Rs(""+x),a.setAttribute(f,x);break;case"onClick":x!=null&&(a.onclick=_a);break;case"onScroll":x!=null&&gt("scroll",a);break;case"onScrollEnd":x!=null&&gt("scrollend",a);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(f=x.__html,f!=null){if(M.children!=null)throw Error(n(60));a.innerHTML=f}}break;case"multiple":a.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":a.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){a.removeAttribute("xlink:href");break}f=Rs(""+x),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?a.setAttribute(f,""+x):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":x===!0?a.setAttribute(f,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?a.setAttribute(f,x):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?a.setAttribute(f,x):a.removeAttribute(f);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?a.removeAttribute(f):a.setAttribute(f,x);break;case"popover":gt("beforetoggle",a),gt("toggle",a),Ce(a,"popover",x);break;case"xlinkActuate":ke(a,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ke(a,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ke(a,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ke(a,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ke(a,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ke(a,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ke(a,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ke(a,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ke(a,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Ce(a,"is",x);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=bd.get(f)||f,Ce(a,f,x))}}function El(a,c,f,x,M,R){switch(f){case"style":Ul(a,x,R);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(f=x.__html,f!=null){if(M.children!=null)throw Error(n(60));a.innerHTML=f}}break;case"children":typeof x=="string"?ji(a,x):(typeof x=="number"||typeof x=="bigint")&&ji(a,""+x);break;case"onScroll":x!=null&&gt("scroll",a);break;case"onScrollEnd":x!=null&&gt("scrollend",a);break;case"onClick":x!=null&&(a.onclick=_a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!As.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(M=f.endsWith("Capture"),c=f.slice(2,M?f.length-7:void 0),R=a[ri]||null,R=R!=null?R[f]:null,typeof R=="function"&&a.removeEventListener(c,R,M),typeof x=="function")){typeof R!="function"&&R!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(c,x,M);break e}f in a?a[f]=x:x===!0?a.setAttribute(f,""):Ce(a,f,x)}}}function li(a,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gt("error",a),gt("load",a);var x=!1,M=!1,R;for(R in f)if(f.hasOwnProperty(R)){var O=f[R];if(O!=null)switch(R){case"src":x=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Rt(a,c,R,O,f,null)}}M&&Rt(a,c,"srcSet",f.srcSet,f,null),x&&Rt(a,c,"src",f.src,f,null);return;case"input":gt("invalid",a);var H=R=O=M=null,ie=null,de=null;for(x in f)if(f.hasOwnProperty(x)){var _e=f[x];if(_e!=null)switch(x){case"name":M=_e;break;case"type":O=_e;break;case"checked":ie=_e;break;case"defaultChecked":de=_e;break;case"value":R=_e;break;case"defaultValue":H=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(n(137,c));break;default:Rt(a,c,x,_e,f,null)}}Dt(a,R,H,ie,de,O,M,!1),Ot(a);return;case"select":gt("invalid",a),x=O=R=null;for(M in f)if(f.hasOwnProperty(M)&&(H=f[M],H!=null))switch(M){case"value":R=H;break;case"defaultValue":O=H;break;case"multiple":x=H;default:Rt(a,c,M,H,f,null)}c=R,f=O,a.multiple=!!x,c!=null?Kt(a,!!x,c,!1):f!=null&&Kt(a,!!x,f,!0);return;case"textarea":gt("invalid",a),R=M=x=null;for(O in f)if(f.hasOwnProperty(O)&&(H=f[O],H!=null))switch(O){case"value":x=H;break;case"defaultValue":M=H;break;case"children":R=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(91));break;default:Rt(a,c,O,H,f,null)}si(a,x,M,R),Ot(a);return;case"option":for(ie in f)if(f.hasOwnProperty(ie)&&(x=f[ie],x!=null))switch(ie){case"selected":a.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Rt(a,c,ie,x,f,null)}return;case"dialog":gt("beforetoggle",a),gt("toggle",a),gt("cancel",a),gt("close",a);break;case"iframe":case"object":gt("load",a);break;case"video":case"audio":for(x=0;x<fs.length;x++)gt(fs[x],a);break;case"image":gt("error",a),gt("load",a);break;case"details":gt("toggle",a);break;case"embed":case"source":case"link":gt("error",a),gt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in f)if(f.hasOwnProperty(de)&&(x=f[de],x!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Rt(a,c,de,x,f,null)}return;default:if(Va(c)){for(_e in f)f.hasOwnProperty(_e)&&(x=f[_e],x!==void 0&&El(a,c,_e,x,f,void 0));return}}for(H in f)f.hasOwnProperty(H)&&(x=f[H],x!=null&&Rt(a,c,H,x,f,null))}function qp(a,c,f,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,R=null,O=null,H=null,ie=null,de=null,_e=null;for(fe in f){var Me=f[fe];if(f.hasOwnProperty(fe)&&Me!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":ie=Me;default:x.hasOwnProperty(fe)||Rt(a,c,fe,null,x,Me)}}for(var pe in x){var fe=x[pe];if(Me=f[pe],x.hasOwnProperty(pe)&&(fe!=null||Me!=null))switch(pe){case"type":R=fe;break;case"name":M=fe;break;case"checked":de=fe;break;case"defaultChecked":_e=fe;break;case"value":O=fe;break;case"defaultValue":H=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(137,c));break;default:fe!==Me&&Rt(a,c,pe,fe,x,Me)}}Hi(a,O,H,ie,de,_e,R,M);return;case"select":fe=O=H=pe=null;for(R in f)if(ie=f[R],f.hasOwnProperty(R)&&ie!=null)switch(R){case"value":break;case"multiple":fe=ie;default:x.hasOwnProperty(R)||Rt(a,c,R,null,x,ie)}for(M in x)if(R=x[M],ie=f[M],x.hasOwnProperty(M)&&(R!=null||ie!=null))switch(M){case"value":pe=R;break;case"defaultValue":H=R;break;case"multiple":O=R;default:R!==ie&&Rt(a,c,M,R,x,ie)}c=H,f=O,x=fe,pe!=null?Kt(a,!!f,pe,!1):!!x!=!!f&&(c!=null?Kt(a,!!f,c,!0):Kt(a,!!f,f?[]:"",!1));return;case"textarea":fe=pe=null;for(H in f)if(M=f[H],f.hasOwnProperty(H)&&M!=null&&!x.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Rt(a,c,H,null,x,M)}for(O in x)if(M=x[O],R=f[O],x.hasOwnProperty(O)&&(M!=null||R!=null))switch(O){case"value":pe=M;break;case"defaultValue":fe=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==R&&Rt(a,c,O,M,x,R)}ei(a,pe,fe);return;case"option":for(var rt in f)if(pe=f[rt],f.hasOwnProperty(rt)&&pe!=null&&!x.hasOwnProperty(rt))switch(rt){case"selected":a.selected=!1;break;default:Rt(a,c,rt,null,x,pe)}for(ie in x)if(pe=x[ie],fe=f[ie],x.hasOwnProperty(ie)&&pe!==fe&&(pe!=null||fe!=null))switch(ie){case"selected":a.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:Rt(a,c,ie,pe,x,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in f)pe=f[Je],f.hasOwnProperty(Je)&&pe!=null&&!x.hasOwnProperty(Je)&&Rt(a,c,Je,null,x,pe);for(de in x)if(pe=x[de],fe=f[de],x.hasOwnProperty(de)&&pe!==fe&&(pe!=null||fe!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(n(137,c));break;default:Rt(a,c,de,pe,x,fe)}return;default:if(Va(c)){for(var Pt in f)pe=f[Pt],f.hasOwnProperty(Pt)&&pe!==void 0&&!x.hasOwnProperty(Pt)&&El(a,c,Pt,void 0,x,pe);for(_e in x)pe=x[_e],fe=f[_e],!x.hasOwnProperty(_e)||pe===fe||pe===void 0&&fe===void 0||El(a,c,_e,pe,x,fe);return}}for(var ae in f)pe=f[ae],f.hasOwnProperty(ae)&&pe!=null&&!x.hasOwnProperty(ae)&&Rt(a,c,ae,null,x,pe);for(Me in x)pe=x[Me],fe=f[Me],!x.hasOwnProperty(Me)||pe===fe||pe==null&&fe==null||Rt(a,c,Me,pe,x,fe)}var Sl=null,wl=null;function Ea(a){return a.nodeType===9?a:a.ownerDocument}function Uh(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zh(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function Ml(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Tl=null;function Xp(){var a=window.event;return a&&a.type==="popstate"?a===Tl?!1:(Tl=a,!0):(Tl=null,!1)}var $h=typeof setTimeout=="function"?setTimeout:void 0,Yp=typeof clearTimeout=="function"?clearTimeout:void 0,Gh=typeof Promise=="function"?Promise:void 0,Kp=typeof queueMicrotask=="function"?queueMicrotask:typeof Gh<"u"?function(a){return Gh.resolve(null).then(a).catch(Zp)}:$h;function Zp(a){setTimeout(function(){throw a})}function Rn(a){return a==="head"}function Hh(a,c){var f=c,x=0,M=0;do{var R=f.nextSibling;if(a.removeChild(f),R&&R.nodeType===8)if(f=R.data,f==="/$"){if(0<x&&8>x){f=x;var O=a.ownerDocument;if(f&1&&gs(O.documentElement),f&2&&gs(O.body),f&4)for(f=O.head,gs(f),O=f.firstChild;O;){var H=O.nextSibling,ie=O.nodeName;O[ln]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&O.rel.toLowerCase()==="stylesheet"||f.removeChild(O),O=H}}if(M===0){a.removeChild(R),ws(c);return}M--}else f==="$"||f==="$?"||f==="$!"?M++:x=f.charCodeAt(0)-48;else x=0;f=R}while(f);ws(c)}function Cl(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Cl(f),un(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function Qp(a,c,f,x){for(;a.nodeType===1;){var M=f;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!x&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(x){if(!a[ln])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(R=a.getAttribute("rel"),R==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(R!==M.rel||a.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||a.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||a.getAttribute("title")!==(M.title==null?null:M.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(R=a.getAttribute("src"),(R!==(M.src==null?null:M.src)||a.getAttribute("type")!==(M.type==null?null:M.type)||a.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&R&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var R=M.name==null?null:""+M.name;if(M.type==="hidden"&&a.getAttribute("name")===R)return a}else return a;if(a=Ii(a.nextSibling),a===null)break}return null}function Jp(a,c,f){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=Ii(a.nextSibling),a===null))return null;return a}function Al(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function ef(a,c){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")c();else{var x=function(){c(),f.removeEventListener("DOMContentLoaded",x)};f.addEventListener("DOMContentLoaded",x),a._reactRetry=x}}function Ii(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var Rl=null;function Wh(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}function qh(a,c,f){switch(c=Ea(f),a){case"html":if(a=c.documentElement,!a)throw Error(n(452));return a;case"head":if(a=c.head,!a)throw Error(n(453));return a;case"body":if(a=c.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function gs(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);un(a)}var Ni=new Map,Xh=new Set;function Sa(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var on=V.d;V.d={f:tf,r:nf,D:rf,C:sf,L:af,m:of,X:cf,S:lf,M:uf};function tf(){var a=on.f(),c=fa();return a||c}function nf(a){var c=$i(a);c!==null&&c.tag===5&&c.type==="form"?pu(c):on.r(a)}var Rr=typeof document>"u"?null:document;function Yh(a,c,f){var x=Rr;if(x&&typeof c=="string"&&c){var M=kt(c);M='link[rel="'+a+'"][href="'+M+'"]',typeof f=="string"&&(M+='[crossorigin="'+f+'"]'),Xh.has(M)||(Xh.add(M),a={rel:a,crossOrigin:f,href:c},x.querySelector(M)===null&&(c=x.createElement("link"),li(c,"link",a),Wt(c),x.head.appendChild(c)))}}function rf(a){on.D(a),Yh("dns-prefetch",a,null)}function sf(a,c){on.C(a,c),Yh("preconnect",a,c)}function af(a,c,f){on.L(a,c,f);var x=Rr;if(x&&a&&c){var M='link[rel="preload"][as="'+kt(c)+'"]';c==="image"&&f&&f.imageSrcSet?(M+='[imagesrcset="'+kt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(M+='[imagesizes="'+kt(f.imageSizes)+'"]')):M+='[href="'+kt(a)+'"]';var R=M;switch(c){case"style":R=Pr(a);break;case"script":R=Dr(a)}Ni.has(R)||(a=p({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:a,as:c},f),Ni.set(R,a),x.querySelector(M)!==null||c==="style"&&x.querySelector(xs(R))||c==="script"&&x.querySelector(vs(R))||(c=x.createElement("link"),li(c,"link",a),Wt(c),x.head.appendChild(c)))}}function of(a,c){on.m(a,c);var f=Rr;if(f&&a){var x=c&&typeof c.as=="string"?c.as:"script",M='link[rel="modulepreload"][as="'+kt(x)+'"][href="'+kt(a)+'"]',R=M;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=Dr(a)}if(!Ni.has(R)&&(a=p({rel:"modulepreload",href:a},c),Ni.set(R,a),f.querySelector(M)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(vs(R)))return}x=f.createElement("link"),li(x,"link",a),Wt(x),f.head.appendChild(x)}}}function lf(a,c,f){on.S(a,c,f);var x=Rr;if(x&&a){var M=hn(x).hoistableStyles,R=Pr(a);c=c||"default";var O=M.get(R);if(!O){var H={loading:0,preload:null};if(O=x.querySelector(xs(R)))H.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":c},f),(f=Ni.get(R))&&Pl(a,f);var ie=O=x.createElement("link");Wt(ie),li(ie,"link",a),ie._p=new Promise(function(de,_e){ie.onload=de,ie.onerror=_e}),ie.addEventListener("load",function(){H.loading|=1}),ie.addEventListener("error",function(){H.loading|=2}),H.loading|=4,wa(O,c,x)}O={type:"stylesheet",instance:O,count:1,state:H},M.set(R,O)}}}function cf(a,c){on.X(a,c);var f=Rr;if(f&&a){var x=hn(f).hoistableScripts,M=Dr(a),R=x.get(M);R||(R=f.querySelector(vs(M)),R||(a=p({src:a,async:!0},c),(c=Ni.get(M))&&Dl(a,c),R=f.createElement("script"),Wt(R),li(R,"link",a),f.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},x.set(M,R))}}function uf(a,c){on.M(a,c);var f=Rr;if(f&&a){var x=hn(f).hoistableScripts,M=Dr(a),R=x.get(M);R||(R=f.querySelector(vs(M)),R||(a=p({src:a,async:!0,type:"module"},c),(c=Ni.get(M))&&Dl(a,c),R=f.createElement("script"),Wt(R),li(R,"link",a),f.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},x.set(M,R))}}function Kh(a,c,f,x){var M=(M=me.current)?Sa(M):null;if(!M)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Pr(f.href),f=hn(M).hoistableStyles,x=f.get(c),x||(x={type:"style",instance:null,count:0,state:null},f.set(c,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=Pr(f.href);var R=hn(M).hoistableStyles,O=R.get(a);if(O||(M=M.ownerDocument||M,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(a,O),(R=M.querySelector(xs(a)))&&!R._p&&(O.instance=R,O.state.loading=5),Ni.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ni.set(a,f),R||hf(M,a,f,O.state))),c&&x===null)throw Error(n(528,""));return O}if(c&&x!==null)throw Error(n(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Dr(f),f=hn(M).hoistableScripts,x=f.get(c),x||(x={type:"script",instance:null,count:0,state:null},f.set(c,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Pr(a){return'href="'+kt(a)+'"'}function xs(a){return'link[rel="stylesheet"]['+a+"]"}function Zh(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function hf(a,c,f,x){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?x.loading=1:(c=a.createElement("link"),x.preload=c,c.addEventListener("load",function(){return x.loading|=1}),c.addEventListener("error",function(){return x.loading|=2}),li(c,"link",f),Wt(c),a.head.appendChild(c))}function Dr(a){return'[src="'+kt(a)+'"]'}function vs(a){return"script[async]"+a}function Qh(a,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var x=a.querySelector('style[data-href~="'+kt(f.href)+'"]');if(x)return c.instance=x,Wt(x),x;var M=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return x=(a.ownerDocument||a).createElement("style"),Wt(x),li(x,"style",M),wa(x,f.precedence,a),c.instance=x;case"stylesheet":M=Pr(f.href);var R=a.querySelector(xs(M));if(R)return c.state.loading|=4,c.instance=R,Wt(R),R;x=Zh(f),(M=Ni.get(M))&&Pl(x,M),R=(a.ownerDocument||a).createElement("link"),Wt(R);var O=R;return O._p=new Promise(function(H,ie){O.onload=H,O.onerror=ie}),li(R,"link",x),c.state.loading|=4,wa(R,f.precedence,a),c.instance=R;case"script":return R=Dr(f.src),(M=a.querySelector(vs(R)))?(c.instance=M,Wt(M),M):(x=f,(M=Ni.get(R))&&(x=p({},f),Dl(x,M)),a=a.ownerDocument||a,M=a.createElement("script"),Wt(M),li(M,"link",x),a.head.appendChild(M),c.instance=M);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(x=c.instance,c.state.loading|=4,wa(x,f.precedence,a));return c.instance}function wa(a,c,f){for(var x=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=x.length?x[x.length-1]:null,R=M,O=0;O<x.length;O++){var H=x[O];if(H.dataset.precedence===c)R=H;else if(R!==M)break}R?R.parentNode.insertBefore(a,R.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(a,c.firstChild))}function Pl(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function Dl(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var Ma=null;function Jh(a,c,f){if(Ma===null){var x=new Map,M=Ma=new Map;M.set(f,x)}else M=Ma,x=M.get(f),x||(x=new Map,M.set(f,x));if(x.has(a))return x;for(x.set(a,null),f=f.getElementsByTagName(a),M=0;M<f.length;M++){var R=f[M];if(!(R[ln]||R[Yt]||a==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var O=R.getAttribute(c)||"";O=a+O;var H=x.get(O);H?H.push(R):x.set(O,[R])}}return x}function ed(a,c,f){a=a.ownerDocument||a,a.head.insertBefore(f,c==="title"?a.querySelector("head > title"):null)}function df(a,c,f){if(f===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function td(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var ys=null;function pf(){}function ff(a,c,f){if(ys===null)throw Error(n(475));var x=ys;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var M=Pr(f.href),R=a.querySelector(xs(M));if(R){a=R._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(x.count++,x=Ta.bind(x),a.then(x,x)),c.state.loading|=4,c.instance=R,Wt(R);return}R=a.ownerDocument||a,f=Zh(f),(M=Ni.get(M))&&Pl(f,M),R=R.createElement("link"),Wt(R);var O=R;O._p=new Promise(function(H,ie){O.onload=H,O.onerror=ie}),li(R,"link",f),c.instance=R}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(x.count++,c=Ta.bind(x),a.addEventListener("load",c),a.addEventListener("error",c))}}function mf(){if(ys===null)throw Error(n(475));var a=ys;return a.stylesheets&&a.count===0&&Nl(a,a.stylesheets),0<a.count?function(c){var f=setTimeout(function(){if(a.stylesheets&&Nl(a,a.stylesheets),a.unsuspend){var x=a.unsuspend;a.unsuspend=null,x()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f)}}:null}function Ta(){if(this.count--,this.count===0){if(this.stylesheets)Nl(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Ca=null;function Nl(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Ca=new Map,c.forEach(gf,a),Ca=null,Ta.call(a))}function gf(a,c){if(!(c.state.loading&4)){var f=Ca.get(a);if(f)var x=f.get(null);else{f=new Map,Ca.set(a,f);for(var M=a.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<M.length;R++){var O=M[R];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(f.set(O.dataset.precedence,O),x=O)}x&&f.set(null,x)}M=c.instance,O=M.getAttribute("data-precedence"),R=f.get(O)||x,R===x&&f.set(null,M),f.set(O,M),this.count++,x=Ta.bind(this),M.addEventListener("load",x),M.addEventListener("error",x),R?R.parentNode.insertBefore(M,R.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(M,a.firstChild)),c.state.loading|=4}}var bs={$$typeof:T,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function xf(a,c,f,x,M,R,O,H){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ye(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ye(0),this.hiddenUpdates=ye(null),this.identifierPrefix=x,this.onUncaughtError=M,this.onCaughtError=R,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function nd(a,c,f,x,M,R,O,H,ie,de,_e,Me){return a=new xf(a,c,f,O,H,ie,de,Me),c=1,R===!0&&(c|=24),R=bi(3,null,null,c),a.current=R,R.stateNode=a,c=po(),c.refCount++,a.pooledCache=c,c.refCount++,R.memoizedState={element:x,isDehydrated:f,cache:c},xo(R),a}function rd(a){return a?(a=or,a):or}function sd(a,c,f,x,M,R){M=rd(M),x.context===null?x.context=M:x.pendingContext=M,x=gn(c),x.payload={element:f},R=R===void 0?null:R,R!==null&&(x.callback=R),f=xn(a,x,c),f!==null&&(Mi(f,a,c),Kr(f,a,c))}function ad(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function Ll(a,c){ad(a,c),(a=a.alternate)&&ad(a,c)}function od(a){if(a.tag===13){var c=ar(a,67108864);c!==null&&Mi(c,a,67108864),Ll(a,67108864)}}var Aa=!0;function vf(a,c,f,x){var M=D.T;D.T=null;var R=V.p;try{V.p=2,kl(a,c,f,x)}finally{V.p=R,D.T=M}}function yf(a,c,f,x){var M=D.T;D.T=null;var R=V.p;try{V.p=8,kl(a,c,f,x)}finally{V.p=R,D.T=M}}function kl(a,c,f,x){if(Aa){var M=Il(x);if(M===null)_l(a,c,x,Ra,f),cd(a,x);else if(_f(M,a,c,f,x))x.stopPropagation();else if(cd(a,x),c&4&&-1<bf.indexOf(a)){for(;M!==null;){var R=$i(M);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var O=Ve(R.pendingLanes);if(O!==0){var H=R;for(H.pendingLanes|=2,H.entangledLanes|=2;O;){var ie=1<<31-De(O);H.entanglements[1]|=ie,O&=~ie}Ui(R),(Mt&6)===0&&(da=Ye()+500,ps(0))}}break;case 13:H=ar(R,2),H!==null&&Mi(H,R,2),fa(),Ll(R,2)}if(R=Il(x),R===null&&_l(a,c,x,Ra,f),R===M)break;M=R}M!==null&&x.stopPropagation()}else _l(a,c,x,null,f)}}function Il(a){return a=Ba(a),jl(a)}var Ra=null;function jl(a){if(Ra=null,a=zi(a),a!==null){var c=s(a);if(c===null)a=null;else{var f=c.tag;if(f===13){if(a=o(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Ra=a,null}function ld(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($e()){case dt:return 2;case Ue:return 8;case K:case G:return 32;case he:return 268435456;default:return 32}default:return 32}}var Vl=!1,Pn=null,Dn=null,Nn=null,_s=new Map,Es=new Map,Ln=[],bf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cd(a,c){switch(a){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":_s.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Es.delete(c.pointerId)}}function Ss(a,c,f,x,M,R){return a===null||a.nativeEvent!==R?(a={blockedOn:c,domEventName:f,eventSystemFlags:x,nativeEvent:R,targetContainers:[M]},c!==null&&(c=$i(c),c!==null&&od(c)),a):(a.eventSystemFlags|=x,c=a.targetContainers,M!==null&&c.indexOf(M)===-1&&c.push(M),a)}function _f(a,c,f,x,M){switch(c){case"focusin":return Pn=Ss(Pn,a,c,f,x,M),!0;case"dragenter":return Dn=Ss(Dn,a,c,f,x,M),!0;case"mouseover":return Nn=Ss(Nn,a,c,f,x,M),!0;case"pointerover":var R=M.pointerId;return _s.set(R,Ss(_s.get(R)||null,a,c,f,x,M)),!0;case"gotpointercapture":return R=M.pointerId,Es.set(R,Ss(Es.get(R)||null,a,c,f,x,M)),!0}return!1}function ud(a){var c=zi(a.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=o(f),c!==null){a.blockedOn=c,vi(a.priority,function(){if(f.tag===13){var x=wi();x=Lt(x);var M=ar(f,x);M!==null&&Mi(M,f,x),Ll(f,x)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Pa(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=Il(a.nativeEvent);if(f===null){f=a.nativeEvent;var x=new f.constructor(f.type,f);Fa=x,f.target.dispatchEvent(x),Fa=null}else return c=$i(f),c!==null&&od(c),a.blockedOn=f,!1;c.shift()}return!0}function hd(a,c,f){Pa(a)&&f.delete(c)}function Ef(){Vl=!1,Pn!==null&&Pa(Pn)&&(Pn=null),Dn!==null&&Pa(Dn)&&(Dn=null),Nn!==null&&Pa(Nn)&&(Nn=null),_s.forEach(hd),Es.forEach(hd)}function Da(a,c){a.blockedOn===c&&(a.blockedOn=null,Vl||(Vl=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ef)))}var Na=null;function dd(a){Na!==a&&(Na=a,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Na===a&&(Na=null);for(var c=0;c<a.length;c+=3){var f=a[c],x=a[c+1],M=a[c+2];if(typeof x!="function"){if(jl(x||f)===null)continue;break}var R=$i(f);R!==null&&(a.splice(c,3),c-=3,jo(R,{pending:!0,data:M,method:f.method,action:x},x,M))}}))}function ws(a){function c(ie){return Da(ie,a)}Pn!==null&&Da(Pn,a),Dn!==null&&Da(Dn,a),Nn!==null&&Da(Nn,a),_s.forEach(c),Es.forEach(c);for(var f=0;f<Ln.length;f++){var x=Ln[f];x.blockedOn===a&&(x.blockedOn=null)}for(;0<Ln.length&&(f=Ln[0],f.blockedOn===null);)ud(f),f.blockedOn===null&&Ln.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(x=0;x<f.length;x+=3){var M=f[x],R=f[x+1],O=M[ri]||null;if(typeof R=="function")O||dd(f);else if(O){var H=null;if(R&&R.hasAttribute("formAction")){if(M=R,O=R[ri]||null)H=O.formAction;else if(jl(M)!==null)continue}else H=O.action;typeof H=="function"?f[x+1]=H:(f.splice(x,3),x-=3),dd(f)}}}function Fl(a){this._internalRoot=a}La.prototype.render=Fl.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));var f=c.current,x=wi();sd(f,x,a,c,null,null)},La.prototype.unmount=Fl.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;sd(a.current,2,null,a,null,null),fa(),c[pi]=null}};function La(a){this._internalRoot=a}La.prototype.unstable_scheduleHydration=function(a){if(a){var c=_t();a={blockedOn:null,target:a,priority:c};for(var f=0;f<Ln.length&&c!==0&&c<Ln[f].priority;f++);Ln.splice(f,0,a),f===0&&ud(a)}};var pd=e.version;if(pd!=="19.1.0")throw Error(n(527,pd,"19.1.0"));V.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var Sf={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ka.isDisabled&&ka.supportsFiber)try{ve=ka.inject(Sf),Ne=ka}catch{}}return reactDomClient_production.createRoot=function(a,c){if(!r(a))throw Error(n(299));var f=!1,x="",M=Cu,R=Au,O=Ru,H=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(M=c.onUncaughtError),c.onCaughtError!==void 0&&(R=c.onCaughtError),c.onRecoverableError!==void 0&&(O=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(H=c.unstable_transitionCallbacks)),c=nd(a,1,!1,null,null,f,x,M,R,O,H,null),a[pi]=c.current,bl(a),new Fl(c)},reactDomClient_production.hydrateRoot=function(a,c,f){if(!r(a))throw Error(n(299));var x=!1,M="",R=Cu,O=Au,H=Ru,ie=null,de=null;return f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(M=f.identifierPrefix),f.onUncaughtError!==void 0&&(R=f.onUncaughtError),f.onCaughtError!==void 0&&(O=f.onCaughtError),f.onRecoverableError!==void 0&&(H=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(ie=f.unstable_transitionCallbacks),f.formState!==void 0&&(de=f.formState)),c=nd(a,1,!0,c,f??null,x,M,R,O,H,ie,de),c.context=rd(null),f=c.current,x=wi(),x=Lt(x),M=gn(x),M.callback=null,xn(f,M,x),f=x,c.current.lanes=f,we(c,f),Ui(c),a[pi]=c.current,bl(a),new La(c)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient(),dist$1={},hasRequiredDist$1;function requireDist$1(){if(hasRequiredDist$1)return dist$1;hasRequiredDist$1=1,Object.defineProperty(dist$1,"__esModule",{value:!0}),dist$1.parse=o,dist$1.serialize=d;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,s=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function o(m,y){const _=new s,E=m.length;if(E<2)return _;const S=(y==null?void 0:y.decode)||p;let b=0;do{const C=m.indexOf("=",b);if(C===-1)break;const T=m.indexOf(";",b),A=T===-1?E:T;if(C>A){b=m.lastIndexOf(";",C-1)+1;continue}const N=l(m,b,C),L=u(m,C,N),k=m.slice(N,L);if(_[k]===void 0){let j=l(m,C+1,A),F=u(m,A,j);const U=S(m.slice(j,F));_[k]=U}b=A+1}while(b<E);return _}function l(m,y,_){do{const E=m.charCodeAt(y);if(E!==32&&E!==9)return y}while(++y<_);return _}function u(m,y,_){for(;y>_;){const E=m.charCodeAt(--y);if(E!==32&&E!==9)return y+1}return _}function d(m,y,_){const E=(_==null?void 0:_.encode)||encodeURIComponent;if(!i.test(m))throw new TypeError(`argument name is invalid: ${m}`);const S=E(y);if(!e.test(S))throw new TypeError(`argument val is invalid: ${y}`);let b=m+"="+S;if(!_)return b;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);b+="; Max-Age="+_.maxAge}if(_.domain){if(!t.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);b+="; Domain="+_.domain}if(_.path){if(!n.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);b+="; Path="+_.path}if(_.expires){if(!g(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);b+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(b+="; HttpOnly"),_.secure&&(b+="; Secure"),_.partitioned&&(b+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return b}function p(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function g(m){return r.call(m)==="[object Date]"}return dist$1}requireDist$1();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(i={}){function e(n,r){let{pathname:s,search:o,hash:l}=n.location;return createLocation("",{pathname:s,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:createPath(r)}return getUrlBasedHistory(e,t,null,i)}function invariant$1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function warning$1(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(i,e){return{usr:i.state,key:i.key,idx:e}}function createLocation(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:t,key:e&&e.key||n||createKey()}}function createPath({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function parsePath(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function getUrlBasedHistory(i,e,t,n={}){let{window:r=document.defaultView,v5Compat:s=!1}=n,o=r.history,l="POP",u=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function g(){l="POP";let S=p(),b=S==null?null:S-d;d=S,u&&u({action:l,location:E.location,delta:b})}function m(S,b){l="PUSH";let C=createLocation(E.location,S,b);d=p()+1;let T=getHistoryState(C,d),A=E.createHref(C);try{o.pushState(T,"",A)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(A)}s&&u&&u({action:l,location:E.location,delta:1})}function y(S,b){l="REPLACE";let C=createLocation(E.location,S,b);d=p();let T=getHistoryState(C,d),A=E.createHref(C);o.replaceState(T,"",A),s&&u&&u({action:l,location:E.location,delta:0})}function _(S){let b=r.location.origin!=="null"?r.location.origin:r.location.href,C=typeof S=="string"?S:createPath(S);return C=C.replace(/ $/,"%20"),invariant$1(b,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,b)}let E={get action(){return l},get location(){return i(r,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(PopStateEventType,g),u=S,()=>{r.removeEventListener(PopStateEventType,g),u=null}},createHref(S){return e(r,S)},createURL:_,encodeLocation(S){let b=_(S);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:y,go(S){return o.go(S)}};return E}function matchRoutes(i,e,t="/"){return matchRoutesImpl(i,e,t,!1)}function matchRoutesImpl(i,e,t,n){let r=typeof e=="string"?parsePath(e):e,s=stripBasename(r.pathname||"/",t);if(s==null)return null;let o=flattenRoutes(i);rankRouteBranches(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=decodePath(s);l=matchRouteBranch(o[u],d,n)}return l}function flattenRoutes(i,e=[],t=[],n=""){let r=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(invariant$1(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length));let d=joinPaths([n,u.relativePath]),p=t.concat(u);s.children&&s.children.length>0&&(invariant$1(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),flattenRoutes(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:computeScore(d,s.index),routesMeta:p})};return i.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,o);else for(let u of explodeOptionalSegments(s.path))r(s,o,u)}),e}function explodeOptionalSegments(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let o=explodeOptionalSegments(n.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),r&&l.push(...o),l.map(u=>i.startsWith("/")&&u===""?"/":u)}function rankRouteBranches(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:compareIndexes(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=i=>i==="*";function computeScore(i,e){let t=i.split("/"),n=t.length;return t.some(isSplat)&&(n+=splatPenalty),e&&(n+=indexRouteValue),t.filter(r=>!isSplat(r)).reduce((r,s)=>r+(paramRe.test(s)?dynamicSegmentValue:s===""?emptySegmentValue:staticSegmentValue),n)}function compareIndexes(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function matchRouteBranch(i,e,t=!1){let{routesMeta:n}=i,r={},s="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],d=l===n.length-1,p=s==="/"?e:e.slice(s.length)||"/",g=matchPath({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),m=u.route;if(!g&&d&&t&&!n[n.length-1].route.index&&(g=matchPath({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!g)return null;Object.assign(r,g.params),o.push({params:r,pathname:joinPaths([s,g.pathname]),pathnameBase:normalizePathname(joinPaths([s,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(s=joinPaths([s,g.pathnameBase]))}return o}function matchPath(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=compilePath(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((d,{paramName:p,isOptional:g},m)=>{if(p==="*"){let _=l[m]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=l[m];return g&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:i}}function compilePath(i,e=!1,t=!0){warning$1(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function decodePath(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning$1(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function stripBasename(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function resolvePath(i,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?parsePath(i):i;return{pathname:t?t.startsWith("/")?t:resolvePathname(t,e):e,search:normalizeSearch(n),hash:normalizeHash(r)}}function resolvePathname(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function getInvalidPathError(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(i){let e=getPathContributingMatches(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function resolveTo(i,e,t,n=!1){let r;typeof i=="string"?r=parsePath(i):(r={...i},invariant$1(!r.pathname||!r.pathname.includes("?"),getInvalidPathError("?","pathname","search",r)),invariant$1(!r.pathname||!r.pathname.includes("#"),getInvalidPathError("#","pathname","hash",r)),invariant$1(!r.search||!r.search.includes("#"),getInvalidPathError("#","search","hash",r)));let s=i===""||r.pathname==="",o=s?"/":r.pathname,l;if(o==null)l=t;else{let g=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;r.pathname=m.join("/")}l=g>=0?e[g]:"/"}let u=resolvePath(r,l),d=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}var joinPaths=i=>i.join("/").replace(/\/\/+/g,"/"),normalizePathname=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,normalizeHash=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function isRouteErrorResponse(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(i,{relative:e}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=reactExports.useContext(NavigationContext),{hash:r,pathname:s,search:o}=useResolvedPath(i,{relative:e}),l=s;return t!=="/"&&(l=s==="/"?t:joinPaths([t,s])),n.createHref({pathname:l,search:o,hash:r})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(i){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(i)}function useNavigate(){let{isDataRoute:i}=reactExports.useContext(RouteContext);return i?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let i=reactExports.useContext(DataRouterContext),{basename:e,navigator:t}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),{pathname:r}=useLocation(),s=JSON.stringify(getResolveToMatches(n)),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{o.current=!0}),reactExports.useCallback((u,d={})=>{if(warning$1(o.current,navigateEffectWarning),!o.current)return;if(typeof u=="number"){t.go(u);return}let p=resolveTo(u,JSON.parse(s),r,d.relative==="path");i==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:joinPaths([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,s,r,i])}reactExports.createContext(null);function useParams(){let{matches:i}=reactExports.useContext(RouteContext),e=i[i.length-1];return e?e.params:{}}function useResolvedPath(i,{relative:e}={}){let{matches:t}=reactExports.useContext(RouteContext),{pathname:n}=useLocation(),r=JSON.stringify(getResolveToMatches(t));return reactExports.useMemo(()=>resolveTo(i,JSON.parse(r),n,e==="path"),[i,r,n,e])}function useRoutes(i,e){return useRoutesImpl(i,e)}function useRoutesImpl(i,e,t,n){var C;invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r,static:s}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",p=l?l.pathnameBase:"/",g=l&&l.route;{let T=g&&g.path||"";warningOnce(d,!g||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let m=useLocation(),y;if(e){let T=typeof e=="string"?parsePath(e):e;invariant$1(p==="/"||((C=T.pathname)==null?void 0:C.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),y=T}else y=m;let _=y.pathname||"/",E=_;if(p!=="/"){let T=p.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(T.length).join("/")}let S=!s&&t&&t.matches&&t.matches.length>0?t.matches:matchRoutes(i,{pathname:E});warning$1(g||S!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),warning$1(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=_renderMatches(S&&S.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:joinPaths([p,r.encodeLocation?r.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:joinPaths([p,r.encodeLocation?r.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,t,n);return e&&b?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},b):b}function DefaultErrorComponent(){let i=useRouteError(),e=isRouteErrorResponse(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",i),o=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:s},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:s},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),t?reactExports.createElement("pre",{style:r},t):null,o)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:i,match:e,children:t}){let n=reactExports.useContext(DataRouterContext);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:i},t)}function _renderMatches(i,e=[],t=null,n=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let r=i,s=t==null?void 0:t.errors;if(s!=null){let u=r.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);invariant$1(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,u+1))}let o=!1,l=-1;if(t)for(let u=0;u<r.length;u++){let d=r[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:p,errors:g}=t,m=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||m){o=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((u,d,p)=>{let g,m=!1,y=null,_=null;t&&(g=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||defaultErrorElement,o&&(l<0&&p===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,_=null):l===p&&(m=!0,_=d.route.hydrateFallbackElement||null)));let E=e.concat(r.slice(0,p+1)),S=()=>{let b;return g?b=y:m?b=_:d.route.Component?b=reactExports.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,reactExports.createElement(RenderedRoute,{match:d,routeContext:{outlet:u,matches:E,isDataRoute:t!=null},children:b})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?reactExports.createElement(RenderErrorBoundary,{location:t.location,revalidation:t.revalidation,component:y,error:g,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}function getDataRouterConsoleError(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(i){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError(i)),e}function useDataRouterState(i){let e=reactExports.useContext(DataRouterStateContext);return invariant$1(e,getDataRouterConsoleError(i)),e}function useRouteContext(i){let e=reactExports.useContext(RouteContext);return invariant$1(e,getDataRouterConsoleError(i)),e}function useCurrentRouteId(i){let e=useRouteContext(i),t=e.matches[e.matches.length-1];return invariant$1(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var n;let i=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),t=useCurrentRouteId("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function useNavigateStable(){let{router:i}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),t=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{t.current=!0}),reactExports.useCallback(async(r,s={})=>{warning$1(t.current,navigateEffectWarning),t.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:e,...s}))},[i,e])}var alreadyWarned={};function warningOnce(i,e,t){!e&&!alreadyWarned[i]&&(alreadyWarned[i]=!0,warning$1(!1,t))}reactExports.memo(DataRoutes);function DataRoutes({routes:i,future:e,state:t}){return useRoutesImpl(i,void 0,t,e)}function Route(i){invariant$1(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:s=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=i.replace(/^\/*/,"/"),l=reactExports.useMemo(()=>({basename:o,navigator:r,static:s,future:{}}),[o,r,s]);typeof t=="string"&&(t=parsePath(t));let{pathname:u="/",search:d="",hash:p="",state:g=null,key:m="default"}=t,y=reactExports.useMemo(()=>{let _=stripBasename(u,o);return _==null?null:{location:{pathname:_,search:d,hash:p,state:g,key:m},navigationType:n}},[o,u,d,p,g,m,n]);return warning$1(y!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:reactExports.createElement(NavigationContext.Provider,{value:l},reactExports.createElement(LocationContext.Provider,{children:e,value:y}))}function Routes({children:i,location:e}){return useRoutes(createRoutesFromChildren(i),e)}function createRoutesFromChildren(i,e=[]){let t=[];return reactExports.Children.forEach(i,(n,r)=>{if(!reactExports.isValidElement(n))return;let s=[...e,r];if(n.type===reactExports.Fragment){t.push.apply(t,createRoutesFromChildren(n.props.children,s));return}invariant$1(n.type===Route,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$1(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=createRoutesFromChildren(n.props.children,s)),t.push(o)}),t}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(i){return i!=null&&typeof i.tagName=="string"}function isButtonElement(i){return isHtmlElement(i)&&i.tagName.toLowerCase()==="button"}function isFormElement(i){return isHtmlElement(i)&&i.tagName.toLowerCase()==="form"}function isInputElement(i){return isHtmlElement(i)&&i.tagName.toLowerCase()==="input"}function isModifiedEvent(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function shouldProcessLinkClick(i,e){return i.button===0&&(!e||e==="_self")&&!isModifiedEvent(i)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(i){return i!=null&&!supportedFormEncTypes.has(i)?(warning$1(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):i}function getFormSubmissionInfo(i,e){let t,n,r,s,o;if(isFormElement(i)){let l=i.getAttribute("action");n=l?stripBasename(l,e):null,t=i.getAttribute("method")||defaultMethod,r=getFormEncType(i.getAttribute("enctype"))||defaultEncType,s=new FormData(i)}else if(isButtonElement(i)||isInputElement(i)&&(i.type==="submit"||i.type==="image")){let l=i.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=i.getAttribute("formaction")||l.getAttribute("action");if(n=u?stripBasename(u,e):null,t=i.getAttribute("formmethod")||l.getAttribute("method")||defaultMethod,r=getFormEncType(i.getAttribute("formenctype"))||getFormEncType(l.getAttribute("enctype"))||defaultEncType,s=new FormData(l,i),!isFormDataSubmitterSupported()){let{name:d,type:p,value:g}=i;if(p==="image"){let m=d?`${d}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else d&&s.append(d,g)}}else{if(isHtmlElement(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=defaultMethod,n=null,r=defaultEncType,o=i}return s&&r==="text/plain"&&(o=s,s=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:s,body:o}}function invariant2(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function loadRouteModule(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function getKeyedPrefetchLinks(i,e,t){let n=await Promise.all(i.map(async r=>{let s=e.routes[r.route.id];if(s){let o=await loadRouteModule(s,t);return o.links?o.links():[]}return[]}));return dedupeLinkDescriptors(n.flat(1).filter(isHtmlLinkDescriptor).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function getNewMatchesForLinks(i,e,t,n,r,s){let o=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,l=(u,d)=>{var p;return t[d].pathname!==u.pathname||((p=t[d].route.path)==null?void 0:p.endsWith("*"))&&t[d].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,d)=>o(u,d)||l(u,d)):s==="data"?e.filter((u,d)=>{var g;let p=n.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(i,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function getModuleLinkHrefs(i,e,{includeHydrateFallback:t}={}){return dedupeHrefs(i.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function dedupeHrefs(i){return[...new Set(i)]}function sortKeys(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function dedupeLinkDescriptors(i,e){let t=new Set;return new Set(e),i.reduce((n,r)=>{let s=JSON.stringify(sortKeys(r));return t.has(s)||(t.add(s),n.push({key:s,link:r})),n},[])}var NO_BODY_STATUS_CODES=new Set([100,101,204,205]);function singleFetchUrl(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&stripBasename(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function useDataRouterContext2(){let i=reactExports.useContext(DataRouterContext);return invariant2(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function useDataRouterStateContext(){let i=reactExports.useContext(DataRouterStateContext);return invariant2(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let i=reactExports.useContext(FrameworkContext);return invariant2(i,"You must render this element inside a <HydratedRouter> element"),i}function usePrefetchBehavior(i,e){let t=reactExports.useContext(FrameworkContext),[n,r]=reactExports.useState(!1),[s,o]=reactExports.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=e,m=reactExports.useRef(null);reactExports.useEffect(()=>{if(i==="render"&&o(!0),i==="viewport"){let E=b=>{b.forEach(C=>{o(C.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[i]),reactExports.useEffect(()=>{if(n){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[n]);let y=()=>{r(!0)},_=()=>{r(!1),o(!1)};return t?i!=="intent"?[s,m,{}]:[s,m,{onFocus:composeEventHandlers(l,y),onBlur:composeEventHandlers(u,_),onMouseEnter:composeEventHandlers(d,y),onMouseLeave:composeEventHandlers(p,_),onTouchStart:composeEventHandlers(g,y)}]:[!1,m,{}]}function composeEventHandlers(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function PrefetchPageLinks({page:i,...e}){let{router:t}=useDataRouterContext2(),n=reactExports.useMemo(()=>matchRoutes(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?reactExports.createElement(PrefetchPageLinksImpl,{page:i,matches:n,...e}):null}function useKeyedPrefetchLinks(i){let{manifest:e,routeModules:t}=useFrameworkContext(),[n,r]=reactExports.useState([]);return reactExports.useEffect(()=>{let s=!1;return getKeyedPrefetchLinks(i,e,t).then(o=>{s||r(o)}),()=>{s=!0}},[i,e,t]),n}function PrefetchPageLinksImpl({page:i,matches:e,...t}){let n=useLocation(),{manifest:r,routeModules:s}=useFrameworkContext(),{basename:o}=useDataRouterContext2(),{loaderData:l,matches:u}=useDataRouterStateContext(),d=reactExports.useMemo(()=>getNewMatchesForLinks(i,e,u,r,n,"data"),[i,e,u,r,n]),p=reactExports.useMemo(()=>getNewMatchesForLinks(i,e,u,r,n,"assets"),[i,e,u,r,n]),g=reactExports.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let _=new Set,E=!1;if(e.forEach(b=>{var T;let C=r.routes[b.route.id];!C||!C.hasLoader||(!d.some(A=>A.route.id===b.route.id)&&b.route.id in l&&((T=s[b.route.id])!=null&&T.shouldRevalidate)||C.hasClientLoader?E=!0:_.add(b.route.id))}),_.size===0)return[];let S=singleFetchUrl(i,o);return E&&_.size>0&&S.searchParams.set("_routes",e.filter(b=>_.has(b.route.id)).map(b=>b.route.id).join(",")),[S.pathname+S.search]},[o,l,n,r,d,e,i,s]),m=reactExports.useMemo(()=>getModuleLinkHrefs(p,r),[p,r]),y=useKeyedPrefetchLinks(p);return reactExports.createElement(reactExports.Fragment,null,g.map(_=>reactExports.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),m.map(_=>reactExports.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),y.map(({key:_,link:E})=>reactExports.createElement("link",{key:_,...E})))}function mergeRefs(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.5.1")}catch{}function BrowserRouter({basename:i,children:e,window:t}){let n=reactExports.useRef();n.current==null&&(n.current=createBrowserHistory({window:t,v5Compat:!0}));let r=n.current,[s,o]=reactExports.useState({action:r.action,location:r.location}),l=reactExports.useCallback(u=>{reactExports.startTransition(()=>o(u))},[o]);return reactExports.useLayoutEffect(()=>r.listen(l),[r,l]),reactExports.createElement(Router,{basename:i,children:e,location:s.location,navigationType:s.action,navigator:r})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:s,replace:o,state:l,target:u,to:d,preventScrollReset:p,viewTransition:g,...m},y){let{basename:_}=reactExports.useContext(NavigationContext),E=typeof d=="string"&&ABSOLUTE_URL_REGEX2.test(d),S,b=!1;if(typeof d=="string"&&E&&(S=d,isBrowser$1))try{let F=new URL(window.location.href),U=d.startsWith("//")?new URL(F.protocol+d):new URL(d),q=stripBasename(U.pathname,_);U.origin===F.origin&&q!=null?d=q+U.search+U.hash:b=!0}catch{warning$1(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=useHref(d,{relative:r}),[T,A,N]=usePrefetchBehavior(n,m),L=useLinkClickHandler(d,{replace:o,state:l,target:u,preventScrollReset:p,relative:r,viewTransition:g});function k(F){e&&e(F),F.defaultPrevented||L(F)}let j=reactExports.createElement("a",{...m,...N,href:S||C,onClick:b||s?e:k,ref:mergeRefs(y,A),target:u,"data-discover":!E&&t==="render"?"true":void 0});return T&&!E?reactExports.createElement(reactExports.Fragment,null,j,reactExports.createElement(PrefetchPageLinks,{page:C})):j});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:s,to:o,viewTransition:l,children:u,...d},p){let g=useResolvedPath(o,{relative:d.relative}),m=useLocation(),y=reactExports.useContext(DataRouterStateContext),{navigator:_,basename:E}=reactExports.useContext(NavigationContext),S=y!=null&&useViewTransitionState(g)&&l===!0,b=_.encodeLocation?_.encodeLocation(g).pathname:g.pathname,C=m.pathname,T=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(C=C.toLowerCase(),T=T?T.toLowerCase():null,b=b.toLowerCase()),T&&E&&(T=stripBasename(T,E)||T);const A=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let N=C===b||!r&&C.startsWith(b)&&C.charAt(A)==="/",L=T!=null&&(T===b||!r&&T.startsWith(b)&&T.charAt(b.length)==="/"),k={isActive:N,isPending:L,isTransitioning:S},j=N?e:void 0,F;typeof n=="function"?F=n(k):F=[n,N?"active":null,L?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let U=typeof s=="function"?s(k):s;return reactExports.createElement(Link,{...d,"aria-current":j,className:F,ref:p,style:U,to:o,viewTransition:l},typeof u=="function"?u(k):u)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:s,method:o=defaultMethod,action:l,onSubmit:u,relative:d,preventScrollReset:p,viewTransition:g,...m},y)=>{let _=useSubmit(),E=useFormAction(l,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",b=typeof l=="string"&&ABSOLUTE_URL_REGEX2.test(l),C=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let A=T.nativeEvent.submitter,N=(A==null?void 0:A.getAttribute("formmethod"))||o;_(A||T.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:r,state:s,relative:d,preventScrollReset:p,viewTransition:g})};return reactExports.createElement("form",{ref:y,method:S,action:E,onSubmit:n?u:C,...m,"data-discover":!b&&i==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(i){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError2(i)),e}function useLinkClickHandler(i,{target:e,replace:t,state:n,preventScrollReset:r,relative:s,viewTransition:o}={}){let l=useNavigate(),u=useLocation(),d=useResolvedPath(i,{relative:s});return reactExports.useCallback(p=>{if(shouldProcessLinkClick(p,e)){p.preventDefault();let g=t!==void 0?t:createPath(u)===createPath(d);l(i,{replace:g,state:n,preventScrollReset:r,relative:s,viewTransition:o})}},[u,l,d,t,n,e,i,r,s,o])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:i}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),t=useRouteId();return reactExports.useCallback(async(n,r={})=>{let{action:s,method:o,encType:l,formData:u,body:d}=getFormSubmissionInfo(n,e);if(r.navigate===!1){let p=r.fetcherKey||getUniqueFetcherId();await i.fetch(p,t,r.action||s,{preventScrollReset:r.preventScrollReset,formData:u,body:d,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await i.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:u,body:d,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,e,t])}function useFormAction(i,{relative:e}={}){let{basename:t}=reactExports.useContext(NavigationContext),n=reactExports.useContext(RouteContext);invariant$1(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),s={...useResolvedPath(i||".",{relative:e})},o=useLocation();if(i==null){s.search=o.search;let l=new URLSearchParams(s.search),u=l.getAll("index");if(u.some(p=>p==="")){l.delete("index"),u.filter(g=>g).forEach(g=>l.append("index",g));let p=l.toString();s.search=p?`?${p}`:""}}return(!i||i===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:joinPaths([t,s.pathname])),createPath(s)}function useViewTransitionState(i,e={}){let t=reactExports.useContext(ViewTransitionContext);invariant$1(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=useDataRouterContext3("useViewTransitionState"),r=useResolvedPath(i,{relative:e.relative});if(!t.isTransitioning)return!1;let s=stripBasename(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=stripBasename(t.nextLocation.pathname,n)||t.nextLocation.pathname;return matchPath(r.pathname,o)!=null||matchPath(r.pathname,s)!=null}new TextEncoder;[...NO_BODY_STATUS_CODES];const LayoutGroupContext=reactExports.createContext({});function useConstant(i){const e=reactExports.useRef(null);return e.current===null&&(e.current=i()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null),MotionConfigContext=reactExports.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=t.offsetParent,r=n instanceof HTMLElement&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:i,isPresent:e,anchorX:t}){const n=reactExports.useId(),r=reactExports.useRef(null),s=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:p,right:g}=s.current;if(e||!r.current||!l||!u)return;const m=t==="left"?`left: ${p}`:`right: ${g}`;r.current.dataset.motionPopId=n;const y=document.createElement("style");return o&&(y.nonce=o),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:r,sizeRef:s,children:reactExports.cloneElement(i,{ref:r})})}const PresenceChild=({children:i,initial:e,isPresent:t,onExitComplete:n,custom:r,presenceAffectsLayout:s,mode:o,anchorX:l})=>{const u=useConstant(newChildrenMap),d=reactExports.useId();let p=!0,g=reactExports.useMemo(()=>(p=!1,{id:d,initial:e,isPresent:t,custom:r,onExitComplete:m=>{u.set(m,!0);for(const y of u.values())if(!y)return;n&&n()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[t,u,n]);return s&&p&&(g={...g}),reactExports.useMemo(()=>{u.forEach((m,y)=>u.set(y,!1))},[t]),reactExports.useEffect(()=>{!t&&!u.size&&n&&n()},[t]),o==="popLayout"&&(i=jsxRuntimeExports.jsx(PopChild,{isPresent:t,anchorX:l,children:i})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:g,children:i})};function newChildrenMap(){return new Map}function usePresence(i=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=reactExports.useId();reactExports.useEffect(()=>{if(i)return r(s)},[i]);const o=reactExports.useCallback(()=>i&&n&&n(s),[s,n,i]);return!t&&n?[!1,o]:[!0]}const getChildKey=i=>i.key||"";function onlyElements(i){const e=[];return reactExports.Children.forEach(i,t=>{reactExports.isValidElement(t)&&e.push(t)}),e}const AnimatePresence=({children:i,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1,anchorX:l="left"})=>{const[u,d]=usePresence(o),p=reactExports.useMemo(()=>onlyElements(i),[i]),g=o&&!u?[]:p.map(getChildKey),m=reactExports.useRef(!0),y=reactExports.useRef(p),_=useConstant(()=>new Map),[E,S]=reactExports.useState(p),[b,C]=reactExports.useState(p);useIsomorphicLayoutEffect(()=>{m.current=!1,y.current=p;for(let N=0;N<b.length;N++){const L=getChildKey(b[N]);g.includes(L)?_.delete(L):_.get(L)!==!0&&_.set(L,!1)}},[b,g.length,g.join("-")]);const T=[];if(p!==E){let N=[...p];for(let L=0;L<b.length;L++){const k=b[L],j=getChildKey(k);g.includes(j)||(N.splice(L,0,k),T.push(k))}return s==="wait"&&T.length&&(N=T),C(onlyElements(N)),S(p),null}const{forceRender:A}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:b.map(N=>{const L=getChildKey(N),k=o&&!u?!1:p===b||g.includes(L),j=()=>{if(_.has(L))_.set(L,!0);else return;let F=!0;_.forEach(U=>{U||(F=!1)}),F&&(A==null||A(),C(y.current),o&&(d==null||d()),n&&n())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:k,initial:!m.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:s,onExitComplete:k?void 0:j,anchorX:l,children:N},L)})})};function addUniqueItem(i,e){i.indexOf(e)===-1&&i.push(e)}function removeItem(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}let warning=()=>{},invariant=()=>{};const MotionGlobalConfig={useManualTiming:!1};function memo(i){let e;return()=>(e===void 0&&(e=i()),e)}const noop=i=>i,progress=(i,e,t)=>{const n=e-i;return n===0?1:(t-i)/n};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=i=>i*1e3,millisecondsToSeconds=i=>i/1e3;function velocityPerSecond(i,e){return e?i*(1e3/e):0}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupAnimation{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map(r=>{if(supportsScrollTimeline()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GroupAnimationWithThen extends GroupAnimation{then(e,t){return this.finished.finally(e).then(()=>{})}}const isBezierDefinition=i=>Array.isArray(i)&&typeof i[0]=="number",supportsFlags={};function memoSupports(i,e){const t=memo(i);return()=>supportsFlags[e]??t()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),generateLinearEasing=(i,e,t=10)=>{let n="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)n+=i(s/(r-1))+", ";return`linear(${n.substring(0,n.length-2)})`},cubicBezierAsString=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(i,e){if(i)return typeof i=="function"&&supportsLinearEasing()?generateLinearEasing(i,e):isBezierDefinition(i)?cubicBezierAsString(i):Array.isArray(i)?i.map(t=>mapEasingToNativeEasing(t,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[i]}function startWaapiAnimation(i,e,t,{delay:n=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:u}={},d=void 0){const p={[e]:t};u&&(p.offset=u);const g=mapEasingToNativeEasing(l,r);return Array.isArray(g)&&(p.easing=g),i.animate(p,{delay:n,duration:r,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal",pseudoElement:d})}function isGenerator(i){return typeof i=="function"&&"applyToOptions"in i}function getValueTransition(i,e){return(i==null?void 0:i[e])??(i==null?void 0:i.default)??i}const maxGeneratorDuration=2e4;function calcGeneratorDuration(i){let e=0;const t=50;let n=i.next(e);for(;!n.done&&e<maxGeneratorDuration;)e+=t,n=i.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(i,e=100,t){const n=t({...i,keyframes:[0,e]}),r=Math.min(calcGeneratorDuration(n),maxGeneratorDuration);return{type:"keyframes",ease:s=>n.next(r*s).value/e,duration:millisecondsToSeconds(r)}}function isWaapiSupportedEasing(i){return!!(typeof i=="function"&&supportsLinearEasing()||!i||typeof i=="string"&&(i in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(i)||Array.isArray(i)&&i.every(isWaapiSupportedEasing))}function attachTimeline(i,e){i.timeline=e,i.onfinish=null}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"];function createRenderStep(i,e){let t=new Set,n=new Set,r=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(p){o.has(p)&&(d.schedule(p),i()),p(l)}const d={schedule:(p,g=!1,m=!1)=>{const _=m&&r?t:n;return g&&o.add(p),_.has(p)||_.add(p),p},cancel:p=>{n.delete(p),o.delete(p)},process:p=>{if(l=p,r){s=!0;return}r=!0,[t,n]=[n,t],t.forEach(u),t.clear(),r=!1,s&&(s=!1,d.process(p))}};return d}const maxElapsed$1=40;function createRenderBatcher(i,e){let t=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=stepsOrder.reduce((b,C)=>(b[C]=createRenderStep(s),b),{}),{read:l,resolveKeyframes:u,update:d,preRender:p,render:g,postRender:m}=o,y=()=>{const b=performance.now();t=!1,r.delta=n?1e3/60:Math.max(Math.min(b-r.timestamp,maxElapsed$1),1),r.timestamp=b,r.isProcessing=!0,l.process(r),u.process(r),d.process(r),p.process(r),g.process(r),m.process(r),r.isProcessing=!1,t&&e&&(n=!1,i(y))},_=()=>{t=!0,n=!0,r.isProcessing||i(y)};return{schedule:stepsOrder.reduce((b,C)=>{const T=o[C];return b[C]=(A,N=!1,L=!1)=>(t||_(),T.schedule(A,N,L)),b},{}),cancel:b=>{for(let C=0;C<stepsOrder.length;C++)o[stepsOrder[C]].cancel(b)},state:r,steps:o}}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now$2;function clearTime(){now$2=void 0}const time={now:()=>(now$2===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$2),set:i=>{now$2=i,queueMicrotask(clearTime)}},isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(i){return i==="x"||i==="y"?isDragging[i]?null:(isDragging[i]=!0,()=>{isDragging[i]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function resolveElements(i,e,t){if(i instanceof EventTarget)return[i];if(typeof i=="string"){const r=document.querySelectorAll(i);return r?Array.from(r):[]}return Array.from(i)}function setupGesture(i,e){const t=resolveElements(i),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[t,r,()=>n.abort()]}function isValidHover(i){return!(i.pointerType==="touch"||isDragActive())}function hover(i,e,t={}){const[n,r,s]=setupGesture(i,t),o=l=>{if(!isValidHover(l))return;const{target:u}=l,d=e(u,l);if(typeof d!="function"||!u)return;const p=g=>{isValidHover(g)&&(d(g),u.removeEventListener("pointerleave",p))};u.addEventListener("pointerleave",p,r)};return n.forEach(l=>{l.addEventListener("pointerenter",o,r)}),s}const isNodeOrChild=(i,e)=>e?i===e?!0:isNodeOrChild(i,e.parentElement):!1,isPrimaryPointer=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(i){return focusableElements.has(i.tagName)||i.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(i){return e=>{e.key==="Enter"&&i(e)}}function firePointerEvent(i,e){i.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(i,e)=>{const t=i.currentTarget;if(!t)return;const n=filterEvents(()=>{if(isPressing.has(t))return;firePointerEvent(t,"down");const r=filterEvents(()=>{firePointerEvent(t,"up")}),s=()=>firePointerEvent(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function isValidPressEvent(i){return isPrimaryPointer(i)&&!isDragActive()}function press(i,e,t={}){const[n,r,s]=setupGesture(i,t),o=l=>{const u=l.currentTarget;if(!isValidPressEvent(l)||isPressing.has(u))return;isPressing.add(u);const d=e(u,l),p=(y,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),!(!isValidPressEvent(y)||!isPressing.has(u))&&(isPressing.delete(u),typeof d=="function"&&d(y,{success:_}))},g=y=>{p(y,u===window||u===document||t.useGlobalTarget||isNodeOrChild(u,y.target))},m=y=>{p(y,!1)};window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",m,r)};return n.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),l instanceof HTMLElement&&(l.addEventListener("focus",d=>enableKeyboardPress(d,r)),!isElementKeyboardAccessible(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}const MAX_VELOCITY_DELTA=30,isFloat=i=>!isNaN(parseFloat(i)),collectMotionValues={current:void 0};class MotionValue{constructor(e,t={}){this.version="12.7.4",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,r=!0)=>{const s=time.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new SubscriptionManager);const n=this.events[e].add(t);return e==="change"?()=>{n(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return collectMotionValues.current&&collectMotionValues.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(i,e){return new MotionValue(i,e)}const LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const i in featureProps)featureDefinitions[i]={isEnabled:e=>featureProps[i].some(t=>!!e[t])};function loadFeatures(i){for(const e in i)featureDefinitions[e]={...featureDefinitions[e],...i[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||validMotionProps.has(i)}let shouldForward=i=>!isValidMotionProp(i);function loadExternalIsValidProp(i){i&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):i(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(i,e,t){const n={};for(const r in i)r==="values"&&typeof i.values=="object"||(shouldForward(r)||t===!0&&isValidMotionProp(r)||!e&&!isValidMotionProp(r)||i.draggable&&r.startsWith("onDrag"))&&(n[r]=i[r]);return n}function createDOMMotionComponentProxy(i){if(typeof Proxy>"u")return i;const e=new Map,t=(...n)=>i(...n);return new Proxy(t,{get:(n,r)=>r==="create"?i:(e.has(r)||e.set(r,i(r)),e.get(r))})}const MotionContext=reactExports.createContext({});function isAnimationControls(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function isVariantLabel(i){return typeof i=="string"||Array.isArray(i)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(i){return isAnimationControls(i.animate)||variantProps.some(e=>isVariantLabel(i[e]))}function isVariantNode(i){return!!(isControllingVariants(i)||i.variants)}function getCurrentTreeVariants(i,e){if(isControllingVariants(i)){const{initial:t,animate:n}=i;return{initial:t===!1||isVariantLabel(t)?t:void 0,animate:isVariantLabel(n)?n:void 0}}return i.inherit!==!1?e:{}}function useCreateMotionContext(i){const{initial:e,animate:t}=getCurrentTreeVariants(i,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:t}),[variantLabelsAsDependency(e),variantLabelsAsDependency(t)])}function variantLabelsAsDependency(i){return Array.isArray(i)?i.join(" "):i}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function useMotionRef(i,e,t){return reactExports.useCallback(n=>{n&&i.onMount&&i.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):isRefObject(t)&&(t.current=n))},[e])}const camelToDash=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(i,e,t,n,r){var E,S;const{visualElement:s}=reactExports.useContext(MotionContext),o=reactExports.useContext(LazyContext),l=reactExports.useContext(PresenceContext),u=reactExports.useContext(MotionConfigContext).reducedMotion,d=reactExports.useRef(null);n=n||o.renderer,!d.current&&n&&(d.current=n(i,{visualState:e,parent:s,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const p=d.current,g=reactExports.useContext(SwitchLayoutGroupContext);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&createProjectionNode$1(d.current,t,r,g);const m=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{p&&m.current&&p.update(t,l)});const y=t[optimizedAppearDataAttribute],_=reactExports.useRef(!!y&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,y))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,y)));return useIsomorphicLayoutEffect(()=>{p&&(m.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),microtask.render(p.render),_.current&&p.animationState&&p.animationState.animateChanges())}),reactExports.useEffect(()=>{p&&(!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,y)}),_.current=!1))}),p}function createProjectionNode$1(i,e,t,n){const{layoutId:r,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:p}=e;i.projection=new t(i.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(i.parent)),i.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||l&&isRefObject(l),visualElement:i,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:u,layoutRoot:d})}function getClosestProjectingNode(i){if(i)return i.options.allowProjection!==!1?i.projection:getClosestProjectingNode(i.parent)}function createRendererMotionComponent({preloadedFeatures:i,createVisualElement:e,useRender:t,useVisualState:n,Component:r}){i&&loadFeatures(i);function s(l,u){let d;const p={...reactExports.useContext(MotionConfigContext),...l,layoutId:useLayoutId(l)},{isStatic:g}=p,m=useCreateMotionContext(l),y=n(l,g);if(!g&&isBrowser){useStrictMode();const _=getProjectionFunctionality(p);d=_.MeasureLayout,m.visualElement=useVisualElement(r,y,p,e,_.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:m,children:[d&&m.visualElement?jsxRuntimeExports.jsx(d,{visualElement:m.visualElement,...p}):null,t(r,l,useMotionRef(y,m.visualElement,u),y,g,m.visualElement)]})}s.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const o=reactExports.forwardRef(s);return o[motionComponentSymbol]=r,o}function useLayoutId({layoutId:i}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&i!==void 0?e+"-"+i:i}function useStrictMode(i,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(i){const{drag:e,layout:t}=featureDefinitions;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(i)||t!=null&&t.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const checkStringStartsWith=i=>e=>typeof e=="string"&&e.startsWith(i),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=i=>startsAsVariableToken(i)?singleCssVariableRegex.test(i.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,scaleCorrectors={};function addScaleCorrector(i){for(const e in i)scaleCorrectors[e]=i[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder);function isForcedMotionValue(i,{layout:e,layoutId:t}){return transformProps.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!scaleCorrectors[i]||i==="opacity")}const isMotionValue=i=>!!(i&&i.getVelocity),getValueAsType=(i,e)=>e&&typeof i=="number"?e.transform(i):i,clamp$2=(i,e,t)=>t>e?e:t<i?i:t,number={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},alpha={...number,transform:i=>clamp$2(0,1,i)},scale={...number,default:1},createUnitType=i=>({test:e=>typeof e=="string"&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:i=>percent.parse(i)/100,transform:i=>percent.transform(i*100)},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(i,e,t){let n="",r=!0;for(let s=0;s<numTransforms;s++){const o=transformPropOrder[s],l=i[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||t){const d=getValueAsType(l,numberValueTypes[o]);if(!u){r=!1;const p=translateAlias[o]||o;n+=`${p}(${d}) `}t&&(e[o]=d)}}return n=n.trim(),t?n=t(e,r?"":n):r&&(n="none"),n}function buildHTMLStyles(i,e,t){const{style:n,vars:r,transformOrigin:s}=i;let o=!1,l=!1;for(const u in e){const d=e[u];if(transformProps.has(u)){o=!0;continue}else if(isCSSVariableName(u)){r[u]=d;continue}else{const p=getValueAsType(d,numberValueTypes[u]);u.startsWith("origin")?(l=!0,s[u]=p):n[u]=p}}if(e.transform||(o||t?n.transform=buildTransform(e,i.transform,t):n.transform&&(n.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:p=0}=s;n.transformOrigin=`${u} ${d} ${p}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(i,e,t){for(const n in e)!isMotionValue(e[n])&&!isForcedMotionValue(n,t)&&(i[n]=e[n])}function useInitialMotionValues({transformTemplate:i},e){return reactExports.useMemo(()=>{const t=createHtmlRenderState();return buildHTMLStyles(t,e,i),Object.assign({},t.vars,t.style)},[e])}function useStyle(i,e){const t=i.style||{},n={};return copyRawValuesOnly(n,t,i),Object.assign(n,useInitialMotionValues(i,e)),n}function useHTMLProps(i,e){const t={},n=useStyle(i,e);return i.drag&&i.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(t.tabIndex=0),t.style=n,t}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(i){return typeof i!="string"||i.includes("-")?!1:!!(lowercaseSVGElements.indexOf(i)>-1||/[A-Z]/u.test(i))}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(i,e,t=1,n=0,r=!0){i.pathLength=1;const s=r?dashKeys:camelKeys;i[s.offset]=px.transform(-n);const o=px.transform(e),l=px.transform(t);i[s.array]=`${o} ${l}`}function calcOrigin$1(i,e,t){return typeof i=="string"?i:px.transform(e+t*i)}function calcSVGTransformOrigin(i,e,t){const n=calcOrigin$1(e,i.x,i.width),r=calcOrigin$1(t,i.y,i.height);return`${n} ${r}`}function buildSVGAttrs(i,{attrX:e,attrY:t,attrScale:n,originX:r,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...d},p,g){if(buildHTMLStyles(i,d,g),p){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:m,style:y,dimensions:_}=i;m.transform&&(_&&(y.transform=m.transform),delete m.transform),_&&(r!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=calcSVGTransformOrigin(_,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),n!==void 0&&(m.scale=n),o!==void 0&&buildSVGPath(m,o,l,u,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=i=>typeof i=="string"&&i.toLowerCase()==="svg";function useSVGProps(i,e,t,n){const r=reactExports.useMemo(()=>{const s=createSvgRenderState();return buildSVGAttrs(s,e,isSVGTag(n),i.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(i.style){const s={};copyRawValuesOnly(s,i.style,i),r.style={...s,...r.style}}return r}function createUseRender(i=!1){return(t,n,r,{latestValues:s},o)=>{const u=(isSVGComponent(t)?useSVGProps:useHTMLProps)(n,s,o,t),d=filterProps(n,typeof t=="string",i),p=t!==reactExports.Fragment?{...d,...u,ref:r}:{},{children:g}=n,m=reactExports.useMemo(()=>isMotionValue(g)?g.get():g,[g]);return reactExports.createElement(t,{...p,children:m})}}function getValueState(i){const e=[{},{}];return i==null||i.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function resolveVariantFromProps(i,e,t,n){if(typeof e=="function"){const[r,s]=getValueState(n);e=e(t!==void 0?t:i.custom,r,s)}if(typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"){const[r,s]=getValueState(n);e=e(t!==void 0?t:i.custom,r,s)}return e}const isKeyframesTarget=i=>Array.isArray(i),isCustomValue=i=>!!(i&&typeof i=="object"&&i.mix&&i.toValue),resolveFinalValueInKeyframes=i=>isKeyframesTarget(i)?i[i.length-1]||0:i;function resolveMotionValue(i){const e=isMotionValue(i)?i.get():i;return isCustomValue(e)?e.toValue():e}function makeState({scrapeMotionValuesFromProps:i,createRenderState:e,onUpdate:t},n,r,s){const o={latestValues:makeLatestValues(n,r,s,i),renderState:e()};return t&&(o.onMount=l=>t({props:n,current:l,...o}),o.onUpdate=l=>t(l)),o}const makeUseVisualState=i=>(e,t)=>{const n=reactExports.useContext(MotionContext),r=reactExports.useContext(PresenceContext),s=()=>makeState(i,e,n,r);return t?s():useConstant(s)};function makeLatestValues(i,e,t,n){const r={},s=n(i,{});for(const m in s)r[m]=resolveMotionValue(s[m]);let{initial:o,animate:l}=i;const u=isControllingVariants(i),d=isVariantNode(i);e&&d&&!u&&i.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||o===!1;const g=p?l:o;if(g&&typeof g!="boolean"&&!isAnimationControls(g)){const m=Array.isArray(g)?g:[g];for(let y=0;y<m.length;y++){const _=resolveVariantFromProps(i,m[y]);if(_){const{transitionEnd:E,transition:S,...b}=_;for(const C in b){let T=b[C];if(Array.isArray(T)){const A=p?T.length-1:0;T=T[A]}T!==null&&(r[C]=T)}for(const C in E)r[C]=E[C]}}}return r}function scrapeMotionValuesFromProps$1(i,e,t){var s;const{style:n}=i,r={};for(const o in n)(isMotionValue(n[o])||e.style&&isMotionValue(e.style[o])||isForcedMotionValue(o,i)||((s=t==null?void 0:t.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(r[o]=n[o]);return r}const htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function updateSVGDimensions(i,e){try{e.dimensions=typeof i.getBBox=="function"?i.getBBox():i.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function renderHTML(i,{style:e,vars:t},n,r){Object.assign(i.style,e,r&&r.getProjectionStyles(n));for(const s in t)i.style.setProperty(s,t[s])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(i,e,t,n){renderHTML(i,e,void 0,n);for(const r in e.attrs)i.setAttribute(camelCaseAttributes.has(r)?r:camelToDash(r),e.attrs[r])}function scrapeMotionValuesFromProps(i,e,t){const n=scrapeMotionValuesFromProps$1(i,e,t);for(const r in i)if(isMotionValue(i[r])||isMotionValue(e[r])){const s=transformPropOrder.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=i[r]}return n}const layoutProps=["x","y","width","height","cx","cy","r"],svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onUpdate:({props:i,prevProps:e,current:t,renderState:n,latestValues:r})=>{if(!t)return;let s=!!i.drag;if(!s){for(const l in r)if(transformProps.has(l)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let l=0;l<layoutProps.length;l++){const u=layoutProps[l];i[u]!==e[u]&&(o=!0)}o&&frame.read(()=>{updateSVGDimensions(t,n),frame.render(()=>{buildSVGAttrs(n,r,isSVGTag(t.tagName),i.transformTemplate),renderSVG(t,n)})})}})};function createMotionComponentFactory(i,e){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...isSVGComponent(n)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:i,useRender:createUseRender(r),createVisualElement:e,Component:n};return createRendererMotionComponent(o)}}function resolveVariant(i,e,t){const n=i.getProps();return resolveVariantFromProps(n,e,t!==void 0?t:n.custom,i)}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]);function setMotionValue(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,motionValue(t))}function setTarget(i,e){const t=resolveVariant(i,e);let{transitionEnd:n={},transition:r={},...s}=t||{};s={...s,...n};for(const o in s){const l=resolveFinalValueInKeyframes(s[o]);setMotionValue(i,o,l)}}function isWillChangeMotionValue(i){return!!(isMotionValue(i)&&i.add)}function addValueToWillChange(i,e){const t=i.getValue("willChange");if(isWillChangeMotionValue(t))return t.add(e);if(!t&&MotionGlobalConfig.WillChange){const n=new MotionGlobalConfig.WillChange("auto");i.addValue("willChange",n),n.add(e)}}function getOptimisedAppearId(i){return i.props[optimizedAppearDataAttribute]}const calcBezier=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(i,e,t,n,r){let s,o,l=0;do o=e+(t-e)/2,s=calcBezier(o,n,r)-i,s>0?t=o:e=o;while(Math.abs(s)>subdivisionPrecision&&++l<subdivisionMaxIterations);return o}function cubicBezier(i,e,t,n){if(i===e&&t===n)return noop;const r=s=>binarySubdivide(s,0,1,i,t);return s=>s===0||s===1?s:calcBezier(r(s),e,n)}const mirrorEasing=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,reverseEasing=i=>e=>1-i(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=i=>(i*=2)<1?.5*backIn(i):.5*(2-Math.pow(2,-10*(i-1))),circIn=i=>1-Math.sin(Math.acos(i)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=i=>/^0[^.\s]+$/u.test(i);function isNone(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||isZeroValueString(i):!0}const sanitize=i=>Math.round(i*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(i){return i==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(i,e)=>t=>!!(typeof t=="string"&&singleColorRegex.test(t)&&t.startsWith(i)||e&&!isNullish(t)&&Object.prototype.hasOwnProperty.call(t,e)),splitColor=(i,e,t)=>n=>{if(typeof n!="string")return n;const[r,s,o,l]=n.match(floatRegex);return{[i]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},clampRgbUnit=i=>clamp$2(0,255,i),rgbUnit={...number,transform:i=>Math.round(clampRgbUnit(i))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:n=1})=>"rgba("+rgbUnit.transform(i)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(t)+", "+sanitize(alpha.transform(n))+")"};function parseHex(i){let e="",t="",n="",r="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),n=i.substring(5,7),r=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),n=i.substring(3,4),r=i.substring(4,5),e+=e,t+=t,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(i)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(t))+", "+sanitize(alpha.transform(n))+")"},color={test:i=>rgba.test(i)||hex.test(i)||hsla.test(i),parse:i=>rgba.test(i)?rgba.parse(i):hsla.test(i)?hsla.parse(i):hex.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?rgba.transform(i):hsla.transform(i)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(i){var e,t;return isNaN(i)&&typeof i=="string"&&(((e=i.match(floatRegex))==null?void 0:e.length)||0)+(((t=i.match(colorRegex))==null?void 0:t.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(i){const e=i.toString(),t=[],n={color:[],number:[],var:[]},r=[];let s=0;const l=e.replace(complexRegex,u=>(color.test(u)?(n.color.push(s),r.push(COLOR_TOKEN),t.push(color.parse(u))):u.startsWith(VAR_FUNCTION_TOKEN)?(n.var.push(s),r.push(VAR_TOKEN),t.push(u)):(n.number.push(s),r.push(NUMBER_TOKEN),t.push(parseFloat(u))),++s,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:t,split:l,indexes:n,types:r}}function parseComplexValue(i){return analyseComplexValue(i).values}function createTransformer(i){const{split:e,types:t}=analyseComplexValue(i),n=e.length;return r=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],r[o]!==void 0){const l=t[o];l===NUMBER_TOKEN?s+=sanitize(r[o]):l===COLOR_TOKEN?s+=color.transform(r[o]):s+=r[o]}return s}}const convertNumbersToZero=i=>typeof i=="number"?0:i;function getAnimatableNone$1(i){const e=parseComplexValue(i);return createTransformer(i)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[n]=t.match(floatRegex)||[];if(!n)return i;const r=t.replace(n,"");let s=maxDefaults.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+r+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:i=>{const e=i.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):i}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=i=>defaultValueTypes[i];function getAnimatableNone(i,e){let t=getDefaultValueType(i);return t!==filter&&(t=complex),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(i,e,t){let n=0,r;for(;n<i.length&&!r;){const s=i[n];typeof s=="string"&&!invalidTemplates.has(s)&&analyseComplexValue(s).values.length&&(r=i[n]),n++}if(r&&t)for(const s of e)i[s]=getAnimatableNone(t,r)}const radToDeg$1=i=>i*180/Math.PI,rotate=i=>{const e=radToDeg$1(Math.atan2(i[1],i[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate,rotateZ:rotate,skewX:i=>radToDeg$1(Math.atan(i[1])),skewY:i=>radToDeg$1(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},rebaseAngle=i=>(i=i%360,i<0&&(i+=360),i),rotateZ=rotate,scaleX=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),scaleY=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:i=>(scaleX(i)+scaleY(i))/2,rotateX:i=>rebaseAngle(radToDeg$1(Math.atan2(i[6],i[5]))),rotateY:i=>rebaseAngle(radToDeg$1(Math.atan2(-i[2],i[0]))),rotateZ,rotate:rotateZ,skewX:i=>radToDeg$1(Math.atan(i[4])),skewY:i=>radToDeg$1(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function defaultTransformValue(i){return i.includes("scale")?1:0}function parseValueFromTransform(i,e){if(!i||i==="none")return defaultTransformValue(e);const t=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(t)n=matrix3dParsers,r=t;else{const l=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=matrix2dParsers,r=l}if(!r)return defaultTransformValue(e);const s=n[e],o=r[1].split(",").map(convertTransformToNumber);return typeof s=="function"?s(o):o[s]}const readTransformValue=(i,e)=>{const{transform:t="none"}=getComputedStyle(i);return parseValueFromTransform(t,e)};function convertTransformToNumber(i){return parseFloat(i.trim())}const isNumOrPxType=i=>i===number||i===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(i=>!transformKeys.has(i));function removeNonTranslationalTransform(i){const e=[];return nonTranslationalTransformKeys.forEach(t=>{const n=i.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:(i,{transform:e})=>parseValueFromTransform(e,"x"),y:(i,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const i=Array.from(toResolve).filter(n=>n.needsMeasurement),e=new Set(i.map(n=>n.element)),t=new Map;e.forEach(n=>{const r=removeNonTranslationalTransform(n);r.length&&(t.set(n,r),n.render())}),i.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=t.get(n);r&&r.forEach(([s,o])=>{var l;(l=n.getValue(s))==null||l.set(o)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(i=>i.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(e,t,n,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&t){const u=n.readValue(t,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const isNumericalString=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i),splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(i){const e=splitCSSVariableRegex.exec(i);if(!e)return[,];const[,t,n,r]=e;return[`--${t??n}`,r]}function getVariableValue(i,e,t=1){const[n,r]=parseCSSVariable(i);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return isNumericalString(o)?parseFloat(o):o}return isCSSVariableToken(r)?getVariableValue(r,e,t+1):r}const testValueType=i=>e=>e.test(i),auto={test:i=>i==="auto",parse:i=>i},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=i=>dimensionValueTypes.find(testValueType(i));class DOMKeyframesResolver extends KeyframeResolver{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),isCSSVariableToken(d))){const p=getVariableValue(d,t.current);p!==void 0&&(e[u]=p),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(n)||e.length!==2)return;const[r,s]=e,o=findDimensionValueType(r),l=findDimensionValueType(s);if(o!==l)if(isNumOrPxType(o)&&isNumOrPxType(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)isNone(e[r])&&n.push(r);n.length&&makeNoneKeyframesAnimatable(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var l;const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=n.length-1,o=n[s];n[s]=positionalValues[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}const isAnimatable=(i,e)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(complex.test(i)||i==="0")&&!i.startsWith("url("));function hasKeyframesChanged(i){const e=i[0];if(i.length===1)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e)return!0}function canAnimate(i,e,t,n){const r=i[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=i[i.length-1],o=isAnimatable(r,e),l=isAnimatable(s,e);return!o||!l?!1:hasKeyframesChanged(i)||(t==="spring"||isGenerator(t))&&n}const isNotNull=i=>i!==null;function getFinalKeyframe(i,{repeat:e,repeatType:t="loop"},n){const r=i.filter(isNotNull),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||n===void 0?r[s]:n}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:s,delay:o,onComplete:l,onUpdate:u,isGenerator:d}=this.options;if(!d&&!canAnimate(e,n,r,s))if(o)this.options.duration=0;else{u&&u(getFinalKeyframe(e,this.options,t)),l&&l(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,t);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...p},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const mixNumber$1=(i,e,t)=>i+(e-i)*t;function hueToRgb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function hslaToRgba({hue:i,saturation:e,lightness:t,alpha:n}){i/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,u=2*t-l;r=hueToRgb(u,l,i+1/3),s=hueToRgb(u,l,i),o=hueToRgb(u,l,i-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function mixImmediate(i,e){return t=>t>0?e:i}const mixLinearColor=(i,e,t)=>{const n=i*i,r=t*(e*e-n)+n;return r<0?0:Math.sqrt(r)},colorTypes=[hex,rgba,hsla],getColorType=i=>colorTypes.find(e=>e.test(i));function asRGBA(i){const e=getColorType(i);if(!e)return!1;let t=e.parse(i);return e===hsla&&(t=hslaToRgba(t)),t}const mixColor=(i,e)=>{const t=asRGBA(i),n=asRGBA(e);if(!t||!n)return mixImmediate(i,e);const r={...t};return s=>(r.red=mixLinearColor(t.red,n.red,s),r.green=mixLinearColor(t.green,n.green,s),r.blue=mixLinearColor(t.blue,n.blue,s),r.alpha=mixNumber$1(t.alpha,n.alpha,s),rgba.transform(r))},combineFunctions=(i,e)=>t=>e(i(t)),pipe=(...i)=>i.reduce(combineFunctions),invisibleValues=new Set(["none","hidden"]);function mixVisibility(i,e){return invisibleValues.has(i)?t=>t<=0?i:e:t=>t>=1?e:i}function mixNumber(i,e){return t=>mixNumber$1(i,e,t)}function getMixer$1(i){return typeof i=="number"?mixNumber:typeof i=="string"?isCSSVariableToken(i)?mixImmediate:color.test(i)?mixColor:mixComplex:Array.isArray(i)?mixArray:typeof i=="object"?color.test(i)?mixColor:mixObject:mixImmediate}function mixArray(i,e){const t=[...i],n=t.length,r=i.map((s,o)=>getMixer$1(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)t[o]=r[o](s);return t}}function mixObject(i,e){const t={...i,...e},n={};for(const r in t)i[r]!==void 0&&e[r]!==void 0&&(n[r]=getMixer$1(i[r])(i[r],e[r]));return r=>{for(const s in n)t[s]=n[s](r);return t}}function matchOrder(i,e){const t=[],n={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],o=i.indexes[s][n[s]],l=i.values[o]??0;t[r]=l,n[s]++}return t}const mixComplex=(i,e)=>{const t=complex.createTransformer(e),n=analyseComplexValue(i),r=analyseComplexValue(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?invisibleValues.has(i)&&!r.values.length||invisibleValues.has(e)&&!n.values.length?mixVisibility(i,e):pipe(mixArray(matchOrder(n,r),r.values),t):mixImmediate(i,e)};function mix(i,e,t){return typeof i=="number"&&typeof e=="number"&&typeof t=="number"?mixNumber$1(i,e,t):getMixer$1(i)(i,e)}const velocitySampleDuration=5;function calcGeneratorVelocity(i,e,t){const n=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(t-i(n),e-n)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:i=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:t=springDefaults.velocity,mass:n=springDefaults.mass}){let r,s,o=1-e;o=clamp$2(springDefaults.minDamping,springDefaults.maxDamping,o),i=clamp$2(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(i)),o<1?(r=d=>{const p=d*o,g=p*i,m=p-t,y=calcAngularFreq(d,o),_=Math.exp(-g);return safeMin-m/y*_},s=d=>{const g=d*o*i,m=g*t+t,y=Math.pow(o,2)*Math.pow(d,2)*i,_=Math.exp(-g),E=calcAngularFreq(Math.pow(d,2),o);return(-r(d)+safeMin>0?-1:1)*((m-y)*_)/E}):(r=d=>{const p=Math.exp(-d*i),g=(d-t)*i+1;return-.001+p*g},s=d=>{const p=Math.exp(-d*i),g=(t-d)*(i*i);return p*g});const l=5/i,u=approximateRoot(r,s,l);if(i=secondsToMilliseconds(i),isNaN(u))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:i};{const d=Math.pow(u,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:i}}}const rootIterations=12;function approximateRoot(i,e,t){let n=t;for(let r=1;r<rootIterations;r++)n=n-i(n)/e(n);return n}function calcAngularFreq(i,e){return i*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(i,e){return e.some(t=>i[t]!==void 0)}function getSpringOptions(i){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...i};if(!isSpringType(i,physicsKeys)&&isSpringType(i,durationKeys))if(i.visualDuration){const t=i.visualDuration,n=2*Math.PI/(t*1.2),r=n*n,s=2*clamp$2(.05,1,1-(i.bounce||0))*Math.sqrt(r);e={...e,mass:springDefaults.mass,stiffness:r,damping:s}}else{const t=findSpring(i);e={...e,...t,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(i=springDefaults.visualDuration,e=springDefaults.bounce){const t=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:e}:i;let{restSpeed:n,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:p,duration:g,velocity:m,isResolvedFromDuration:y}=getSpringOptions({...t,velocity:-millisecondsToSeconds(t.velocity||0)}),_=m||0,E=d/(2*Math.sqrt(u*p)),S=o-s,b=millisecondsToSeconds(Math.sqrt(u/p)),C=Math.abs(S)<5;n||(n=C?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),r||(r=C?springDefaults.restDelta.granular:springDefaults.restDelta.default);let T;if(E<1){const N=calcAngularFreq(b,E);T=L=>{const k=Math.exp(-E*b*L);return o-k*((_+E*b*S)/N*Math.sin(N*L)+S*Math.cos(N*L))}}else if(E===1)T=N=>o-Math.exp(-b*N)*(S+(_+b*S)*N);else{const N=b*Math.sqrt(E*E-1);T=L=>{const k=Math.exp(-E*b*L),j=Math.min(N*L,300);return o-k*((_+E*b*S)*Math.sinh(j)+N*S*Math.cosh(j))/N}}const A={calculatedDuration:y&&g||null,next:N=>{const L=T(N);if(y)l.done=N>=g;else{let k=0;E<1&&(k=N===0?secondsToMilliseconds(_):calcGeneratorVelocity(T,N,L));const j=Math.abs(k)<=n,F=Math.abs(o-L)<=r;l.done=j&&F}return l.value=l.done?o:L,l},toString:()=>{const N=Math.min(calcGeneratorDuration(A),maxGeneratorDuration),L=generateLinearEasing(k=>A.next(N*k).value,N,30);return N+"ms "+L},toTransition:()=>{}};return A}spring.applyToOptions=i=>{const e=createGeneratorEasing(i,100,spring);return i.ease=supportsLinearEasing()?e.ease:"easeOut",i.duration=secondsToMilliseconds(e.duration),i.type="keyframes",i};function inertia({keyframes:i,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:p}){const g=i[0],m={done:!1,value:g},y=j=>l!==void 0&&j<l||u!==void 0&&j>u,_=j=>l===void 0?u:u===void 0||Math.abs(l-j)<Math.abs(u-j)?l:u;let E=t*e;const S=g+E,b=o===void 0?S:o(S);b!==S&&(E=b-g);const C=j=>-E*Math.exp(-j/n),T=j=>b+C(j),A=j=>{const F=C(j),U=T(j);m.done=Math.abs(F)<=d,m.value=m.done?b:U};let N,L;const k=j=>{y(m.value)&&(N=j,L=spring({keyframes:[m.value,_(m.value)],velocity:calcGeneratorVelocity(T,j,m.value),damping:r,stiffness:s,restDelta:d,restSpeed:p}))};return k(0),{calculatedDuration:null,next:j=>{let F=!1;return!L&&N===void 0&&(F=!0,A(j),k(j)),N!==void 0&&j>=N?L.next(j-N):(!F&&A(j),m)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=i=>Array.isArray(i)&&typeof i[0]!="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=i=>{if(isBezierDefinition(i)){invariant(i.length===4);const[e,t,n,r]=i;return cubicBezier(e,t,n,r)}else if(typeof i=="string")return easingLookup[i];return i};function createMixers(i,e,t){const n=[],r=t||mix,s=i.length-1;for(let o=0;o<s;o++){let l=r(i[o],i[o+1]);if(e){const u=Array.isArray(e)?e[o]||noop:e;l=pipe(u,l)}n.push(l)}return n}function interpolate(i,e,{clamp:t=!0,ease:n,mixer:r}={}){const s=i.length;if(invariant(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=i[0]===i[1];i[0]>i[s-1]&&(i=[...i].reverse(),e=[...e].reverse());const l=createMixers(e,n,r),u=l.length,d=p=>{if(o&&p<i[0])return e[0];let g=0;if(u>1)for(;g<i.length-2&&!(p<i[g+1]);g++);const m=progress(i[g],i[g+1],p);return l[g](m)};return t?p=>d(clamp$2(i[0],i[s-1],p)):d}function fillOffset(i,e){const t=i[i.length-1];for(let n=1;n<=e;n++){const r=progress(0,e,n);i.push(mixNumber$1(t,1,r))}}function defaultOffset$1(i){const e=[0];return fillOffset(e,i.length-1),e}function convertOffsetToTimes(i,e){return i.map(t=>t*e)}function defaultEasing(i,e){return i.map(()=>e||easeInOut).splice(0,i.length-1)}function keyframes({duration:i=300,keyframes:e,times:t,ease:n="easeInOut"}){const r=isEasingArray(n)?n.map(easingDefinitionToFunction):easingDefinitionToFunction(n),s={done:!1,value:e[0]},o=convertOffsetToTimes(t&&t.length===e.length?t:defaultOffset$1(e),i),l=interpolate(o,e,{ease:Array.isArray(r)?r:defaultEasing(e,r)});return{calculatedDuration:i,next:u=>(s.value=l(u),s.done=u>=i,s)}}const frameloopDriver=i=>{const e=({timestamp:t})=>i(t);return{start:()=>frame.update(e,!0),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=i=>i/100;class MainThreadAnimation extends BaseAnimation{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:t,motionValue:n,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||KeyframeResolver,l=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new o(s,l,t,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,l=isGenerator(t)?t:generators[t]||keyframes;let u,d;l!==keyframes&&typeof e[0]!="number"&&(u=pipe(percentToProgress,mix(e[0],e[1])),e=[0,100]);const p=l({...this.options,keyframes:e});s==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),p.calculatedDuration===null&&(p.calculatedDuration=calcGeneratorDuration(p));const{calculatedDuration:g}=p,m=g+r,y=m*(n+1)-r;return{generator:p,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:g,resolvedDuration:m,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:n}=this;if(!n){const{keyframes:j}=this.options;return{done:!0,value:j[j.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:d,totalDuration:p,resolvedDuration:g}=n;if(this.startTime===null)return s.next(0);const{delay:m,repeat:y,repeatType:_,repeatDelay:E,onUpdate:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-m*(this.speed>=0?1:-1),C=this.speed>=0?b<0:b>p;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let T=this.currentTime,A=s;if(y){const j=Math.min(this.currentTime,p)/g;let F=Math.floor(j),U=j%1;!U&&j>=1&&(U=1),U===1&&F--,F=Math.min(F,y+1),!!(F%2)&&(_==="reverse"?(U=1-U,E&&(U-=E/g)):_==="mirror"&&(A=o)),T=clamp$2(0,1,U)*g}const N=C?{done:!1,value:u[0]}:A.next(T);l&&(N.value=l(N.value));let{done:L}=N;!C&&d!==null&&(L=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return k&&r!==void 0&&(N.value=getFinalKeyframe(u,this.options,r)),S&&S(N.value),k&&this.finish(),N}get duration(){const{resolved:e}=this;return e?millisecondsToSeconds(e.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=frameloopDriver,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}get finished(){return this.currentFinishedPromise}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(i){return isGenerator(i.type)||i.type==="spring"||!isWaapiSupportedEasing(i.ease)}function pregenerateKeyframes(i,e){const t=new MainThreadAnimation({...e,keyframes:i,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:i[0]};const r=[];let s=0;for(;!n.done&&s<maxDuration;)n=t.sample(s),r.push(n.value),s+=sampleDelta;return{times:void 0,keyframes:r,duration:s-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(i){return i in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(e){super(e);const{name:t,motionValue:n,element:r,keyframes:s}=this.options;this.resolver=new DOMKeyframesResolver(s,(o,l)=>this.onKeyframesResolved(o,l),t,n,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:r,ease:s,type:o,motionValue:l,name:u,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&supportsLinearEasing()&&isUnsupportedEase(s)&&(s=unsupportedEasingFunctions[s]),requiresPregeneratedKeyframes(this.options)){const{onComplete:g,onUpdate:m,motionValue:y,element:_,...E}=this.options,S=pregenerateKeyframes(e,E);e=S.keyframes,e.length===1&&(e[1]=e[0]),n=S.duration,r=S.times,s=S.ease,o="keyframes"}const p=startWaapiAnimation(l.owner.current,u,e,{...this.options,duration:n,times:r,ease:s});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(attachTimeline(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:g}=this.options;l.set(getFinalKeyframe(e,this.options,t)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:n,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return millisecondsToSeconds(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return millisecondsToSeconds(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=secondsToMilliseconds(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}get finished(){return this.resolved.animation.finished}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return noop;const{animation:n}=t;attachTimeline(n,e)}return noop}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:r,type:s,ease:o,times:l}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:p,onComplete:g,element:m,...y}=this.options,_=new MainThreadAnimation({...y,keyframes:n,duration:r,type:s,ease:o,times:l,isGenerator:!0}),E=secondsToMilliseconds(this.time);d.setWithVelocity(_.sample(E-sampleDelta).value,_.sample(E).value,sampleDelta)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:o,type:l}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return supportsWaapi()&&n&&acceleratedValues.has(n)&&(n!=="transform"||!d)&&!u&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(i,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(i)?i.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:i,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...p}){return!!Object.keys(p).length}const animateMotionValue=(i,e,t,n={},r,s)=>o=>{const l=getValueTransition(n,i)||{},u=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-secondsToMilliseconds(u);let p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:i,motionValue:e,element:s?void 0:r};isTransitionDefined(l)||(p={...p,...getDefaultTransition(i,p)}),p.duration&&(p.duration=secondsToMilliseconds(p.duration)),p.repeatDelay&&(p.repeatDelay=secondsToMilliseconds(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),p.allowFlatten=!l.type&&!l.ease,g&&!s&&e.get()!==void 0){const m=getFinalKeyframe(p.keyframes,l);if(m!==void 0)return frame.update(()=>{p.onUpdate(m),p.onComplete()}),new GroupAnimationWithThen([])}return!s&&AcceleratedAnimation.supports(p)?new AcceleratedAnimation(p):new MainThreadAnimation(p)};function shouldBlockAnimation({protectedKeys:i,needsAnimating:e},t){const n=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function animateTarget(i,e,{delay:t=0,transitionOverride:n,type:r}={}){let{transition:s=i.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(s=n);const u=[],d=r&&i.animationState&&i.animationState.getState()[r];for(const p in l){const g=i.getValue(p,i.latestValues[p]??null),m=l[p];if(m===void 0||d&&shouldBlockAnimation(d,p))continue;const y={delay:t,...getValueTransition(s||{},p)};let _=!1;if(window.MotionHandoffAnimation){const S=getOptimisedAppearId(i);if(S){const b=window.MotionHandoffAnimation(S,p,frame);b!==null&&(y.startTime=b,_=!0)}}addValueToWillChange(i,p),g.start(animateMotionValue(p,g,m,i.shouldReduceMotion&&positionalKeys.has(p)?{type:!1}:y,i,_));const E=g.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{frame.update(()=>{o&&setTarget(i,o)})}),u}function animateVariant(i,e,t={}){var u;const n=resolveVariant(i,e,t.type==="exit"?(u=i.presenceContext)==null?void 0:u.custom:void 0);let{transition:r=i.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(r=t.transitionOverride);const s=n?()=>Promise.all(animateTarget(i,n,t)):()=>Promise.resolve(),o=i.variantChildren&&i.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:m}=r;return animateChildren(i,e,p+d,g,m,t)}:()=>Promise.resolve(),{when:l}=r;if(l){const[d,p]=l==="beforeChildren"?[s,o]:[o,s];return d().then(()=>p())}else return Promise.all([s(),o(t.delay)])}function animateChildren(i,e,t=0,n=0,r=1,s){const o=[],l=(i.variantChildren.size-1)*n,u=r===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(i.variantChildren).sort(sortByTreeOrder).forEach((d,p)=>{d.notify("AnimationStart",e),o.push(animateVariant(d,e,{...s,delay:t+u(p)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function sortByTreeOrder(i,e){return i.sortNodePosition(e)}function animateVisualElement(i,e,t={}){i.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(s=>animateVariant(i,s,t));n=Promise.all(r)}else if(typeof e=="string")n=animateVariant(i,e,t);else{const r=typeof e=="function"?resolveVariant(i,e,t.custom):e;n=Promise.all(animateTarget(i,r,t))}return n.then(()=>{i.notify("AnimationComplete",e)})}function shallowCompare(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(i){if(!i)return;if(!i.isControllingVariants){const t=i.parent?getVariantContext(i.parent)||{}:{};return i.props.initial!==void 0&&(t.initial=i.props.initial),t}const e={};for(let t=0;t<numVariantProps;t++){const n=variantProps[t],r=i.props[n];(isVariantLabel(r)||r===!1)&&(e[n]=r)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(i){return e=>Promise.all(e.map(({animation:t,options:n})=>animateVisualElement(i,t,n)))}function createAnimationState(i){let e=animateList(i),t=createState(),n=!0;const r=u=>(d,p)=>{var m;const g=resolveVariant(i,p,u==="exit"?(m=i.presenceContext)==null?void 0:m.custom:void 0);if(g){const{transition:y,transitionEnd:_,...E}=g;d={...d,...E,..._}}return d};function s(u){e=u(i)}function o(u){const{props:d}=i,p=getVariantContext(i.parent)||{},g=[],m=new Set;let y={},_=1/0;for(let S=0;S<numAnimationTypes;S++){const b=reversePriorityOrder[S],C=t[b],T=d[b]!==void 0?d[b]:p[b],A=isVariantLabel(T),N=b===u?C.isActive:null;N===!1&&(_=S);let L=T===p[b]&&T!==d[b]&&A;if(L&&n&&i.manuallyAnimateOnMount&&(L=!1),C.protectedKeys={...y},!C.isActive&&N===null||!T&&!C.prevProp||isAnimationControls(T)||typeof T=="boolean")continue;const k=checkVariantsDidChange(C.prevProp,T);let j=k||b===u&&C.isActive&&!L&&A||S>_&&A,F=!1;const U=Array.isArray(T)?T:[T];let q=U.reduce(r(b),{});N===!1&&(q={});const{prevResolvedValues:J={}}=C,ee={...J,...q},Y=V=>{j=!0,m.has(V)&&(F=!0,m.delete(V)),C.needsAnimating[V]=!0;const P=i.getValue(V);P&&(P.liveStyle=!1)};for(const V in ee){const P=q[V],I=J[V];if(y.hasOwnProperty(V))continue;let B=!1;isKeyframesTarget(P)&&isKeyframesTarget(I)?B=!shallowCompare(P,I):B=P!==I,B?P!=null?Y(V):m.add(V):P!==void 0&&m.has(V)?Y(V):C.protectedKeys[V]=!0}C.prevProp=T,C.prevResolvedValues=q,C.isActive&&(y={...y,...q}),n&&i.blockInitialAnimation&&(j=!1),j&&(!(L&&k)||F)&&g.push(...U.map(V=>({animation:V,options:{type:b}})))}if(m.size){const S={};if(typeof d.initial!="boolean"){const b=resolveVariant(i,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(S.transition=b.transition)}m.forEach(b=>{const C=i.getBaseTarget(b),T=i.getValue(b);T&&(T.liveStyle=!0),S[b]=C??null}),g.push({animation:S})}let E=!!g.length;return n&&(d.initial===!1||d.initial===d.animate)&&!i.manuallyAnimateOnMount&&(E=!1),n=!1,E?e(g):Promise.resolve()}function l(u,d){var g;if(t[u].isActive===d)return Promise.resolve();(g=i.variantChildren)==null||g.forEach(m=>{var y;return(y=m.animationState)==null?void 0:y.setActive(u,d)}),t[u].isActive=d;const p=o(u);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=createState(),n=!0}}}function checkVariantsDidChange(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!shallowCompare(e,i):!1}function createTypeState(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(i,e,t,n={passive:!0}){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t)}function extractEventInfo(i){return{point:{x:i.pageX,y:i.pageY}}}const addPointerInfo=i=>e=>isPrimaryPointer(e)&&i(e,extractEventInfo(e));function addPointerEvent(i,e,t,n){return addDomEvent(i,e,addPointerInfo(t),n)}function convertBoundingBoxToBox({top:i,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:i,max:n}}}function convertBoxToBoundingBox({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function transformBoxPoints(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),n=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(i){return i.max-i.min}function isNear(i,e,t){return Math.abs(i-e)<=t}function calcAxisDelta(i,e,t,n=.5){i.origin=n,i.originPoint=mixNumber$1(e.min,e.max,i.origin),i.scale=calcLength(t)/calcLength(e),i.translate=mixNumber$1(t.min,t.max,i.origin)-i.originPoint,(i.scale>=SCALE_MIN&&i.scale<=SCALE_MAX||isNaN(i.scale))&&(i.scale=1),(i.translate>=TRANSLATE_MIN&&i.translate<=TRANSLATE_MAX||isNaN(i.translate))&&(i.translate=0)}function calcBoxDelta(i,e,t,n){calcAxisDelta(i.x,e.x,t.x,n?n.originX:void 0),calcAxisDelta(i.y,e.y,t.y,n?n.originY:void 0)}function calcRelativeAxis(i,e,t){i.min=t.min+e.min,i.max=i.min+calcLength(e)}function calcRelativeBox(i,e,t){calcRelativeAxis(i.x,e.x,t.x),calcRelativeAxis(i.y,e.y,t.y)}function calcRelativeAxisPosition(i,e,t){i.min=e.min-t.min,i.max=i.min+calcLength(e)}function calcRelativePosition(i,e,t){calcRelativeAxisPosition(i.x,e.x,t.x),calcRelativeAxisPosition(i.y,e.y,t.y)}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(i){return[i("x"),i("y")]}function isIdentityScale(i){return i===void 0||i===1}function hasScale({scale:i,scaleX:e,scaleY:t}){return!isIdentityScale(i)||!isIdentityScale(e)||!isIdentityScale(t)}function hasTransform(i){return hasScale(i)||has2DTranslate(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function has2DTranslate(i){return is2DTranslate(i.x)||is2DTranslate(i.y)}function is2DTranslate(i){return i&&i!=="0%"}function scalePoint(i,e,t){const n=i-t,r=e*n;return t+r}function applyPointDelta(i,e,t,n,r){return r!==void 0&&(i=scalePoint(i,r,n)),scalePoint(i,t,n)+e}function applyAxisDelta(i,e=0,t=1,n,r){i.min=applyPointDelta(i.min,e,t,n,r),i.max=applyPointDelta(i.max,e,t,n,r)}function applyBoxDelta(i,{x:e,y:t}){applyAxisDelta(i.x,e.translate,e.scale,e.originPoint),applyAxisDelta(i.y,t.translate,t.scale,t.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(i,e,t,n=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let l=0;l<r;l++){s=t[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&transformBox(i,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,applyBoxDelta(i,o)),n&&hasTransform(s.latestValues)&&transformBox(i,s.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(i,e){i.min=i.min+e,i.max=i.max+e}function transformAxis(i,e,t,n,r=.5){const s=mixNumber$1(i.min,i.max,r);applyAxisDelta(i,e,t,s,n)}function transformBox(i,e){transformAxis(i.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(i.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(i,e){return convertBoundingBoxToBox(transformBoxPoints(i.getBoundingClientRect(),e))}function measurePageBox(i,e,t){const n=measureViewportBox(i,t),{scroll:r}=e;return r&&(translateAxis(n.x,r.offset.x),translateAxis(n.y,r.offset.y)),n}const getContextWindow=({current:i})=>i?i.ownerDocument.defaultView:null,distance=(i,e)=>Math.abs(i-e);function distance2D(i,e){const t=distance(i.x,e.x),n=distance(i.y,e.y);return Math.sqrt(t**2+n**2)}class PanSession{constructor(e,t,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=getPanInfo(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=distance2D(g.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:_}=g,{timestamp:E}=frameData;this.history.push({..._,timestamp:E});const{onStart:S,onMove:b}=this.handlers;m||(S&&S(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,g)},this.handlePointerMove=(g,m)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=transformPoint(m,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(g,m)=>{this.end();const{onEnd:y,onSessionEnd:_,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=getPanInfo(g.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(g,S),_&&_(g,S)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const o=extractEventInfo(e),l=transformPoint(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=frameData;this.history=[{...u,timestamp:d}];const{onSessionStart:p}=t;p&&p(e,getPanInfo(l,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(i,e){return e?{point:e(i.point)}:i}function subtractPoint(i,e){return{x:i.x-e.x,y:i.y-e.y}}function getPanInfo({point:i},e){return{point:i,delta:subtractPoint(i,lastDevicePoint(e)),offset:subtractPoint(i,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(i){return i[0]}function lastDevicePoint(i){return i[i.length-1]}function getVelocity(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,n=null;const r=lastDevicePoint(i);for(;t>=0&&(n=i[t],!(r.timestamp-n.timestamp>secondsToMilliseconds(e)));)t--;if(!n)return{x:0,y:0};const s=millisecondsToSeconds(r.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-n.x)/s,y:(r.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function applyConstraints(i,{min:e,max:t},n){return e!==void 0&&i<e?i=n?mixNumber$1(e,i,n.min):Math.max(i,e):t!==void 0&&i>t&&(i=n?mixNumber$1(t,i,n.max):Math.min(i,t)),i}function calcRelativeAxisConstraints(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function calcRelativeConstraints(i,{top:e,left:t,bottom:n,right:r}){return{x:calcRelativeAxisConstraints(i.x,t,r),y:calcRelativeAxisConstraints(i.y,e,n)}}function calcViewportAxisConstraints(i,e){let t=e.min-i.min,n=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,n]=[n,t]),{min:t,max:n}}function calcViewportConstraints(i,e){return{x:calcViewportAxisConstraints(i.x,e.x),y:calcViewportAxisConstraints(i.y,e.y)}}function calcOrigin(i,e){let t=.5;const n=calcLength(i),r=calcLength(e);return r>n?t=progress(e.min,e.max-n,i.min):n>r&&(t=progress(i.min,i.max-r,e.min)),clamp$2(0,1,t)}function rebaseAxisConstraints(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const defaultElastic=.35;function resolveDragElastic(i=defaultElastic){return i===!1?i=0:i===!0&&(i=defaultElastic),{x:resolveAxisElastic(i,"left","right"),y:resolveAxisElastic(i,"top","bottom")}}function resolveAxisElastic(i,e,t){return{min:resolvePointElastic(i,e),max:resolvePointElastic(i,t)}}function resolvePointElastic(i,e){return typeof i=="number"?i:i[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(extractEventInfo(p).point)},s=(p,g)=>{const{drag:m,dragPropagation:y,onDragStart:_}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(S=>{let b=this.getAxisMotionValue(S).get()||0;if(percent.test(b)){const{projection:C}=this.visualElement;if(C&&C.layout){const T=C.layout.layoutBox[S];T&&(b=calcLength(T)*(parseFloat(b)/100))}}this.originPoint[S]=b}),_&&frame.postRender(()=>_(p,g)),addValueToWillChange(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(p,g)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:_,onDrag:E}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:S}=g;if(y&&this.currentDirection===null){this.currentDirection=getCurrentDirection(S),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),E&&E(p,g)},l=(p,g)=>this.stop(p,g),u=()=>eachAxis(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)==null?void 0:g.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:getContextWindow(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&frame.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!shouldDrag(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=applyConstraints(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,r=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=calcRelativeConstraints(n.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rebaseAxisConstraints(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!isRefObject(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=measurePageBox(n,r.root,this.visualElement.getTransformPagePoint());let o=calcViewportConstraints(r.layout.layoutBox,s);if(t){const l=t(convertBoxToBoundingBox(o));this.hasMutatedConstraints=!!l,l&&(o=convertBoundingBoxToBox(l))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=eachAxis(p=>{if(!shouldDrag(p,t,this.currentDirection))return;let g=u&&u[p]||{};o&&(g={min:0,max:0});const m=r?200:1e6,y=r?40:1e7,_={type:"inertia",velocity:n?e[p]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(p,_)});return Promise.all(d).then(l)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),n.start(animateMotionValue(e,n,0,t,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(t=>{const{drag:n}=this.getProps();if(!shouldDrag(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[t];s.set(e[t]-mixNumber$1(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!isRefObject(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};eachAxis(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();r[o]=calcOrigin({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),eachAxis(o=>{if(!shouldDrag(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(mixNumber$1(u,d,r[o]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,t=addPointerEvent(e,"pointerdown",u=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();isRefObject(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),frame.read(n);const o=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(eachAxis(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=u[p].translate,g.set(g.get()+u[p].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=defaultElastic,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function shouldDrag(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function getCurrentDirection(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=i=>(e,t)=>{i&&frame.postRender(()=>i(e,t))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(t),onMove:n,onEnd:(s,o)=>{delete this.session,r&&frame.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const correctBorderRadius={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(px.test(i))i=parseFloat(i);else return i;const t=pixelsToPercent(i,e.target.x),n=pixelsToPercent(i,e.target.y);return`${t}% ${n}%`}},correctBoxShadow={correct:(i,{treeScale:e,projectionDelta:t})=>{const n=i,r=complex.parse(i);if(r.length>5)return n;const s=complex.createTransformer(i),o=typeof r[0]!="number"?1:0,l=t.x.scale*e.x,u=t.y.scale*e.y;r[0+o]/=l,r[1+o]/=u;const d=mixNumber$1(l,u,.5);return typeof r[2+o]=="number"&&(r[2+o]/=d),typeof r[3+o]=="number"&&(r[3+o]/=d),s(r)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;addScaleCorrector(defaultScaleCorrectors),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||frame.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(i){const[e,t]=usePresence(),n=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...i,layoutGroup:n,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:t})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(i,e,t){const n=isMotionValue(i)?i:motionValue(i);return n.start(animateMotionValue("",n,e,t)),n.animation}function isSVGElement(i){return i instanceof SVGElement&&i.tagName!=="svg"}const compareByDepth=(i,e)=>i.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(i,e){const t=time.now(),n=({timestamp:r})=>{const s=r-t;s>=e&&(cancelFrame(n),i(s-e))};return frame.read(n,!0),()=>cancelFrame(n)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=i=>typeof i=="string"?parseFloat(i):i,isPx=i=>typeof i=="number"||px.test(i);function mixValues(i,e,t,n,r,s){r?(i.opacity=mixNumber$1(0,t.opacity??1,easeCrossfadeIn(n)),i.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(n))):s&&(i.opacity=mixNumber$1(e.opacity??1,t.opacity??1,n));for(let o=0;o<numBorders;o++){const l=`border${borders[o]}Radius`;let u=getRadius(e,l),d=getRadius(t,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||isPx(u)===isPx(d)?(i[l]=Math.max(mixNumber$1(asNumber(u),asNumber(d),n),0),(percent.test(d)||percent.test(u))&&(i[l]+="%")):i[l]=d}(e.rotate||t.rotate)&&(i.rotate=mixNumber$1(e.rotate||0,t.rotate||0,n))}function getRadius(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(i,e,t){return n=>n<i?0:n>e?1:t(progress(i,e,n))}function copyAxisInto(i,e){i.min=e.min,i.max=e.max}function copyBoxInto(i,e){copyAxisInto(i.x,e.x),copyAxisInto(i.y,e.y)}function copyAxisDeltaInto(i,e){i.translate=e.translate,i.scale=e.scale,i.originPoint=e.originPoint,i.origin=e.origin}function removePointDelta(i,e,t,n,r){return i-=e,i=scalePoint(i,1/t,n),r!==void 0&&(i=scalePoint(i,1/r,n)),i}function removeAxisDelta(i,e=0,t=1,n=.5,r,s=i,o=i){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=mixNumber$1(s.min,s.max,n);i===s&&(l-=e),i.min=removePointDelta(i.min,e,t,l,r),i.max=removePointDelta(i.max,e,t,l,r)}function removeAxisTransforms(i,e,[t,n,r],s,o){removeAxisDelta(i,e[t],e[n],e[r],e.scale,s,o)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(i,e,t,n){removeAxisTransforms(i.x,e,xKeys,t?t.x:void 0,n?n.x:void 0),removeAxisTransforms(i.y,e,yKeys,t?t.y:void 0,n?n.y:void 0)}function isAxisDeltaZero(i){return i.translate===0&&i.scale===1}function isDeltaZero(i){return isAxisDeltaZero(i.x)&&isAxisDeltaZero(i.y)}function axisEquals(i,e){return i.min===e.min&&i.max===e.max}function boxEquals(i,e){return axisEquals(i.x,e.x)&&axisEquals(i.y,e.y)}function axisEqualsRounded(i,e){return Math.round(i.min)===Math.round(e.min)&&Math.round(i.max)===Math.round(e.max)}function boxEqualsRounded(i,e){return axisEqualsRounded(i.x,e.x)&&axisEqualsRounded(i.y,e.y)}function aspectRatio(i){return calcLength(i.x)/calcLength(i.y)}function axisDeltaEquals(i,e){return i.translate===e.translate&&i.scale===e.scale&&i.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let n;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(i,e,t){let n="";const r=i.x.translate/e.x,s=i.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(n=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:p,rotateX:g,rotateY:m,skewX:y,skewY:_}=t;d&&(n=`perspective(${d}px) ${n}`),p&&(n+=`rotate(${p}deg) `),g&&(n+=`rotateX(${g}deg) `),m&&(n+=`rotateY(${m}deg) `),y&&(n+=`skewX(${y}deg) `),_&&(n+=`skewY(${_}deg) `)}const l=i.x.scale*e.x,u=i.y.scale*e.y;return(l!==1||u!==1)&&(n+=`scale(${l}, ${u})`),n||"none"}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(i,e,t,n){const{latestValues:r}=e;r[i]&&(t[i]=r[i],e.setStaticValue(i,0),n&&(n[i]=0))}function cancelTreeOptimisedTransformAnimations(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:e}=i.options;if(!e)return;const t=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=i.options;window.MotionCancelOptimisedAnimation(t,"transform",frame,!(r||s))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(n)}function createProjectionNode({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},l=e==null?void 0:e()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new SubscriptionManager),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(o),this.instance=o;const{layoutId:u,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||u)&&(this.isLayoutDirty=!0),i){let g;const m=()=>this.root.updateBlockedByResize=!1;i(o,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=delay(m,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||p.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:S,onLayoutAnimationComplete:b}=p.getProps(),C=!this.targetLayout||!boxEqualsRounded(this.targetLayout,_),T=!m&&y;if(this.options.layoutRoot||this.resumeFrom||T||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,T);const A={...getValueTransition(E,"layout"),onPlay:S,onComplete:b};(p.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else m||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const l=time.now();frameData.delta=clamp$2(0,1e3/60,l-frameData.timestamp),frameData.timestamp=l,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!isDeltaZero(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;o&&(l||hasTransform(this.latestValues)||p)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),roundBox(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return createBox();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:p}=this.root;p&&(translateAxis(l.x,p.offset.x),translateAxis(l.y,p.offset.y))}return l}removeElementScroll(o){var u;const l=createBox();if(copyBoxInto(l,o),(u=this.scroll)!=null&&u.wasRoot)return l;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:g,options:m}=p;p!==this.root&&g&&m.layoutScroll&&(g.wasRoot&&copyBoxInto(l,o),translateAxis(l.x,g.offset.x),translateAxis(l.y,g.offset.y))}return l}applyTransform(o,l=!1){const u=createBox();copyBoxInto(u,o);for(let d=0;d<this.path.length;d++){const p=this.path[d];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&transformBox(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),hasTransform(p.latestValues)&&transformBox(u,p.latestValues)}return hasTransform(this.latestValues)&&transformBox(u,this.latestValues),u}removeTransform(o){const l=createBox();copyBoxInto(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!hasTransform(d.latestValues))continue;hasScale(d.latestValues)&&d.updateSnapshot();const p=createBox(),g=d.measurePageBox();copyBoxInto(p,g),removeBoxTransforms(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return hasTransform(this.latestValues)&&removeBoxTransforms(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,y.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(u=!1),u)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=createBox());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},p={...this.latestValues},g=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=createBox(),y=u?u.source:void 0,_=this.layout?this.layout.source:void 0,E=y!==_,S=this.getStack(),b=!S||S.members.length<=1,C=!!(E&&!b&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let T;this.mixTargetDelta=A=>{const N=A/1e3;mixAxisDelta(g.x,o.x,N),mixAxisDelta(g.y,o.y,N),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,m,N),T&&boxEquals(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=createBox()),copyBoxInto(T,this.relativeTarget)),E&&(this.animationValues=p,mixValues(p,d,this.latestValues,N,C,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:p}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||createBox();const g=calcLength(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const m=calcLength(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}copyBoxInto(l,u),transformBox(l,p),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new NodeStack),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&resetDistortingTransform("z",o,d,this.animationValues);for(let p=0;p<transformAxes.length;p++)resetDistortingTransform(`rotate${transformAxes[p]}`,o,d,this.animationValues),resetDistortingTransform(`skew${transformAxes[p]}`,o,d,this.animationValues);o.render();for(const p in d)o.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const l={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=resolveMotionValue(o==null?void 0:o.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none",l;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=resolveMotionValue(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),l.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,p),u&&(l.transform=u(p,l.transform));const{x:g,y:m}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${m.origin*100}% 0`,d.animationValues?l.opacity=d===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in scaleCorrectors){if(p[y]===void 0)continue;const{correct:_,applyTo:E,isCSSVariable:S}=scaleCorrectors[y],b=l.transform==="none"?p[y]:_(p[y],d);if(E){const C=E.length;for(let T=0;T<C;T++)l[E[T]]=b}else S?this.options.visualElement.renderState.vars[y]=b:l[y]=b}return this.options.layoutId&&(l.pointerEvents=d===this?resolveMotionValue(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(i){i.updateLayout()}function notifyLayoutUpdate(i){var t;const e=((t=i.resumeFrom)==null?void 0:t.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&e&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=i.layout,{animationType:s}=i.options,o=e.source!==i.layout.source;s==="size"?eachAxis(g=>{const m=o?e.measuredBox[g]:e.layoutBox[g],y=calcLength(m);m.min=n[g].min,m.max=m.min+y}):shouldAnimatePositionOnly(s,e.layoutBox,n)&&eachAxis(g=>{const m=o?e.measuredBox[g]:e.layoutBox[g],y=calcLength(n[g]);m.max=m.min+y,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[g].max=i.relativeTarget[g].min+y)});const l=createDelta();calcBoxDelta(l,n,e.layoutBox);const u=createDelta();o?calcBoxDelta(u,i.applyTransform(r,!0),e.measuredBox):calcBoxDelta(u,n,e.layoutBox);const d=!isDeltaZero(l);let p=!1;if(!i.resumeFrom){const g=i.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:m,layout:y}=g;if(m&&y){const _=createBox();calcRelativePosition(_,e.layoutBox,m.layoutBox);const E=createBox();calcRelativePosition(E,n,y.layoutBox),boxEqualsRounded(_,E)||(p=!0),g.options.layoutRoot&&(i.relativeTarget=E,i.relativeTargetOrigin=_,i.relativeParent=g)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:p})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function propagateDirtyNodes(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function cleanDirtyNodes(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function clearSnapshot(i){i.clearSnapshot()}function clearMeasurements(i){i.clearMeasurements()}function clearIsLayoutDirty(i){i.isLayoutDirty=!1}function resetTransformStyle(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function finishAnimation(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function resolveTargetDelta(i){i.resolveTargetDelta()}function calcProjection(i){i.calcProjection()}function resetSkewAndRotation(i){i.resetSkewAndRotation()}function removeLeadSnapshots(i){i.removeLeadSnapshot()}function mixAxisDelta(i,e,t){i.translate=mixNumber$1(e.translate,0,t),i.scale=mixNumber$1(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function mixAxis(i,e,t,n){i.min=mixNumber$1(e.min,t.min,n),i.max=mixNumber$1(e.max,t.max,n)}function mixBox(i,e,t,n){mixAxis(i.x,e.x,t.x,n),mixAxis(i.y,e.y,t.y,n)}function hasOpacityCrossfade(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(i){i.min=roundPoint(i.min),i.max=roundPoint(i.max)}function roundBox(i){roundAxis(i.x),roundAxis(i.y)}function shouldAnimatePositionOnly(i,e,t){return i==="position"||i==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(t),.2)}function checkNodeWasScrollRoot(i){var e;return i!==i.root&&((e=i.scroll)==null?void 0:e.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(i,e)=>addDomEvent(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const i=new DocumentProjectionNode({});i.mount(window),i.setOptions({layoutScroll:!0}),rootProjectionNode.current=i}return rootProjectionNode.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(i,e,t){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=n[r];s&&frame.postRender(()=>s(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(t,n)=>(handleHoverEvent(this.node,n,"Start"),r=>handleHoverEvent(this.node,r,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(i,e,t){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=n[r];s&&frame.postRender(()=>s(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(t,n)=>(handlePressEvent(this.node,n,"Start"),(r,{success:s})=>handlePressEvent(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=i=>{const e=observerCallbacks.get(i.target);e&&e(i)},fireAllObserverCallbacks=i=>{i.forEach(fireObserverCallback)};function initIntersectionObserver({root:i,...e}){const t=i||document;observers.has(t)||observers.set(t,{});const n=observers.get(t),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(fireAllObserverCallbacks,{root:i,...e})),n[r]}function observeIntersection(i,e,t){const n=initIntersectionObserver(e);return observerCallbacks.set(i,t),n.observe(i),()=>{observerCallbacks.delete(i),n.unobserve(i)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:thresholdNames[r]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),m=d?p:g;m&&m(u)};return observeIntersection(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,t))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=i.matches;i.addListener(e),e()}else prefersReducedMotion.current=!1}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=i=>valueTypes.find(testValueType(i)),visualElementStore=new WeakMap;function updateMotionValuesFromProps(i,e,t){for(const n in e){const r=e[n],s=t[n];if(isMotionValue(r))i.addValue(n,r);else if(isMotionValue(s))i.addValue(n,motionValue(r,{owner:i}));else if(s!==r)if(i.hasValue(n)){const o=i.getValue(n);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=i.getStaticValue(n);i.addValue(n,motionValue(o!==void 0?o:r,{owner:i}))}}for(const n in t)e[n]===void 0&&i.removeValue(n);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=time.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,frame.render(this.render,!1,!0))};const{latestValues:u,renderState:d,onUpdate:p}=o;this.onUpdate=p,this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=isControllingVariants(t),this.isVariantNode=isVariantNode(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in m){const _=m[y];u[y]!==void 0&&isMotionValue(_)&&_.set(u[y],!1)}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=transformProps.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&frame.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const t=featureDefinitions[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<propEventHandlers.length;n++){const r=propEventHandlers[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=motionValue(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(isNumericalString(n)||isZeroValueString(n))?n=parseFloat(n):!findValueType(n)&&complex.test(t)&&(n=getAnimatableNone(e,t)),this.setBaseTarget(e,isMotionValue(n)?n.get():n)),isMotionValue(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const o=resolveVariantFromProps(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);o&&(n=o[e])}if(t&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!isMotionValue(r)?r:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function getComputedStyle$1(i){return window.getComputedStyle(i)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,t){if(transformProps.has(t))return readTransformValue(e,t);{const n=getComputedStyle$1(e),r=(isCSSVariableName(t)?n.getPropertyValue(t):n[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return measureViewportBox(e,t)}build(e,t,n){buildHTMLStyles(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return scrapeMotionValuesFromProps$1(e,t,n)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&updateSVGDimensions(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(transformProps.has(t)){const n=getDefaultValueType(t);return n&&n.default||0}return t=camelCaseAttributes.has(t)?t:camelToDash(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return scrapeMotionValuesFromProps(e,t,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&frame.postRender(this.updateDimensions)}build(e,t,n){buildSVGAttrs(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){renderSVG(e,t,n,r)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(i,e)=>isSVGComponent(i)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:i!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);function observeTimeline(i,e){let t;const n=()=>{const{currentTime:r}=e,o=(r===null?0:r.value)/100;t!==o&&i(o),t=o};return frame.update(n,!0),()=>cancelFrame(n)}const resizeHandlers=new WeakMap;let observer;function getElementSize(i,e){if(e){const{inlineSize:t,blockSize:n}=e[0];return{width:t,height:n}}else return i instanceof SVGElement&&"getBBox"in i?i.getBBox():{width:i.offsetWidth,height:i.offsetHeight}}function notifyTarget({target:i,contentRect:e,borderBoxSize:t}){var n;(n=resizeHandlers.get(i))==null||n.forEach(r=>{r({target:i,contentSize:e,get size(){return getElementSize(i,t)}})})}function notifyAll(i){i.forEach(notifyTarget)}function createResizeObserver(){typeof ResizeObserver>"u"||(observer=new ResizeObserver(notifyAll))}function resizeElement(i,e){observer||createResizeObserver();const t=resolveElements(i);return t.forEach(n=>{let r=resizeHandlers.get(n);r||(r=new Set,resizeHandlers.set(n,r)),r.add(e),observer==null||observer.observe(n)}),()=>{t.forEach(n=>{const r=resizeHandlers.get(n);r==null||r.delete(e),r!=null&&r.size||observer==null||observer.unobserve(n)})}}const windowCallbacks=new Set;let windowResizeHandler;function createWindowResizeHandler(){windowResizeHandler=()=>{const i={width:window.innerWidth,height:window.innerHeight},e={target:window,size:i,contentSize:i};windowCallbacks.forEach(t=>t(e))},window.addEventListener("resize",windowResizeHandler)}function resizeWindow(i){return windowCallbacks.add(i),windowResizeHandler||createWindowResizeHandler(),()=>{windowCallbacks.delete(i),!windowCallbacks.size&&windowResizeHandler&&(windowResizeHandler=void 0)}}function resize(i,e){return typeof i=="function"?resizeWindow(i):resizeElement(i,e)}const maxElapsed=50,createAxisInfo=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),createScrollInfo=()=>({time:0,x:createAxisInfo(),y:createAxisInfo()}),keys={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function updateAxisInfo(i,e,t,n){const r=t[e],{length:s,position:o}=keys[e],l=r.current,u=t.time;r.current=i[`scroll${o}`],r.scrollLength=i[`scroll${s}`]-i[`client${s}`],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=progress(0,r.scrollLength,r.current);const d=n-u;r.velocity=d>maxElapsed?0:velocityPerSecond(r.current-l,d)}function updateScrollInfo(i,e,t){updateAxisInfo(i,"x",e,t),updateAxisInfo(i,"y",e,t),e.time=t}function calcInset(i,e){const t={x:0,y:0};let n=i;for(;n&&n!==e;)if(n instanceof HTMLElement)t.x+=n.offsetLeft,t.y+=n.offsetTop,n=n.offsetParent;else if(n.tagName==="svg"){const r=n.getBoundingClientRect();n=n.parentElement;const s=n.getBoundingClientRect();t.x+=r.left-s.left,t.y+=r.top-s.top}else if(n instanceof SVGGraphicsElement){const{x:r,y:s}=n.getBBox();t.x+=r,t.y+=s;let o=null,l=n.parentNode;for(;!o;)l.tagName==="svg"&&(o=l),l=n.parentNode;n=o}else break;return t}const namedEdges={start:0,center:.5,end:1};function resolveEdge(i,e,t=0){let n=0;if(i in namedEdges&&(i=namedEdges[i]),typeof i=="string"){const r=parseFloat(i);i.endsWith("px")?n=r:i.endsWith("%")?i=r/100:i.endsWith("vw")?n=r/100*document.documentElement.clientWidth:i.endsWith("vh")?n=r/100*document.documentElement.clientHeight:i=r}return typeof i=="number"&&(n=e*i),t+n}const defaultOffset=[0,0];function resolveOffset(i,e,t,n){let r=Array.isArray(i)?i:defaultOffset,s=0,o=0;return typeof i=="number"?r=[i,i]:typeof i=="string"&&(i=i.trim(),i.includes(" ")?r=i.split(" "):r=[i,namedEdges[i]?i:"0"]),s=resolveEdge(r[0],t,n),o=resolveEdge(r[1],e),s-o}const ScrollOffset={All:[[0,0],[1,1]]},point={x:0,y:0};function getTargetSize(i){return"getBBox"in i&&i.tagName!=="svg"?i.getBBox():{width:i.clientWidth,height:i.clientHeight}}function resolveOffsets(i,e,t){const{offset:n=ScrollOffset.All}=t,{target:r=i,axis:s="y"}=t,o=s==="y"?"height":"width",l=r!==i?calcInset(r,i):point,u=r===i?{width:i.scrollWidth,height:i.scrollHeight}:getTargetSize(r),d={width:i.clientWidth,height:i.clientHeight};e[s].offset.length=0;let p=!e[s].interpolate;const g=n.length;for(let m=0;m<g;m++){const y=resolveOffset(n[m],d[o],u[o],l[s]);!p&&y!==e[s].interpolatorOffsets[m]&&(p=!0),e[s].offset[m]=y}p&&(e[s].interpolate=interpolate(e[s].offset,defaultOffset$1(n),{clamp:!1}),e[s].interpolatorOffsets=[...e[s].offset]),e[s].progress=clamp$2(0,1,e[s].interpolate(e[s].current))}function measure(i,e=i,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==i){let n=e;for(;n&&n!==i;)t.x.targetOffset+=n.offsetLeft,t.y.targetOffset+=n.offsetTop,n=n.offsetParent}t.x.targetLength=e===i?e.scrollWidth:e.clientWidth,t.y.targetLength=e===i?e.scrollHeight:e.clientHeight,t.x.containerLength=i.clientWidth,t.y.containerLength=i.clientHeight}function createOnScrollHandler(i,e,t,n={}){return{measure:()=>measure(i,n.target,t),update:r=>{updateScrollInfo(i,t,r),(n.offset||n.target)&&resolveOffsets(i,t,n)},notify:()=>e(t)}}const scrollListeners=new WeakMap,resizeListeners=new WeakMap,onScrollHandlers=new WeakMap,getEventTarget=i=>i===document.documentElement?window:i;function scrollInfo(i,{container:e=document.documentElement,...t}={}){let n=onScrollHandlers.get(e);n||(n=new Set,onScrollHandlers.set(e,n));const r=createScrollInfo(),s=createOnScrollHandler(e,i,r,t);if(n.add(s),!scrollListeners.has(e)){const l=()=>{for(const m of n)m.measure()},u=()=>{for(const m of n)m.update(frameData.timestamp)},d=()=>{for(const m of n)m.notify()},p=()=>{frame.read(l,!1,!0),frame.read(u,!1,!0),frame.update(d,!1,!0)};scrollListeners.set(e,p);const g=getEventTarget(e);window.addEventListener("resize",p,{passive:!0}),e!==document.documentElement&&resizeListeners.set(e,resize(e,p)),g.addEventListener("scroll",p,{passive:!0})}const o=scrollListeners.get(e);return frame.read(o,!1,!0),()=>{var d;cancelFrame(o);const l=onScrollHandlers.get(e);if(!l||(l.delete(s),l.size))return;const u=scrollListeners.get(e);scrollListeners.delete(e),u&&(getEventTarget(e).removeEventListener("scroll",u),(d=resizeListeners.get(e))==null||d(),window.removeEventListener("resize",u))}}function scrollTimelineFallback({source:i,container:e,axis:t="y"}){i&&(e=i);const n={value:0},r=scrollInfo(s=>{n.value=s[t].progress*100},{container:e,axis:t});return{currentTime:n,cancel:r}}const timelineCache=new Map;function getTimeline({source:i,container:e=document.documentElement,axis:t="y"}={}){i&&(e=i),timelineCache.has(e)||timelineCache.set(e,{});const n=timelineCache.get(e);return n[t]||(n[t]=supportsScrollTimeline()?new ScrollTimeline({source:e,axis:t}):scrollTimelineFallback({source:e,axis:t})),n[t]}function isOnScrollWithInfo(i){return i.length===2}function needsElementTracking(i){return i&&(i.target||i.offset)}function scrollFunction(i,e){return isOnScrollWithInfo(i)||needsElementTracking(e)?scrollInfo(t=>{i(t[e.axis].progress,t)},e):observeTimeline(i,getTimeline(e))}function scrollAnimation(i,e){if(i.flatten(),needsElementTracking(e))return i.pause(),scrollInfo(t=>{i.time=i.duration*t[e.axis].progress},e);{const t=getTimeline(e);return i.attachTimeline?i.attachTimeline(t,n=>(n.pause(),observeTimeline(r=>{n.time=n.duration*r},t))):noop}}function scroll(i,{axis:e="y",...t}={}){const n={axis:e,...t};return typeof i=="function"?scrollFunction(i,n):scrollAnimation(i,n)}function refWarning(i,e){warning(!!(!e||e.current))}const createScrollMotionValues=()=>({scrollX:motionValue(0),scrollY:motionValue(0),scrollXProgress:motionValue(0),scrollYProgress:motionValue(0)});function useScroll({container:i,target:e,layoutEffect:t=!0,...n}={}){const r=useConstant(createScrollMotionValues);return(t?useIsomorphicLayoutEffect:reactExports.useEffect)(()=>(refWarning("target",e),refWarning("container",i),scroll((o,{x:l,y:u})=>{r.scrollX.set(l.current),r.scrollXProgress.set(l.progress),r.scrollY.set(u.current),r.scrollYProgress.set(u.progress)},{...n,container:(i==null?void 0:i.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[i,e,JSON.stringify(n.offset)]),r}function useMotionValue(i){const e=useConstant(()=>motionValue(i)),{isStatic:t}=reactExports.useContext(MotionConfigContext);if(t){const[,n]=reactExports.useState(i);reactExports.useEffect(()=>e.on("change",n),[])}return e}function useCombineMotionValues(i,e){const t=useMotionValue(e()),n=()=>t.set(e());return n(),useIsomorphicLayoutEffect(()=>{const r=()=>frame.preRender(n,!1,!0),s=i.map(o=>o.on("change",r));return()=>{s.forEach(o=>o()),cancelFrame(n)}}),t}const isCustomValueType=i=>i&&typeof i=="object"&&i.mix,getMixer=i=>isCustomValueType(i)?i.mix:void 0;function transform(...i){const e=!Array.isArray(i[0]),t=e?0:-1,n=i[0+t],r=i[1+t],s=i[2+t],o=i[3+t],l=interpolate(r,s,{mixer:getMixer(s[0]),...o});return e?l(n):l}function useComputed(i){collectMotionValues.current=[],i();const e=useCombineMotionValues(collectMotionValues.current,i);return collectMotionValues.current=void 0,e}function useTransform(i,e,t,n){if(typeof i=="function")return useComputed(i);const r=typeof e=="function"?e:transform(e,t,n);return Array.isArray(i)?useListTransform(i,r):useListTransform([i],([s])=>r(s))}function useListTransform(i,e){const t=useConstant(()=>[]);return useCombineMotionValues(i,()=>{t.length=0;const n=i.length;for(let r=0;r<n;r++)t[r]=i[r].get();return e(t)})}const thresholds={some:0,all:1};function inView(i,e,{root:t,margin:n,amount:r="some"}={}){const s=resolveElements(i),o=new WeakMap,l=d=>{d.forEach(p=>{const g=o.get(p.target);if(p.isIntersecting!==!!g)if(p.isIntersecting){const m=e(p.target,p);typeof m=="function"?o.set(p.target,m):u.unobserve(p.target)}else typeof g=="function"&&(g(p),o.delete(p.target))})},u=new IntersectionObserver(l,{root:t,rootMargin:n,threshold:typeof r=="number"?r:thresholds[r]});return s.forEach(d=>u.observe(d)),()=>u.disconnect()}function useInView(i,{root:e,margin:t,amount:n,once:r=!1,initial:s=!1}={}){const[o,l]=reactExports.useState(s);return reactExports.useEffect(()=>{if(!i.current||r&&o)return;const u=()=>(l(!0),r?void 0:()=>l(!1)),d={root:e&&e.current||void 0,margin:t,amount:n};return inView(i.current,u,d)},[e,i,t,r,n]),o}/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),toPascalCase=i=>{const e=toCamelCase(i);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),hasA11yProp=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:s,iconNode:o,...l},u)=>reactExports.createElement("svg",{ref:u,...defaultAttributes,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:mergeClasses("lucide",r),...!s&&!hasA11yProp(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,p])=>reactExports.createElement(d,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(i,e)=>{const t=reactExports.forwardRef(({className:n,...r},s)=>reactExports.createElement(Icon,{ref:s,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(i))}`,`lucide-${i}`,n),...r}));return t.displayName=toPascalCase(i),t};/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$p);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$o);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Book=createLucideIcon("book",__iconNode$n);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$m);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$l);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$k);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Clock$2=createLucideIcon("clock",__iconNode$j);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Code=createLucideIcon("code",__iconNode$i);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$h);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Cpu=createLucideIcon("cpu",__iconNode$g);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Database=createLucideIcon("database",__iconNode$f);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],GitBranch=createLucideIcon("git-branch",__iconNode$e);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$d);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],House=createLucideIcon("house",__iconNode$c);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers$2=createLucideIcon("layers",__iconNode$b);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$a);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Menu=createLucideIcon("menu",__iconNode$9);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Palette=createLucideIcon("palette",__iconNode$8);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$7);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Search=createLucideIcon("search",__iconNode$6);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$5);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Tag=createLucideIcon("tag",__iconNode$4);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],Terminal=createLucideIcon("terminal",__iconNode$3);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Users=createLucideIcon("users",__iconNode$2);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$1);/**
 * @license lucide-react v0.495.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode),AppIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"3",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"18",r:"1.5",stroke:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M10 5.5H14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M8 9h8",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeOpacity:"0.6"}),jsxRuntimeExports.jsx("path",{d:"M8 12h8",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeOpacity:"0.6"})]}),BriefcaseIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"7",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("path",{d:"M8 7V5C8 3.89543 8.89543 3 10 3H14C15.1046 3 16 3.89543 16 5V7",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("path",{d:"M12 11V16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M8 12H16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M3 11h18",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.4"})]}),PortalIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M8 9L6 12L8 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M16 9L18 12L16 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M10 10L14 14M14 10L10 14",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),jsxRuntimeExports.jsx("circle",{cx:"7",cy:"4",r:"1.5",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"4",r:"1.5",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"17",cy:"4",r:"1.5",fill:"currentColor"})]}),DocumentIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M6 3C4.89543 3 4 3.89543 4 5V19C4 20.1046 4.89543 21 6 21H18C19.1046 21 20 20.1046 20 19V9L14 3H6Z",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("path",{d:"M14 3V9H20",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("path",{d:"M8 13H16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M8 17H16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M8 10h4",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeOpacity:"0.6"})]}),DiscordIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M19.5 5.5c-1.2-0.55-2.4-0.9-3.5-1.1a0.15 0.15 0 0 0-.16.07c-.1.18-.21.42-.29.61a14.53 14.53 0 0 0-4.37 0 10.1 10.1 0 0 0-.3-.61 0.15 0.15 0 0 0-.16-.07c-1.1.2-2.3.55-3.5 1.1a0.14 0.14 0 0 0-.07.06C4.3 9.32 3.7 13.05 4.1 16.75c.01.02.03.04.05.05 1.2.9 2.4 1.45 3.55 1.8a0.15 0.15 0 0 0 .16-.05c.45-.62.85-1.27 1.19-1.96a0.14 0.14 0 0 0-.08-.2 9.9 9.9 0 0 1-1.41-.67.15.15 0 0 1-.02-.24c.1-.07.19-.15.28-.22a0.14 0.14 0 0 1 .15-.02c2.39 1.09 4.97 1.09 7.3 0a0.14 0.14 0 0 1 .16.01c.1.07.18.16.28.23.06.05.06.17-.01.24-.45.34-.92.54-1.4.67a0.15 0.15 0 0 0-.08.2c.35.69.75 1.34 1.18 1.95a0.15 0.15 0 0 0 .16.05c1.17-.35 2.36-.9 3.56-1.8a0.15 0.15 0 0 0 .05-.05c.48-4.23-.8-7.88-3.38-11.2a0.12 0.12 0 0 0-.06-.05z",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("path",{d:"M9 11.5C9 12.3284 8.55228 13 8 13C7.44772 13 7 12.3284 7 11.5C7 10.6716 7.44772 10 8 10C8.55228 10 9 10.6716 9 11.5Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M17 11.5C17 12.3284 16.5523 13 16 13C15.4477 13 15 12.3284 15 11.5C15 10.6716 15.4477 10 16 10C16.5523 10 17 10.6716 17 11.5Z",fill:"currentColor"})]}),RoadmapIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M3 12H21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("circle",{cx:"7",cy:"12",r:"1.5",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"17",cy:"12",r:"1.5",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M7 8V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 6V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M17 8V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M7 14V16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 14V18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M17 14V16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),XIcon=()=>jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M17.1761 3H20.3037L13.5642 10.6731L21.5 21H15.0993L10.0765 14.8901L4.30439 21H1.17398L8.35239 12.7533L0.75 3H7.31779L11.8606 8.58303L17.1761 3Z",fill:"currentColor"})}),GithubIcon=()=>jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12C2 16.418 4.865 20.166 8.839 21.489C9.339 21.581 9.521 21.278 9.521 21.017C9.521 20.782 9.512 20.082 9.508 19.241C6.726 19.861 6.139 17.866 6.139 17.866C5.685 16.726 5.031 16.424 5.031 16.424C4.132 15.785 5.097 15.797 5.097 15.797C6.094 15.867 6.625 16.84 6.625 16.84C7.521 18.412 8.97 17.912 9.539 17.661C9.631 17.027 9.889 16.628 10.175 16.419C7.954 16.207 5.62 15.344 5.62 11.476C5.62 10.323 6.01 9.38 6.644 8.644C6.54 8.394 6.2 7.443 6.743 6.088C6.743 6.088 7.585 5.823 9.497 7.098C10.295 6.879 11.15 6.769 12 6.765C12.85 6.769 13.705 6.879 14.505 7.098C16.415 5.823 17.255 6.088 17.255 6.088C17.8 7.443 17.46 8.394 17.356 8.644C17.992 9.38 18.38 10.323 18.38 11.476C18.38 15.355 16.042 16.204 13.813 16.411C14.173 16.671 14.498 17.184 14.498 17.969C14.498 19.093 14.484 20.692 14.484 21.017C14.484 21.281 14.663 21.587 15.173 21.486C19.138 20.159 22 16.415 22 12C22 6.477 17.523 2 12 2Z",fill:"currentColor"})}),BrainIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M12 17C12 17 7.5 16.5 6 13C4.5 9.5 7.5 7 8.5 6C9.5 5 10 3 12 3C14 3 14.5 5 15.5 6C16.5 7 19.5 9.5 18 13C16.5 16.5 12 17 12 17Z",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("path",{d:"M12 17V21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M10 20H14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M9 10C9.55228 10 10 9.55228 10 9C10 8.44772 9.55228 8 9 8C8.44772 8 8 8.44772 8 9C8 9.55228 8.44772 10 9 10Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M15 10C15.5523 10 16 9.55228 16 9C16 8.44772 15.5523 8 15 8C14.4477 8 14 8.44772 14 9C14 9.55228 14.4477 10 15 10Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M10 13C10.5 13.5 11.5 14 12 14C12.5 14 13.5 13.5 14 13",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeOpacity:"0.6"})]}),WhitepaperIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("path",{d:"M7 7H17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M7 11H17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M7 15H13",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M19 3C19 3 19 2 18 2H6C5 2 5 3 5 3",stroke:"currentColor",strokeWidth:"1",strokeOpacity:"0.6"}),jsxRuntimeExports.jsx("path",{d:"M19 21C19 21 19 22 18 22H6C5 22 5 21 5 21",stroke:"currentColor",strokeWidth:"1",strokeOpacity:"0.6"})]}),DeterminismIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M19.5 12C19.5 16.1421 16.1421 19.5 12 19.5C7.85786 19.5 4.5 16.1421 4.5 12C4.5 7.85786 7.85786 4.5 12 4.5C16.1421 4.5 19.5 7.85786 19.5 12Z",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("path",{d:"M15 9L18 6M18 6V9.5M18 6H14.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M9 15L6 18M6 18V14.5M6 18H9.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 7.5C13.3807 7.5 14.5 8.61929 14.5 10",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5",strokeDasharray:"1,1"}),jsxRuntimeExports.jsx("path",{d:"M12 16.5C10.6193 16.5 9.5 15.3807 9.5 14",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5",strokeDasharray:"1,1"})]}),BlogIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("path",{d:"M7 7H17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M7 11H13",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M7 15H10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M15 11H17",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeOpacity:"0.6"}),jsxRuntimeExports.jsx("path",{d:"M12 15H17",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeOpacity:"0.6"})]}),ChainIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M9 7H7.8C6.11984 7 4.76575 8.35409 4.76575 10.0342C4.76575 11.7144 6.11984 13.0685 7.8 13.0685H10.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M14.5 13.0685H16.2C17.8802 13.0685 19.2342 11.7144 19.2342 10.0342C19.2342 8.35409 17.8802 7 16.2 7H13.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M10 10H14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M7.5 9.5C7.5 9.5 7 10 7 10.5C7 11 7.5 11.5 7.5 11.5",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M16.5 9.5C16.5 9.5 17 10 17 10.5C17 11 16.5 11.5 16.5 11.5",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5",strokeLinecap:"round"})]}),UseCasesIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1.5",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1.5",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1.5",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1.5",stroke:"currentColor",strokeWidth:"1.5"}),jsxRuntimeExports.jsx("circle",{cx:"6.5",cy:"6.5",r:"1",stroke:"currentColor",strokeWidth:"1",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"17.5",cy:"6.5",r:"1",stroke:"currentColor",strokeWidth:"1",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"6.5",cy:"17.5",r:"1",stroke:"currentColor",strokeWidth:"1",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"17.5",cy:"17.5",r:"1",stroke:"currentColor",strokeWidth:"1",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M10 6.5H14",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5",strokeDasharray:"1,1"}),jsxRuntimeExports.jsx("path",{d:"M6.5 10V14",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5",strokeDasharray:"1,1"}),jsxRuntimeExports.jsx("path",{d:"M17.5 10V14",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5",strokeDasharray:"1,1"}),jsxRuntimeExports.jsx("path",{d:"M5.5 7.5L7.5 5.5",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.6",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M16.5 7.5L18.5 5.5",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.6",strokeLinecap:"round"})]}),AIAgentIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M12 3L19 7V17L12 21L5 17V7L12 3Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M12 6V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 15V18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M6 12H9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M15 12H18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"9",cy:"9",r:"0.5",fill:"currentColor",fillOpacity:"0.7"}),jsxRuntimeExports.jsx("circle",{cx:"15",cy:"9",r:"0.5",fill:"currentColor",fillOpacity:"0.7"}),jsxRuntimeExports.jsx("circle",{cx:"9",cy:"15",r:"0.5",fill:"currentColor",fillOpacity:"0.7"}),jsxRuntimeExports.jsx("circle",{cx:"15",cy:"15",r:"0.5",fill:"currentColor",fillOpacity:"0.7"}),jsxRuntimeExports.jsx("path",{d:"M10.5 10.5L9 9",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5"}),jsxRuntimeExports.jsx("path",{d:"M13.5 10.5L15 9",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5"}),jsxRuntimeExports.jsx("path",{d:"M10.5 13.5L9 15",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5"}),jsxRuntimeExports.jsx("path",{d:"M13.5 13.5L15 15",stroke:"currentColor",strokeWidth:"0.75",strokeOpacity:"0.5"})]}),menuItems={Ecosystem:{sections:[{title:"Explore",items:[{icon:jsxRuntimeExports.jsx(AppIcon,{}),label:"Apps & Infrastructure",link:"/ecosystem"},{icon:jsxRuntimeExports.jsx(AIAgentIcon,{}),label:"Agents",link:"https://app.uomi.ai/agents"}]},{title:"Builder Programs",items:[{label:"evm/accathon",description:"The premier hackathon for innovative EVM developers.",link:"#",comingSoon:!0},{label:"UOMI Grants",description:"Pitch your startup to win cash prizes, VC funding and marketing.",link:"/#",comingSoon:!0}]}],ctaBox:"Building a project on UOMI? Get in touch!",ctaLink:"https://docs.google.com/forms/d/1ynl_5yW9uuVfyJoSM7pIMMuMwMxcZn8UguLTjUe-e_g"},Developers:{sections:[{title:"Developer Resources",items:[{icon:jsxRuntimeExports.jsx(PortalIcon,{}),label:"Developer Portal",link:"/docs"},{icon:jsxRuntimeExports.jsx(DocumentIcon,{}),label:"Documentation",link:"https://docs.uomi.ai"},{icon:jsxRuntimeExports.jsx(GithubIcon,{}),label:"GitHub",link:"https://github.com/uomi-network"}]}]},Resources:{sections:[{title:"Research",items:[{icon:jsxRuntimeExports.jsx(BrainIcon,{}),label:"Consensus",link:"/consensus"},{icon:jsxRuntimeExports.jsx(WhitepaperIcon,{}),label:"Whitepaper",link:"/whitepaper"},{icon:jsxRuntimeExports.jsx(DeterminismIcon,{}),label:"Deterministic indeterminism",link:"/deterministc-indeterminism"}]},{title:"About",items:[{icon:jsxRuntimeExports.jsx(BriefcaseIcon,{}),label:"Manifesto",link:"/manifesto"},{icon:jsxRuntimeExports.jsx(ChainIcon,{}),label:"OPoC",link:"/opoc"},{icon:jsxRuntimeExports.jsx(RoadmapIcon,{}),label:"Roadmap",link:"/roadmap"},{icon:jsxRuntimeExports.jsx(BlogIcon,{}),label:"Blog",link:"/blog"},{icon:jsxRuntimeExports.jsx(UseCasesIcon,{}),label:"Applications",link:"/applications"}]},{title:"Socials",items:[{icon:jsxRuntimeExports.jsx(XIcon,{}),label:"UOMI X",link:"https://x.com/UomiNetwork"},{icon:jsxRuntimeExports.jsx(DiscordIcon,{}),label:"Community Discord",link:"https://discord.gg/RV5DUpjsdY"},{icon:jsxRuntimeExports.jsx(GithubIcon,{}),label:"GitHub",link:"https://github.com/uomi-network"}]}]}},Navbar=()=>{const[i,e]=reactExports.useState(!0),[t,n]=reactExports.useState(null),[r,s]=reactExports.useState(!1),o=p=>p&&(p.startsWith("http://")||p.startsWith("https://"));reactExports.useEffect(()=>{e(!0)},[]),reactExports.useEffect(()=>{const p=()=>{n(null)};return document.addEventListener("click",p),()=>document.removeEventListener("click",p)},[]);const l=(p,g)=>{p.stopPropagation(),n(t===g?null:g)},u=()=>{s(p=>!p)},d={bg:"bg-black",text:"text-white whitespace-nowrap break-keep",textSecondary:"text-gray-300",border:"border-zinc-800",dropdown:"bg-zinc-900 border-zinc-800"};return jsxRuntimeExports.jsx("div",{className:"dark",children:jsxRuntimeExports.jsxs("header",{className:`w-full border-b transition-colors duration-300 ${d.bg} ${d.border} ${d.text}`,children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx("a",{href:"/",children:jsxRuntimeExports.jsx("img",{src:"https://uomi-new.vercel.app/UOMI.svg",alt:"UOMI Logo",className:"h-8 w-auto",style:{filter:"invert(1)"}})})}),jsxRuntimeExports.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:Object.keys(menuItems).map(p=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("button",{onClick:g=>l(g,p),className:`flex items-center gap-1.5 py-2 transition-colors duration-200 font-medium ${t===p?"text-[#dffe00]":`${d.text} hover:text-[#dffe00]`}`,children:[p,jsxRuntimeExports.jsx(motion.div,{animate:{rotate:t===p?180:0},transition:{duration:.2},children:jsxRuntimeExports.jsx(ChevronDown,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:t===p&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.15},className:`absolute left-1/2 transform -translate-x-1/2 mt-2 rounded-xl border shadow-lg ${d.dropdown} z-50`,onClick:g=>g.stopPropagation(),style:{minWidth:"280px",boxShadow:i?"0 10px 25px -5px rgba(223,254,0,0.25)":"0 10px 25px -5px rgba(0,0,0,0.1)"},children:p==="Ecosystem"?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-6 p-6 min-w-[560px]",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-[#dffe00] mb-3",children:"Explore"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:menuItems[p].sections[0].items.map((g,m)=>jsxRuntimeExports.jsx(motion.li,{className:"flex items-start gap-2.5 group cursor-pointer",whileHover:{x:3},children:jsxRuntimeExports.jsxs("a",{href:g.link,className:"flex items-start gap-2.5 group cursor-pointer",...o(g.link)&&{target:"_blank",rel:"noopener noreferrer"},children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:g.icon}),jsxRuntimeExports.jsx("span",{className:d.text+" group-hover:text-[#dffe00]",children:g.label})]})},m))})]}),jsxRuntimeExports.jsx("div",{className:"bg-zinc-800 border-zinc-700 border rounded-lg p-4 font-medium text-sm mt-auto",children:jsxRuntimeExports.jsx("a",{href:menuItems[p].ctaLink,className:"hover:text-[#dffe00]",...o(menuItems[p].ctaLink)&&{target:"_blank",rel:"noopener noreferrer"},children:menuItems[p].ctaBox})})]}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-[#dffe00] mb-3",children:"Builder Programs"}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:menuItems[p].sections[1].items.map((g,m)=>jsxRuntimeExports.jsx(motion.li,{className:"group cursor-pointer",whileHover:{x:3},children:jsxRuntimeExports.jsxs("a",{href:g.link,className:"block",...o(g.link)&&{target:"_blank",rel:"noopener noreferrer"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:`${d.text} font-medium group-hover:text-[#dffe00]`,children:g.label}),g.comingSoon&&jsxRuntimeExports.jsx("span",{className:"text-xs bg-zinc-700 text-[#dffe00] px-2 py-0.5 rounded-full",children:"coming soon"})]}),jsxRuntimeExports.jsx("p",{className:`text-sm ${d.textSecondary}`,children:g.description})]})},m))})]})})]}):jsxRuntimeExports.jsx("div",{className:"p-6 flex flex-row gap-12 min-w-[200px]",children:menuItems[p].sections.map((g,m)=>jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[g.title&&jsxRuntimeExports.jsx("h3",{className:"font-semibold text-[#dffe00]",children:g.title}),g.items&&jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:g.items.map((y,_)=>jsxRuntimeExports.jsx(motion.li,{className:"flex items-start gap-2.5 group cursor-pointer",whileHover:{x:3},children:jsxRuntimeExports.jsxs("a",{href:y.link,className:"flex items-start gap-2.5",...o(y.link)&&{target:"_blank",rel:"noopener noreferrer"},children:[y.icon&&jsxRuntimeExports.jsx("span",{className:"text-lg",children:y.icon}),jsxRuntimeExports.jsx("span",{className:d.text+" group-hover:text-[#dffe00]",children:y.label})]})},_))}),g.description&&jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h4",{className:`font-semibold ${d.text}`,children:g.title}),jsxRuntimeExports.jsx("a",{href:g.link,className:"block hover:text-[#dffe00]",...o(g.link)&&{target:"_blank",rel:"noopener noreferrer"},children:jsxRuntimeExports.jsx("p",{className:`text-sm ${d.textSecondary}`,children:g.description})})]})]},m))})})})]},p))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx(motion.a,{href:"https://app.uomi.ai/",className:"hidden sm:block bg-[#dffe00] text-black px-5 py-2 rounded-full font-semibold shadow-md",target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05,backgroundColor:"#c8e500"},whileTap:{scale:.95},children:"Join Testnet"}),jsxRuntimeExports.jsx("button",{className:"md:hidden p-2 rounded-full",onClick:u,"aria-label":"Toggle mobile menu",children:jsxRuntimeExports.jsx(Menu,{className:`w-6 h-6 ${d.text}`})})]})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:r&&jsxRuntimeExports.jsx(motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:`md:hidden overflow-hidden ${d.bg} border-t ${d.border}`,children:jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 divide-y divide-gray-700",children:[Object.keys(menuItems).map(p=>jsxRuntimeExports.jsxs("div",{className:"py-3",children:[jsxRuntimeExports.jsxs("button",{onClick:g=>{g.stopPropagation(),l(g,p)},className:`flex items-center justify-between w-full py-2 ${d.text} font-medium`,children:[p,jsxRuntimeExports.jsx(motion.div,{animate:{rotate:t===p?180:0},transition:{duration:.2},children:jsxRuntimeExports.jsx(ChevronDown,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:t===p&&jsxRuntimeExports.jsxs(motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"pl-4 overflow-hidden mt-1",children:[menuItems[p].sections.map((g,m)=>jsxRuntimeExports.jsxs("div",{className:"py-2",children:[g.title&&jsxRuntimeExports.jsx("h3",{className:"font-medium text-sm text-[#dffe00] mb-2",children:g.title}),g.items&&jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:g.items.map((y,_)=>jsxRuntimeExports.jsx("li",{className:"py-1",children:jsxRuntimeExports.jsxs("a",{href:y.link,className:"flex gap-2.5 items-start hover:text-[#dffe00]",...o(y.link)&&{target:"_blank",rel:"noopener noreferrer"},children:[y.icon&&jsxRuntimeExports.jsx("span",{className:"text-lg",children:y.icon}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:`font-medium text-sm ${d.text}`,children:y.label}),y.description&&jsxRuntimeExports.jsx("p",{className:`text-xs ${d.textSecondary}`,children:y.description})]})]})},_))}),g.description&&jsxRuntimeExports.jsx("div",{className:"mt-1",children:jsxRuntimeExports.jsx("a",{href:g.link,className:"block hover:text-[#dffe00]",...o(g.link)&&{target:"_blank",rel:"noopener noreferrer"},children:jsxRuntimeExports.jsx("p",{className:`text-sm ${d.textSecondary}`,children:g.description})})})]},m)),p==="Ecosystem"&&menuItems[p].ctaBox&&jsxRuntimeExports.jsx("div",{className:"bg-zinc-800 rounded-lg p-3 text-sm my-3",children:jsxRuntimeExports.jsx("a",{href:menuItems[p].ctaLink,className:"block hover:text-[#dffe00]",...o(menuItems[p].ctaLink)&&{target:"_blank",rel:"noopener noreferrer"},children:menuItems[p].ctaBox})})]})})]},p)),jsxRuntimeExports.jsx("div",{className:"py-4",children:jsxRuntimeExports.jsx(motion.a,{href:"https://app.uomi.ai/",className:"block w-full text-center bg-[#dffe00] text-black py-2.5 rounded-full font-semibold",target:"_blank",rel:"noopener noreferrer",whileTap:{scale:.95},children:"Join Testnet"})})]})})})]})})},Footer=()=>jsxRuntimeExports.jsx("footer",{className:"w-full py-10 md:py-16 bg-black text-white border-t border-zinc-800",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-5 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"col-span-2 mb-6 md:mb-0 md:col-span-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-4 md:mb-6",children:jsxRuntimeExports.jsx("img",{src:"https://uomi-new.vercel.app/UOMI.svg",alt:"UOMI Logo",className:"h-8 md:h-10 w-auto",style:{filter:"invert(1)"}})}),jsxRuntimeExports.jsx("p",{className:"mb-4 md:mb-6 text-sm md:text-base text-gray-300 max-w-md",children:"The layer 1 blockchain designed for autonomous AI. Built for verifiable on-chain computation, multi-chain agents, and the next generation of intelligent dApps."}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-4 mb-8",children:[jsxRuntimeExports.jsx("a",{href:"https://x.com/uomiNetwork",className:"p-2 rounded-full hover:bg-zinc-800 transition-colors duration-200","aria-label":"Twitter",children:jsxRuntimeExports.jsx(XIcon,{})}),jsxRuntimeExports.jsx("a",{href:"https://github.com/Uomi-network",className:"p-2 rounded-full hover:bg-zinc-800 transition-colors duration-200","aria-label":"GitHub",children:jsxRuntimeExports.jsx(GithubIcon,{})}),jsxRuntimeExports.jsx("a",{href:"https://discord.gg/RV5DUpjsdY",className:"p-2 rounded-full hover:bg-zinc-800 transition-colors duration-200","aria-label":"GitHub",children:jsxRuntimeExports.jsx(DiscordIcon,{})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-base md:text-lg mb-3 md:mb-4",style:{color:"#dffe00"},children:"Products"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 md:space-y-3 text-sm md:text-base text-gray-300",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"https://app.uomi.ai",className:"hover:text-[#dffe00] transition-colors",children:"Testnet"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"/docs",className:"hover:text-[#dffe00] transition-colors",children:"Developer"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"/wasp",className:"hover:text-[#dffe00] transition-colors",children:"Agent Studio"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"https://explorer.uomi.ai",className:"hover:text-[#dffe00] transition-colors",children:"Explorer"})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-base md:text-lg mb-3 md:mb-4",style:{color:"#dffe00"},children:"Resources"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 md:space-y-3 text-sm md:text-base text-gray-300",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"https://docs.uomi.ai",className:"hover:text-[#dffe00] transition-colors",children:"Documentation"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"/whitepaper",className:"hover:text-[#dffe00] transition-colors",children:"Whitepaper"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"/blog",className:"hover:text-[#dffe00] transition-colors",children:"Blog"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"https://discord.gg/RV5DUpjsdY",className:"hover:text-[#dffe00] transition-colors",children:"Community"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-10 md:mt-16 pt-6 md:pt-8 border-t border-zinc-800 flex flex-col md:flex-row justify-between items-center",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs md:text-sm text-center md:text-left",children:" 2025 UOMI Network. All rights reserved."}),jsxRuntimeExports.jsx("div",{className:"flex gap-4 md:gap-6 mt-4 md:mt-0 text-gray-400 text-xs md:text-sm"})]})]})}),_lut$1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],DEG2RAD$1=Math.PI/180,RAD2DEG$1=180/Math.PI;function generateUUID$1(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(_lut$1[i&255]+_lut$1[i>>8&255]+_lut$1[i>>16&255]+_lut$1[i>>24&255]+"-"+_lut$1[e&255]+_lut$1[e>>8&255]+"-"+_lut$1[e>>16&15|64]+_lut$1[e>>24&255]+"-"+_lut$1[t&63|128]+_lut$1[t>>8&255]+"-"+_lut$1[t>>16&255]+_lut$1[t>>24&255]+_lut$1[n&255]+_lut$1[n>>8&255]+_lut$1[n>>16&255]+_lut$1[n>>24&255]).toLowerCase()}function clamp$1(i,e,t){return Math.max(e,Math.min(t,i))}function euclideanModulo$1(i,e){return(i%e+e)%e}function lerp$1(i,e,t){return(1-t)*i+t*e}function denormalize$1(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function normalize$1(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}let Quaternion$1=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,l){let u=n[r+0],d=n[r+1],p=n[r+2],g=n[r+3];const m=s[o+0],y=s[o+1],_=s[o+2],E=s[o+3];if(l===0){e[t+0]=u,e[t+1]=d,e[t+2]=p,e[t+3]=g;return}if(l===1){e[t+0]=m,e[t+1]=y,e[t+2]=_,e[t+3]=E;return}if(g!==E||u!==m||d!==y||p!==_){let S=1-l;const b=u*m+d*y+p*_+g*E,C=b>=0?1:-1,T=1-b*b;if(T>Number.EPSILON){const N=Math.sqrt(T),L=Math.atan2(N,b*C);S=Math.sin(S*L)/N,l=Math.sin(l*L)/N}const A=l*C;if(u=u*S+m*A,d=d*S+y*A,p=p*S+_*A,g=g*S+E*A,S===1-l){const N=1/Math.sqrt(u*u+d*d+p*p+g*g);u*=N,d*=N,p*=N,g*=N}}e[t]=u,e[t+1]=d,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,r,s,o){const l=n[r],u=n[r+1],d=n[r+2],p=n[r+3],g=s[o],m=s[o+1],y=s[o+2],_=s[o+3];return e[t]=l*_+p*g+u*y-d*m,e[t+1]=u*_+p*m+d*g-l*y,e[t+2]=d*_+p*y+l*m-u*g,e[t+3]=p*_-l*g-u*m-d*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,u=Math.sin,d=l(n/2),p=l(r/2),g=l(s/2),m=u(n/2),y=u(r/2),_=u(s/2);switch(o){case"XYZ":this._x=m*p*g+d*y*_,this._y=d*y*g-m*p*_,this._z=d*p*_+m*y*g,this._w=d*p*g-m*y*_;break;case"YXZ":this._x=m*p*g+d*y*_,this._y=d*y*g-m*p*_,this._z=d*p*_-m*y*g,this._w=d*p*g+m*y*_;break;case"ZXY":this._x=m*p*g-d*y*_,this._y=d*y*g+m*p*_,this._z=d*p*_+m*y*g,this._w=d*p*g-m*y*_;break;case"ZYX":this._x=m*p*g-d*y*_,this._y=d*y*g+m*p*_,this._z=d*p*_-m*y*g,this._w=d*p*g+m*y*_;break;case"YZX":this._x=m*p*g+d*y*_,this._y=d*y*g+m*p*_,this._z=d*p*_-m*y*g,this._w=d*p*g-m*y*_;break;case"XZY":this._x=m*p*g-d*y*_,this._y=d*y*g-m*p*_,this._z=d*p*_+m*y*g,this._w=d*p*g+m*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],l=t[5],u=t[9],d=t[2],p=t[6],g=t[10],m=n+l+g;if(m>0){const y=.5/Math.sqrt(m+1);this._w=.25/y,this._x=(p-u)*y,this._y=(s-d)*y,this._z=(o-r)*y}else if(n>l&&n>g){const y=2*Math.sqrt(1+n-l-g);this._w=(p-u)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+d)/y}else if(l>g){const y=2*Math.sqrt(1+l-n-g);this._w=(s-d)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(u+p)/y}else{const y=2*Math.sqrt(1+g-n-l);this._w=(o-r)/y,this._x=(s+d)/y,this._y=(u+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(clamp$1(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,l=t._x,u=t._y,d=t._z,p=t._w;return this._x=n*p+o*l+r*d-s*u,this._y=r*p+o*u+s*l-n*d,this._z=s*p+o*d+n*u-r*l,this._w=o*p-n*l-r*u-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+n*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*n+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const d=Math.sqrt(u),p=Math.atan2(d,l),g=Math.sin((1-t)*p)/d,m=Math.sin(t*p)/d;return this._w=o*g+this._w*m,this._x=n*g+this._x*m,this._y=r*g+this._y*m,this._z=s*g+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Vector3$1=class fd{constructor(e=0,t=0,n=0){fd.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_quaternion$5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_quaternion$5.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,l=e.z,u=e.w,d=2*(o*r-l*n),p=2*(l*t-s*r),g=2*(s*n-o*t);return this.x=t+u*d+o*g-l*p,this.y=n+u*p+l*d-s*g,this.z=r+u*g+s*p-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=clamp$1(this.x,e.x,t.x),this.y=clamp$1(this.y,e.y,t.y),this.z=clamp$1(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=clamp$1(this.x,e,t),this.y=clamp$1(this.y,e,t),this.z=clamp$1(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(clamp$1(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,l=t.y,u=t.z;return this.x=r*u-s*l,this.y=s*o-n*u,this.z=n*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return _vector$5.copy(this).projectOnVector(e),this.sub(_vector$5)}reflect(e){return this.sub(_vector$5.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(clamp$1(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const _vector$5=new Vector3$1,_quaternion$5=new Quaternion$1,REVISION$1="175",CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide$1=0,BackSide$1=1,DoubleSide$1=2,NoBlending$1=0,NormalBlending$1=1,AdditiveBlending$1=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation$1=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor$1=204,OneMinusSrcAlphaFactor$1=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth$1=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation$1=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,UVMapping$1=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping$1=1e3,ClampToEdgeWrapping$1=1001,MirroredRepeatWrapping$1=1002,NearestFilter$1=1003,NearestMipmapNearestFilter$1=1004,NearestMipmapLinearFilter$1=1005,LinearFilter$1=1006,LinearMipmapNearestFilter$1=1007,LinearMipmapLinearFilter$1=1008,UnsignedByteType$1=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType$1=1015,HalfFloatType$1=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,AlphaFormat=1021,RGBFormat=1022,RGBAFormat$1=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat$1=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap$1=0,ObjectSpaceNormalMap=1,NoColorSpace$1="",SRGBColorSpace$1="srgb",LinearSRGBColorSpace$1="srgb-linear",LinearTransfer$1="linear",SRGBTransfer$1="srgb",KeepStencilOp$1=7680,AlwaysStencilFunc$1=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage$1=35044,GLSL3="300 es",WebGLCoordinateSystem$1=2e3,WebGPUCoordinateSystem$1=2001;let Matrix4$1=class Bl{constructor(e,t,n,r,s,o,l,u,d,p,g,m,y,_,E,S){Bl.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,u,d,p,g,m,y,_,E,S)}set(e,t,n,r,s,o,l,u,d,p,g,m,y,_,E,S){const b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=r,b[1]=s,b[5]=o,b[9]=l,b[13]=u,b[2]=d,b[6]=p,b[10]=g,b[14]=m,b[3]=y,b[7]=_,b[11]=E,b[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Bl().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/_v1$9.setFromMatrixColumn(e,0).length(),s=1/_v1$9.setFromMatrixColumn(e,1).length(),o=1/_v1$9.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(r),d=Math.sin(r),p=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const m=o*p,y=o*g,_=l*p,E=l*g;t[0]=u*p,t[4]=-u*g,t[8]=d,t[1]=y+_*d,t[5]=m-E*d,t[9]=-l*u,t[2]=E-m*d,t[6]=_+y*d,t[10]=o*u}else if(e.order==="YXZ"){const m=u*p,y=u*g,_=d*p,E=d*g;t[0]=m+E*l,t[4]=_*l-y,t[8]=o*d,t[1]=o*g,t[5]=o*p,t[9]=-l,t[2]=y*l-_,t[6]=E+m*l,t[10]=o*u}else if(e.order==="ZXY"){const m=u*p,y=u*g,_=d*p,E=d*g;t[0]=m-E*l,t[4]=-o*g,t[8]=_+y*l,t[1]=y+_*l,t[5]=o*p,t[9]=E-m*l,t[2]=-o*d,t[6]=l,t[10]=o*u}else if(e.order==="ZYX"){const m=o*p,y=o*g,_=l*p,E=l*g;t[0]=u*p,t[4]=_*d-y,t[8]=m*d+E,t[1]=u*g,t[5]=E*d+m,t[9]=y*d-_,t[2]=-d,t[6]=l*u,t[10]=o*u}else if(e.order==="YZX"){const m=o*u,y=o*d,_=l*u,E=l*d;t[0]=u*p,t[4]=E-m*g,t[8]=_*g+y,t[1]=g,t[5]=o*p,t[9]=-l*p,t[2]=-d*p,t[6]=y*g+_,t[10]=m-E*g}else if(e.order==="XZY"){const m=o*u,y=o*d,_=l*u,E=l*d;t[0]=u*p,t[4]=-g,t[8]=d*p,t[1]=m*g+E,t[5]=o*p,t[9]=y*g-_,t[2]=_*g-y,t[6]=l*p,t[10]=E*g+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_zero$1,e,_one$1)}lookAt(e,t,n){const r=this.elements;return _z$1.subVectors(e,t),_z$1.lengthSq()===0&&(_z$1.z=1),_z$1.normalize(),_x$1.crossVectors(n,_z$1),_x$1.lengthSq()===0&&(Math.abs(n.z)===1?_z$1.x+=1e-4:_z$1.z+=1e-4,_z$1.normalize(),_x$1.crossVectors(n,_z$1)),_x$1.normalize(),_y$1.crossVectors(_z$1,_x$1),r[0]=_x$1.x,r[4]=_y$1.x,r[8]=_z$1.x,r[1]=_x$1.y,r[5]=_y$1.y,r[9]=_z$1.y,r[2]=_x$1.z,r[6]=_y$1.z,r[10]=_z$1.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[4],u=n[8],d=n[12],p=n[1],g=n[5],m=n[9],y=n[13],_=n[2],E=n[6],S=n[10],b=n[14],C=n[3],T=n[7],A=n[11],N=n[15],L=r[0],k=r[4],j=r[8],F=r[12],U=r[1],q=r[5],J=r[9],ee=r[13],Y=r[2],$=r[6],D=r[10],V=r[14],P=r[3],I=r[7],B=r[11],z=r[15];return s[0]=o*L+l*U+u*Y+d*P,s[4]=o*k+l*q+u*$+d*I,s[8]=o*j+l*J+u*D+d*B,s[12]=o*F+l*ee+u*V+d*z,s[1]=p*L+g*U+m*Y+y*P,s[5]=p*k+g*q+m*$+y*I,s[9]=p*j+g*J+m*D+y*B,s[13]=p*F+g*ee+m*V+y*z,s[2]=_*L+E*U+S*Y+b*P,s[6]=_*k+E*q+S*$+b*I,s[10]=_*j+E*J+S*D+b*B,s[14]=_*F+E*ee+S*V+b*z,s[3]=C*L+T*U+A*Y+N*P,s[7]=C*k+T*q+A*$+N*I,s[11]=C*j+T*J+A*D+N*B,s[15]=C*F+T*ee+A*V+N*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],l=e[5],u=e[9],d=e[13],p=e[2],g=e[6],m=e[10],y=e[14],_=e[3],E=e[7],S=e[11],b=e[15];return _*(+s*u*g-r*d*g-s*l*m+n*d*m+r*l*y-n*u*y)+E*(+t*u*y-t*d*m+s*o*m-r*o*y+r*d*p-s*u*p)+S*(+t*d*g-t*l*y-s*o*g+n*o*y+s*l*p-n*d*p)+b*(-r*l*p-t*u*g+t*l*m+r*o*g-n*o*m+n*u*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],p=e[8],g=e[9],m=e[10],y=e[11],_=e[12],E=e[13],S=e[14],b=e[15],C=g*S*d-E*m*d+E*u*y-l*S*y-g*u*b+l*m*b,T=_*m*d-p*S*d-_*u*y+o*S*y+p*u*b-o*m*b,A=p*E*d-_*g*d+_*l*y-o*E*y-p*l*b+o*g*b,N=_*g*u-p*E*u-_*l*m+o*E*m+p*l*S-o*g*S,L=t*C+n*T+r*A+s*N;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/L;return e[0]=C*k,e[1]=(E*m*s-g*S*s-E*r*y+n*S*y+g*r*b-n*m*b)*k,e[2]=(l*S*s-E*u*s+E*r*d-n*S*d-l*r*b+n*u*b)*k,e[3]=(g*u*s-l*m*s-g*r*d+n*m*d+l*r*y-n*u*y)*k,e[4]=T*k,e[5]=(p*S*s-_*m*s+_*r*y-t*S*y-p*r*b+t*m*b)*k,e[6]=(_*u*s-o*S*s-_*r*d+t*S*d+o*r*b-t*u*b)*k,e[7]=(o*m*s-p*u*s+p*r*d-t*m*d-o*r*y+t*u*y)*k,e[8]=A*k,e[9]=(_*g*s-p*E*s-_*n*y+t*E*y+p*n*b-t*g*b)*k,e[10]=(o*E*s-_*l*s+_*n*d-t*E*d-o*n*b+t*l*b)*k,e[11]=(p*l*s-o*g*s-p*n*d+t*g*d+o*n*y-t*l*y)*k,e[12]=N*k,e[13]=(p*E*r-_*g*r+_*n*m-t*E*m-p*n*S+t*g*S)*k,e[14]=(_*l*r-o*E*r-_*n*u+t*E*u+o*n*S-t*l*S)*k,e[15]=(o*g*r-p*l*r+p*n*u-t*g*u-o*n*m+t*l*m)*k,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,l=e.y,u=e.z,d=s*o,p=s*l;return this.set(d*o+n,d*l-r*u,d*u+r*l,0,d*l+r*u,p*l+n,p*u-r*o,0,d*u-r*l,p*u+r*o,s*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,l=t._z,u=t._w,d=s+s,p=o+o,g=l+l,m=s*d,y=s*p,_=s*g,E=o*p,S=o*g,b=l*g,C=u*d,T=u*p,A=u*g,N=n.x,L=n.y,k=n.z;return r[0]=(1-(E+b))*N,r[1]=(y+A)*N,r[2]=(_-T)*N,r[3]=0,r[4]=(y-A)*L,r[5]=(1-(m+b))*L,r[6]=(S+C)*L,r[7]=0,r[8]=(_+T)*k,r[9]=(S-C)*k,r[10]=(1-(m+E))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=_v1$9.set(r[0],r[1],r[2]).length();const o=_v1$9.set(r[4],r[5],r[6]).length(),l=_v1$9.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],_m1$7.copy(this);const d=1/s,p=1/o,g=1/l;return _m1$7.elements[0]*=d,_m1$7.elements[1]*=d,_m1$7.elements[2]*=d,_m1$7.elements[4]*=p,_m1$7.elements[5]*=p,_m1$7.elements[6]*=p,_m1$7.elements[8]*=g,_m1$7.elements[9]*=g,_m1$7.elements[10]*=g,t.setFromRotationMatrix(_m1$7),n.x=s,n.y=o,n.z=l,this}makePerspective(e,t,n,r,s,o,l=WebGLCoordinateSystem$1){const u=this.elements,d=2*s/(t-e),p=2*s/(n-r),g=(t+e)/(t-e),m=(n+r)/(n-r);let y,_;if(l===WebGLCoordinateSystem$1)y=-(o+s)/(o-s),_=-2*o*s/(o-s);else if(l===WebGPUCoordinateSystem$1)y=-o/(o-s),_=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=d,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=p,u[9]=m,u[13]=0,u[2]=0,u[6]=0,u[10]=y,u[14]=_,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,s,o,l=WebGLCoordinateSystem$1){const u=this.elements,d=1/(t-e),p=1/(n-r),g=1/(o-s),m=(t+e)*d,y=(n+r)*p;let _,E;if(l===WebGLCoordinateSystem$1)_=(o+s)*g,E=-2*g;else if(l===WebGPUCoordinateSystem$1)_=s*g,E=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*d,u[4]=0,u[8]=0,u[12]=-m,u[1]=0,u[5]=2*p,u[9]=0,u[13]=-y,u[2]=0,u[6]=0,u[10]=E,u[14]=-_,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}};const _v1$9=new Vector3$1,_m1$7=new Matrix4$1,_zero$1=new Vector3$1(0,0,0),_one$1=new Vector3$1(1,1,1),_x$1=new Vector3$1,_y$1=new Vector3$1,_z$1=new Vector3$1;let EventDispatcher$1=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const _matrix=new Matrix4$1,_quaternion$1=new Quaternion$1;let Euler$1=class md{constructor(e=0,t=0,n=0,r=md.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],u=r[1],d=r[5],p=r[9],g=r[2],m=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(clamp$1(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,d),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(u,d)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-g,y),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-clamp$1(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(m,y),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(clamp$1(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-clamp$1(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return _matrix.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_matrix,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Euler$1.DEFAULT_ORDER="XYZ";let Layers$1=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Matrix3$1=class gd{constructor(e,t,n,r,s,o,l,u,d){gd.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,u,d)}set(e,t,n,r,s,o,l,u,d){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=s,p[5]=u,p[6]=n,p[7]=o,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[3],u=n[6],d=n[1],p=n[4],g=n[7],m=n[2],y=n[5],_=n[8],E=r[0],S=r[3],b=r[6],C=r[1],T=r[4],A=r[7],N=r[2],L=r[5],k=r[8];return s[0]=o*E+l*C+u*N,s[3]=o*S+l*T+u*L,s[6]=o*b+l*A+u*k,s[1]=d*E+p*C+g*N,s[4]=d*S+p*T+g*L,s[7]=d*b+p*A+g*k,s[2]=m*E+y*C+_*N,s[5]=m*S+y*T+_*L,s[8]=m*b+y*A+_*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],p=e[8];return t*o*p-t*l*d-n*s*p+n*l*u+r*s*d-r*o*u}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],p=e[8],g=p*o-l*d,m=l*u-p*s,y=d*s-o*u,_=t*g+n*m+r*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/_;return e[0]=g*E,e[1]=(r*d-p*n)*E,e[2]=(l*n-r*o)*E,e[3]=m*E,e[4]=(p*t-r*u)*E,e[5]=(r*s-l*t)*E,e[6]=y*E,e[7]=(n*u-d*t)*E,e[8]=(o*t-n*s)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,l){const u=Math.cos(s),d=Math.sin(s);return this.set(n*u,n*d,-n*(u*o+d*l)+o+e,-r*d,r*u,-r*(-d*o+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(_m3$1.makeScale(e,t)),this}rotate(e){return this.premultiply(_m3$1.makeRotation(-e)),this}translate(e,t){return this.premultiply(_m3$1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const _m3$1=new Matrix3$1;let _object3DId$1=0;const _v1$8=new Vector3$1,_q1$1=new Quaternion$1,_m1$6=new Matrix4$1,_target$1=new Vector3$1,_position$1=new Vector3$1,_scale=new Vector3$1,_quaternion=new Quaternion$1,_xAxis$1=new Vector3$1(1,0,0),_yAxis$1=new Vector3$1(0,1,0),_zAxis$1=new Vector3$1(0,0,1),_addedEvent$1={type:"added"},_removedEvent$1={type:"removed"},_childaddedEvent$1={type:"childadded",child:null},_childremovedEvent$1={type:"childremoved",child:null};let Object3D$1=class Ia extends EventDispatcher$1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId$1++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ia.DEFAULT_UP.clone();const e=new Vector3$1,t=new Euler$1,n=new Quaternion$1,r=new Vector3$1(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Matrix4$1},normalMatrix:{value:new Matrix3$1}}),this.matrix=new Matrix4$1,this.matrixWorld=new Matrix4$1,this.matrixAutoUpdate=Ia.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ia.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers$1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return _q1$1.setFromAxisAngle(e,t),this.quaternion.multiply(_q1$1),this}rotateOnWorldAxis(e,t){return _q1$1.setFromAxisAngle(e,t),this.quaternion.premultiply(_q1$1),this}rotateX(e){return this.rotateOnAxis(_xAxis$1,e)}rotateY(e){return this.rotateOnAxis(_yAxis$1,e)}rotateZ(e){return this.rotateOnAxis(_zAxis$1,e)}translateOnAxis(e,t){return _v1$8.copy(e).applyQuaternion(this.quaternion),this.position.add(_v1$8.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_xAxis$1,e)}translateY(e){return this.translateOnAxis(_yAxis$1,e)}translateZ(e){return this.translateOnAxis(_zAxis$1,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_m1$6.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?_target$1.copy(e):_target$1.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),_position$1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$6.lookAt(_position$1,_target$1,this.up):_m1$6.lookAt(_target$1,_position$1,this.up),this.quaternion.setFromRotationMatrix(_m1$6),r&&(_m1$6.extractRotation(r.matrixWorld),_q1$1.setFromRotationMatrix(_m1$6),this.quaternion.premultiply(_q1$1.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(_addedEvent$1),_childaddedEvent$1.child=e,this.dispatchEvent(_childaddedEvent$1),_childaddedEvent$1.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_removedEvent$1),_childremovedEvent$1.child=e,this.dispatchEvent(_childremovedEvent$1),_childremovedEvent$1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_m1$6.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_m1$6.multiply(e.parent.matrixWorld)),e.applyMatrix4(_m1$6),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(_addedEvent$1),_childaddedEvent$1.child=e,this.dispatchEvent(_childaddedEvent$1),_childaddedEvent$1.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$1,e,_scale),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$1,_quaternion,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let d=0,p=u.length;d<p;d++){const g=u[d];s(e.shapes,g)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,d=this.material.length;u<d;u++)l.push(s(e.materials,this.material[u]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];r.animations.push(s(e.animations,u))}}if(t){const l=o(e.geometries),u=o(e.materials),d=o(e.textures),p=o(e.images),g=o(e.shapes),m=o(e.skeletons),y=o(e.animations),_=o(e.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),g.length>0&&(n.shapes=g),m.length>0&&(n.skeletons=m),y.length>0&&(n.animations=y),_.length>0&&(n.nodes=_)}return n.object=r,n;function o(l){const u=[];for(const d in l){const p=l[d];delete p.metadata,u.push(p)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}};Object3D$1.DEFAULT_UP=new Vector3$1(0,1,0);Object3D$1.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D$1.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;class Scene extends Object3D$1{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler$1,this.environmentIntensity=1,this.environmentRotation=new Euler$1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const LINEAR_REC709_TO_XYZ$1=new Matrix3$1().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709$1=new Matrix3$1().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement$1(){const i={enabled:!0,workingColorSpace:LinearSRGBColorSpace$1,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===SRGBTransfer$1&&(r.r=SRGBToLinear$1(r.r),r.g=SRGBToLinear$1(r.g),r.b=SRGBToLinear$1(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===SRGBTransfer$1&&(r.r=LinearToSRGB$1(r.r),r.g=LinearToSRGB$1(r.g),r.b=LinearToSRGB$1(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===NoColorSpace$1?LinearTransfer$1:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[LinearSRGBColorSpace$1]:{primaries:e,whitePoint:n,transfer:LinearTransfer$1,toXYZ:LINEAR_REC709_TO_XYZ$1,fromXYZ:XYZ_TO_LINEAR_REC709$1,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace$1},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace$1}},[SRGBColorSpace$1]:{primaries:e,whitePoint:n,transfer:SRGBTransfer$1,toXYZ:LINEAR_REC709_TO_XYZ$1,fromXYZ:XYZ_TO_LINEAR_REC709$1,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace$1}}}),i}const ColorManagement$1=createColorManagement$1();function SRGBToLinear$1(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function LinearToSRGB$1(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}const _colorKeywords$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA$1={h:0,s:0,l:0},_hslB$1={h:0,s:0,l:0};function hue2rgb$1(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let Color$1=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=SRGBColorSpace$1){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ColorManagement$1.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=ColorManagement$1.workingColorSpace){return this.r=e,this.g=t,this.b=n,ColorManagement$1.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=ColorManagement$1.workingColorSpace){if(e=euclideanModulo$1(e,1),t=clamp$1(t,0,1),n=clamp$1(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=hue2rgb$1(o,s,e+1/3),this.g=hue2rgb$1(o,s,e),this.b=hue2rgb$1(o,s,e-1/3)}return ColorManagement$1.toWorkingColorSpace(this,r),this}setStyle(e,t=SRGBColorSpace$1){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=SRGBColorSpace$1){const n=_colorKeywords$1[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=SRGBToLinear$1(e.r),this.g=SRGBToLinear$1(e.g),this.b=SRGBToLinear$1(e.b),this}copyLinearToSRGB(e){return this.r=LinearToSRGB$1(e.r),this.g=LinearToSRGB$1(e.g),this.b=LinearToSRGB$1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=SRGBColorSpace$1){return ColorManagement$1.fromWorkingColorSpace(_color$1.copy(this),e),Math.round(clamp$1(_color$1.r*255,0,255))*65536+Math.round(clamp$1(_color$1.g*255,0,255))*256+Math.round(clamp$1(_color$1.b*255,0,255))}getHexString(e=SRGBColorSpace$1){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ColorManagement$1.workingColorSpace){ColorManagement$1.fromWorkingColorSpace(_color$1.copy(this),t);const n=_color$1.r,r=_color$1.g,s=_color$1.b,o=Math.max(n,r,s),l=Math.min(n,r,s);let u,d;const p=(l+o)/2;if(l===o)u=0,d=0;else{const g=o-l;switch(d=p<=.5?g/(o+l):g/(2-o-l),o){case n:u=(r-s)/g+(r<s?6:0);break;case r:u=(s-n)/g+2;break;case s:u=(n-r)/g+4;break}u/=6}return e.h=u,e.s=d,e.l=p,e}getRGB(e,t=ColorManagement$1.workingColorSpace){return ColorManagement$1.fromWorkingColorSpace(_color$1.copy(this),t),e.r=_color$1.r,e.g=_color$1.g,e.b=_color$1.b,e}getStyle(e=SRGBColorSpace$1){ColorManagement$1.fromWorkingColorSpace(_color$1.copy(this),e);const t=_color$1.r,n=_color$1.g,r=_color$1.b;return e!==SRGBColorSpace$1?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(_hslA$1),this.setHSL(_hslA$1.h+e,_hslA$1.s+t,_hslA$1.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(_hslA$1),e.getHSL(_hslB$1);const n=lerp$1(_hslA$1.h,_hslB$1.h,t),r=lerp$1(_hslA$1.s,_hslB$1.s,t),s=lerp$1(_hslA$1.l,_hslB$1.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const _color$1=new Color$1;Color$1.NAMES=_colorKeywords$1;let Box3$1=class{constructor(e=new Vector3$1(1/0,1/0,1/0),t=new Vector3$1(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(_vector$4.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(_vector$4.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_vector$4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,_vector$4):_vector$4.fromBufferAttribute(s,o),_vector$4.applyMatrix4(e.matrixWorld),this.expandByPoint(_vector$4);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),_box$5.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),_box$5.copy(n.boundingBox)),_box$5.applyMatrix4(e.matrixWorld),this.union(_box$5)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,_vector$4),_vector$4.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_center$1),_extents$1.subVectors(this.max,_center$1),_v0$4.subVectors(e.a,_center$1),_v1$2.subVectors(e.b,_center$1),_v2$5.subVectors(e.c,_center$1),_f0$1.subVectors(_v1$2,_v0$4),_f1$1.subVectors(_v2$5,_v1$2),_f2$1.subVectors(_v0$4,_v2$5);let t=[0,-_f0$1.z,_f0$1.y,0,-_f1$1.z,_f1$1.y,0,-_f2$1.z,_f2$1.y,_f0$1.z,0,-_f0$1.x,_f1$1.z,0,-_f1$1.x,_f2$1.z,0,-_f2$1.x,-_f0$1.y,_f0$1.x,0,-_f1$1.y,_f1$1.x,0,-_f2$1.y,_f2$1.x,0];return!satForAxes$1(t,_v0$4,_v1$2,_v2$5,_extents$1)||(t=[1,0,0,0,1,0,0,0,1],!satForAxes$1(t,_v0$4,_v1$2,_v2$5,_extents$1))?!1:(_triangleNormal$1.crossVectors(_f0$1,_f1$1),t=[_triangleNormal$1.x,_triangleNormal$1.y,_triangleNormal$1.z],satForAxes$1(t,_v0$4,_v1$2,_v2$5,_extents$1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_vector$4).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(_vector$4).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_points$1[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_points$1[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_points$1[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_points$1[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_points$1[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_points$1[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_points$1[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_points$1[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_points$1),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const _points$1=[new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1],_vector$4=new Vector3$1,_box$5=new Box3$1,_v0$4=new Vector3$1,_v1$2=new Vector3$1,_v2$5=new Vector3$1,_f0$1=new Vector3$1,_f1$1=new Vector3$1,_f2$1=new Vector3$1,_center$1=new Vector3$1,_extents$1=new Vector3$1,_triangleNormal$1=new Vector3$1,_testAxis$1=new Vector3$1;function satForAxes$1(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){_testAxis$1.fromArray(i,s);const l=r.x*Math.abs(_testAxis$1.x)+r.y*Math.abs(_testAxis$1.y)+r.z*Math.abs(_testAxis$1.z),u=e.dot(_testAxis$1),d=t.dot(_testAxis$1),p=n.dot(_testAxis$1);if(Math.max(-Math.max(u,d,p),Math.min(u,d,p))>l)return!1}return!0}const _box$1=new Box3$1,_v1$1=new Vector3$1,_v2$1=new Vector3$1;let Sphere$1=class{constructor(e=new Vector3$1,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):_box$1.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_v1$1.subVectors(e,this.center);const t=_v1$1.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(_v1$1,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(_v2$1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_v1$1.copy(e.center).add(_v2$1)),this.expandByPoint(_v1$1.copy(e.center).sub(_v2$1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const _vector1$1=new Vector3$1,_vector2$3=new Vector3$1,_normalMatrix$1=new Matrix3$1;let Plane$1=class{constructor(e=new Vector3$1(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=_vector1$1.subVectors(n,t).cross(_vector2$3.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(_vector1$1),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||_normalMatrix$1.getNormalMatrix(e),r=this.coplanarPoint(_vector1$1).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const _sphere$8=new Sphere$1,_vector$3=new Vector3$1;let Frustum$1=class{constructor(e=new Plane$1,t=new Plane$1,n=new Plane$1,r=new Plane$1,s=new Plane$1,o=new Plane$1){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=WebGLCoordinateSystem$1){const n=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],u=r[3],d=r[4],p=r[5],g=r[6],m=r[7],y=r[8],_=r[9],E=r[10],S=r[11],b=r[12],C=r[13],T=r[14],A=r[15];if(n[0].setComponents(u-s,m-d,S-y,A-b).normalize(),n[1].setComponents(u+s,m+d,S+y,A+b).normalize(),n[2].setComponents(u+o,m+p,S+_,A+C).normalize(),n[3].setComponents(u-o,m-p,S-_,A-C).normalize(),n[4].setComponents(u-l,m-g,S-E,A-T).normalize(),t===WebGLCoordinateSystem$1)n[5].setComponents(u+l,m+g,S+E,A+T).normalize();else if(t===WebGPUCoordinateSystem$1)n[5].setComponents(l,g,E,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_sphere$8.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),_sphere$8.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_sphere$8)}intersectsSprite(e){return _sphere$8.center.set(0,0,0),_sphere$8.radius=.7071067811865476,_sphere$8.applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$8)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(_vector$3.x=r.normal.x>0?e.max.x:e.min.x,_vector$3.y=r.normal.y>0?e.max.y:e.min.y,_vector$3.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(_vector$3)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}},Vector4$1=class xd{constructor(e=0,t=0,n=0,r=1){xd.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const u=e.elements,d=u[0],p=u[4],g=u[8],m=u[1],y=u[5],_=u[9],E=u[2],S=u[6],b=u[10];if(Math.abs(p-m)<.01&&Math.abs(g-E)<.01&&Math.abs(_-S)<.01){if(Math.abs(p+m)<.1&&Math.abs(g+E)<.1&&Math.abs(_+S)<.1&&Math.abs(d+y+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const T=(d+1)/2,A=(y+1)/2,N=(b+1)/2,L=(p+m)/4,k=(g+E)/4,j=(_+S)/4;return T>A&&T>N?T<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(T),r=L/n,s=k/n):A>N?A<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(A),n=L/r,s=j/r):N<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(N),n=k/s,r=j/s),this.set(n,r,s,t),this}let C=Math.sqrt((S-_)*(S-_)+(g-E)*(g-E)+(m-p)*(m-p));return Math.abs(C)<.001&&(C=1),this.x=(S-_)/C,this.y=(g-E)/C,this.z=(m-p)/C,this.w=Math.acos((d+y+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=clamp$1(this.x,e.x,t.x),this.y=clamp$1(this.y,e.y,t.y),this.z=clamp$1(this.z,e.z,t.z),this.w=clamp$1(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=clamp$1(this.x,e,t),this.y=clamp$1(this.y,e,t),this.z=clamp$1(this.z,e,t),this.w=clamp$1(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(clamp$1(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}};function WebGLAnimation(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function WebGLAttributes(i){const e=new WeakMap;function t(l,u){const d=l.array,p=l.usage,g=d.byteLength,m=i.createBuffer();i.bindBuffer(u,m),i.bufferData(u,d,p),l.onUploadCallback();let y;if(d instanceof Float32Array)y=i.FLOAT;else if(d instanceof Uint16Array)l.isFloat16BufferAttribute?y=i.HALF_FLOAT:y=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)y=i.SHORT;else if(d instanceof Uint32Array)y=i.UNSIGNED_INT;else if(d instanceof Int32Array)y=i.INT;else if(d instanceof Int8Array)y=i.BYTE;else if(d instanceof Uint8Array)y=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)y=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:m,type:y,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version,size:g}}function n(l,u,d){const p=u.array,g=u.updateRanges;if(i.bindBuffer(d,l),g.length===0)i.bufferSubData(d,0,p);else{g.sort((y,_)=>y.start-_.start);let m=0;for(let y=1;y<g.length;y++){const _=g[m],E=g[y];E.start<=_.start+_.count+1?_.count=Math.max(_.count,E.start+E.count-_.start):(++m,g[m]=E)}g.length=m+1;for(let y=0,_=g.length;y<_;y++){const E=g[y];i.bufferSubData(d,E.start*p.BYTES_PER_ELEMENT,p,E.start,E.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);u&&(i.deleteBuffer(u.buffer),e.delete(l))}function o(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const d=e.get(l);if(d===void 0)e.set(l,t(l,u));else if(d.version<l.version){if(d.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,l,u),d.version=l.version}}return{get:r,remove:s,update:o}}let Vector2$1=class vd{constructor(e=0,t=0){vd.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=clamp$1(this.x,e.x,t.x),this.y=clamp$1(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=clamp$1(this.x,e,t),this.y=clamp$1(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(clamp$1(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(clamp$1(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}};const _vector$2=new Vector3$1,_vector2$2=new Vector2$1;let _id$4=0,BufferAttribute$1=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$4++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=StaticDrawUsage$1,this.updateRanges=[],this.gpuType=FloatType$1,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)_vector2$2.fromBufferAttribute(this,t),_vector2$2.applyMatrix3(e),this.setXY(t,_vector2$2.x,_vector2$2.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)_vector$2.fromBufferAttribute(this,t),_vector$2.applyMatrix3(e),this.setXYZ(t,_vector$2.x,_vector$2.y,_vector$2.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)_vector$2.fromBufferAttribute(this,t),_vector$2.applyMatrix4(e),this.setXYZ(t,_vector$2.x,_vector$2.y,_vector$2.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_vector$2.fromBufferAttribute(this,t),_vector$2.applyNormalMatrix(e),this.setXYZ(t,_vector$2.x,_vector$2.y,_vector$2.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_vector$2.fromBufferAttribute(this,t),_vector$2.transformDirection(e),this.setXYZ(t,_vector$2.x,_vector$2.y,_vector$2.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=denormalize$1(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=normalize$1(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=denormalize$1(t,this.array)),t}setX(e,t){return this.normalized&&(t=normalize$1(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=denormalize$1(t,this.array)),t}setY(e,t){return this.normalized&&(t=normalize$1(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=denormalize$1(t,this.array)),t}setZ(e,t){return this.normalized&&(t=normalize$1(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=denormalize$1(t,this.array)),t}setW(e,t){return this.normalized&&(t=normalize$1(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=normalize$1(t,this.array),n=normalize$1(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=normalize$1(t,this.array),n=normalize$1(n,this.array),r=normalize$1(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=normalize$1(t,this.array),n=normalize$1(n,this.array),r=normalize$1(r,this.array),s=normalize$1(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==StaticDrawUsage$1&&(e.usage=this.usage),e}},Uint16BufferAttribute$1=class extends BufferAttribute$1{constructor(e,t,n){super(new Uint16Array(e),t,n)}},Uint32BufferAttribute$1=class extends BufferAttribute$1{constructor(e,t,n){super(new Uint32Array(e),t,n)}},Float32BufferAttribute$1=class extends BufferAttribute$1{constructor(e,t,n){super(new Float32Array(e),t,n)}};function arrayNeedsUint32$1(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function createElementNS$1(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function createCanvasElement(){const i=createElementNS$1("canvas");return i.style.display="block",i}const _cache={};function warnOnce(i){i in _cache||(_cache[i]=!0,console.warn(i))}function probeAsync(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function toNormalizedProjectionMatrix(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function toReversedProjectionMatrix(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}let _id$3=0;const _m1$5=new Matrix4$1,_obj$1=new Object3D$1,_offset$1=new Vector3$1,_box=new Box3$1,_boxMorphTargets$1=new Box3$1,_vector$1=new Vector3$1;let BufferGeometry$1=class yd extends EventDispatcher$1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$3++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32$1(e)?Uint32BufferAttribute$1:Uint16BufferAttribute$1)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Matrix3$1().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _m1$5.makeRotationFromQuaternion(e),this.applyMatrix4(_m1$5),this}rotateX(e){return _m1$5.makeRotationX(e),this.applyMatrix4(_m1$5),this}rotateY(e){return _m1$5.makeRotationY(e),this.applyMatrix4(_m1$5),this}rotateZ(e){return _m1$5.makeRotationZ(e),this.applyMatrix4(_m1$5),this}translate(e,t,n){return _m1$5.makeTranslation(e,t,n),this.applyMatrix4(_m1$5),this}scale(e,t,n){return _m1$5.makeScale(e,t,n),this.applyMatrix4(_m1$5),this}lookAt(e){return _obj$1.lookAt(e),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Float32BufferAttribute$1(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3$1);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3$1(-1/0,-1/0,-1/0),new Vector3$1(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];_box.setFromBufferAttribute(s),this.morphTargetsRelative?(_vector$1.addVectors(this.boundingBox.min,_box.min),this.boundingBox.expandByPoint(_vector$1),_vector$1.addVectors(this.boundingBox.max,_box.max),this.boundingBox.expandByPoint(_vector$1)):(this.boundingBox.expandByPoint(_box.min),this.boundingBox.expandByPoint(_box.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3$1,1/0);return}if(e){const n=this.boundingSphere.center;if(_box.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];_boxMorphTargets$1.setFromBufferAttribute(l),this.morphTargetsRelative?(_vector$1.addVectors(_box.min,_boxMorphTargets$1.min),_box.expandByPoint(_vector$1),_vector$1.addVectors(_box.max,_boxMorphTargets$1.max),_box.expandByPoint(_vector$1)):(_box.expandByPoint(_boxMorphTargets$1.min),_box.expandByPoint(_boxMorphTargets$1.max))}_box.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)_vector$1.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(_vector$1));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],u=this.morphTargetsRelative;for(let d=0,p=l.count;d<p;d++)_vector$1.fromBufferAttribute(l,d),u&&(_offset$1.fromBufferAttribute(e,d),_vector$1.add(_offset$1)),r=Math.max(r,n.distanceToSquared(_vector$1))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute$1(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),l=[],u=[];for(let j=0;j<n.count;j++)l[j]=new Vector3$1,u[j]=new Vector3$1;const d=new Vector3$1,p=new Vector3$1,g=new Vector3$1,m=new Vector2$1,y=new Vector2$1,_=new Vector2$1,E=new Vector3$1,S=new Vector3$1;function b(j,F,U){d.fromBufferAttribute(n,j),p.fromBufferAttribute(n,F),g.fromBufferAttribute(n,U),m.fromBufferAttribute(s,j),y.fromBufferAttribute(s,F),_.fromBufferAttribute(s,U),p.sub(d),g.sub(d),y.sub(m),_.sub(m);const q=1/(y.x*_.y-_.x*y.y);isFinite(q)&&(E.copy(p).multiplyScalar(_.y).addScaledVector(g,-y.y).multiplyScalar(q),S.copy(g).multiplyScalar(y.x).addScaledVector(p,-_.x).multiplyScalar(q),l[j].add(E),l[F].add(E),l[U].add(E),u[j].add(S),u[F].add(S),u[U].add(S))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let j=0,F=C.length;j<F;++j){const U=C[j],q=U.start,J=U.count;for(let ee=q,Y=q+J;ee<Y;ee+=3)b(e.getX(ee+0),e.getX(ee+1),e.getX(ee+2))}const T=new Vector3$1,A=new Vector3$1,N=new Vector3$1,L=new Vector3$1;function k(j){N.fromBufferAttribute(r,j),L.copy(N);const F=l[j];T.copy(F),T.sub(N.multiplyScalar(N.dot(F))).normalize(),A.crossVectors(L,F);const q=A.dot(u[j])<0?-1:1;o.setXYZW(j,T.x,T.y,T.z,q)}for(let j=0,F=C.length;j<F;++j){const U=C[j],q=U.start,J=U.count;for(let ee=q,Y=q+J;ee<Y;ee+=3)k(e.getX(ee+0)),k(e.getX(ee+1)),k(e.getX(ee+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new BufferAttribute$1(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let m=0,y=n.count;m<y;m++)n.setXYZ(m,0,0,0);const r=new Vector3$1,s=new Vector3$1,o=new Vector3$1,l=new Vector3$1,u=new Vector3$1,d=new Vector3$1,p=new Vector3$1,g=new Vector3$1;if(e)for(let m=0,y=e.count;m<y;m+=3){const _=e.getX(m+0),E=e.getX(m+1),S=e.getX(m+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,E),o.fromBufferAttribute(t,S),p.subVectors(o,s),g.subVectors(r,s),p.cross(g),l.fromBufferAttribute(n,_),u.fromBufferAttribute(n,E),d.fromBufferAttribute(n,S),l.add(p),u.add(p),d.add(p),n.setXYZ(_,l.x,l.y,l.z),n.setXYZ(E,u.x,u.y,u.z),n.setXYZ(S,d.x,d.y,d.z)}else for(let m=0,y=t.count;m<y;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),p.subVectors(o,s),g.subVectors(r,s),p.cross(g),n.setXYZ(m+0,p.x,p.y,p.z),n.setXYZ(m+1,p.x,p.y,p.z),n.setXYZ(m+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)_vector$1.fromBufferAttribute(e,t),_vector$1.normalize(),e.setXYZ(t,_vector$1.x,_vector$1.y,_vector$1.z)}toNonIndexed(){function e(l,u){const d=l.array,p=l.itemSize,g=l.normalized,m=new d.constructor(u.length*p);let y=0,_=0;for(let E=0,S=u.length;E<S;E++){l.isInterleavedBufferAttribute?y=u[E]*l.data.stride+l.offset:y=u[E]*p;for(let b=0;b<p;b++)m[_++]=d[y++]}return new BufferAttribute$1(m,p,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new yd,n=this.index.array,r=this.attributes;for(const l in r){const u=r[l],d=e(u,n);t.setAttribute(l,d)}const s=this.morphAttributes;for(const l in s){const u=[],d=s[l];for(let p=0,g=d.length;p<g;p++){const m=d[p],y=e(m,n);u.push(y)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const d=o[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const d in u)u[d]!==void 0&&(e[d]=u[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const d=n[u];e.data.attributes[u]=d.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const d=this.morphAttributes[u],p=[];for(let g=0,m=d.length;g<m;g++){const y=d[g];p.push(y.toJSON(e.data))}p.length>0&&(r[u]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const d in r){const p=r[d];this.setAttribute(d,p.clone(t))}const s=e.morphAttributes;for(const d in s){const p=[],g=s[d];for(let m=0,y=g.length;m<y;m++)p.push(g[m].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,p=o.length;d<p;d++){const g=o[d];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};class BoxGeometry extends BufferGeometry$1{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],d=[],p=[],g=[];let m=0,y=0;_("z","y","x",-1,-1,n,t,e,o,s,0),_("z","y","x",1,-1,n,t,-e,o,s,1),_("x","z","y",1,1,e,n,t,r,o,2),_("x","z","y",1,-1,e,n,-t,r,o,3),_("x","y","z",1,-1,e,t,n,r,s,4),_("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(u),this.setAttribute("position",new Float32BufferAttribute$1(d,3)),this.setAttribute("normal",new Float32BufferAttribute$1(p,3)),this.setAttribute("uv",new Float32BufferAttribute$1(g,2));function _(E,S,b,C,T,A,N,L,k,j,F){const U=A/k,q=N/j,J=A/2,ee=N/2,Y=L/2,$=k+1,D=j+1;let V=0,P=0;const I=new Vector3$1;for(let B=0;B<D;B++){const z=B*q-ee;for(let te=0;te<$;te++){const ne=te*U-J;I[E]=ne*C,I[S]=z*T,I[b]=Y,d.push(I.x,I.y,I.z),I[E]=0,I[S]=0,I[b]=L>0?1:-1,p.push(I.x,I.y,I.z),g.push(te/k),g.push(1-B/j),V+=1}}for(let B=0;B<j;B++)for(let z=0;z<k;z++){const te=m+z+$*B,ne=m+z+$*(B+1),Q=m+(z+1)+$*(B+1),ue=m+(z+1)+$*B;u.push(te,ne,ue),u.push(ne,Q,ue),P+=6}l.addGroup(y,P,F),y+=P,m+=V}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}class PlaneGeometry extends BufferGeometry$1{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(n),u=Math.floor(r),d=l+1,p=u+1,g=e/l,m=t/u,y=[],_=[],E=[],S=[];for(let b=0;b<p;b++){const C=b*m-o;for(let T=0;T<d;T++){const A=T*g-s;_.push(A,-C,0),E.push(0,0,1),S.push(T/l),S.push(1-b/u)}}for(let b=0;b<u;b++)for(let C=0;C<l;C++){const T=C+d*b,A=C+d*(b+1),N=C+1+d*(b+1),L=C+1+d*b;y.push(T,A,L),y.push(A,N,L)}this.setIndex(y),this.setAttribute("position",new Float32BufferAttribute$1(_,3)),this.setAttribute("normal",new Float32BufferAttribute$1(E,3)),this.setAttribute("uv",new Float32BufferAttribute$1(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}let _materialId$1=0,Material$1=class extends EventDispatcher$1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId$1++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.blending=NormalBlending$1,this.side=FrontSide$1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor$1,this.blendDst=OneMinusSrcAlphaFactor$1,this.blendEquation=AddEquation$1,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color$1(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth$1,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc$1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp$1,this.stencilZFail=KeepStencilOp$1,this.stencilZPass=KeepStencilOp$1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending$1&&(n.blending=this.blending),this.side!==FrontSide$1&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==SrcAlphaFactor$1&&(n.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor$1&&(n.blendDst=this.blendDst),this.blendEquation!==AddEquation$1&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth$1&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc$1&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp$1&&(n.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp$1&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp$1&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};function cloneUniforms$1(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function mergeUniforms$1(i){const e={};for(let t=0;t<i.length;t++){const n=cloneUniforms$1(i[t]);for(const r in n)e[r]=n[r]}return e}function cloneUniformsGroups$1(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function getUnlitUniformColorSpace(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ColorManagement$1.workingColorSpace}const UniformsUtils$1={clone:cloneUniforms$1,merge:mergeUniforms$1},default_vertex$1=`
void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
`,default_fragment$1=`
void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}
`;let ShaderMaterial$1=class extends Material$1{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex$1,this.fragmentShader=default_fragment$1,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms$1(e.uniforms),this.uniformsGroups=cloneUniformsGroups$1(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}};const _vector=new Vector3$1,_segCenter$1=new Vector3$1,_segDir$1=new Vector3$1,_diff$1=new Vector3$1,_edge1$1=new Vector3$1,_edge2$1=new Vector3$1,_normal=new Vector3$1;let Ray$1=class{constructor(e=new Vector3$1,t=new Vector3$1(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_vector)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=_vector.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_vector.copy(this.origin).addScaledVector(this.direction,t),_vector.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){_segCenter$1.copy(e).add(t).multiplyScalar(.5),_segDir$1.copy(t).sub(e).normalize(),_diff$1.copy(this.origin).sub(_segCenter$1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(_segDir$1),l=_diff$1.dot(this.direction),u=-_diff$1.dot(_segDir$1),d=_diff$1.lengthSq(),p=Math.abs(1-o*o);let g,m,y,_;if(p>0)if(g=o*u-l,m=o*l-u,_=s*p,g>=0)if(m>=-_)if(m<=_){const E=1/p;g*=E,m*=E,y=g*(g+o*m+2*l)+m*(o*g+m+2*u)+d}else m=s,g=Math.max(0,-(o*m+l)),y=-g*g+m*(m+2*u)+d;else m=-s,g=Math.max(0,-(o*m+l)),y=-g*g+m*(m+2*u)+d;else m<=-_?(g=Math.max(0,-(-o*s+l)),m=g>0?-s:Math.min(Math.max(-s,-u),s),y=-g*g+m*(m+2*u)+d):m<=_?(g=0,m=Math.min(Math.max(-s,-u),s),y=m*(m+2*u)+d):(g=Math.max(0,-(o*s+l)),m=g>0?s:Math.min(Math.max(-s,-u),s),y=-g*g+m*(m+2*u)+d);else m=o>0?-s:s,g=Math.max(0,-(o*m+l)),y=-g*g+m*(m+2*u)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(_segCenter$1).addScaledVector(_segDir$1,m),y}intersectSphere(e,t){_vector.subVectors(e.center,this.origin);const n=_vector.dot(this.direction),r=_vector.dot(_vector)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=n-o,u=n+o;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,l,u;const d=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,m=this.origin;return d>=0?(n=(e.min.x-m.x)*d,r=(e.max.x-m.x)*d):(n=(e.max.x-m.x)*d,r=(e.min.x-m.x)*d),p>=0?(s=(e.min.y-m.y)*p,o=(e.max.y-m.y)*p):(s=(e.max.y-m.y)*p,o=(e.min.y-m.y)*p),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),g>=0?(l=(e.min.z-m.z)*g,u=(e.max.z-m.z)*g):(l=(e.max.z-m.z)*g,u=(e.min.z-m.z)*g),n>u||l>r)||((l>n||n!==n)&&(n=l),(u<r||r!==r)&&(r=u),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,_vector)!==null}intersectTriangle(e,t,n,r,s){_edge1$1.subVectors(t,e),_edge2$1.subVectors(n,e),_normal.crossVectors(_edge1$1,_edge2$1);let o=this.direction.dot(_normal),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;_diff$1.subVectors(this.origin,e);const u=l*this.direction.dot(_edge2$1.crossVectors(_diff$1,_edge2$1));if(u<0)return null;const d=l*this.direction.dot(_edge1$1.cross(_diff$1));if(d<0||u+d>o)return null;const p=-l*_diff$1.dot(_normal);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};const _v0$3=new Vector3$1,_v1=new Vector3$1,_v2=new Vector3$1,_v3$3=new Vector3$1,_vab$1=new Vector3$1,_vac$1=new Vector3$1,_vbc$1=new Vector3$1,_vap$1=new Vector3$1,_vbp$1=new Vector3$1,_vcp$1=new Vector3$1,_v40$1=new Vector4$1,_v41$1=new Vector4$1,_v42$1=new Vector4$1;let Triangle$1=class Nr{constructor(e=new Vector3$1,t=new Vector3$1,n=new Vector3$1){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),_v0$3.subVectors(e,t),r.cross(_v0$3);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){_v0$3.subVectors(r,t),_v1.subVectors(n,t),_v2.subVectors(e,t);const o=_v0$3.dot(_v0$3),l=_v0$3.dot(_v1),u=_v0$3.dot(_v2),d=_v1.dot(_v1),p=_v1.dot(_v2),g=o*d-l*l;if(g===0)return s.set(0,0,0),null;const m=1/g,y=(d*u-l*p)*m,_=(o*p-l*u)*m;return s.set(1-y-_,_,y)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,_v3$3)===null?!1:_v3$3.x>=0&&_v3$3.y>=0&&_v3$3.x+_v3$3.y<=1}static getInterpolation(e,t,n,r,s,o,l,u){return this.getBarycoord(e,t,n,r,_v3$3)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,_v3$3.x),u.addScaledVector(o,_v3$3.y),u.addScaledVector(l,_v3$3.z),u)}static getInterpolatedAttribute(e,t,n,r,s,o){return _v40$1.setScalar(0),_v41$1.setScalar(0),_v42$1.setScalar(0),_v40$1.fromBufferAttribute(e,t),_v41$1.fromBufferAttribute(e,n),_v42$1.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(_v40$1,s.x),o.addScaledVector(_v41$1,s.y),o.addScaledVector(_v42$1,s.z),o}static isFrontFacing(e,t,n,r){return _v0$3.subVectors(n,t),_v1.subVectors(e,t),_v0$3.cross(_v1).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _v0$3.subVectors(this.c,this.b),_v1.subVectors(this.a,this.b),_v0$3.cross(_v1).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Nr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Nr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Nr.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Nr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Nr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,l;_vab$1.subVectors(r,n),_vac$1.subVectors(s,n),_vap$1.subVectors(e,n);const u=_vab$1.dot(_vap$1),d=_vac$1.dot(_vap$1);if(u<=0&&d<=0)return t.copy(n);_vbp$1.subVectors(e,r);const p=_vab$1.dot(_vbp$1),g=_vac$1.dot(_vbp$1);if(p>=0&&g<=p)return t.copy(r);const m=u*g-p*d;if(m<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(n).addScaledVector(_vab$1,o);_vcp$1.subVectors(e,s);const y=_vab$1.dot(_vcp$1),_=_vac$1.dot(_vcp$1);if(_>=0&&y<=_)return t.copy(s);const E=y*d-u*_;if(E<=0&&d>=0&&_<=0)return l=d/(d-_),t.copy(n).addScaledVector(_vac$1,l);const S=p*_-y*g;if(S<=0&&g-p>=0&&y-_>=0)return _vbc$1.subVectors(s,r),l=(g-p)/(g-p+(y-_)),t.copy(r).addScaledVector(_vbc$1,l);const b=1/(S+E+m);return o=E*b,l=m*b,t.copy(n).addScaledVector(_vab$1,o).addScaledVector(_vac$1,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},MeshBasicMaterial$1=class extends Material$1{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler$1,this.combine=MultiplyOperation$1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const _inverseMatrix$5=new Matrix4$1,_ray$5=new Ray$1,_sphere$7=new Sphere$1,_sphereHitAt$1=new Vector3$1,_vA=new Vector3$1,_vB=new Vector3$1,_vC=new Vector3$1,_tempA$1=new Vector3$1,_morphA$1=new Vector3$1,_intersectionPoint$1=new Vector3$1,_intersectionPointWorld$1=new Vector3$1;let Mesh$1=class extends Object3D$1{constructor(e=new BufferGeometry$1,t=new MeshBasicMaterial$1){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){_morphA$1.set(0,0,0);for(let u=0,d=s.length;u<d;u++){const p=l[u],g=s[u];p!==0&&(_tempA$1.fromBufferAttribute(g,e),o?_morphA$1.addScaledVector(_tempA$1,p):_morphA$1.addScaledVector(_tempA$1.sub(t),p))}t.add(_morphA$1)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),_sphere$7.copy(n.boundingSphere),_sphere$7.applyMatrix4(s),_ray$5.copy(e.ray).recast(e.near),!(_sphere$7.containsPoint(_ray$5.origin)===!1&&(_ray$5.intersectSphere(_sphere$7,_sphereHitAt$1)===null||_ray$5.origin.distanceToSquared(_sphereHitAt$1)>(e.far-e.near)**2))&&(_inverseMatrix$5.copy(s).invert(),_ray$5.copy(e.ray).applyMatrix4(_inverseMatrix$5),!(n.boundingBox!==null&&_ray$5.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,_ray$5)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,l=s.index,u=s.attributes.position,d=s.attributes.uv,p=s.attributes.uv1,g=s.attributes.normal,m=s.groups,y=s.drawRange;if(l!==null)if(Array.isArray(o))for(let _=0,E=m.length;_<E;_++){const S=m[_],b=o[S.materialIndex],C=Math.max(S.start,y.start),T=Math.min(l.count,Math.min(S.start+S.count,y.start+y.count));for(let A=C,N=T;A<N;A+=3){const L=l.getX(A),k=l.getX(A+1),j=l.getX(A+2);r=checkGeometryIntersection$1(this,b,e,n,d,p,g,L,k,j),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),E=Math.min(l.count,y.start+y.count);for(let S=_,b=E;S<b;S+=3){const C=l.getX(S),T=l.getX(S+1),A=l.getX(S+2);r=checkGeometryIntersection$1(this,o,e,n,d,p,g,C,T,A),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(o))for(let _=0,E=m.length;_<E;_++){const S=m[_],b=o[S.materialIndex],C=Math.max(S.start,y.start),T=Math.min(u.count,Math.min(S.start+S.count,y.start+y.count));for(let A=C,N=T;A<N;A+=3){const L=A,k=A+1,j=A+2;r=checkGeometryIntersection$1(this,b,e,n,d,p,g,L,k,j),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),E=Math.min(u.count,y.start+y.count);for(let S=_,b=E;S<b;S+=3){const C=S,T=S+1,A=S+2;r=checkGeometryIntersection$1(this,o,e,n,d,p,g,C,T,A),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}};function checkIntersection$2(i,e,t,n,r,s,o,l){let u;if(e.side===BackSide$1?u=n.intersectTriangle(o,s,r,!0,l):u=n.intersectTriangle(r,s,o,e.side===FrontSide$1,l),u===null)return null;_intersectionPointWorld$1.copy(l),_intersectionPointWorld$1.applyMatrix4(i.matrixWorld);const d=t.ray.origin.distanceTo(_intersectionPointWorld$1);return d<t.near||d>t.far?null:{distance:d,point:_intersectionPointWorld$1.clone(),object:i}}function checkGeometryIntersection$1(i,e,t,n,r,s,o,l,u,d){i.getVertexPosition(l,_vA),i.getVertexPosition(u,_vB),i.getVertexPosition(d,_vC);const p=checkIntersection$2(i,e,t,n,_vA,_vB,_vC,_intersectionPoint$1);if(p){const g=new Vector3$1;Triangle$1.getBarycoord(_intersectionPoint$1,_vA,_vB,_vC,g),r&&(p.uv=Triangle$1.getInterpolatedAttribute(r,l,u,d,g,new Vector2$1)),s&&(p.uv1=Triangle$1.getInterpolatedAttribute(s,l,u,d,g,new Vector2$1)),o&&(p.normal=Triangle$1.getInterpolatedAttribute(o,l,u,d,g,new Vector3$1),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const m={a:l,b:u,c:d,normal:new Vector3$1,materialIndex:0};Triangle$1.getNormal(_vA,_vB,_vC,m.normal),p.face=m,p.barycoord=g}return p}const alphahash_fragment=`
#ifdef USE_ALPHAHASH

	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;

#endif
`,alphahash_pars_fragment=`
#ifdef USE_ALPHAHASH

	/**
	 * See: https://casual-effects.com/research/Wyman2017Hashed/index.html
	 */

	const float ALPHA_HASH_SCALE = 0.05; // Derived from trials only, and may be changed.

	float hash2D( vec2 value ) {

		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );

	}

	float hash3D( vec3 value ) {

		return hash2D( vec2( hash2D( value.xy ), value.z ) );

	}

	float getAlphaHashThreshold( vec3 position ) {

		// Find the discretized derivatives of our coordinates
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );

		// Find two nearest log-discretized noise scales
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);

		// Compute alpha thresholds at our two noise scales
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);

		// Factor to interpolate lerp with
		float lerpFactor = fract( log2( pixScale ) );

		// Interpolate alpha threshold from noise at two scales
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;

		// Pass into CDF to compute uniformly distrib threshold
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);

		// Find our final, uniformly distributed alpha threshold ()
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;

		// Avoids  == 0. Could also do  =1-
		return clamp( threshold , 1.0e-6, 1.0 );

	}

#endif
`,alphamap_fragment=`
#ifdef USE_ALPHAMAP

	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;

#endif
`,alphamap_pars_fragment=`
#ifdef USE_ALPHAMAP

	uniform sampler2D alphaMap;

#endif
`,alphatest_fragment=`
#ifdef USE_ALPHATEST

	#ifdef ALPHA_TO_COVERAGE

	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;

	#else

	if ( diffuseColor.a < alphaTest ) discard;

	#endif

#endif
`,alphatest_pars_fragment=`
#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif
`,aomap_fragment=`
#ifdef USE_AOMAP

	// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;

	reflectedLight.indirectDiffuse *= ambientOcclusion;

	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif

	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif

	#if defined( USE_ENVMAP ) && defined( STANDARD )

		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );

		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );

	#endif

#endif
`,aomap_pars_fragment=`
#ifdef USE_AOMAP

	uniform sampler2D aoMap;
	uniform float aoMapIntensity;

#endif
`,batching_pars_vertex=`
#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif

	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {

		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );

	}

	float getIndirectIndex( const in int i ) {

		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );

	}

#endif

#ifdef USE_BATCHING_COLOR

	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {

		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;

	}

#endif
`,batching_vertex=`
#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif
`,begin_vertex=`
vec3 transformed = vec3( position );

#ifdef USE_ALPHAHASH

	vPosition = vec3( position );

#endif
`,beginnormal_vertex=`
vec3 objectNormal = vec3( normal );

#ifdef USE_TANGENT

	vec3 objectTangent = vec3( tangent.xyz );

#endif
`,bsdfs=`

float G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {

	// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)
	return 0.25;

}

float D_BlinnPhong( const in float shininess, const in float dotNH ) {

	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );

}

vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {

	vec3 halfDir = normalize( lightDir + viewDir );

	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );

	vec3 F = F_Schlick( specularColor, 1.0, dotVH );

	float G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );

	float D = D_BlinnPhong( shininess, dotNH );

	return F * ( G * D );

} // validated

`,iridescence_fragment=`

#ifdef USE_IRIDESCENCE

	// XYZ to linear-sRGB color space
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);

	// Assume air interface for top
	// Note: We don't handle the case fresnel0 == 1
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {

		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );

	}

	// Conversion FO/IOR
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {

		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );

	}

	// ior is a value between 1.0 and 3.0. 1.0 is air interface
	float IorToFresnel0( float transmittedIor, float incidentIor ) {

		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));

	}

	// Fresnel equations for dielectric/dielectric interfaces.
	// Ref: https://belcour.github.io/blog/research/2017/05/01/brdf-thin-film.html
	// Evaluation XYZ sensitivity curves in Fourier space
	vec3 evalSensitivity( float OPD, vec3 shift ) {

		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );

		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;

		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;

	}

	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {

		vec3 I;

		// Force iridescenceIOR -> outsideIOR when thinFilmThickness -> 0.0
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		// Evaluate the cosTheta on the base layer (Snell law)
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );

		// Handle TIR:
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {

			return vec3( 1.0 );

		}

		float cosTheta2 = sqrt( cosTheta2Sq );

		// First interface
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;

		// Second interface
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) ); // guard against 1.0
		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;

		// Phase shift
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;

		// Compound terms
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );

		// Reflectance term for m = 0 (DC term amplitude)
		vec3 C0 = R12 + Rs;
		I = C0;

		// Reflectance term for m > 0 (pairs of diracs)
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {

			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;

		}

		// Since out of gamut colors might be produced, negative color values are clamped to 0.
		return max( I, vec3( 0.0 ) );

	}

#endif

`,bumpmap_pars_fragment=`
#ifdef USE_BUMPMAP

	uniform sampler2D bumpMap;
	uniform float bumpScale;

	// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen
	// https://mmikk.github.io/papers3d/mm_sfgrad_bump.pdf

	// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)

	vec2 dHdxy_fwd() {

		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );

		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;

		return vec2( dBx, dBy );

	}

	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {

		// normalize is done to ensure that the bump map looks the same regardless of the texture's scale
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm; // normalized

		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );

		float fDet = dot( vSigmaX, R1 ) * faceDirection;

		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );

	}

#endif
`,clipping_planes_fragment=`
#if NUM_CLIPPING_PLANES > 0

	vec4 plane;

	#ifdef ALPHA_TO_COVERAGE

		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;

		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {

			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );

			if ( clipOpacity == 0.0 ) discard;

		}
		#pragma unroll_loop_end

		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES

			float unionClipOpacity = 1.0;

			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {

				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );

			}
			#pragma unroll_loop_end

			clipOpacity *= 1.0 - unionClipOpacity;

		#endif

		diffuseColor.a *= clipOpacity;

		if ( diffuseColor.a == 0.0 ) discard;

	#else

		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {

			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;

		}
		#pragma unroll_loop_end

		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES

			bool clipped = true;

			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {

				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;

			}
			#pragma unroll_loop_end

			if ( clipped ) discard;

		#endif

	#endif

#endif
`,clipping_planes_pars_fragment=`
#if NUM_CLIPPING_PLANES > 0

	varying vec3 vClipPosition;

	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];

#endif
`,clipping_planes_pars_vertex=`
#if NUM_CLIPPING_PLANES > 0

	varying vec3 vClipPosition;

#endif
`,clipping_planes_vertex=`
#if NUM_CLIPPING_PLANES > 0

	vClipPosition = - mvPosition.xyz;

#endif
`,color_fragment=`
#if defined( USE_COLOR_ALPHA )

	diffuseColor *= vColor;

#elif defined( USE_COLOR )

	diffuseColor.rgb *= vColor;

#endif
`,color_pars_fragment=`
#if defined( USE_COLOR_ALPHA )

	varying vec4 vColor;

#elif defined( USE_COLOR )

	varying vec3 vColor;

#endif
`,color_pars_vertex=`
#if defined( USE_COLOR_ALPHA )

	varying vec4 vColor;

#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )

	varying vec3 vColor;

#endif
`,color_vertex=`
#if defined( USE_COLOR_ALPHA )

	vColor = vec4( 1.0 );

#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )

	vColor = vec3( 1.0 );

#endif

#ifdef USE_COLOR

	vColor *= color;

#endif

#ifdef USE_INSTANCING_COLOR

	vColor.xyz *= instanceColor.xyz;

#endif

#ifdef USE_BATCHING_COLOR

	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );

	vColor.xyz *= batchingColor.xyz;

#endif
`,common=`
#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6

#ifndef saturate
// <tonemapping_pars_fragment> may have defined saturate() already
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )

float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }

// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.
// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand( const in vec2 uv ) {

	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );

	return fract( sin( sn ) * c );

}

#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif

struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};

struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};

#ifdef USE_ALPHAHASH

	varying vec3 vPosition;

#endif

vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

}

vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {

	// dir can be either a direction vector or a normal vector
	// upper-left 3x3 of matrix is assumed to be orthogonal

	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );

}

mat3 transposeMat3( const in mat3 m ) {

	mat3 tmp;

	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );

	return tmp;

}

bool isPerspectiveMatrix( mat4 m ) {

	return m[ 2 ][ 3 ] == - 1.0;

}

vec2 equirectUv( in vec3 dir ) {

	// dir is assumed to be unit length

	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;

	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;

	return vec2( u, v );

}

vec3 BRDF_Lambert( const in vec3 diffuseColor ) {

	return RECIPROCAL_PI * diffuseColor;

} // validated

vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {

	// Original approximation by Christophe Schlick '94
	// float fresnel = pow( 1.0 - dotVH, 5.0 );

	// Optimized variant (presented by Epic at SIGGRAPH '13)
	// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );

	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );

} // validated

float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {

	// Original approximation by Christophe Schlick '94
	// float fresnel = pow( 1.0 - dotVH, 5.0 );

	// Optimized variant (presented by Epic at SIGGRAPH '13)
	// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );

	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );

} // validated
`,cube_uv_reflection_fragment=`
#ifdef ENVMAP_TYPE_CUBE_UV

	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0

	// These shader functions convert between the UV coordinates of a single face of
	// a cubemap, the 0-5 integer index of a cube face, and the direction vector for
	// sampling a textureCube (not generally normalized ).

	float getFace( vec3 direction ) {

		vec3 absDirection = abs( direction );

		float face = - 1.0;

		if ( absDirection.x > absDirection.z ) {

			if ( absDirection.x > absDirection.y )

				face = direction.x > 0.0 ? 0.0 : 3.0;

			else

				face = direction.y > 0.0 ? 1.0 : 4.0;

		} else {

			if ( absDirection.z > absDirection.y )

				face = direction.z > 0.0 ? 2.0 : 5.0;

			else

				face = direction.y > 0.0 ? 1.0 : 4.0;

		}

		return face;

	}

	// RH coordinate system; PMREM face-indexing convention
	vec2 getUV( vec3 direction, float face ) {

		vec2 uv;

		if ( face == 0.0 ) {

			uv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x

		} else if ( face == 1.0 ) {

			uv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y

		} else if ( face == 2.0 ) {

			uv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z

		} else if ( face == 3.0 ) {

			uv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x

		} else if ( face == 4.0 ) {

			uv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y

		} else {

			uv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z

		}

		return 0.5 * ( uv + 1.0 );

	}

	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {

		float face = getFace( direction );

		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );

		mipInt = max( mipInt, cubeUV_minMipLevel );

		float faceSize = exp2( mipInt );

		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0; // #25071

		if ( face > 2.0 ) {

			uv.y += faceSize;

			face -= 3.0;

		}

		uv.x += face * faceSize;

		uv.x += filterInt * 3.0 * cubeUV_minTileSize;

		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );

		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;

		#ifdef texture2DGradEXT

			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb; // disable anisotropic filtering

		#else

			return texture2D( envMap, uv ).rgb;

		#endif

	}

	// These defines must match with PMREMGenerator

	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0

	float roughnessToMip( float roughness ) {

		float mip = 0.0;

		if ( roughness >= cubeUV_r1 ) {

			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;

		} else if ( roughness >= cubeUV_r4 ) {

			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;

		} else if ( roughness >= cubeUV_r5 ) {

			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;

		} else if ( roughness >= cubeUV_r6 ) {

			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;

		} else {

			mip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25
		}

		return mip;

	}

	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {

		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );

		float mipF = fract( mip );

		float mipInt = floor( mip );

		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );

		if ( mipF == 0.0 ) {

			return vec4( color0, 1.0 );

		} else {

			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );

			return vec4( mix( color0, color1, mipF ), 1.0 );

		}

	}

#endif
`,defaultnormal_vertex=`

vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT

	vec3 transformedTangent = objectTangent;

#endif

#ifdef USE_BATCHING

	// this is in lieu of a per-instance normal-matrix
	// shear transforms in the instance matrix are not supported

	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;

	#ifdef USE_TANGENT

		transformedTangent = bm * transformedTangent;

	#endif

#endif

#ifdef USE_INSTANCING

	// this is in lieu of a per-instance normal-matrix
	// shear transforms in the instance matrix are not supported

	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;

	#ifdef USE_TANGENT

		transformedTangent = im * transformedTangent;

	#endif

#endif

transformedNormal = normalMatrix * transformedNormal;

#ifdef FLIP_SIDED

	transformedNormal = - transformedNormal;

#endif

#ifdef USE_TANGENT

	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;

	#ifdef FLIP_SIDED

		transformedTangent = - transformedTangent;

	#endif

#endif
`,displacementmap_pars_vertex=`
#ifdef USE_DISPLACEMENTMAP

	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;

#endif
`,displacementmap_vertex=`
#ifdef USE_DISPLACEMENTMAP

	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );

#endif
`,emissivemap_fragment=`
#ifdef USE_EMISSIVEMAP

	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );

	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE

		// use inline sRGB decode until browsers properly support SRGB8_ALPHA8 with video textures (#26516)

		emissiveColor = sRGBTransferEOTF( emissiveColor );

	#endif

	totalEmissiveRadiance *= emissiveColor.rgb;

#endif
`,emissivemap_pars_fragment=`
#ifdef USE_EMISSIVEMAP

	uniform sampler2D emissiveMap;

#endif
`,colorspace_fragment=`
gl_FragColor = linearToOutputTexel( gl_FragColor );
`,colorspace_pars_fragment=`

vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}

vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}

vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}

`,envmap_fragment=`
#ifdef USE_ENVMAP

	#ifdef ENV_WORLDPOS

		vec3 cameraToFrag;

		if ( isOrthographic ) {

			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );

		} else {

			cameraToFrag = normalize( vWorldPosition - cameraPosition );

		}

		// Transforming Normal Vectors with the Inverse Transformation
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );

		#ifdef ENVMAP_MODE_REFLECTION

			vec3 reflectVec = reflect( cameraToFrag, worldNormal );

		#else

			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );

		#endif

	#else

		vec3 reflectVec = vReflect;

	#endif

	#ifdef ENVMAP_TYPE_CUBE

		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );

	#else

		vec4 envColor = vec4( 0.0 );

	#endif

	#ifdef ENVMAP_BLENDING_MULTIPLY

		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );

	#elif defined( ENVMAP_BLENDING_MIX )

		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );

	#elif defined( ENVMAP_BLENDING_ADD )

		outgoingLight += envColor.xyz * specularStrength * reflectivity;

	#endif

#endif
`,envmap_common_pars_fragment=`
#ifdef USE_ENVMAP

	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;

	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif
`,envmap_pars_fragment=`
#ifdef USE_ENVMAP

	uniform float reflectivity;

	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )

		#define ENV_WORLDPOS

	#endif

	#ifdef ENV_WORLDPOS

		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif

#endif
`,envmap_pars_vertex=`
#ifdef USE_ENVMAP

	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )

		#define ENV_WORLDPOS

	#endif

	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;

	#else

		varying vec3 vReflect;
		uniform float refractionRatio;

	#endif

#endif
`,envmap_vertex=`
#ifdef USE_ENVMAP

	#ifdef ENV_WORLDPOS

		vWorldPosition = worldPosition.xyz;

	#else

		vec3 cameraToVertex;

		if ( isOrthographic ) {

			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );

		} else {

			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );

		}

		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );

		#ifdef ENVMAP_MODE_REFLECTION

			vReflect = reflect( cameraToVertex, worldNormal );

		#else

			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );

		#endif

	#endif

#endif
`,fog_vertex=`
#ifdef USE_FOG

	vFogDepth = - mvPosition.z;

#endif
`,fog_pars_vertex=`
#ifdef USE_FOG

	varying float vFogDepth;

#endif
`,fog_fragment=`
#ifdef USE_FOG

	#ifdef FOG_EXP2

		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );

	#else

		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );

	#endif

	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );

#endif
`,fog_pars_fragment=`
#ifdef USE_FOG

	uniform vec3 fogColor;
	varying float vFogDepth;

	#ifdef FOG_EXP2

		uniform float fogDensity;

	#else

		uniform float fogNear;
		uniform float fogFar;

	#endif

#endif
`,gradientmap_pars_fragment=`

#ifdef USE_GRADIENTMAP

	uniform sampler2D gradientMap;

#endif

vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {

	// dotNL will be from -1.0 to 1.0
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );

	#ifdef USE_GRADIENTMAP

		return vec3( texture2D( gradientMap, coord ).r );

	#else

		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );

	#endif

}
`,lightmap_pars_fragment=`
#ifdef USE_LIGHTMAP

	uniform sampler2D lightMap;
	uniform float lightMapIntensity;

#endif
`,lights_lambert_fragment=`
LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;
`,lights_lambert_pars_fragment=`
varying vec3 vViewPosition;

struct LambertMaterial {

	vec3 diffuseColor;
	float specularStrength;

};

void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {

	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;

	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

}

void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {

	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

}

#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
`,lights_pars_begin=`
uniform bool receiveShadow;
uniform vec3 ambientLightColor;

#if defined( USE_LIGHT_PROBES )

	uniform vec3 lightProbe[ 9 ];

#endif

// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere
// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {

	// normal is assumed to have unit length

	float x = normal.x, y = normal.y, z = normal.z;

	// band 0
	vec3 result = shCoefficients[ 0 ] * 0.886227;

	// band 1
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;

	// band 2
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );

	return result;

}

vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {

	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );

	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );

	return irradiance;

}

vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {

	vec3 irradiance = ambientLightColor;

	return irradiance;

}

float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {

	// based upon Frostbite 3 Moving to Physically-based Rendering
	// page 32, equation 26: E[window1]
	// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );

	if ( cutoffDistance > 0.0 ) {

		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );

	}

	return distanceFalloff;

}

float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {

	return smoothstep( coneCosine, penumbraCosine, angleCosine );

}

#if NUM_DIR_LIGHTS > 0

	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};

	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];

	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {

		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;

	}

#endif


#if NUM_POINT_LIGHTS > 0

	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};

	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];

	// light is an out parameter as having it as a return value caused compiler errors on some devices
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {

		vec3 lVector = pointLight.position - geometryPosition;

		light.direction = normalize( lVector );

		float lightDistance = length( lVector );

		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );

	}

#endif


#if NUM_SPOT_LIGHTS > 0

	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};

	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];

	// light is an out parameter as having it as a return value caused compiler errors on some devices
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {

		vec3 lVector = spotLight.position - geometryPosition;

		light.direction = normalize( lVector );

		float angleCos = dot( light.direction, spotLight.direction );

		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );

		if ( spotAttenuation > 0.0 ) {

			float lightDistance = length( lVector );

			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );

		} else {

			light.color = vec3( 0.0 );
			light.visible = false;

		}

	}

#endif


#if NUM_RECT_AREA_LIGHTS > 0

	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};

	// Pre-computed values of LinearTransformedCosine approximation of BRDF
	// BRDF approximation Texture is 64x64
	uniform sampler2D ltc_1; // RGBA Float
	uniform sampler2D ltc_2; // RGBA Float

	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];

#endif


#if NUM_HEMI_LIGHTS > 0

	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};

	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];

	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {

		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;

		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );

		return irradiance;

	}

#endif
`,envmap_physical_pars_fragment=`
#ifdef USE_ENVMAP

	vec3 getIBLIrradiance( const in vec3 normal ) {

		#ifdef ENVMAP_TYPE_CUBE_UV

			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );

			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );

			return PI * envMapColor.rgb * envMapIntensity;

		#else

			return vec3( 0.0 );

		#endif

	}

	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {

		#ifdef ENVMAP_TYPE_CUBE_UV

			vec3 reflectVec = reflect( - viewDir, normal );

			// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );

			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );

			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );

			return envMapColor.rgb * envMapIntensity;

		#else

			return vec3( 0.0 );

		#endif

	}

	#ifdef USE_ANISOTROPY

		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {

			#ifdef ENVMAP_TYPE_CUBE_UV

			  // https://google.github.io/filament/Filament.md.html#lighting/imagebasedlights/anisotropy
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );

				return getIBLRadiance( viewDir, bentNormal, roughness );

			#else

				return vec3( 0.0 );

			#endif

		}

	#endif

#endif
`,lights_toon_fragment=`
ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
`,lights_toon_pars_fragment=`
varying vec3 vViewPosition;

struct ToonMaterial {

	vec3 diffuseColor;

};

void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {

	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;

	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

}

void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {

	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

}

#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
`,lights_phong_fragment=`
BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;
`,lights_phong_pars_fragment=`
varying vec3 vViewPosition;

struct BlinnPhongMaterial {

	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;

};

void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {

	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;

	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;

}

void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {

	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

}

#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
`,lights_physical_fragment=`
PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );

vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );

material.roughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.
material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );

#ifdef IOR

	material.ior = ior;

	#ifdef USE_SPECULAR

		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;

		#ifdef USE_SPECULAR_COLORMAP

			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;

		#endif

		#ifdef USE_SPECULAR_INTENSITYMAP

			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;

		#endif

		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );

	#else

		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;

	#endif

	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );

#else

	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;

#endif

#ifdef USE_CLEARCOAT

	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;

	#ifdef USE_CLEARCOATMAP

		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;

	#endif

	#ifdef USE_CLEARCOAT_ROUGHNESSMAP

		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;

	#endif

	material.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model
	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );

#endif

#ifdef USE_DISPERSION

	material.dispersion = dispersion;

#endif

#ifdef USE_IRIDESCENCE

	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;

	#ifdef USE_IRIDESCENCEMAP

		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;

	#endif

	#ifdef USE_IRIDESCENCE_THICKNESSMAP

		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;

	#else

		material.iridescenceThickness = iridescenceThicknessMaximum;

	#endif

#endif

#ifdef USE_SHEEN

	material.sheenColor = sheenColor;

	#ifdef USE_SHEEN_COLORMAP

		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;

	#endif

	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );

	#ifdef USE_SHEEN_ROUGHNESSMAP

		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;

	#endif

#endif

#ifdef USE_ANISOTROPY

	#ifdef USE_ANISOTROPYMAP

		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;

	#else

		vec2 anisotropyV = anisotropyVector;

	#endif

	material.anisotropy = length( anisotropyV );

	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}

	// Roughness along the anisotropy bitangent is the material roughness, while the tangent roughness increases with anisotropy.
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );

	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;

#endif
`,lights_physical_pars_fragment=`

struct PhysicalMaterial {

	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;

	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif

	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif

	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif

	#ifdef IOR
		float ior;
	#endif

	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif

	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif

};

// temporary
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );

vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );

    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}

// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2
// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {

	float a2 = pow2( alpha );

	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );

	return 0.5 / max( gv + gl, EPSILON );

}

// Microfacet Models for Refraction through Rough Surfaces - equation (33)
// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html
// alpha is "roughness squared" in Disneys reparameterization
float D_GGX( const in float alpha, const in float dotNH ) {

	float a2 = pow2( alpha );

	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1

	return RECIPROCAL_PI * a2 / pow2( denom );

}

// https://google.github.io/filament/Filament.md.html#materialsystem/anisotropicmodel/anisotropicspecularbrdf
#ifdef USE_ANISOTROPY

	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {

		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );

		return saturate(v);

	}

	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {

		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;

		return RECIPROCAL_PI * a2 * pow2 ( w2 );

	}

#endif

#ifdef USE_CLEARCOAT

	// GGX Distribution, Schlick Fresnel, GGX_SmithCorrelated Visibility
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {

		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;

		float alpha = pow2( roughness ); // UE4's roughness

		vec3 halfDir = normalize( lightDir + viewDir );

		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );

		vec3 F = F_Schlick( f0, f90, dotVH );

		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );

		float D = D_GGX( alpha, dotNH );

		return F * ( V * D );

	}

#endif

vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {

	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;

	float alpha = pow2( roughness ); // UE4's roughness

	vec3 halfDir = normalize( lightDir + viewDir );

	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );

	vec3 F = F_Schlick( f0, f90, dotVH );

	#ifdef USE_IRIDESCENCE

		F = mix( F, material.iridescenceFresnel, material.iridescence );

	#endif

	#ifdef USE_ANISOTROPY

		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );

		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );

		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );

	#else

		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );

		float D = D_GGX( alpha, dotNH );

	#endif

	return F * ( V * D );

}

// Rect Area Light

// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines
// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt
// code: https://github.com/selfshadow/ltc_code/

vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {

	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;

	float dotNV = saturate( dot( N, V ) );

	// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );

	uv = uv * LUT_SCALE + LUT_BIAS;

	return uv;

}

float LTC_ClippedSphereFormFactor( const in vec3 f ) {

	// Real-Time Area Lighting: a Journey from Research to Production (p.102)
	// An approximation of the form factor of a horizon-clipped rectangle.

	float l = length( f );

	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );

}

vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {

	float x = dot( v1, v2 );

	float y = abs( x );

	// rational polynomial approximation to theta / sin( theta ) / 2PI
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;

	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;

	return cross( v1, v2 ) * theta_sintheta;

}

vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {

	// bail if point is on back side of plane of light
	// assumes ccw winding order of light vertices
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );

	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );

	// construct orthonormal basis around N
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system

	// compute transform
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );

	// transform rect
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );

	// project rect onto sphere
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );

	// calculate vector form factor
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );

	// adjust for horizon clipping
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );

/*
	// alternate method of adjusting for horizon clipping (see reference)
	// refactoring required
	float len = length( vectorFormFactor );
	float z = vectorFormFactor.z / len;

	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;

	// tabulated horizon-clipped sphere, apparently...
	vec2 uv = vec2( z * 0.5 + 0.5, len );
	uv = uv * LUT_SCALE + LUT_BIAS;

	float scale = texture2D( ltc_2, uv ).w;

	float result = len * scale;
*/

	return vec3( result );

}

// End Rect Area Light

#if defined( USE_SHEEN )

// https://github.com/google/filament/blob/master/shaders/src/brdf.fs
float D_Charlie( float roughness, float dotNH ) {

	float alpha = pow2( roughness );

	// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF"
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 ); // 2^(-14/2), so sin2h^2 > 0 in fp16

	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );

}

// https://github.com/google/filament/blob/master/shaders/src/brdf.fs
float V_Neubelt( float dotNV, float dotNL ) {

	// Neubelt and Pettineo 2013, "Crafting a Next-gen Material Pipeline for The Order: 1886"
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );

}

vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {

	vec3 halfDir = normalize( lightDir + viewDir );

	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );

	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );

	return sheenColor * ( D * V );

}

#endif

// This is a curve-fit approximation to the "Charlie sheen" BRDF integrated over the hemisphere from
// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF". The analysis can be found
// in the Sheen section of https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {

	float dotNV = saturate( dot( normal, viewDir ) );

	float r2 = roughness * roughness;

	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;

	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;

	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );

	return saturate( DG * RECIPROCAL_PI );

}

// Analytical approximation of the DFG LUT, one half of the
// split-sum approximation used in indirect specular lighting.
// via 'environmentBRDF' from "Physically Based Shading on Mobile"
// https://www.unrealengine.com/blog/physically-based-shading-on-mobile
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {

	float dotNV = saturate( dot( normal, viewDir ) );

	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );

	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );

	vec4 r = roughness * c0 + c1;

	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;

	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;

	return fab;

}

vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {

	vec2 fab = DFGApprox( normal, viewDir, roughness );

	return specularColor * fab.x + specularF90 * fab.y;

}

// Fdez-Agera's "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"
// Approximates multiscattering in order to preserve energy.
// http://www.jcgt.org/published/0008/01/03/
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif

	vec2 fab = DFGApprox( normal, viewDir, roughness );

	#ifdef USE_IRIDESCENCE

		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );

	#else

		vec3 Fr = specularColor;

	#endif

	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;

	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;

	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619; // 1/21
	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );

	singleScatter += FssEss;
	multiScatter += Fms * Ems;

}

#if NUM_RECT_AREA_LIGHTS > 0

	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {

		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;

		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction
		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;

		vec2 uv = LTC_Uv( normal, viewDir, roughness );

		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );

		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);

		// LTC Fresnel Approximation by Stephen Hill
		// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );

		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );

		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );

	}

#endif

void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {

	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );

	vec3 irradiance = dotNL * directLight.color;

	#ifdef USE_CLEARCOAT

		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );

		vec3 ccIrradiance = dotNLcc * directLight.color;

		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );

	#endif

	#ifdef USE_SHEEN

		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );

	#endif

	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );

	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}

void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {

	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

}

void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {

	#ifdef USE_CLEARCOAT

		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );

	#endif

	#ifdef USE_SHEEN

		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );

	#endif

	// Both indirect specular and indirect diffuse light accumulate here

	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;

	#ifdef USE_IRIDESCENCE

		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );

	#else

		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );

	#endif

	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );

	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;

	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;

}

#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical

// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {

	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );

}
`,lights_fragment_begin=`
/**
 * This is a template that can be used to light a material, it uses pluggable
 * RenderEquations (RE)for specific lighting scenarios.
 *
 * Instructions for use:
 * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined
 * - Create a material parameter that is to be passed as the third parameter to your lighting functions.
 *
 * TODO:
 * - Add area light support.
 * - Add sphere light support.
 * - Add diffuse light probe (irradiance cubemap) support.
 */

vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

vec3 geometryClearcoatNormal = vec3( 0.0 );

#ifdef USE_CLEARCOAT

	geometryClearcoatNormal = clearcoatNormal;

#endif

#ifdef USE_IRIDESCENCE

	float dotNVi = saturate( dot( normal, geometryViewDir ) );

	if ( material.iridescenceThickness == 0.0 ) {

		material.iridescence = 0.0;

	} else {

		material.iridescence = saturate( material.iridescence );

	}

	if ( material.iridescence > 0.0 ) {

		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );

		// Iridescence F0 approximation
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );

	}

#endif

IncidentLight directLight;

#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

		pointLight = pointLights[ i ];

		getPointLightInfo( pointLight, geometryPosition, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;

	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

		spotLight = spotLights[ i ];

		getSpotLightInfo( spotLight, geometryPosition, directLight );

		// spot lights are ordered [shadows with maps, shadows without maps, maps without shadows, none]
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif

		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif

		#undef SPOT_LIGHT_MAP_INDEX

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

		directionalLight = directionalLights[ i ];

		getDirectionalLightInfo( directionalLight, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

	RectAreaLight rectAreaLight;

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if defined( RE_IndirectDiffuse )

	vec3 iblIrradiance = vec3( 0.0 );

	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

	#if defined( USE_LIGHT_PROBES )

		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );

	#endif

	#if ( NUM_HEMI_LIGHTS > 0 )

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );

		}
		#pragma unroll_loop_end

	#endif

#endif

#if defined( RE_IndirectSpecular )

	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );

#endif
`,lights_fragment_maps=`
#if defined( RE_IndirectDiffuse )

	#ifdef USE_LIGHTMAP

		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;

		irradiance += lightMapIrradiance;

	#endif

	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )

		iblIrradiance += getIBLIrradiance( geometryNormal );

	#endif

#endif

#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )

	#ifdef USE_ANISOTROPY

		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );

	#else

		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );

	#endif

	#ifdef USE_CLEARCOAT

		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );

	#endif

#endif
`,lights_fragment_end=`
#if defined( RE_IndirectDiffuse )

	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

#endif

#if defined( RE_IndirectSpecular )

	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

#endif
`,logdepthbuf_fragment=`
#if defined( USE_LOGDEPTHBUF )

	// Doing a strict comparison with == 1.0 can cause noise artifacts
	// on some platforms. See issue #17623.
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;

#endif
`,logdepthbuf_pars_fragment=`
#if defined( USE_LOGDEPTHBUF )

	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;

#endif
`,logdepthbuf_pars_vertex=`
#ifdef USE_LOGDEPTHBUF

	varying float vFragDepth;
	varying float vIsPerspective;

#endif
`,logdepthbuf_vertex=`
#ifdef USE_LOGDEPTHBUF

	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );

#endif
`,map_fragment=`
#ifdef USE_MAP

	vec4 sampledDiffuseColor = texture2D( map, vMapUv );

	#ifdef DECODE_VIDEO_TEXTURE

		// use inline sRGB decode until browsers properly support SRGB8_ALPHA8 with video textures (#26516)

		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );

	#endif

	diffuseColor *= sampledDiffuseColor;

#endif
`,map_pars_fragment=`
#ifdef USE_MAP

	uniform sampler2D map;

#endif
`,map_particle_fragment=`
#if defined( USE_MAP ) || defined( USE_ALPHAMAP )

	#if defined( USE_POINTS_UV )

		vec2 uv = vUv;

	#else

		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;

	#endif

#endif

#ifdef USE_MAP

	diffuseColor *= texture2D( map, uv );

#endif

#ifdef USE_ALPHAMAP

	diffuseColor.a *= texture2D( alphaMap, uv ).g;

#endif
`,map_particle_pars_fragment=`
#if defined( USE_POINTS_UV )

	varying vec2 vUv;

#else

	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )

		uniform mat3 uvTransform;

	#endif

#endif

#ifdef USE_MAP

	uniform sampler2D map;

#endif

#ifdef USE_ALPHAMAP

	uniform sampler2D alphaMap;

#endif
`,metalnessmap_fragment=`
float metalnessFactor = metalness;

#ifdef USE_METALNESSMAP

	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );

	// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
	metalnessFactor *= texelMetalness.b;

#endif
`,metalnessmap_pars_fragment=`
#ifdef USE_METALNESSMAP

	uniform sampler2D metalnessMap;

#endif
`,morphinstance_vertex=`
#ifdef USE_INSTANCING_MORPH

	float morphTargetInfluences[ MORPHTARGETS_COUNT ];

	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;

	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {

		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;

	}
#endif
`,morphcolor_vertex=`
#if defined( USE_MORPHCOLORS )

	// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:
	// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)
	// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting
	vColor *= morphTargetBaseInfluence;

	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {

		#if defined( USE_COLOR_ALPHA )

			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];

		#elif defined( USE_COLOR )

			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];

		#endif

	}

#endif
`,morphnormal_vertex=`
#ifdef USE_MORPHNORMALS

	// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:
	// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)
	// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting
	objectNormal *= morphTargetBaseInfluence;

	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {

		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];

	}

#endif
`,morphtarget_pars_vertex=`
#ifdef USE_MORPHTARGETS

	#ifndef USE_INSTANCING_MORPH

		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];

	#endif

	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;

	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {

		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;

		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );

	}

#endif
`,morphtarget_vertex=`
#ifdef USE_MORPHTARGETS

	// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:
	// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)
	// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting
	transformed *= morphTargetBaseInfluence;

	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {

		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];

	}

#endif
`,normal_fragment_begin=`
float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;

#ifdef FLAT_SHADED

	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );

#else

	vec3 normal = normalize( vNormal );

	#ifdef DOUBLE_SIDED

		normal *= faceDirection;

	#endif

#endif

#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )

	#ifdef USE_TANGENT

		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

	#else

		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);

	#endif

	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;

	#endif

#endif

#ifdef USE_CLEARCOAT_NORMALMAP

	#ifdef USE_TANGENT

		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

	#else

		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );

	#endif

	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;

	#endif

#endif

// non perturbed normal for clearcoat among others

vec3 nonPerturbedNormal = normal;

`,normal_fragment_maps=`

#ifdef USE_NORMALMAP_OBJECTSPACE

	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

	#ifdef FLIP_SIDED

		normal = - normal;

	#endif

	#ifdef DOUBLE_SIDED

		normal = normal * faceDirection;

	#endif

	normal = normalize( normalMatrix * normal );

#elif defined( USE_NORMALMAP_TANGENTSPACE )

	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;

	normal = normalize( tbn * mapN );

#elif defined( USE_BUMPMAP )

	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );

#endif
`,normal_pars_fragment=`
#ifndef FLAT_SHADED

	varying vec3 vNormal;

	#ifdef USE_TANGENT

		varying vec3 vTangent;
		varying vec3 vBitangent;

	#endif

#endif
`,normal_pars_vertex=`
#ifndef FLAT_SHADED

	varying vec3 vNormal;

	#ifdef USE_TANGENT

		varying vec3 vTangent;
		varying vec3 vBitangent;

	#endif

#endif
`,normal_vertex=`
#ifndef FLAT_SHADED // normal is computed with derivatives when FLAT_SHADED

	vNormal = normalize( transformedNormal );

	#ifdef USE_TANGENT

		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );

	#endif

#endif
`,normalmap_pars_fragment=`
#ifdef USE_NORMALMAP

	uniform sampler2D normalMap;
	uniform vec2 normalScale;

#endif

#ifdef USE_NORMALMAP_OBJECTSPACE

	uniform mat3 normalMatrix;

#endif

#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )

	// Normal Mapping Without Precomputed Tangents
	// http://www.thetenthplanet.de/archives/1180

	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {

		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );

		vec3 N = surf_norm; // normalized

		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );

		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;

		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );

		return mat3( T * scale, B * scale, N );

	}

#endif
`,clearcoat_normal_fragment_begin=`
#ifdef USE_CLEARCOAT

	vec3 clearcoatNormal = nonPerturbedNormal;

#endif
`,clearcoat_normal_fragment_maps=`
#ifdef USE_CLEARCOAT_NORMALMAP

	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;

	clearcoatNormal = normalize( tbn2 * clearcoatMapN );

#endif
`,clearcoat_pars_fragment=`

#ifdef USE_CLEARCOATMAP

	uniform sampler2D clearcoatMap;

#endif

#ifdef USE_CLEARCOAT_NORMALMAP

	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;

#endif

#ifdef USE_CLEARCOAT_ROUGHNESSMAP

	uniform sampler2D clearcoatRoughnessMap;

#endif
`,iridescence_pars_fragment=`

#ifdef USE_IRIDESCENCEMAP

	uniform sampler2D iridescenceMap;

#endif

#ifdef USE_IRIDESCENCE_THICKNESSMAP

	uniform sampler2D iridescenceThicknessMap;

#endif
`,opaque_fragment=`
#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif

#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif

gl_FragColor = vec4( outgoingLight, diffuseColor.a );
`,packing=`
vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}

vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}

const float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)
const float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)
const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;

const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );

const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );

vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}

vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	// the 0.9999 tweak is unimportant, very tiny empirical improvement
	// return vec3( vuf * Inv255, gf * PackUpscale, bf * 0.9999 );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}

vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}

float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}

float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}

float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}

vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}

vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}

// NOTE: viewZ, the z-coordinate in camera space, is negative for points in front of the camera

float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	// -near maps to 0; -far maps to 1
	return ( viewZ + near ) / ( near - far );
}

float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	// maps orthographic depth in [ 0, 1 ] to viewZ
	return depth * ( near - far ) - near;
}

// NOTE: https://twitter.com/gonnavis/status/1377183786949959682

float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	// -near maps to 0; -far maps to 1
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}

float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	// maps perspective depth in [ 0, 1 ] to viewZ
	return ( near * far ) / ( ( far - near ) * depth - far );
}
`,premultiplied_alpha_fragment=`
#ifdef PREMULTIPLIED_ALPHA

	// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.
	gl_FragColor.rgb *= gl_FragColor.a;

#endif
`,project_vertex=`
vec4 mvPosition = vec4( transformed, 1.0 );

#ifdef USE_BATCHING

	mvPosition = batchingMatrix * mvPosition;

#endif

#ifdef USE_INSTANCING

	mvPosition = instanceMatrix * mvPosition;

#endif

mvPosition = modelViewMatrix * mvPosition;

gl_Position = projectionMatrix * mvPosition;
`,dithering_fragment=`
#ifdef DITHERING

	gl_FragColor.rgb = dithering( gl_FragColor.rgb );

#endif
`,dithering_pars_fragment=`
#ifdef DITHERING

	// based on https://www.shadertoy.com/view/MslGR8
	vec3 dithering( vec3 color ) {
		//Calculate grid position
		float grid_position = rand( gl_FragCoord.xy );

		//Shift the individual colors differently, thus making it even harder to see the dithering pattern
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );

		//modify shift according to grid position.
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );

		//shift the color by dither_shift
		return color + dither_shift_RGB;
	}

#endif
`,roughnessmap_fragment=`
float roughnessFactor = roughness;

#ifdef USE_ROUGHNESSMAP

	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );

	// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
	roughnessFactor *= texelRoughness.g;

#endif
`,roughnessmap_pars_fragment=`
#ifdef USE_ROUGHNESSMAP

	uniform sampler2D roughnessMap;

#endif
`,shadowmap_pars_fragment=`
#if NUM_SPOT_LIGHT_COORDS > 0

	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];

#endif

#if NUM_SPOT_LIGHT_MAPS > 0

	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];

#endif

#ifdef USE_SHADOWMAP

	#if NUM_DIR_LIGHT_SHADOWS > 0

		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};

		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

	#endif

	#if NUM_SPOT_LIGHT_SHADOWS > 0

		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];

		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};

		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

	#endif

	#if NUM_POINT_LIGHT_SHADOWS > 0

		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};

		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

	#endif

	/*
	#if NUM_RECT_AREA_LIGHTS > 0

		// TODO (abelnation): create uniforms for area light shadows

	#endif
	*/

	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

	}

	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

		return unpackRGBATo2Half( texture2D( shadow, uv ) );

	}

	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

		float occlusion = 1.0;

		vec2 distribution = texture2DDistribution( shadow, uv );

		float hard_shadow = step( compare , distribution.x ); // Hard Shadow

		if (hard_shadow != 1.0 ) {

			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

		}
		return occlusion;

	}

	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

		float shadow = 1.0;

		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;

		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;

		if ( frustumTest ) {

		#if defined( SHADOWMAP_TYPE_PCF )

			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;

			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;

			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );

		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )

			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;

			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;

			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );

		#elif defined( SHADOWMAP_TYPE_VSM )

			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

		#else // no percentage-closer filtering:

			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

		#endif

		}

		return mix( 1.0, shadow, shadowIntensity );

	}

	// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
	// vector suitable for 2D texture mapping. This code uses the following layout for the
	// 2D texture:
	//
	// xzXZ
	//  y Y
	//
	// Y - Positive y direction
	// y - Negative y direction
	// X - Positive x direction
	// x - Negative x direction
	// Z - Positive z direction
	// z - Negative z direction
	//
	// Source and test bed:
	// https://gist.github.com/tschw/da10c43c467ce8afd0c4

	vec2 cubeToUV( vec3 v, float texelSizeY ) {

		// Number of texels to avoid at the edge of each square

		vec3 absV = abs( v );

		// Intersect unit cube

		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;

		// Apply scale to avoid seams

		// two texels less per square (one texel will do for NEAREST)
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

		// Unwrap

		// space: -1 ... 1 range for each square
		//
		// #X##		dim    := ( 4 , 2 )
		//  # #		center := ( 1 , 1 )

		vec2 planar = v.xy;

		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;

		if ( absV.z >= almostOne ) {

			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;

		} else if ( absV.x >= almostOne ) {

			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;

		} else if ( absV.y >= almostOne ) {

			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;

		}

		// Transform to UV space

		// scale := 0.5 / dim
		// translate := ( center + 0.5 ) / dim
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

	}

	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

		float shadow = 1.0;

		// for point lights, the uniform @vShadowCoord is re-purposed to hold
		// the vector from the light to the world-space position of the fragment.
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );

		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {

			// dp = normalized distance from light to fragment position
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
			dp += shadowBias;

			// bd3D = base direction 3D
			vec3 bd3D = normalize( lightToPosition );

			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )

				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;

				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );

			#else // no percentage-closer filtering

				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );

			#endif

		}

		return mix( 1.0, shadow, shadowIntensity );

	}

#endif
`,shadowmap_pars_vertex=`

#if NUM_SPOT_LIGHT_COORDS > 0

	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];

#endif

#ifdef USE_SHADOWMAP

	#if NUM_DIR_LIGHT_SHADOWS > 0

		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};

		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

	#endif

	#if NUM_SPOT_LIGHT_SHADOWS > 0

		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};

		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

	#endif

	#if NUM_POINT_LIGHT_SHADOWS > 0

		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};

		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

	#endif

	/*
	#if NUM_RECT_AREA_LIGHTS > 0

		// TODO (abelnation): uniforms for area light shadows

	#endif
	*/

#endif
`,shadowmap_vertex=`

#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )

	// Offsetting the position used for querying occlusion along the world normal can be used to reduce shadow acne.
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;

#endif

#if defined( USE_SHADOWMAP )

	#if NUM_DIR_LIGHT_SHADOWS > 0

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {

			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;

		}
		#pragma unroll_loop_end

	#endif

	#if NUM_POINT_LIGHT_SHADOWS > 0

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {

			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;

		}
		#pragma unroll_loop_end

	#endif

	/*
	#if NUM_RECT_AREA_LIGHTS > 0

		// TODO (abelnation): update vAreaShadowCoord with area light info

	#endif
	*/

#endif

// spot lights can be evaluated without active shadow mapping (when SpotLight.map is used)

#if NUM_SPOT_LIGHT_COORDS > 0

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {

		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;

	}
	#pragma unroll_loop_end

#endif


`,shadowmask_pars_fragment=`
float getShadowMask() {

	float shadow = 1.0;

	#ifdef USE_SHADOWMAP

	#if NUM_DIR_LIGHT_SHADOWS > 0

	DirectionalLightShadow directionalLight;

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {

		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;

	}
	#pragma unroll_loop_end

	#endif

	#if NUM_SPOT_LIGHT_SHADOWS > 0

	SpotLightShadow spotLight;

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {

		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;

	}
	#pragma unroll_loop_end

	#endif

	#if NUM_POINT_LIGHT_SHADOWS > 0

	PointLightShadow pointLight;

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {

		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;

	}
	#pragma unroll_loop_end

	#endif

	/*
	#if NUM_RECT_AREA_LIGHTS > 0

		// TODO (abelnation): update shadow for Area light

	#endif
	*/

	#endif

	return shadow;

}
`,skinbase_vertex=`
#ifdef USE_SKINNING

	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );

#endif
`,skinning_pars_vertex=`
#ifdef USE_SKINNING

	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;

	uniform highp sampler2D boneTexture;

	mat4 getBoneMatrix( const in float i ) {

		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );

		return mat4( v1, v2, v3, v4 );

	}

#endif
`,skinning_vertex=`
#ifdef USE_SKINNING

	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );

	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;

	transformed = ( bindMatrixInverse * skinned ).xyz;

#endif
`,skinnormal_vertex=`
#ifdef USE_SKINNING

	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;

	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;

	#ifdef USE_TANGENT

		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;

	#endif

#endif
`,specularmap_fragment=`
float specularStrength;

#ifdef USE_SPECULARMAP

	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;

#else

	specularStrength = 1.0;

#endif
`,specularmap_pars_fragment=`
#ifdef USE_SPECULARMAP

	uniform sampler2D specularMap;

#endif
`,tonemapping_fragment=`
#if defined( TONE_MAPPING )

	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );

#endif
`,tonemapping_pars_fragment=`
#ifndef saturate
// <common> may have defined saturate() already
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif

uniform float toneMappingExposure;

// exposure only
vec3 LinearToneMapping( vec3 color ) {

	return saturate( toneMappingExposure * color );

}

// source: https://www.cs.utah.edu/docs/techreports/2002/pdf/UUCS-02-001.pdf
vec3 ReinhardToneMapping( vec3 color ) {

	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );

}

// source: http://filmicworlds.com/blog/filmic-tonemapping-operators/
vec3 CineonToneMapping( vec3 color ) {

	// filmic operator by Jim Hejl and Richard Burgess-Dawson
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );

}

// source: https://github.com/selfshadow/ltc_code/blob/master/webgl/shaders/ltc/ltc_blit.fs
vec3 RRTAndODTFit( vec3 v ) {

	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;

}

// this implementation of ACES is modified to accommodate a brighter viewing environment.
// the scale factor of 1/0.6 is subjective. see discussion in #19621.

vec3 ACESFilmicToneMapping( vec3 color ) {

	// sRGB => XYZ => D65_2_D60 => AP1 => RRT_SAT
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ), // transposed from source
		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);

	// ODT_SAT => XYZ => D60_2_D65 => sRGB
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ), // transposed from source
		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);

	color *= toneMappingExposure / 0.6;

	color = ACESInputMat * color;

	// Apply RRT and ODT
	color = RRTAndODTFit( color );

	color = ACESOutputMat * color;

	// Clamp to [0, 1]
	return saturate( color );

}

// Matrices for rec 2020 <> rec 709 color space conversion
// matrix provided in row-major order so it has been transposed
// https://www.itu.int/pub/R-REP-BT.2407-2017
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);

const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);

// https://iolite-engine.com/blog_posts/minimal_agx_implementation
// Mean error^2: 3.6705141e-06
vec3 agxDefaultContrastApprox( vec3 x ) {

	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;

	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;

}

// AgX Tone Mapping implementation based on Filament, which in turn is based
// on Blender's implementation using rec 2020 primaries
// https://github.com/google/filament/pull/7236
// Inputs and outputs are encoded as Linear-sRGB.

vec3 AgXToneMapping( vec3 color ) {

	// AgX constants
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);

	// explicit AgXOutsetMatrix generated from Filaments AgXOutsetMatrixInv
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);

	// LOG2_MIN      = -10.0
	// LOG2_MAX      =  +6.5
	// MIDDLE_GRAY   =  0.18
	const float AgxMinEv = - 12.47393;  // log2( pow( 2, LOG2_MIN ) * MIDDLE_GRAY )
	const float AgxMaxEv = 4.026069;    // log2( pow( 2, LOG2_MAX ) * MIDDLE_GRAY )

	color *= toneMappingExposure;

	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;

	color = AgXInsetMatrix * color;

	// Log2 encoding
	color = max( color, 1e-10 ); // avoid 0 or negative numbers for log2
	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );

	color = clamp( color, 0.0, 1.0 );

	// Apply sigmoid
	color = agxDefaultContrastApprox( color );

	// Apply AgX look
	// v = agxLook(v, look);

	color = AgXOutsetMatrix * color;

	// Linearize
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );

	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;

	// Gamut mapping. Simple clamp for now.
	color = clamp( color, 0.0, 1.0 );

	return color;

}

// https://modelviewer.dev/examples/tone-mapping

vec3 NeutralToneMapping( vec3 color ) {

	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;

	color *= toneMappingExposure;

	float x = min( color.r, min( color.g, color.b ) );

	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;

	color -= offset;

	float peak = max( color.r, max( color.g, color.b ) );

	if ( peak < StartCompression ) return color;

	float d = 1. - StartCompression;

	float newPeak = 1. - d * d / ( peak + d - StartCompression );

	color *= newPeak / peak;

	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );

	return mix( color, vec3( newPeak ), g );

}

vec3 CustomToneMapping( vec3 color ) { return color; }
`,transmission_fragment=`
#ifdef USE_TRANSMISSION

	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;

	#ifdef USE_TRANSMISSIONMAP

		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;

	#endif

	#ifdef USE_THICKNESSMAP

		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;

	#endif

	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );

	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );

	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );

	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );

#endif
`,transmission_pars_fragment=`
#ifdef USE_TRANSMISSION

	// Transmission code is based on glTF-Sampler-Viewer
	// https://github.com/KhronosGroup/glTF-Sample-Viewer

	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;

	#ifdef USE_TRANSMISSIONMAP

		uniform sampler2D transmissionMap;

	#endif

	#ifdef USE_THICKNESSMAP

		uniform sampler2D thicknessMap;

	#endif

	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;

	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;

	varying vec3 vWorldPosition;

	// Mipped Bicubic Texture Filtering by N8
	// https://www.shadertoy.com/view/Dl2SDW

	float w0( float a ) {

		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );

	}

	float w1( float a ) {

		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );

	}

	float w2( float a ){

		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );

	}

	float w3( float a ) {

		return ( 1.0 / 6.0 ) * ( a * a * a );

	}

	// g0 and g1 are the two amplitude functions
	float g0( float a ) {

		return w0( a ) + w1( a );

	}

	float g1( float a ) {

		return w2( a ) + w3( a );

	}

	// h0 and h1 are the two offset functions
	float h0( float a ) {

		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );

	}

	float h1( float a ) {

		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );

	}

	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {

		uv = uv * texelSize.zw + 0.5;

		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );

		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );

		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;

		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );

	}

	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {

		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );

	}

	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {

		// Direction of refracted light.
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );

		// Compute rotation-independent scaling of the model matrix.
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		// The thickness is specified in local space.
		return normalize( refractionVector ) * thickness * modelScale;

	}

	float applyIorToRoughness( const in float roughness, const in float ior ) {

		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );

	}

	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {

		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );

	}

	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {

		if ( isinf( attenuationDistance ) ) {

			// Attenuation distance is +, i.e. the transmitted color is not attenuated at all.
			return vec3( 1.0 );

		} else {

			// Compute light attenuation using Beer's law.
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
			return transmittance;

		}

	}

	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {

		vec4 transmittedLight;
		vec3 transmittance;

		#ifdef USE_DISPERSION

			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );

			for ( int i = 0; i < 3; i ++ ) {

				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;

				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];

			}

			transmittedLight.a /= 3.0;

		#else

			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;

			// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;

			// Sample framebuffer to get pixel the refracted ray hits.
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );

		#endif

		vec3 attenuatedColor = transmittance * transmittedLight.rgb;

		// Get the specular component.
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );

		// As less light is transmitted, the opacity should be increased. This simple approximation does a decent job
		// of modulating a CSS background, and has no effect when the buffer is opaque, due to a solid object or clear color.
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;

		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );

	}
#endif
`,uv_pars_fragment=`
#if defined( USE_UV ) || defined( USE_ANISOTROPY )

	varying vec2 vUv;

#endif
#ifdef USE_MAP

	varying vec2 vMapUv;

#endif
#ifdef USE_ALPHAMAP

	varying vec2 vAlphaMapUv;

#endif
#ifdef USE_LIGHTMAP

	varying vec2 vLightMapUv;

#endif
#ifdef USE_AOMAP

	varying vec2 vAoMapUv;

#endif
#ifdef USE_BUMPMAP

	varying vec2 vBumpMapUv;

#endif
#ifdef USE_NORMALMAP

	varying vec2 vNormalMapUv;

#endif
#ifdef USE_EMISSIVEMAP

	varying vec2 vEmissiveMapUv;

#endif
#ifdef USE_METALNESSMAP

	varying vec2 vMetalnessMapUv;

#endif
#ifdef USE_ROUGHNESSMAP

	varying vec2 vRoughnessMapUv;

#endif
#ifdef USE_ANISOTROPYMAP

	varying vec2 vAnisotropyMapUv;

#endif
#ifdef USE_CLEARCOATMAP

	varying vec2 vClearcoatMapUv;

#endif
#ifdef USE_CLEARCOAT_NORMALMAP

	varying vec2 vClearcoatNormalMapUv;

#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP

	varying vec2 vClearcoatRoughnessMapUv;

#endif
#ifdef USE_IRIDESCENCEMAP

	varying vec2 vIridescenceMapUv;

#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP

	varying vec2 vIridescenceThicknessMapUv;

#endif
#ifdef USE_SHEEN_COLORMAP

	varying vec2 vSheenColorMapUv;

#endif
#ifdef USE_SHEEN_ROUGHNESSMAP

	varying vec2 vSheenRoughnessMapUv;

#endif
#ifdef USE_SPECULARMAP

	varying vec2 vSpecularMapUv;

#endif
#ifdef USE_SPECULAR_COLORMAP

	varying vec2 vSpecularColorMapUv;

#endif
#ifdef USE_SPECULAR_INTENSITYMAP

	varying vec2 vSpecularIntensityMapUv;

#endif
#ifdef USE_TRANSMISSIONMAP

	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;

#endif
#ifdef USE_THICKNESSMAP

	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;

#endif
`,uv_pars_vertex=`
#if defined( USE_UV ) || defined( USE_ANISOTROPY )

	varying vec2 vUv;

#endif
#ifdef USE_MAP

	uniform mat3 mapTransform;
	varying vec2 vMapUv;

#endif
#ifdef USE_ALPHAMAP

	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;

#endif
#ifdef USE_LIGHTMAP

	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;

#endif
#ifdef USE_AOMAP

	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;

#endif
#ifdef USE_BUMPMAP

	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;

#endif
#ifdef USE_NORMALMAP

	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;

#endif
#ifdef USE_DISPLACEMENTMAP

	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;

#endif
#ifdef USE_EMISSIVEMAP

	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;

#endif
#ifdef USE_METALNESSMAP

	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;

#endif
#ifdef USE_ROUGHNESSMAP

	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;

#endif
#ifdef USE_ANISOTROPYMAP

	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;

#endif
#ifdef USE_CLEARCOATMAP

	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;

#endif
#ifdef USE_CLEARCOAT_NORMALMAP

	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;

#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP

	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;

#endif
#ifdef USE_SHEEN_COLORMAP

	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;

#endif
#ifdef USE_SHEEN_ROUGHNESSMAP

	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;

#endif
#ifdef USE_IRIDESCENCEMAP

	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;

#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP

	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;

#endif
#ifdef USE_SPECULARMAP

	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;

#endif
#ifdef USE_SPECULAR_COLORMAP

	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;

#endif
#ifdef USE_SPECULAR_INTENSITYMAP

	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;

#endif
#ifdef USE_TRANSMISSIONMAP

	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;

#endif
#ifdef USE_THICKNESSMAP

	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;

#endif
`,uv_vertex=`
#if defined( USE_UV ) || defined( USE_ANISOTROPY )

	vUv = vec3( uv, 1 ).xy;

#endif
#ifdef USE_MAP

	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;

#endif
#ifdef USE_ALPHAMAP

	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_LIGHTMAP

	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_AOMAP

	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_BUMPMAP

	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_NORMALMAP

	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_DISPLACEMENTMAP

	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_EMISSIVEMAP

	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_METALNESSMAP

	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_ROUGHNESSMAP

	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_ANISOTROPYMAP

	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_CLEARCOATMAP

	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_CLEARCOAT_NORMALMAP

	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP

	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_IRIDESCENCEMAP

	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP

	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_SHEEN_COLORMAP

	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_SHEEN_ROUGHNESSMAP

	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_SPECULARMAP

	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_SPECULAR_COLORMAP

	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_SPECULAR_INTENSITYMAP

	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_TRANSMISSIONMAP

	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_THICKNESSMAP

	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;

#endif
`,worldpos_vertex=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0

	vec4 worldPosition = vec4( transformed, 1.0 );

	#ifdef USE_BATCHING

		worldPosition = batchingMatrix * worldPosition;

	#endif

	#ifdef USE_INSTANCING

		worldPosition = instanceMatrix * worldPosition;

	#endif

	worldPosition = modelMatrix * worldPosition;

#endif
`,vertex$h=`
varying vec2 vUv;
uniform mat3 uvTransform;

void main() {

	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;

	gl_Position = vec4( position.xy, 1.0, 1.0 );

}
`,fragment$h=`
uniform sampler2D t2D;
uniform float backgroundIntensity;

varying vec2 vUv;

void main() {

	vec4 texColor = texture2D( t2D, vUv );

	#ifdef DECODE_VIDEO_TEXTURE

		// use inline sRGB decode until browsers properly support SRGB8_APLHA8 with video textures

		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );

	#endif

	texColor.rgb *= backgroundIntensity;

	gl_FragColor = texColor;

	#include <tonemapping_fragment>
	#include <colorspace_fragment>

}
`,vertex$g=`
varying vec3 vWorldDirection;

#include <common>

void main() {

	vWorldDirection = transformDirection( position, modelMatrix );

	#include <begin_vertex>
	#include <project_vertex>

	gl_Position.z = gl_Position.w; // set z to camera.far

}
`,fragment$g=`

#ifdef ENVMAP_TYPE_CUBE

	uniform samplerCube envMap;

#elif defined( ENVMAP_TYPE_CUBE_UV )

	uniform sampler2D envMap;

#endif

uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;

varying vec3 vWorldDirection;

#include <cube_uv_reflection_fragment>

void main() {

	#ifdef ENVMAP_TYPE_CUBE

		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );

	#elif defined( ENVMAP_TYPE_CUBE_UV )

		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );

	#else

		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );

	#endif

	texColor.rgb *= backgroundIntensity;

	gl_FragColor = texColor;

	#include <tonemapping_fragment>
	#include <colorspace_fragment>

}
`,vertex$f=`
varying vec3 vWorldDirection;

#include <common>

void main() {

	vWorldDirection = transformDirection( position, modelMatrix );

	#include <begin_vertex>
	#include <project_vertex>

	gl_Position.z = gl_Position.w; // set z to camera.far

}
`,fragment$f=`
uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;

varying vec3 vWorldDirection;

void main() {

	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );

	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;

	#include <tonemapping_fragment>
	#include <colorspace_fragment>

}
`,vertex$e=`
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.
// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for
// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.
varying vec2 vHighPrecisionZW;

void main() {

	#include <uv_vertex>

	#include <batching_vertex>
	#include <skinbase_vertex>

	#include <morphinstance_vertex>

	#ifdef USE_DISPLACEMENTMAP

		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>

	#endif

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>

	vHighPrecisionZW = gl_Position.zw;

}
`,fragment$e=`
#if DEPTH_PACKING == 3200

	uniform float opacity;

#endif

#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

varying vec2 vHighPrecisionZW;

void main() {

	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>

	#if DEPTH_PACKING == 3200

		diffuseColor.a = opacity;

	#endif

	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>

	#include <logdepthbuf_fragment>

	// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;

	#if DEPTH_PACKING == 3200

		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );

	#elif DEPTH_PACKING == 3201

		gl_FragColor = packDepthToRGBA( fragCoordZ );

	#elif DEPTH_PACKING == 3202

		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );

	#elif DEPTH_PACKING == 3203

		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );

	#endif

}
`,vertex$d=`
#define DISTANCE

varying vec3 vWorldPosition;

#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>

	#include <batching_vertex>
	#include <skinbase_vertex>

	#include <morphinstance_vertex>

	#ifdef USE_DISPLACEMENTMAP

		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>

	#endif

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>

	vWorldPosition = worldPosition.xyz;

}
`,fragment$d=`
#define DISTANCE

uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;

#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>

void main () {

	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>

	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>

	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist ); // clamp to [ 0, 1 ]

	gl_FragColor = packDepthToRGBA( dist );

}
`,vertex$c=`
varying vec3 vWorldDirection;

#include <common>

void main() {

	vWorldDirection = transformDirection( position, modelMatrix );

	#include <begin_vertex>
	#include <project_vertex>

}
`,fragment$c=`
uniform sampler2D tEquirect;

varying vec3 vWorldDirection;

#include <common>

void main() {

	vec3 direction = normalize( vWorldDirection );

	vec2 sampleUV = equirectUv( direction );

	gl_FragColor = texture2D( tEquirect, sampleUV );

	#include <tonemapping_fragment>
	#include <colorspace_fragment>

}
`,vertex$b=`
uniform float scale;
attribute float lineDistance;

varying float vLineDistance;

#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	vLineDistance = scale * lineDistance;

	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>

}
`,fragment$b=`
uniform vec3 diffuse;
uniform float opacity;

uniform float dashSize;
uniform float totalSize;

varying float vLineDistance;

#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	if ( mod( vLineDistance, totalSize ) > dashSize ) {

		discard;

	}

	vec3 outgoingLight = vec3( 0.0 );

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>

	outgoingLight = diffuseColor.rgb; // simple shader

	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>

}
`,vertex$a=`
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )

		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>

	#endif

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>

	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>

}
`,fragment$a=`
uniform vec3 diffuse;
uniform float opacity;

#ifndef FLAT_SHADED

	varying vec3 vNormal;

#endif

#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>

	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );

	// accumulation (baked indirect lighting only)
	#ifdef USE_LIGHTMAP

		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;

	#else

		reflectedLight.indirectDiffuse += vec3( 1.0 );

	#endif

	// modulation
	#include <aomap_fragment>

	reflectedLight.indirectDiffuse *= diffuseColor.rgb;

	vec3 outgoingLight = reflectedLight.indirectDiffuse;

	#include <envmap_fragment>

	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>

}
`,vertex$9=`
#define LAMBERT

varying vec3 vViewPosition;

#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>

	vViewPosition = - mvPosition.xyz;

	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>

}
`,fragment$9=`
#define LAMBERT

uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>

	// accumulation
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>

	// modulation
	#include <aomap_fragment>

	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;

	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>

}
`,vertex$8=`
#define MATCAP

varying vec3 vViewPosition;

#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>

#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>

	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>

	vViewPosition = - mvPosition.xyz;

}
`,fragment$8=`
#define MATCAP

uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;

varying vec3 vViewPosition;

#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>

	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks

	#ifdef USE_MATCAP

		vec4 matcapColor = texture2D( matcap, uv );

	#else

		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 ); // default if matcap is missing

	#endif

	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;

	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>

}
`,vertex$7=`
#define NORMAL

#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )

	varying vec3 vViewPosition;

#endif

#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>
	#include <batching_vertex>

	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>

#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )

	vViewPosition = - mvPosition.xyz;

#endif

}
`,fragment$7=`
#define NORMAL

uniform float opacity;

#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )

	varying vec3 vViewPosition;

#endif

#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );

	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>

	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );

	#ifdef OPAQUE

		gl_FragColor.a = 1.0;

	#endif

}
`,vertex$6=`
#define PHONG

varying vec3 vViewPosition;

#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>

	vViewPosition = - mvPosition.xyz;

	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>

}
`,fragment$6=`
#define PHONG

uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>

	// accumulation
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>

	// modulation
	#include <aomap_fragment>

	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;

	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>

}
`,vertex$5=`
#define STANDARD

varying vec3 vViewPosition;

#ifdef USE_TRANSMISSION

	varying vec3 vWorldPosition;

#endif

#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>

	vViewPosition = - mvPosition.xyz;

	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>

#ifdef USE_TRANSMISSION

	vWorldPosition = worldPosition.xyz;

#endif
}
`,fragment$5=`
#define STANDARD

#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif

uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;

#ifdef IOR
	uniform float ior;
#endif

#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;

	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif

	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif

#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif

#ifdef USE_DISPERSION
	uniform float dispersion;
#endif

#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif

#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;

	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif

	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif

#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;

	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif

varying vec3 vViewPosition;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>

	// accumulation
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>

	// modulation
	#include <aomap_fragment>

	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;

	#include <transmission_fragment>

	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;

	#ifdef USE_SHEEN

		// Sheen energy compensation approximation calculation can be found at the end of
		// https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );

		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;

	#endif

	#ifdef USE_CLEARCOAT

		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );

		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );

		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;

	#endif

	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>

}
`,vertex$4=`
#define TOON

varying vec3 vViewPosition;

#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>

	vViewPosition = - mvPosition.xyz;

	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>

}
`,fragment$4=`
#define TOON

uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>

	// accumulation
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>

	// modulation
	#include <aomap_fragment>

	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;

	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>

}
`,vertex$3=`
uniform float size;
uniform float scale;

#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_POINTS_UV

	varying vec2 vUv;
	uniform mat3 uvTransform;

#endif

void main() {

	#ifdef USE_POINTS_UV

		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;

	#endif

	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>

	gl_PointSize = size;

	#ifdef USE_SIZEATTENUATION

		bool isPerspective = isPerspectiveMatrix( projectionMatrix );

		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );

	#endif

	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>

}
`,fragment$3=`
uniform vec3 diffuse;
uniform float opacity;

#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	vec3 outgoingLight = vec3( 0.0 );

	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>

	outgoingLight = diffuseColor.rgb;

	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>

}
`,vertex$2=`
#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>

void main() {

	#include <batching_vertex>

	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>

	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>

}
`,fragment$2=`
uniform vec3 color;
uniform float opacity;

#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>

void main() {

	#include <logdepthbuf_fragment>

	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );

	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>

}
`,vertex$1=`
uniform float rotation;
uniform vec2 center;

#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>

	vec4 mvPosition = modelViewMatrix[ 3 ];

	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );

	#ifndef USE_SIZEATTENUATION

		bool isPerspective = isPerspectiveMatrix( projectionMatrix );

		if ( isPerspective ) scale *= - mvPosition.z;

	#endif

	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;

	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;

	mvPosition.xy += rotatedPosition;

	gl_Position = projectionMatrix * mvPosition;

	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>

}
`,fragment$1=`
uniform vec3 diffuse;
uniform float opacity;

#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	vec3 outgoingLight = vec3( 0.0 );

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>

	outgoingLight = diffuseColor.rgb;

	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>

}
`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3$1},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3$1},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3$1}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3$1},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3$1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3$1}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3$1},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3$1},normalScale:{value:new Vector2$1(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3$1},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3$1}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3$1}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3$1}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color$1(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3$1},alphaTest:{value:0},uvTransform:{value:new Matrix3$1}},sprite:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},center:{value:new Vector2$1(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3$1},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3$1},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms$1([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms$1([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms$1([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},specular:{value:new Color$1(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms$1([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms$1([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms$1([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms$1([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms$1([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms$1([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms$1([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms$1([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3$1},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3$1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms$1([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3$1},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms$1([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color$1(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms$1([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3$1},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3$1},clearcoatNormalScale:{value:new Vector2$1(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3$1},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3$1},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3$1},sheen:{value:0},sheenColor:{value:new Color$1(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3$1},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3$1},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3$1},transmissionSamplerSize:{value:new Vector2$1},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3$1},attenuationDistance:{value:0},attenuationColor:{value:new Color$1(0)},specularColor:{value:new Color$1(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3$1},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3$1},anisotropyVector:{value:new Vector2$1},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3$1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler$1,_m1$4=new Matrix4$1;function WebGLBackground(i,e,t,n,r,s,o){const l=new Color$1(0);let u=s===!0?0:1,d,p,g=null,m=0,y=null;function _(T){let A=T.isScene===!0?T.background:null;return A&&A.isTexture&&(A=(T.backgroundBlurriness>0?t:e).get(A)),A}function E(T){let A=!1;const N=_(T);N===null?b(l,u):N&&N.isColor&&(b(N,1),A=!0);const L=i.xr.getEnvironmentBlendMode();L==="additive"?n.buffers.color.setClear(0,0,0,1,o):L==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||A)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function S(T,A){const N=_(A);N&&(N.isCubeTexture||N.mapping===CubeUVReflectionMapping)?(p===void 0&&(p=new Mesh$1(new BoxGeometry(1,1,1),new ShaderMaterial$1({name:"BackgroundCubeMaterial",uniforms:cloneUniforms$1(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide$1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(L,k,j){this.matrixWorld.copyPosition(j.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),_e1$1.copy(A.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),p.material.uniforms.envMap.value=N,p.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$4.makeRotationFromEuler(_e1$1)),p.material.toneMapped=ColorManagement$1.getTransfer(N.colorSpace)!==SRGBTransfer$1,(g!==N||m!==N.version||y!==i.toneMapping)&&(p.material.needsUpdate=!0,g=N,m=N.version,y=i.toneMapping),p.layers.enableAll(),T.unshift(p,p.geometry,p.material,0,0,null)):N&&N.isTexture&&(d===void 0&&(d=new Mesh$1(new PlaneGeometry(2,2),new ShaderMaterial$1({name:"BackgroundMaterial",uniforms:cloneUniforms$1(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide$1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=N,d.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,d.material.toneMapped=ColorManagement$1.getTransfer(N.colorSpace)!==SRGBTransfer$1,N.matrixAutoUpdate===!0&&N.updateMatrix(),d.material.uniforms.uvTransform.value.copy(N.matrix),(g!==N||m!==N.version||y!==i.toneMapping)&&(d.material.needsUpdate=!0,g=N,m=N.version,y=i.toneMapping),d.layers.enableAll(),T.unshift(d,d.geometry,d.material,0,0,null))}function b(T,A){T.getRGB(_rgb,getUnlitUniformColorSpace(i)),n.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,A,o)}function C(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return l},setClearColor:function(T,A=1){l.set(T),u=A,b(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(T){u=T,b(l,u)},render:E,addToRenderList:S,dispose:C}}function WebGLBindingStates(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=m(null);let s=r,o=!1;function l(U,q,J,ee,Y){let $=!1;const D=g(ee,J,q);s!==D&&(s=D,d(s.object)),$=y(U,ee,J,Y),$&&_(U,ee,J,Y),Y!==null&&e.update(Y,i.ELEMENT_ARRAY_BUFFER),($||o)&&(o=!1,A(U,q,J,ee),Y!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(Y).buffer))}function u(){return i.createVertexArray()}function d(U){return i.bindVertexArray(U)}function p(U){return i.deleteVertexArray(U)}function g(U,q,J){const ee=J.wireframe===!0;let Y=n[U.id];Y===void 0&&(Y={},n[U.id]=Y);let $=Y[q.id];$===void 0&&($={},Y[q.id]=$);let D=$[ee];return D===void 0&&(D=m(u()),$[ee]=D),D}function m(U){const q=[],J=[],ee=[];for(let Y=0;Y<t;Y++)q[Y]=0,J[Y]=0,ee[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:J,attributeDivisors:ee,object:U,attributes:{},index:null}}function y(U,q,J,ee){const Y=s.attributes,$=q.attributes;let D=0;const V=J.getAttributes();for(const P in V)if(V[P].location>=0){const B=Y[P];let z=$[P];if(z===void 0&&(P==="instanceMatrix"&&U.instanceMatrix&&(z=U.instanceMatrix),P==="instanceColor"&&U.instanceColor&&(z=U.instanceColor)),B===void 0||B.attribute!==z||z&&B.data!==z.data)return!0;D++}return s.attributesNum!==D||s.index!==ee}function _(U,q,J,ee){const Y={},$=q.attributes;let D=0;const V=J.getAttributes();for(const P in V)if(V[P].location>=0){let B=$[P];B===void 0&&(P==="instanceMatrix"&&U.instanceMatrix&&(B=U.instanceMatrix),P==="instanceColor"&&U.instanceColor&&(B=U.instanceColor));const z={};z.attribute=B,B&&B.data&&(z.data=B.data),Y[P]=z,D++}s.attributes=Y,s.attributesNum=D,s.index=ee}function E(){const U=s.newAttributes;for(let q=0,J=U.length;q<J;q++)U[q]=0}function S(U){b(U,0)}function b(U,q){const J=s.newAttributes,ee=s.enabledAttributes,Y=s.attributeDivisors;J[U]=1,ee[U]===0&&(i.enableVertexAttribArray(U),ee[U]=1),Y[U]!==q&&(i.vertexAttribDivisor(U,q),Y[U]=q)}function C(){const U=s.newAttributes,q=s.enabledAttributes;for(let J=0,ee=q.length;J<ee;J++)q[J]!==U[J]&&(i.disableVertexAttribArray(J),q[J]=0)}function T(U,q,J,ee,Y,$,D){D===!0?i.vertexAttribIPointer(U,q,J,Y,$):i.vertexAttribPointer(U,q,J,ee,Y,$)}function A(U,q,J,ee){E();const Y=ee.attributes,$=J.getAttributes(),D=q.defaultAttributeValues;for(const V in $){const P=$[V];if(P.location>=0){let I=Y[V];if(I===void 0&&(V==="instanceMatrix"&&U.instanceMatrix&&(I=U.instanceMatrix),V==="instanceColor"&&U.instanceColor&&(I=U.instanceColor)),I!==void 0){const B=I.normalized,z=I.itemSize,te=e.get(I);if(te===void 0)continue;const ne=te.buffer,Q=te.type,ue=te.bytesPerElement,me=Q===i.INT||Q===i.UNSIGNED_INT||I.gpuType===IntType;if(I.isInterleavedBufferAttribute){const be=I.data,Ae=be.stride,qe=I.offset;if(be.isInstancedInterleavedBuffer){for(let Be=0;Be<P.locationSize;Be++)b(P.location+Be,be.meshPerAttribute);U.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let Be=0;Be<P.locationSize;Be++)S(P.location+Be);i.bindBuffer(i.ARRAY_BUFFER,ne);for(let Be=0;Be<P.locationSize;Be++)T(P.location+Be,z/P.locationSize,Q,B,Ae*ue,(qe+z/P.locationSize*Be)*ue,me)}else{if(I.isInstancedBufferAttribute){for(let be=0;be<P.locationSize;be++)b(P.location+be,I.meshPerAttribute);U.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=I.meshPerAttribute*I.count)}else for(let be=0;be<P.locationSize;be++)S(P.location+be);i.bindBuffer(i.ARRAY_BUFFER,ne);for(let be=0;be<P.locationSize;be++)T(P.location+be,z/P.locationSize,Q,B,z*ue,z/P.locationSize*be*ue,me)}}else if(D!==void 0){const B=D[V];if(B!==void 0)switch(B.length){case 2:i.vertexAttrib2fv(P.location,B);break;case 3:i.vertexAttrib3fv(P.location,B);break;case 4:i.vertexAttrib4fv(P.location,B);break;default:i.vertexAttrib1fv(P.location,B)}}}}C()}function N(){j();for(const U in n){const q=n[U];for(const J in q){const ee=q[J];for(const Y in ee)p(ee[Y].object),delete ee[Y];delete q[J]}delete n[U]}}function L(U){if(n[U.id]===void 0)return;const q=n[U.id];for(const J in q){const ee=q[J];for(const Y in ee)p(ee[Y].object),delete ee[Y];delete q[J]}delete n[U.id]}function k(U){for(const q in n){const J=n[q];if(J[U.id]===void 0)continue;const ee=J[U.id];for(const Y in ee)p(ee[Y].object),delete ee[Y];delete J[U.id]}}function j(){F(),o=!0,s!==r&&(s=r,d(s.object))}function F(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:j,resetDefaultState:F,dispose:N,releaseStatesOfGeometry:L,releaseStatesOfProgram:k,initAttributes:E,enableAttribute:S,disableUnusedAttributes:C}}function WebGLBufferRenderer(i,e,t){let n;function r(d){n=d}function s(d,p){i.drawArrays(n,d,p),t.update(p,n,1)}function o(d,p,g){g!==0&&(i.drawArraysInstanced(n,d,p,g),t.update(p,n,g))}function l(d,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,p,0,g);let y=0;for(let _=0;_<g;_++)y+=p[_];t.update(y,n,1)}function u(d,p,g,m){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<d.length;_++)o(d[_],p[_],m[_]);else{y.multiDrawArraysInstancedWEBGL(n,d,0,p,0,m,0,g);let _=0;for(let E=0;E<g;E++)_+=p[E]*m[E];t.update(_,n,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function WebGLCapabilities(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(k){return!(k!==RGBAFormat$1&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(k){const j=k===HalfFloatType$1&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==UnsignedByteType$1&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==FloatType$1&&!j)}function u(k){if(k==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const p=u(d);p!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",p,"instead."),d=p);const g=t.logarithmicDepthBuffer===!0,m=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),_=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=i.getParameter(i.MAX_TEXTURE_SIZE),S=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),b=i.getParameter(i.MAX_VERTEX_ATTRIBS),C=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),T=i.getParameter(i.MAX_VARYING_VECTORS),A=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),N=_>0,L=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:l,precision:d,logarithmicDepthBuffer:g,reverseDepthBuffer:m,maxTextures:y,maxVertexTextures:_,maxTextureSize:E,maxCubemapSize:S,maxAttributes:b,maxVertexUniforms:C,maxVaryings:T,maxFragmentUniforms:A,vertexTextures:N,maxSamples:L}}function WebGLClipping(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new Plane$1,l=new Matrix3$1,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,m){const y=g.length!==0||m||n!==0||r;return r=m,n=g.length,y},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,m){t=p(g,m,0)},this.setState=function(g,m,y){const _=g.clippingPlanes,E=g.clipIntersection,S=g.clipShadows,b=i.get(g);if(!r||_===null||_.length===0||s&&!S)s?p(null):d();else{const C=s?0:n,T=C*4;let A=b.clippingState||null;u.value=A,A=p(_,m,T,y);for(let N=0;N!==T;++N)A[N]=t[N];b.clippingState=A,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=C}};function d(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(g,m,y,_){const E=g!==null?g.length:0;let S=null;if(E!==0){if(S=u.value,_!==!0||S===null){const b=y+E*4,C=m.matrixWorldInverse;l.getNormalMatrix(C),(S===null||S.length<b)&&(S=new Float32Array(b));for(let T=0,A=y;T!==E;++T,A+=4)o.copy(g[T]).applyMatrix4(C,l),o.normal.toArray(S,A),S[A+3]=o.constant}u.value=S,u.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,S}}let _canvas$1,ImageUtils$1=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{_canvas$1===void 0&&(_canvas$1=createElementNS$1("canvas")),_canvas$1.width=e.width,_canvas$1.height=e.height;const r=_canvas$1.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=_canvas$1}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=createElementNS$1("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=SRGBToLinear$1(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(SRGBToLinear$1(t[n]/255)*255):t[n]=SRGBToLinear$1(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},_sourceId$1=0,Source$1=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId$1++}),this.uuid=generateUUID$1(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(serializeImage$1(r[o].image)):s.push(serializeImage$1(r[o]))}else s=serializeImage$1(r);n.url=s}return t||(e.images[this.uuid]=n),n}};function serializeImage$1(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?ImageUtils$1.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId$1=0,Texture$1=class ja extends EventDispatcher$1{constructor(e=ja.DEFAULT_IMAGE,t=ja.DEFAULT_MAPPING,n=ClampToEdgeWrapping$1,r=ClampToEdgeWrapping$1,s=LinearFilter$1,o=LinearMipmapLinearFilter$1,l=RGBAFormat$1,u=UnsignedByteType$1,d=ja.DEFAULT_ANISOTROPY,p=NoColorSpace$1){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId$1++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source$1(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Vector2$1(0,0),this.repeat=new Vector2$1(1,1),this.center=new Vector2$1(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3$1,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==UVMapping$1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case RepeatWrapping$1:e.x=e.x-Math.floor(e.x);break;case ClampToEdgeWrapping$1:e.x=e.x<0?0:1;break;case MirroredRepeatWrapping$1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case RepeatWrapping$1:e.y=e.y-Math.floor(e.y);break;case ClampToEdgeWrapping$1:e.y=e.y<0?0:1;break;case MirroredRepeatWrapping$1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Texture$1.DEFAULT_IMAGE=null;Texture$1.DEFAULT_MAPPING=UVMapping$1;Texture$1.DEFAULT_ANISOTROPY=1;let RenderTarget$1=class extends EventDispatcher$1{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Vector4$1(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4$1(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter$1,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Texture$1(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let l=0;l<o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Source$1(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},WebGLRenderTarget$1=class extends RenderTarget$1{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}},Camera$1=class extends Object3D$1{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4$1,this.projectionMatrix=new Matrix4$1,this.projectionMatrixInverse=new Matrix4$1,this.coordinateSystem=WebGLCoordinateSystem$1}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const _v3=new Vector3$1,_minTarget$1=new Vector2$1,_maxTarget$1=new Vector2$1;let PerspectiveCamera$1=class extends Camera$1{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=RAD2DEG$1*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(DEG2RAD$1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return RAD2DEG$1*2*Math.atan(Math.tan(DEG2RAD$1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){_v3.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(_v3.x,_v3.y).multiplyScalar(-e/_v3.z),_v3.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(_v3.x,_v3.y).multiplyScalar(-e/_v3.z)}getViewSize(e,t){return this.getViewBounds(e,_minTarget$1,_maxTarget$1),t.subVectors(_maxTarget$1,_minTarget$1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(DEG2RAD$1*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,d=o.fullHeight;s+=o.offsetX*r/u,t-=o.offsetY*n/d,r*=o.width/u,n*=o.height/d}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const fov=-90,aspect=1;class CubeCamera extends Object3D$1{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new PerspectiveCamera$1(fov,aspect,e,t);r.layers=this.layers,this.add(r);const s=new PerspectiveCamera$1(fov,aspect,e,t);s.layers=this.layers,this.add(s);const o=new PerspectiveCamera$1(fov,aspect,e,t);o.layers=this.layers,this.add(o);const l=new PerspectiveCamera$1(fov,aspect,e,t);l.layers=this.layers,this.add(l);const u=new PerspectiveCamera$1(fov,aspect,e,t);u.layers=this.layers,this.add(u);const d=new PerspectiveCamera$1(fov,aspect,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,l,u]=t;for(const d of t)this.remove(d);if(e===WebGLCoordinateSystem$1)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===WebGPUCoordinateSystem$1)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,u,d,p]=this.children,g=e.getRenderTarget(),m=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const E=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,l),e.setRenderTarget(n,3,r),e.render(t,u),e.setRenderTarget(n,4,r),e.render(t,d),n.texture.generateMipmaps=E,e.setRenderTarget(n,5,r),e.render(t,p),e.setRenderTarget(g,m,y),e.xr.enabled=_,n.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture$1{constructor(e=[],t=CubeReflectionMapping,n,r,s,o,l,u,d,p){super(e,t,n,r,s,o,l,u,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class WebGLCubeRenderTarget extends WebGLRenderTarget$1{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new CubeTexture(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:LinearFilter$1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new BoxGeometry(5,5,5),s=new ShaderMaterial$1({name:"CubemapFromEquirect",uniforms:cloneUniforms$1(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:BackSide$1,blending:NoBlending$1});s.uniforms.tEquirect.value=t;const o=new Mesh$1(r,s),l=t.minFilter;return t.minFilter===LinearMipmapLinearFilter$1&&(t.minFilter=LinearFilter$1),new CubeCamera(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}function WebGLCubeMaps(i){let e=new WeakMap;function t(o,l){return l===EquirectangularReflectionMapping?o.mapping=CubeReflectionMapping:l===EquirectangularRefractionMapping&&(o.mapping=CubeRefractionMapping),o}function n(o){if(o&&o.isTexture){const l=o.mapping;if(l===EquirectangularReflectionMapping||l===EquirectangularRefractionMapping)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const d=new WebGLCubeRenderTarget(u.height);return d.fromEquirectangularTexture(i,o),e.set(o,d),o.addEventListener("dispose",r),t(d.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}let OrthographicCamera$1=class extends Camera$1{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,l=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,l-=p*this.view.offsetY,u=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera$1,_clearColor=new Color$1;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3$1(-PHI,INV_PHI,0),new Vector3$1(PHI,INV_PHI,0),new Vector3$1(-INV_PHI,0,PHI),new Vector3$1(INV_PHI,0,PHI),new Vector3$1(0,PHI,-INV_PHI),new Vector3$1(0,PHI,INV_PHI),new Vector3$1(-1,1,-1),new Vector3$1(1,1,-1),new Vector3$1(-1,1,1),new Vector3$1(1,1,1)],_origin=new Vector3$1;class PMREMGenerator{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,s={}){const{size:o=256,position:l=_origin}=s;_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,n,r,u,l),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,e.scissorTest=!1,_setViewport(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:LinearFilter$1,minFilter:LinearFilter$1,generateMipmaps:!1,type:HalfFloatType$1,format:RGBAFormat$1,colorSpace:LinearSRGBColorSpace$1,depthBuffer:!1},r=_createRenderTarget(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(s)),this._blurMaterial=_getBlurShader(s,e,t)}return r}_compileMaterial(e){const t=new Mesh$1(this._lodPlanes[0],e);this._renderer.compile(t,_flatCamera)}_sceneToCubeUV(e,t,n,r,s){const u=new PerspectiveCamera$1(90,1,t,n),d=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],g=this._renderer,m=g.autoClear,y=g.toneMapping;g.getClearColor(_clearColor),g.toneMapping=NoToneMapping,g.autoClear=!1;const _=new MeshBasicMaterial$1({name:"PMREM.Background",side:BackSide$1,depthWrite:!1,depthTest:!1}),E=new Mesh$1(new BoxGeometry,_);let S=!1;const b=e.background;b?b.isColor&&(_.color.copy(b),e.background=null,S=!0):(_.color.copy(_clearColor),S=!0);for(let C=0;C<6;C++){const T=C%3;T===0?(u.up.set(0,d[C],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+p[C],s.y,s.z)):T===1?(u.up.set(0,0,d[C]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+p[C],s.z)):(u.up.set(0,d[C],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+p[C]));const A=this._cubeSize;_setViewport(r,T*A,C>2?A:0,A,A),g.setRenderTarget(r),S&&g.render(E,u),g.render(e,u)}E.geometry.dispose(),E.material.dispose(),g.toneMapping=y,g.autoClear=m,e.background=b}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Mesh$1(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;_setViewport(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(o,_flatCamera)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=_axisDirections[(r-s-1)%_axisDirections.length];this._blur(e,s-1,s,o,l)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,l){const u=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,g=new Mesh$1(this._lodPlanes[r],d),m=d.uniforms,y=this._sizeLods[n]-1,_=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*MAX_SAMPLES-1),E=s/_,S=isFinite(s)?1+Math.floor(p*E):MAX_SAMPLES;S>MAX_SAMPLES&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${MAX_SAMPLES}`);const b=[];let C=0;for(let k=0;k<MAX_SAMPLES;++k){const j=k/E,F=Math.exp(-j*j/2);b.push(F),k===0?C+=F:k<S&&(C+=2*F)}for(let k=0;k<b.length;k++)b[k]=b[k]/C;m.envMap.value=e.texture,m.samples.value=S,m.weights.value=b,m.latitudinal.value=o==="latitudinal",l&&(m.poleAxis.value=l);const{_lodMax:T}=this;m.dTheta.value=_,m.mipInt.value=T-n;const A=this._sizeLods[r],N=3*A*(r>T-LOD_MIN?r-T+LOD_MIN:0),L=4*(this._cubeSize-A);_setViewport(t,N,L,3*A,2*A),u.setRenderTarget(t),u.render(g,_flatCamera)}}function _createPlanes(i){const e=[],t=[],n=[];let r=i;const s=i-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);t.push(l);let u=1/l;o>i-LOD_MIN?u=EXTRA_LOD_SIGMA[o-i+LOD_MIN-1]:o===0&&(u=0),n.push(u);const d=1/(l-2),p=-d,g=1+d,m=[p,p,g,p,g,g,p,p,g,g,p,g],y=6,_=6,E=3,S=2,b=1,C=new Float32Array(E*_*y),T=new Float32Array(S*_*y),A=new Float32Array(b*_*y);for(let L=0;L<y;L++){const k=L%3*2/3-1,j=L>2?0:-1,F=[k,j,0,k+2/3,j,0,k+2/3,j+1,0,k,j,0,k+2/3,j+1,0,k,j+1,0];C.set(F,E*_*L),T.set(m,S*_*L);const U=[L,L,L,L,L,L];A.set(U,b*_*L)}const N=new BufferGeometry$1;N.setAttribute("position",new BufferAttribute$1(C,E)),N.setAttribute("uv",new BufferAttribute$1(T,S)),N.setAttribute("faceIndex",new BufferAttribute$1(A,b)),e.push(N),r>LOD_MIN&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function _createRenderTarget(i,e,t){const n=new WebGLRenderTarget$1(i,e,t);return n.texture.mapping=CubeUVReflectionMapping,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function _setViewport(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function _getBlurShader(i,e,t){const n=new Float32Array(MAX_SAMPLES),r=new Vector3$1(0,1,0);return new ShaderMaterial$1({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending$1,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial$1({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending$1,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial$1({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending$1,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(i){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const u=l.mapping,d=u===EquirectangularReflectionMapping||u===EquirectangularRefractionMapping,p=u===CubeReflectionMapping||u===CubeRefractionMapping;if(d||p){let g=e.get(l);const m=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==m)return t===null&&(t=new PMREMGenerator(i)),g=d?t.fromEquirectangular(l,g):t.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),g.texture;if(g!==void 0)return g.texture;{const y=l.image;return d&&y&&y.height>0||p&&y&&r(y)?(t===null&&(t=new PMREMGenerator(i)),g=d?t.fromEquirectangular(l):t.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),l.addEventListener("dispose",s),g.texture):null}}}return l}function r(l){let u=0;const d=6;for(let p=0;p<d;p++)l[p]!==void 0&&u++;return u===d}function s(l){const u=l.target;u.removeEventListener("dispose",s);const d=e.get(u);d!==void 0&&(e.delete(u),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function WebGLExtensions(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&warnOnce("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function WebGLGeometries(i,e,t,n){const r={},s=new WeakMap;function o(g){const m=g.target;m.index!==null&&e.remove(m.index);for(const _ in m.attributes)e.remove(m.attributes[_]);m.removeEventListener("dispose",o),delete r[m.id];const y=s.get(m);y&&(e.remove(y),s.delete(m)),n.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function l(g,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function u(g){const m=g.attributes;for(const y in m)e.update(m[y],i.ARRAY_BUFFER)}function d(g){const m=[],y=g.index,_=g.attributes.position;let E=0;if(y!==null){const C=y.array;E=y.version;for(let T=0,A=C.length;T<A;T+=3){const N=C[T+0],L=C[T+1],k=C[T+2];m.push(N,L,L,k,k,N)}}else if(_!==void 0){const C=_.array;E=_.version;for(let T=0,A=C.length/3-1;T<A;T+=3){const N=T+0,L=T+1,k=T+2;m.push(N,L,L,k,k,N)}}else return;const S=new(arrayNeedsUint32$1(m)?Uint32BufferAttribute$1:Uint16BufferAttribute$1)(m,1);S.version=E;const b=s.get(g);b&&e.remove(b),s.set(g,S)}function p(g){const m=s.get(g);if(m){const y=g.index;y!==null&&m.version<y.version&&d(g)}else d(g);return s.get(g)}return{get:l,update:u,getWireframeAttribute:p}}function WebGLIndexedBufferRenderer(i,e,t){let n;function r(m){n=m}let s,o;function l(m){s=m.type,o=m.bytesPerElement}function u(m,y){i.drawElements(n,y,s,m*o),t.update(y,n,1)}function d(m,y,_){_!==0&&(i.drawElementsInstanced(n,y,s,m*o,_),t.update(y,n,_))}function p(m,y,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,y,0,s,m,0,_);let S=0;for(let b=0;b<_;b++)S+=y[b];t.update(S,n,1)}function g(m,y,_,E){if(_===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let b=0;b<m.length;b++)d(m[b]/o,y[b],E[b]);else{S.multiDrawElementsInstancedWEBGL(n,y,0,s,m,0,E,0,_);let b=0;for(let C=0;C<_;C++)b+=y[C]*E[C];t.update(b,n,1)}}this.setMode=r,this.setIndex=l,this.render=u,this.renderInstances=d,this.renderMultiDraw=p,this.renderMultiDrawInstances=g}function WebGLInfo(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,l){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=l*(s/3);break;case i.LINES:t.lines+=l*(s/2);break;case i.LINE_STRIP:t.lines+=l*(s-1);break;case i.LINE_LOOP:t.lines+=l*s;break;case i.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}class DataArrayTexture extends Texture$1{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=NearestFilter$1,this.minFilter=NearestFilter$1,this.wrapR=ClampToEdgeWrapping$1,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}function WebGLMorphtargets(i,e,t){const n=new WeakMap,r=new Vector4$1;function s(o,l,u){const d=o.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=p!==void 0?p.length:0;let m=n.get(l);if(m===void 0||m.count!==g){let F=function(){k.dispose(),n.delete(l),l.removeEventListener("dispose",F)};m!==void 0&&m.texture.dispose();const y=l.morphAttributes.position!==void 0,_=l.morphAttributes.normal!==void 0,E=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],b=l.morphAttributes.normal||[],C=l.morphAttributes.color||[];let T=0;y===!0&&(T=1),_===!0&&(T=2),E===!0&&(T=3);let A=l.attributes.position.count*T,N=1;A>e.maxTextureSize&&(N=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const L=new Float32Array(A*N*4*g),k=new DataArrayTexture(L,A,N,g);k.type=FloatType$1,k.needsUpdate=!0;const j=T*4;for(let U=0;U<g;U++){const q=S[U],J=b[U],ee=C[U],Y=A*N*4*U;for(let $=0;$<q.count;$++){const D=$*j;y===!0&&(r.fromBufferAttribute(q,$),L[Y+D+0]=r.x,L[Y+D+1]=r.y,L[Y+D+2]=r.z,L[Y+D+3]=0),_===!0&&(r.fromBufferAttribute(J,$),L[Y+D+4]=r.x,L[Y+D+5]=r.y,L[Y+D+6]=r.z,L[Y+D+7]=0),E===!0&&(r.fromBufferAttribute(ee,$),L[Y+D+8]=r.x,L[Y+D+9]=r.y,L[Y+D+10]=r.z,L[Y+D+11]=ee.itemSize===4?r.w:1)}}m={count:g,texture:k,size:new Vector2$1(A,N)},n.set(l,m),l.addEventListener("dispose",F)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)u.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let y=0;for(let E=0;E<d.length;E++)y+=d[E];const _=l.morphTargetsRelative?1:1-y;u.getUniforms().setValue(i,"morphTargetBaseInfluence",_),u.getUniforms().setValue(i,"morphTargetInfluences",d)}u.getUniforms().setValue(i,"morphTargetsTexture",m.texture,t),u.getUniforms().setValue(i,"morphTargetsTextureSize",m.size)}return{update:s}}function WebGLObjects(i,e,t,n){let r=new WeakMap;function s(u){const d=n.render.frame,p=u.geometry,g=e.get(u,p);if(r.get(g)!==d&&(e.update(g),r.set(g,d)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),r.get(u)!==d&&(t.update(u.instanceMatrix,i.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,i.ARRAY_BUFFER),r.set(u,d))),u.isSkinnedMesh){const m=u.skeleton;r.get(m)!==d&&(m.update(),r.set(m,d))}return g}function o(){r=new WeakMap}function l(u){const d=u.target;d.removeEventListener("dispose",l),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}class Data3DTexture extends Texture$1{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=NearestFilter$1,this.minFilter=NearestFilter$1,this.wrapR=ClampToEdgeWrapping$1,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class DepthTexture extends Texture$1{constructor(e,t,n=UnsignedIntType,r,s,o,l=NearestFilter$1,u=NearestFilter$1,d,p=DepthFormat){if(p!==DepthFormat&&p!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,o,l,u,p,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Source$1(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const emptyTexture=new Texture$1,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=arrayCacheF32[r];if(s===void 0&&(s=new Float32Array(r),arrayCacheF32[r]=s),e!==0){n.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,i[o].toArray(s,l)}return s}function arraysEqual(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function copyArray(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function allocTexUnits(i,e){let t=arrayCacheI32[e];t===void 0&&(t=new Int32Array(e),arrayCacheI32[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function setValueV1f(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function setValueV2f(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(arraysEqual(t,e))return;i.uniform2fv(this.addr,e),copyArray(t,e)}}function setValueV3f(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(arraysEqual(t,e))return;i.uniform3fv(this.addr,e),copyArray(t,e)}}function setValueV4f(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(arraysEqual(t,e))return;i.uniform4fv(this.addr,e),copyArray(t,e)}}function setValueM2(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(arraysEqual(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),copyArray(t,e)}else{if(arraysEqual(t,n))return;mat2array.set(n),i.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(t,n)}}function setValueM3(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(arraysEqual(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),copyArray(t,e)}else{if(arraysEqual(t,n))return;mat3array.set(n),i.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(t,n)}}function setValueM4(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(arraysEqual(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),copyArray(t,e)}else{if(arraysEqual(t,n))return;mat4array.set(n),i.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(t,n)}}function setValueV1i(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function setValueV2i(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(arraysEqual(t,e))return;i.uniform2iv(this.addr,e),copyArray(t,e)}}function setValueV3i(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(arraysEqual(t,e))return;i.uniform3iv(this.addr,e),copyArray(t,e)}}function setValueV4i(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(arraysEqual(t,e))return;i.uniform4iv(this.addr,e),copyArray(t,e)}}function setValueV1ui(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function setValueV2ui(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(arraysEqual(t,e))return;i.uniform2uiv(this.addr,e),copyArray(t,e)}}function setValueV3ui(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(arraysEqual(t,e))return;i.uniform3uiv(this.addr,e),copyArray(t,e)}}function setValueV4ui(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(arraysEqual(t,e))return;i.uniform4uiv(this.addr,e),copyArray(t,e)}}function setValueT1(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,s=emptyShadowTexture):s=emptyTexture,t.setTexture2D(e||s,r)}function setValueT3D1(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||empty3dTexture,r)}function setValueT6(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||emptyCubeTexture,r)}function setValueT2DArray1(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||emptyArrayTexture,r)}function getSingularSetter(i){switch(i){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(i,e){i.uniform1fv(this.addr,e)}function setValueV2fArray(i,e){const t=flatten(e,this.size,2);i.uniform2fv(this.addr,t)}function setValueV3fArray(i,e){const t=flatten(e,this.size,3);i.uniform3fv(this.addr,t)}function setValueV4fArray(i,e){const t=flatten(e,this.size,4);i.uniform4fv(this.addr,t)}function setValueM2Array(i,e){const t=flatten(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function setValueM3Array(i,e){const t=flatten(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function setValueM4Array(i,e){const t=flatten(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function setValueV1iArray(i,e){i.uniform1iv(this.addr,e)}function setValueV2iArray(i,e){i.uniform2iv(this.addr,e)}function setValueV3iArray(i,e){i.uniform3iv(this.addr,e)}function setValueV4iArray(i,e){i.uniform4iv(this.addr,e)}function setValueV1uiArray(i,e){i.uniform1uiv(this.addr,e)}function setValueV2uiArray(i,e){i.uniform2uiv(this.addr,e)}function setValueV3uiArray(i,e){i.uniform3uiv(this.addr,e)}function setValueV4uiArray(i,e){i.uniform4uiv(this.addr,e)}function setValueT1Array(i,e,t){const n=this.cache,r=e.length,s=allocTexUnits(t,r);arraysEqual(n,s)||(i.uniform1iv(this.addr,s),copyArray(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||emptyTexture,s[o])}function setValueT3DArray(i,e,t){const n=this.cache,r=e.length,s=allocTexUnits(t,r);arraysEqual(n,s)||(i.uniform1iv(this.addr,s),copyArray(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||empty3dTexture,s[o])}function setValueT6Array(i,e,t){const n=this.cache,r=e.length,s=allocTexUnits(t,r);arraysEqual(n,s)||(i.uniform1iv(this.addr,s),copyArray(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||emptyCubeTexture,s[o])}function setValueT2DArrayArray(i,e,t){const n=this.cache,r=e.length,s=allocTexUnits(t,r);arraysEqual(n,s)||(i.uniform1iv(this.addr,s),copyArray(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||emptyArrayTexture,s[o])}function getPureArraySetter(i){switch(i){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=getSingularSetter(t.type)}}class PureArrayUniform{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=getPureArraySetter(t.type)}}class StructuredUniform{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],n)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(i,e){i.seq.push(e),i.map[e.id]=e}function parseUniform(i,e,t){const n=i.name,r=n.length;for(RePathPart.lastIndex=0;;){const s=RePathPart.exec(n),o=RePathPart.lastIndex;let l=s[1];const u=s[2]==="]",d=s[3];if(u&&(l=l|0),d===void 0||d==="["&&o+2===r){addUniform(t,d===void 0?new SingleUniform(l,i,e):new PureArrayUniform(l,i,e));break}else{let g=t.map[l];g===void 0&&(g=new StructuredUniform(l),addUniform(t,g)),t=g}}}class WebGLUniforms{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);parseUniform(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],u=n[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function WebGLShader(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}const _m0=new Matrix3$1;function getEncodingComponents(i){ColorManagement$1._getMatrix(_m0,ColorManagement$1.workingColorSpace,i);const e=`mat3( ${_m0.elements.map(t=>t.toFixed(4))} )`;switch(ColorManagement$1.getTransfer(i)){case LinearTransfer$1:return[e,"LinearTransferOETF"];case SRGBTransfer$1:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function getShaderErrors(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+handleSource(i.getShaderSource(e),o)}else return r}function getTexelEncodingFunction(i,e){const t=getEncodingComponents(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function getToneMappingFunction(i,e){let t;switch(e){case LinearToneMapping:t="Linear";break;case ReinhardToneMapping:t="Reinhard";break;case CineonToneMapping:t="Cineon";break;case ACESFilmicToneMapping:t="ACESFilmic";break;case AgXToneMapping:t="AgX";break;case NeutralToneMapping:t="Neutral";break;case CustomToneMapping:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const _v0=new Vector3$1;function getLuminanceFunction(){ColorManagement$1.getLuminanceCoefficients(_v0);const i=_v0.x.toFixed(4),e=_v0.y.toFixed(4),t=_v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function fetchAttributeLocations(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let l=1;s.type===i.FLOAT_MAT2&&(l=2),s.type===i.FLOAT_MAT3&&(l=3),s.type===i.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:l}}return t}function filterEmptyLine(i){return i!==""}function replaceLightNums(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function replaceClippingPlaneNums(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(i){return i.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(i,e){let t=ShaderChunk[e];if(t===void 0){const n=shaderChunkMap.get(e);if(n!==void 0)t=ShaderChunk[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return resolveIncludes(t)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(i){return i.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function generatePrecision(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function generateShadowMapTypeDefine(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===PCFShadowMap?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===PCFSoftShadowMap?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===VSMShadowMap&&(e="SHADOWMAP_TYPE_VSM"),e}function generateEnvMapTypeDefine(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:e="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:e="ENVMAP_TYPE_CUBE_UV";break}return e}function generateEnvMapModeDefine(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case CubeRefractionMapping:e="ENVMAP_MODE_REFRACTION";break}return e}function generateEnvMapBlendingDefine(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case MultiplyOperation$1:e="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:e="ENVMAP_BLENDING_MIX";break;case AddOperation:e="ENVMAP_BLENDING_ADD";break}return e}function generateCubeUVSize(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function WebGLProgram(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const u=generateShadowMapTypeDefine(t),d=generateEnvMapTypeDefine(t),p=generateEnvMapModeDefine(t),g=generateEnvMapBlendingDefine(t),m=generateCubeUVSize(t),y=generateVertexExtensions(t),_=generateDefines(s),E=r.createProgram();let S,b,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(filterEmptyLine).join(`
`),S.length>0&&(S+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(filterEmptyLine).join(`
`),b.length>0&&(b+=`
`)):(S=[generatePrecision(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),b=[generatePrecision(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",t.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",t.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",t.outputColorSpace),getLuminanceFunction(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),o=resolveIncludes(o),o=replaceLightNums(o,t),o=replaceClippingPlaneNums(o,t),l=resolveIncludes(l),l=replaceLightNums(l,t),l=replaceClippingPlaneNums(l,t),o=unrollLoops(o),l=unrollLoops(l),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,S=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,b=["#define varying in",t.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const T=C+S+o,A=C+b+l,N=WebGLShader(r,r.VERTEX_SHADER,T),L=WebGLShader(r,r.FRAGMENT_SHADER,A);r.attachShader(E,N),r.attachShader(E,L),t.index0AttributeName!==void 0?r.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(E,0,"position"),r.linkProgram(E);function k(q){if(i.debug.checkShaderErrors){const J=r.getProgramInfoLog(E).trim(),ee=r.getShaderInfoLog(N).trim(),Y=r.getShaderInfoLog(L).trim();let $=!0,D=!0;if(r.getProgramParameter(E,r.LINK_STATUS)===!1)if($=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,E,N,L);else{const V=getShaderErrors(r,N,"vertex"),P=getShaderErrors(r,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(E,r.VALIDATE_STATUS)+`

Material Name: `+q.name+`
Material Type: `+q.type+`

Program Info Log: `+J+`
`+V+`
`+P)}else J!==""?console.warn("THREE.WebGLProgram: Program Info Log:",J):(ee===""||Y==="")&&(D=!1);D&&(q.diagnostics={runnable:$,programLog:J,vertexShader:{log:ee,prefix:S},fragmentShader:{log:Y,prefix:b}})}r.deleteShader(N),r.deleteShader(L),j=new WebGLUniforms(r,E),F=fetchAttributeLocations(r,E)}let j;this.getUniforms=function(){return j===void 0&&k(this),j};let F;this.getAttributes=function(){return F===void 0&&k(this),F};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=r.getProgramParameter(E,COMPLETION_STATUS_KHR)),U},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=programIdCount++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=N,this.fragmentShader=L,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new WebGLShaderStage(e),t.set(e,n)),n}}class WebGLShaderStage{constructor(e){this.id=_id++,this.code=e,this.usedTimes=0}}function WebGLPrograms(i,e,t,n,r,s,o){const l=new Layers$1,u=new WebGLShaderCache,d=new Set,p=[],g=r.logarithmicDepthBuffer,m=r.vertexTextures;let y=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(F){return d.add(F),F===0?"uv":`uv${F}`}function S(F,U,q,J,ee){const Y=J.fog,$=ee.geometry,D=F.isMeshStandardMaterial?J.environment:null,V=(F.isMeshStandardMaterial?t:e).get(F.envMap||D),P=V&&V.mapping===CubeUVReflectionMapping?V.image.height:null,I=_[F.type];F.precision!==null&&(y=r.getMaxPrecision(F.precision),y!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",y,"instead."));const B=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,z=B!==void 0?B.length:0;let te=0;$.morphAttributes.position!==void 0&&(te=1),$.morphAttributes.normal!==void 0&&(te=2),$.morphAttributes.color!==void 0&&(te=3);let ne,Q,ue,me;if(I){const _t=ShaderLib[I];ne=_t.vertexShader,Q=_t.fragmentShader}else ne=F.vertexShader,Q=F.fragmentShader,u.update(F),ue=u.getVertexShaderID(F),me=u.getFragmentShaderID(F);const be=i.getRenderTarget(),Ae=i.state.buffers.depth.getReversed(),qe=ee.isInstancedMesh===!0,Be=ee.isBatchedMesh===!0,it=!!F.map,st=!!F.matcap,Oe=!!V,Z=!!F.aoMap,jt=!!F.lightMap,ot=!!F.bumpMap,Ye=!!F.normalMap,$e=!!F.displacementMap,dt=!!F.emissiveMap,Ue=!!F.metalnessMap,K=!!F.roughnessMap,G=F.anisotropy>0,he=F.clearcoat>0,Ee=F.dispersion>0,Te=F.iridescence>0,ve=F.sheen>0,Ne=F.transmission>0,Pe=G&&!!F.anisotropyMap,De=he&&!!F.clearcoatMap,ct=he&&!!F.clearcoatNormalMap,Re=he&&!!F.clearcoatRoughnessMap,Ge=Te&&!!F.iridescenceMap,Qe=Te&&!!F.iridescenceThicknessMap,et=ve&&!!F.sheenColorMap,Ve=ve&&!!F.sheenRoughnessMap,ut=!!F.specularMap,at=!!F.specularColorMap,Ct=!!F.specularIntensityMap,se=Ne&&!!F.transmissionMap,Ie=Ne&&!!F.thicknessMap,ye=!!F.gradientMap,we=!!F.alphaMap,Fe=F.alphaTest>0,je=!!F.alphaHash,lt=!!F.extensions;let Lt=NoToneMapping;F.toneMapped&&(be===null||be.isXRRenderTarget===!0)&&(Lt=i.toneMapping);const Ht={shaderID:I,shaderType:F.type,shaderName:F.name,vertexShader:ne,fragmentShader:Q,defines:F.defines,customVertexShaderID:ue,customFragmentShaderID:me,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:y,batching:Be,batchingColor:Be&&ee._colorsTexture!==null,instancing:qe,instancingColor:qe&&ee.instanceColor!==null,instancingMorph:qe&&ee.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:be===null?i.outputColorSpace:be.isXRRenderTarget===!0?be.texture.colorSpace:LinearSRGBColorSpace$1,alphaToCoverage:!!F.alphaToCoverage,map:it,matcap:st,envMap:Oe,envMapMode:Oe&&V.mapping,envMapCubeUVHeight:P,aoMap:Z,lightMap:jt,bumpMap:ot,normalMap:Ye,displacementMap:m&&$e,emissiveMap:dt,normalMapObjectSpace:Ye&&F.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:Ye&&F.normalMapType===TangentSpaceNormalMap$1,metalnessMap:Ue,roughnessMap:K,anisotropy:G,anisotropyMap:Pe,clearcoat:he,clearcoatMap:De,clearcoatNormalMap:ct,clearcoatRoughnessMap:Re,dispersion:Ee,iridescence:Te,iridescenceMap:Ge,iridescenceThicknessMap:Qe,sheen:ve,sheenColorMap:et,sheenRoughnessMap:Ve,specularMap:ut,specularColorMap:at,specularIntensityMap:Ct,transmission:Ne,transmissionMap:se,thicknessMap:Ie,gradientMap:ye,opaque:F.transparent===!1&&F.blending===NormalBlending$1&&F.alphaToCoverage===!1,alphaMap:we,alphaTest:Fe,alphaHash:je,combine:F.combine,mapUv:it&&E(F.map.channel),aoMapUv:Z&&E(F.aoMap.channel),lightMapUv:jt&&E(F.lightMap.channel),bumpMapUv:ot&&E(F.bumpMap.channel),normalMapUv:Ye&&E(F.normalMap.channel),displacementMapUv:$e&&E(F.displacementMap.channel),emissiveMapUv:dt&&E(F.emissiveMap.channel),metalnessMapUv:Ue&&E(F.metalnessMap.channel),roughnessMapUv:K&&E(F.roughnessMap.channel),anisotropyMapUv:Pe&&E(F.anisotropyMap.channel),clearcoatMapUv:De&&E(F.clearcoatMap.channel),clearcoatNormalMapUv:ct&&E(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Re&&E(F.clearcoatRoughnessMap.channel),iridescenceMapUv:Ge&&E(F.iridescenceMap.channel),iridescenceThicknessMapUv:Qe&&E(F.iridescenceThicknessMap.channel),sheenColorMapUv:et&&E(F.sheenColorMap.channel),sheenRoughnessMapUv:Ve&&E(F.sheenRoughnessMap.channel),specularMapUv:ut&&E(F.specularMap.channel),specularColorMapUv:at&&E(F.specularColorMap.channel),specularIntensityMapUv:Ct&&E(F.specularIntensityMap.channel),transmissionMapUv:se&&E(F.transmissionMap.channel),thicknessMapUv:Ie&&E(F.thicknessMap.channel),alphaMapUv:we&&E(F.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(Ye||G),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,pointsUvs:ee.isPoints===!0&&!!$.attributes.uv&&(it||we),fog:!!Y,useFog:F.fog===!0,fogExp2:!!Y&&Y.isFogExp2,flatShading:F.flatShading===!0,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:Ae,skinning:ee.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:te,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:F.dithering,shadowMapEnabled:i.shadowMap.enabled&&q.length>0,shadowMapType:i.shadowMap.type,toneMapping:Lt,decodeVideoTexture:it&&F.map.isVideoTexture===!0&&ColorManagement$1.getTransfer(F.map.colorSpace)===SRGBTransfer$1,decodeVideoTextureEmissive:dt&&F.emissiveMap.isVideoTexture===!0&&ColorManagement$1.getTransfer(F.emissiveMap.colorSpace)===SRGBTransfer$1,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===DoubleSide$1,flipSided:F.side===BackSide$1,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionClipCullDistance:lt&&F.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(lt&&F.extensions.multiDraw===!0||Be)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return Ht.vertexUv1s=d.has(1),Ht.vertexUv2s=d.has(2),Ht.vertexUv3s=d.has(3),d.clear(),Ht}function b(F){const U=[];if(F.shaderID?U.push(F.shaderID):(U.push(F.customVertexShaderID),U.push(F.customFragmentShaderID)),F.defines!==void 0)for(const q in F.defines)U.push(q),U.push(F.defines[q]);return F.isRawShaderMaterial===!1&&(C(U,F),T(U,F),U.push(i.outputColorSpace)),U.push(F.customProgramCacheKey),U.join()}function C(F,U){F.push(U.precision),F.push(U.outputColorSpace),F.push(U.envMapMode),F.push(U.envMapCubeUVHeight),F.push(U.mapUv),F.push(U.alphaMapUv),F.push(U.lightMapUv),F.push(U.aoMapUv),F.push(U.bumpMapUv),F.push(U.normalMapUv),F.push(U.displacementMapUv),F.push(U.emissiveMapUv),F.push(U.metalnessMapUv),F.push(U.roughnessMapUv),F.push(U.anisotropyMapUv),F.push(U.clearcoatMapUv),F.push(U.clearcoatNormalMapUv),F.push(U.clearcoatRoughnessMapUv),F.push(U.iridescenceMapUv),F.push(U.iridescenceThicknessMapUv),F.push(U.sheenColorMapUv),F.push(U.sheenRoughnessMapUv),F.push(U.specularMapUv),F.push(U.specularColorMapUv),F.push(U.specularIntensityMapUv),F.push(U.transmissionMapUv),F.push(U.thicknessMapUv),F.push(U.combine),F.push(U.fogExp2),F.push(U.sizeAttenuation),F.push(U.morphTargetsCount),F.push(U.morphAttributeCount),F.push(U.numDirLights),F.push(U.numPointLights),F.push(U.numSpotLights),F.push(U.numSpotLightMaps),F.push(U.numHemiLights),F.push(U.numRectAreaLights),F.push(U.numDirLightShadows),F.push(U.numPointLightShadows),F.push(U.numSpotLightShadows),F.push(U.numSpotLightShadowsWithMaps),F.push(U.numLightProbes),F.push(U.shadowMapType),F.push(U.toneMapping),F.push(U.numClippingPlanes),F.push(U.numClipIntersection),F.push(U.depthPacking)}function T(F,U){l.disableAll(),U.supportsVertexTextures&&l.enable(0),U.instancing&&l.enable(1),U.instancingColor&&l.enable(2),U.instancingMorph&&l.enable(3),U.matcap&&l.enable(4),U.envMap&&l.enable(5),U.normalMapObjectSpace&&l.enable(6),U.normalMapTangentSpace&&l.enable(7),U.clearcoat&&l.enable(8),U.iridescence&&l.enable(9),U.alphaTest&&l.enable(10),U.vertexColors&&l.enable(11),U.vertexAlphas&&l.enable(12),U.vertexUv1s&&l.enable(13),U.vertexUv2s&&l.enable(14),U.vertexUv3s&&l.enable(15),U.vertexTangents&&l.enable(16),U.anisotropy&&l.enable(17),U.alphaHash&&l.enable(18),U.batching&&l.enable(19),U.dispersion&&l.enable(20),U.batchingColor&&l.enable(21),F.push(l.mask),l.disableAll(),U.fog&&l.enable(0),U.useFog&&l.enable(1),U.flatShading&&l.enable(2),U.logarithmicDepthBuffer&&l.enable(3),U.reverseDepthBuffer&&l.enable(4),U.skinning&&l.enable(5),U.morphTargets&&l.enable(6),U.morphNormals&&l.enable(7),U.morphColors&&l.enable(8),U.premultipliedAlpha&&l.enable(9),U.shadowMapEnabled&&l.enable(10),U.doubleSided&&l.enable(11),U.flipSided&&l.enable(12),U.useDepthPacking&&l.enable(13),U.dithering&&l.enable(14),U.transmission&&l.enable(15),U.sheen&&l.enable(16),U.opaque&&l.enable(17),U.pointsUvs&&l.enable(18),U.decodeVideoTexture&&l.enable(19),U.decodeVideoTextureEmissive&&l.enable(20),U.alphaToCoverage&&l.enable(21),F.push(l.mask)}function A(F){const U=_[F.type];let q;if(U){const J=ShaderLib[U];q=UniformsUtils$1.clone(J.uniforms)}else q=F.uniforms;return q}function N(F,U){let q;for(let J=0,ee=p.length;J<ee;J++){const Y=p[J];if(Y.cacheKey===U){q=Y,++q.usedTimes;break}}return q===void 0&&(q=new WebGLProgram(i,U,F,s),p.push(q)),q}function L(F){if(--F.usedTimes===0){const U=p.indexOf(F);p[U]=p[p.length-1],p.pop(),F.destroy()}}function k(F){u.remove(F)}function j(){u.dispose()}return{getParameters:S,getProgramCacheKey:b,getUniforms:A,acquireProgram:N,releaseProgram:L,releaseShaderCache:k,programs:p,dispose:j}}function WebGLProperties(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let l=i.get(o);return l===void 0&&(l={},i.set(o,l)),l}function n(o){i.delete(o)}function r(o,l,u){i.get(o)[l]=u}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function painterSortStable(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function reversePainterSortStable(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function WebGLRenderList(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(g,m,y,_,E,S){let b=i[e];return b===void 0?(b={id:g.id,object:g,geometry:m,material:y,groupOrder:_,renderOrder:g.renderOrder,z:E,group:S},i[e]=b):(b.id=g.id,b.object=g,b.geometry=m,b.material=y,b.groupOrder=_,b.renderOrder=g.renderOrder,b.z=E,b.group=S),e++,b}function l(g,m,y,_,E,S){const b=o(g,m,y,_,E,S);y.transmission>0?n.push(b):y.transparent===!0?r.push(b):t.push(b)}function u(g,m,y,_,E,S){const b=o(g,m,y,_,E,S);y.transmission>0?n.unshift(b):y.transparent===!0?r.unshift(b):t.unshift(b)}function d(g,m){t.length>1&&t.sort(g||painterSortStable),n.length>1&&n.sort(m||reversePainterSortStable),r.length>1&&r.sort(m||reversePainterSortStable)}function p(){for(let g=e,m=i.length;g<m;g++){const y=i[g];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:l,unshift:u,finish:p,sort:d}}function WebGLRenderLists(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new WebGLRenderList,i.set(n,[o])):r>=s.length?(o=new WebGLRenderList,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function UniformsCache(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Vector3$1,color:new Color$1};break;case"SpotLight":t={position:new Vector3$1,direction:new Vector3$1,color:new Color$1,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Vector3$1,color:new Color$1,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Vector3$1,skyColor:new Color$1,groundColor:new Color$1};break;case"RectAreaLight":t={color:new Color$1,position:new Vector3$1,halfWidth:new Vector3$1,halfHeight:new Vector3$1};break}return i[e.id]=t,t}}}function ShadowUniformsCache(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2$1};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2$1};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2$1,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function WebGLLights(i){const e=new UniformsCache,t=ShadowUniformsCache(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new Vector3$1);const r=new Vector3$1,s=new Matrix4$1,o=new Matrix4$1;function l(d){let p=0,g=0,m=0;for(let F=0;F<9;F++)n.probe[F].set(0,0,0);let y=0,_=0,E=0,S=0,b=0,C=0,T=0,A=0,N=0,L=0,k=0;d.sort(shadowCastingAndTexturingLightsFirst);for(let F=0,U=d.length;F<U;F++){const q=d[F],J=q.color,ee=q.intensity,Y=q.distance,$=q.shadow&&q.shadow.map?q.shadow.map.texture:null;if(q.isAmbientLight)p+=J.r*ee,g+=J.g*ee,m+=J.b*ee;else if(q.isLightProbe){for(let D=0;D<9;D++)n.probe[D].addScaledVector(q.sh.coefficients[D],ee);k++}else if(q.isDirectionalLight){const D=e.get(q);if(D.color.copy(q.color).multiplyScalar(q.intensity),q.castShadow){const V=q.shadow,P=t.get(q);P.shadowIntensity=V.intensity,P.shadowBias=V.bias,P.shadowNormalBias=V.normalBias,P.shadowRadius=V.radius,P.shadowMapSize=V.mapSize,n.directionalShadow[y]=P,n.directionalShadowMap[y]=$,n.directionalShadowMatrix[y]=q.shadow.matrix,C++}n.directional[y]=D,y++}else if(q.isSpotLight){const D=e.get(q);D.position.setFromMatrixPosition(q.matrixWorld),D.color.copy(J).multiplyScalar(ee),D.distance=Y,D.coneCos=Math.cos(q.angle),D.penumbraCos=Math.cos(q.angle*(1-q.penumbra)),D.decay=q.decay,n.spot[E]=D;const V=q.shadow;if(q.map&&(n.spotLightMap[N]=q.map,N++,V.updateMatrices(q),q.castShadow&&L++),n.spotLightMatrix[E]=V.matrix,q.castShadow){const P=t.get(q);P.shadowIntensity=V.intensity,P.shadowBias=V.bias,P.shadowNormalBias=V.normalBias,P.shadowRadius=V.radius,P.shadowMapSize=V.mapSize,n.spotShadow[E]=P,n.spotShadowMap[E]=$,A++}E++}else if(q.isRectAreaLight){const D=e.get(q);D.color.copy(J).multiplyScalar(ee),D.halfWidth.set(q.width*.5,0,0),D.halfHeight.set(0,q.height*.5,0),n.rectArea[S]=D,S++}else if(q.isPointLight){const D=e.get(q);if(D.color.copy(q.color).multiplyScalar(q.intensity),D.distance=q.distance,D.decay=q.decay,q.castShadow){const V=q.shadow,P=t.get(q);P.shadowIntensity=V.intensity,P.shadowBias=V.bias,P.shadowNormalBias=V.normalBias,P.shadowRadius=V.radius,P.shadowMapSize=V.mapSize,P.shadowCameraNear=V.camera.near,P.shadowCameraFar=V.camera.far,n.pointShadow[_]=P,n.pointShadowMap[_]=$,n.pointShadowMatrix[_]=q.shadow.matrix,T++}n.point[_]=D,_++}else if(q.isHemisphereLight){const D=e.get(q);D.skyColor.copy(q.color).multiplyScalar(ee),D.groundColor.copy(q.groundColor).multiplyScalar(ee),n.hemi[b]=D,b++}}S>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,n.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(n.rectAreaLTC1=UniformsLib.LTC_HALF_1,n.rectAreaLTC2=UniformsLib.LTC_HALF_2)),n.ambient[0]=p,n.ambient[1]=g,n.ambient[2]=m;const j=n.hash;(j.directionalLength!==y||j.pointLength!==_||j.spotLength!==E||j.rectAreaLength!==S||j.hemiLength!==b||j.numDirectionalShadows!==C||j.numPointShadows!==T||j.numSpotShadows!==A||j.numSpotMaps!==N||j.numLightProbes!==k)&&(n.directional.length=y,n.spot.length=E,n.rectArea.length=S,n.point.length=_,n.hemi.length=b,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=T,n.pointShadowMap.length=T,n.spotShadow.length=A,n.spotShadowMap.length=A,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=T,n.spotLightMatrix.length=A+N-L,n.spotLightMap.length=N,n.numSpotLightShadowsWithMaps=L,n.numLightProbes=k,j.directionalLength=y,j.pointLength=_,j.spotLength=E,j.rectAreaLength=S,j.hemiLength=b,j.numDirectionalShadows=C,j.numPointShadows=T,j.numSpotShadows=A,j.numSpotMaps=N,j.numLightProbes=k,n.version=nextVersion++)}function u(d,p){let g=0,m=0,y=0,_=0,E=0;const S=p.matrixWorldInverse;for(let b=0,C=d.length;b<C;b++){const T=d[b];if(T.isDirectionalLight){const A=n.directional[g];A.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(S),g++}else if(T.isSpotLight){const A=n.spot[y];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(S),A.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(S),y++}else if(T.isRectAreaLight){const A=n.rectArea[_];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(S),o.identity(),s.copy(T.matrixWorld),s.premultiply(S),o.extractRotation(s),A.halfWidth.set(T.width*.5,0,0),A.halfHeight.set(0,T.height*.5,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),_++}else if(T.isPointLight){const A=n.point[m];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(S),m++}else if(T.isHemisphereLight){const A=n.hemi[E];A.direction.setFromMatrixPosition(T.matrixWorld),A.direction.transformDirection(S),E++}}}return{setup:l,setupView:u,state:n}}function WebGLRenderState(i){const e=new WebGLLights(i),t=[],n=[];function r(p){d.camera=p,t.length=0,n.length=0}function s(p){t.push(p)}function o(p){n.push(p)}function l(){e.setup(t)}function u(p){e.setupView(t,p)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:d,setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function WebGLRenderStates(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let l;return o===void 0?(l=new WebGLRenderState(i),e.set(r,[l])):s>=o.length?(l=new WebGLRenderState(i),o.push(l)):l=o[s],l}function n(){e=new WeakMap}return{get:t,dispose:n}}class MeshDepthMaterial extends Material$1{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material$1{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}
`,fragment=`
uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;

#include <packing>

void main() {

	const float samples = float( VSM_SAMPLES );

	float mean = 0.0;
	float squared_mean = 0.0;

	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {

		float uvOffset = uvStart + i * uvStride;

		#ifdef HORIZONTAL_PASS

			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;

		#else

			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;

		#endif

	}

	mean = mean / samples;
	squared_mean = squared_mean / samples;

	float std_dev = sqrt( squared_mean - mean * mean );

	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );

}
`;function WebGLShadowMap(i,e,t){let n=new Frustum$1;const r=new Vector2$1,s=new Vector2$1,o=new Vector4$1,l=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),u=new MeshDistanceMaterial,d={},p=t.maxTextureSize,g={[FrontSide$1]:BackSide$1,[BackSide$1]:FrontSide$1,[DoubleSide$1]:DoubleSide$1},m=new ShaderMaterial$1({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2$1},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),y=m.clone();y.defines.HORIZONTAL_PASS=1;const _=new BufferGeometry$1;_.setAttribute("position",new BufferAttribute$1(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new Mesh$1(_,m),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let b=this.type;this.render=function(L,k,j){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||L.length===0)return;const F=i.getRenderTarget(),U=i.getActiveCubeFace(),q=i.getActiveMipmapLevel(),J=i.state;J.setBlending(NoBlending$1),J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);const ee=b!==VSMShadowMap&&this.type===VSMShadowMap,Y=b===VSMShadowMap&&this.type!==VSMShadowMap;for(let $=0,D=L.length;$<D;$++){const V=L[$],P=V.shadow;if(P===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(P.autoUpdate===!1&&P.needsUpdate===!1)continue;r.copy(P.mapSize);const I=P.getFrameExtents();if(r.multiply(I),s.copy(P.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/I.x),r.x=s.x*I.x,P.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/I.y),r.y=s.y*I.y,P.mapSize.y=s.y)),P.map===null||ee===!0||Y===!0){const z=this.type!==VSMShadowMap?{minFilter:NearestFilter$1,magFilter:NearestFilter$1}:{};P.map!==null&&P.map.dispose(),P.map=new WebGLRenderTarget$1(r.x,r.y,z),P.map.texture.name=V.name+".shadowMap",P.camera.updateProjectionMatrix()}i.setRenderTarget(P.map),i.clear();const B=P.getViewportCount();for(let z=0;z<B;z++){const te=P.getViewport(z);o.set(s.x*te.x,s.y*te.y,s.x*te.z,s.y*te.w),J.viewport(o),P.updateMatrices(V,z),n=P.getFrustum(),A(k,j,P.camera,V,this.type)}P.isPointLightShadow!==!0&&this.type===VSMShadowMap&&C(P,j),P.needsUpdate=!1}b=this.type,S.needsUpdate=!1,i.setRenderTarget(F,U,q)};function C(L,k){const j=e.update(E);m.defines.VSM_SAMPLES!==L.blurSamples&&(m.defines.VSM_SAMPLES=L.blurSamples,y.defines.VSM_SAMPLES=L.blurSamples,m.needsUpdate=!0,y.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new WebGLRenderTarget$1(r.x,r.y)),m.uniforms.shadow_pass.value=L.map.texture,m.uniforms.resolution.value=L.mapSize,m.uniforms.radius.value=L.radius,i.setRenderTarget(L.mapPass),i.clear(),i.renderBufferDirect(k,null,j,m,E,null),y.uniforms.shadow_pass.value=L.mapPass.texture,y.uniforms.resolution.value=L.mapSize,y.uniforms.radius.value=L.radius,i.setRenderTarget(L.map),i.clear(),i.renderBufferDirect(k,null,j,y,E,null)}function T(L,k,j,F){let U=null;const q=j.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(q!==void 0)U=q;else if(U=j.isPointLight===!0?u:l,i.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const J=U.uuid,ee=k.uuid;let Y=d[J];Y===void 0&&(Y={},d[J]=Y);let $=Y[ee];$===void 0&&($=U.clone(),Y[ee]=$,k.addEventListener("dispose",N)),U=$}if(U.visible=k.visible,U.wireframe=k.wireframe,F===VSMShadowMap?U.side=k.shadowSide!==null?k.shadowSide:k.side:U.side=k.shadowSide!==null?k.shadowSide:g[k.side],U.alphaMap=k.alphaMap,U.alphaTest=k.alphaTest,U.map=k.map,U.clipShadows=k.clipShadows,U.clippingPlanes=k.clippingPlanes,U.clipIntersection=k.clipIntersection,U.displacementMap=k.displacementMap,U.displacementScale=k.displacementScale,U.displacementBias=k.displacementBias,U.wireframeLinewidth=k.wireframeLinewidth,U.linewidth=k.linewidth,j.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const J=i.properties.get(U);J.light=j}return U}function A(L,k,j,F,U){if(L.visible===!1)return;if(L.layers.test(k.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&U===VSMShadowMap)&&(!L.frustumCulled||n.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,L.matrixWorld);const ee=e.update(L),Y=L.material;if(Array.isArray(Y)){const $=ee.groups;for(let D=0,V=$.length;D<V;D++){const P=$[D],I=Y[P.materialIndex];if(I&&I.visible){const B=T(L,I,F,U);L.onBeforeShadow(i,L,k,j,ee,B,P),i.renderBufferDirect(j,null,ee,B,L,P),L.onAfterShadow(i,L,k,j,ee,B,P)}}}else if(Y.visible){const $=T(L,Y,F,U);L.onBeforeShadow(i,L,k,j,ee,$,null),i.renderBufferDirect(j,null,ee,$,L,null),L.onAfterShadow(i,L,k,j,ee,$,null)}}const J=L.children;for(let ee=0,Y=J.length;ee<Y;ee++)A(J[ee],k,j,F,U)}function N(L){L.target.removeEventListener("dispose",N);for(const j in d){const F=d[j],U=L.target.uuid;U in F&&(F[U].dispose(),delete F[U])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth$1]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth$1};function WebGLState(i,e){function t(){let se=!1;const Ie=new Vector4$1;let ye=null;const we=new Vector4$1(0,0,0,0);return{setMask:function(Fe){ye!==Fe&&!se&&(i.colorMask(Fe,Fe,Fe,Fe),ye=Fe)},setLocked:function(Fe){se=Fe},setClear:function(Fe,je,lt,Lt,Ht){Ht===!0&&(Fe*=Lt,je*=Lt,lt*=Lt),Ie.set(Fe,je,lt,Lt),we.equals(Ie)===!1&&(i.clearColor(Fe,je,lt,Lt),we.copy(Ie))},reset:function(){se=!1,ye=null,we.set(-1,0,0,0)}}}function n(){let se=!1,Ie=!1,ye=null,we=null,Fe=null;return{setReversed:function(je){if(Ie!==je){const lt=e.get("EXT_clip_control");je?lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.ZERO_TO_ONE_EXT):lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.NEGATIVE_ONE_TO_ONE_EXT),Ie=je;const Lt=Fe;Fe=null,this.setClear(Lt)}},getReversed:function(){return Ie},setTest:function(je){je?be(i.DEPTH_TEST):Ae(i.DEPTH_TEST)},setMask:function(je){ye!==je&&!se&&(i.depthMask(je),ye=je)},setFunc:function(je){if(Ie&&(je=reversedFuncs[je]),we!==je){switch(je){case NeverDepth:i.depthFunc(i.NEVER);break;case AlwaysDepth:i.depthFunc(i.ALWAYS);break;case LessDepth:i.depthFunc(i.LESS);break;case LessEqualDepth$1:i.depthFunc(i.LEQUAL);break;case EqualDepth:i.depthFunc(i.EQUAL);break;case GreaterEqualDepth:i.depthFunc(i.GEQUAL);break;case GreaterDepth:i.depthFunc(i.GREATER);break;case NotEqualDepth:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}we=je}},setLocked:function(je){se=je},setClear:function(je){Fe!==je&&(Ie&&(je=1-je),i.clearDepth(je),Fe=je)},reset:function(){se=!1,ye=null,we=null,Fe=null,Ie=!1}}}function r(){let se=!1,Ie=null,ye=null,we=null,Fe=null,je=null,lt=null,Lt=null,Ht=null;return{setTest:function(_t){se||(_t?be(i.STENCIL_TEST):Ae(i.STENCIL_TEST))},setMask:function(_t){Ie!==_t&&!se&&(i.stencilMask(_t),Ie=_t)},setFunc:function(_t,vi,Jt){(ye!==_t||we!==vi||Fe!==Jt)&&(i.stencilFunc(_t,vi,Jt),ye=_t,we=vi,Fe=Jt)},setOp:function(_t,vi,Jt){(je!==_t||lt!==vi||Lt!==Jt)&&(i.stencilOp(_t,vi,Jt),je=_t,lt=vi,Lt=Jt)},setLocked:function(_t){se=_t},setClear:function(_t){Ht!==_t&&(i.clearStencil(_t),Ht=_t)},reset:function(){se=!1,Ie=null,ye=null,we=null,Fe=null,je=null,lt=null,Lt=null,Ht=null}}}const s=new t,o=new n,l=new r,u=new WeakMap,d=new WeakMap;let p={},g={},m=new WeakMap,y=[],_=null,E=!1,S=null,b=null,C=null,T=null,A=null,N=null,L=null,k=new Color$1(0,0,0),j=0,F=!1,U=null,q=null,J=null,ee=null,Y=null;const $=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let D=!1,V=0;const P=i.getParameter(i.VERSION);P.indexOf("WebGL")!==-1?(V=parseFloat(/^WebGL (\d)/.exec(P)[1]),D=V>=1):P.indexOf("OpenGL ES")!==-1&&(V=parseFloat(/^OpenGL ES (\d)/.exec(P)[1]),D=V>=2);let I=null,B={};const z=i.getParameter(i.SCISSOR_BOX),te=i.getParameter(i.VIEWPORT),ne=new Vector4$1().fromArray(z),Q=new Vector4$1().fromArray(te);function ue(se,Ie,ye,we){const Fe=new Uint8Array(4),je=i.createTexture();i.bindTexture(se,je),i.texParameteri(se,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(se,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let lt=0;lt<ye;lt++)se===i.TEXTURE_3D||se===i.TEXTURE_2D_ARRAY?i.texImage3D(Ie,0,i.RGBA,1,1,we,0,i.RGBA,i.UNSIGNED_BYTE,Fe):i.texImage2D(Ie+lt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Fe);return je}const me={};me[i.TEXTURE_2D]=ue(i.TEXTURE_2D,i.TEXTURE_2D,1),me[i.TEXTURE_CUBE_MAP]=ue(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),me[i.TEXTURE_2D_ARRAY]=ue(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),me[i.TEXTURE_3D]=ue(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),l.setClear(0),be(i.DEPTH_TEST),o.setFunc(LessEqualDepth$1),ot(!1),Ye(CullFaceBack),be(i.CULL_FACE),Z(NoBlending$1);function be(se){p[se]!==!0&&(i.enable(se),p[se]=!0)}function Ae(se){p[se]!==!1&&(i.disable(se),p[se]=!1)}function qe(se,Ie){return g[se]!==Ie?(i.bindFramebuffer(se,Ie),g[se]=Ie,se===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=Ie),se===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=Ie),!0):!1}function Be(se,Ie){let ye=y,we=!1;if(se){ye=m.get(Ie),ye===void 0&&(ye=[],m.set(Ie,ye));const Fe=se.textures;if(ye.length!==Fe.length||ye[0]!==i.COLOR_ATTACHMENT0){for(let je=0,lt=Fe.length;je<lt;je++)ye[je]=i.COLOR_ATTACHMENT0+je;ye.length=Fe.length,we=!0}}else ye[0]!==i.BACK&&(ye[0]=i.BACK,we=!0);we&&i.drawBuffers(ye)}function it(se){return _!==se?(i.useProgram(se),_=se,!0):!1}const st={[AddEquation$1]:i.FUNC_ADD,[SubtractEquation]:i.FUNC_SUBTRACT,[ReverseSubtractEquation]:i.FUNC_REVERSE_SUBTRACT};st[MinEquation]=i.MIN,st[MaxEquation]=i.MAX;const Oe={[ZeroFactor]:i.ZERO,[OneFactor]:i.ONE,[SrcColorFactor]:i.SRC_COLOR,[SrcAlphaFactor$1]:i.SRC_ALPHA,[SrcAlphaSaturateFactor]:i.SRC_ALPHA_SATURATE,[DstColorFactor]:i.DST_COLOR,[DstAlphaFactor]:i.DST_ALPHA,[OneMinusSrcColorFactor]:i.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor$1]:i.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:i.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:i.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:i.CONSTANT_COLOR,[OneMinusConstantColorFactor]:i.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:i.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:i.ONE_MINUS_CONSTANT_ALPHA};function Z(se,Ie,ye,we,Fe,je,lt,Lt,Ht,_t){if(se===NoBlending$1){E===!0&&(Ae(i.BLEND),E=!1);return}if(E===!1&&(be(i.BLEND),E=!0),se!==CustomBlending){if(se!==S||_t!==F){if((b!==AddEquation$1||A!==AddEquation$1)&&(i.blendEquation(i.FUNC_ADD),b=AddEquation$1,A=AddEquation$1),_t)switch(se){case NormalBlending$1:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending$1:i.blendFunc(i.ONE,i.ONE);break;case SubtractiveBlending:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case MultiplyBlending:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}else switch(se){case NormalBlending$1:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending$1:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case SubtractiveBlending:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case MultiplyBlending:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}C=null,T=null,N=null,L=null,k.set(0,0,0),j=0,S=se,F=_t}return}Fe=Fe||Ie,je=je||ye,lt=lt||we,(Ie!==b||Fe!==A)&&(i.blendEquationSeparate(st[Ie],st[Fe]),b=Ie,A=Fe),(ye!==C||we!==T||je!==N||lt!==L)&&(i.blendFuncSeparate(Oe[ye],Oe[we],Oe[je],Oe[lt]),C=ye,T=we,N=je,L=lt),(Lt.equals(k)===!1||Ht!==j)&&(i.blendColor(Lt.r,Lt.g,Lt.b,Ht),k.copy(Lt),j=Ht),S=se,F=!1}function jt(se,Ie){se.side===DoubleSide$1?Ae(i.CULL_FACE):be(i.CULL_FACE);let ye=se.side===BackSide$1;Ie&&(ye=!ye),ot(ye),se.blending===NormalBlending$1&&se.transparent===!1?Z(NoBlending$1):Z(se.blending,se.blendEquation,se.blendSrc,se.blendDst,se.blendEquationAlpha,se.blendSrcAlpha,se.blendDstAlpha,se.blendColor,se.blendAlpha,se.premultipliedAlpha),o.setFunc(se.depthFunc),o.setTest(se.depthTest),o.setMask(se.depthWrite),s.setMask(se.colorWrite);const we=se.stencilWrite;l.setTest(we),we&&(l.setMask(se.stencilWriteMask),l.setFunc(se.stencilFunc,se.stencilRef,se.stencilFuncMask),l.setOp(se.stencilFail,se.stencilZFail,se.stencilZPass)),dt(se.polygonOffset,se.polygonOffsetFactor,se.polygonOffsetUnits),se.alphaToCoverage===!0?be(i.SAMPLE_ALPHA_TO_COVERAGE):Ae(i.SAMPLE_ALPHA_TO_COVERAGE)}function ot(se){U!==se&&(se?i.frontFace(i.CW):i.frontFace(i.CCW),U=se)}function Ye(se){se!==CullFaceNone?(be(i.CULL_FACE),se!==q&&(se===CullFaceBack?i.cullFace(i.BACK):se===CullFaceFront?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ae(i.CULL_FACE),q=se}function $e(se){se!==J&&(D&&i.lineWidth(se),J=se)}function dt(se,Ie,ye){se?(be(i.POLYGON_OFFSET_FILL),(ee!==Ie||Y!==ye)&&(i.polygonOffset(Ie,ye),ee=Ie,Y=ye)):Ae(i.POLYGON_OFFSET_FILL)}function Ue(se){se?be(i.SCISSOR_TEST):Ae(i.SCISSOR_TEST)}function K(se){se===void 0&&(se=i.TEXTURE0+$-1),I!==se&&(i.activeTexture(se),I=se)}function G(se,Ie,ye){ye===void 0&&(I===null?ye=i.TEXTURE0+$-1:ye=I);let we=B[ye];we===void 0&&(we={type:void 0,texture:void 0},B[ye]=we),(we.type!==se||we.texture!==Ie)&&(I!==ye&&(i.activeTexture(ye),I=ye),i.bindTexture(se,Ie||me[se]),we.type=se,we.texture=Ie)}function he(){const se=B[I];se!==void 0&&se.type!==void 0&&(i.bindTexture(se.type,null),se.type=void 0,se.texture=void 0)}function Ee(){try{i.compressedTexImage2D(...arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Te(){try{i.compressedTexImage3D(...arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function ve(){try{i.texSubImage2D(...arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Ne(){try{i.texSubImage3D(...arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Pe(){try{i.compressedTexSubImage2D(...arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function De(){try{i.compressedTexSubImage3D(...arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function ct(){try{i.texStorage2D(...arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Re(){try{i.texStorage3D(...arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Ge(){try{i.texImage2D(...arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Qe(){try{i.texImage3D(...arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function et(se){ne.equals(se)===!1&&(i.scissor(se.x,se.y,se.z,se.w),ne.copy(se))}function Ve(se){Q.equals(se)===!1&&(i.viewport(se.x,se.y,se.z,se.w),Q.copy(se))}function ut(se,Ie){let ye=d.get(Ie);ye===void 0&&(ye=new WeakMap,d.set(Ie,ye));let we=ye.get(se);we===void 0&&(we=i.getUniformBlockIndex(Ie,se.name),ye.set(se,we))}function at(se,Ie){const we=d.get(Ie).get(se);u.get(Ie)!==we&&(i.uniformBlockBinding(Ie,we,se.__bindingPointIndex),u.set(Ie,we))}function Ct(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),p={},I=null,B={},g={},m=new WeakMap,y=[],_=null,E=!1,S=null,b=null,C=null,T=null,A=null,N=null,L=null,k=new Color$1(0,0,0),j=0,F=!1,U=null,q=null,J=null,ee=null,Y=null,ne.set(0,0,i.canvas.width,i.canvas.height),Q.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),l.reset()}return{buffers:{color:s,depth:o,stencil:l},enable:be,disable:Ae,bindFramebuffer:qe,drawBuffers:Be,useProgram:it,setBlending:Z,setMaterial:jt,setFlipSided:ot,setCullFace:Ye,setLineWidth:$e,setPolygonOffset:dt,setScissorTest:Ue,activeTexture:K,bindTexture:G,unbindTexture:he,compressedTexImage2D:Ee,compressedTexImage3D:Te,texImage2D:Ge,texImage3D:Qe,updateUBOMapping:ut,uniformBlockBinding:at,texStorage2D:ct,texStorage3D:Re,texSubImage2D:ve,texSubImage3D:Ne,compressedTexSubImage2D:Pe,compressedTexSubImage3D:De,scissor:et,viewport:Ve,reset:Ct}}function getByteLength(i,e,t,n){const r=getTextureTypeByteLength(n);switch(t){case AlphaFormat:return i*e;case LuminanceFormat:return i*e;case LuminanceAlphaFormat:return i*e*2;case RedFormat$1:return i*e/r.components*r.byteLength;case RedIntegerFormat:return i*e/r.components*r.byteLength;case RGFormat:return i*e*2/r.components*r.byteLength;case RGIntegerFormat:return i*e*2/r.components*r.byteLength;case RGBFormat:return i*e*3/r.components*r.byteLength;case RGBAFormat$1:return i*e*4/r.components*r.byteLength;case RGBAIntegerFormat:return i*e*4/r.components*r.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(i,16)*Math.max(e,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(i,8)*Math.max(e,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(i/4)*Math.ceil(e/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(i/4)*Math.ceil(e/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function getTextureTypeByteLength(i){switch(i){case UnsignedByteType$1:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType$1:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType$1:return{byteLength:4,components:1};case UnsignedInt5999Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}function WebGLTextures(i,e,t,n,r,s,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Vector2$1,p=new WeakMap;let g;const m=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(K,G){return y?new OffscreenCanvas(K,G):createElementNS$1("canvas")}function E(K,G,he){let Ee=1;const Te=Ue(K);if((Te.width>he||Te.height>he)&&(Ee=he/Math.max(Te.width,Te.height)),Ee<1)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap||typeof VideoFrame<"u"&&K instanceof VideoFrame){const ve=Math.floor(Ee*Te.width),Ne=Math.floor(Ee*Te.height);g===void 0&&(g=_(ve,Ne));const Pe=G?_(ve,Ne):g;return Pe.width=ve,Pe.height=Ne,Pe.getContext("2d").drawImage(K,0,0,ve,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+ve+"x"+Ne+")."),Pe}else return"data"in K&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),K;return K}function S(K){return K.generateMipmaps}function b(K){i.generateMipmap(K)}function C(K){return K.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:K.isWebGL3DRenderTarget?i.TEXTURE_3D:K.isWebGLArrayRenderTarget||K.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function T(K,G,he,Ee,Te=!1){if(K!==null){if(i[K]!==void 0)return i[K];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let ve=G;if(G===i.RED&&(he===i.FLOAT&&(ve=i.R32F),he===i.HALF_FLOAT&&(ve=i.R16F),he===i.UNSIGNED_BYTE&&(ve=i.R8)),G===i.RED_INTEGER&&(he===i.UNSIGNED_BYTE&&(ve=i.R8UI),he===i.UNSIGNED_SHORT&&(ve=i.R16UI),he===i.UNSIGNED_INT&&(ve=i.R32UI),he===i.BYTE&&(ve=i.R8I),he===i.SHORT&&(ve=i.R16I),he===i.INT&&(ve=i.R32I)),G===i.RG&&(he===i.FLOAT&&(ve=i.RG32F),he===i.HALF_FLOAT&&(ve=i.RG16F),he===i.UNSIGNED_BYTE&&(ve=i.RG8)),G===i.RG_INTEGER&&(he===i.UNSIGNED_BYTE&&(ve=i.RG8UI),he===i.UNSIGNED_SHORT&&(ve=i.RG16UI),he===i.UNSIGNED_INT&&(ve=i.RG32UI),he===i.BYTE&&(ve=i.RG8I),he===i.SHORT&&(ve=i.RG16I),he===i.INT&&(ve=i.RG32I)),G===i.RGB_INTEGER&&(he===i.UNSIGNED_BYTE&&(ve=i.RGB8UI),he===i.UNSIGNED_SHORT&&(ve=i.RGB16UI),he===i.UNSIGNED_INT&&(ve=i.RGB32UI),he===i.BYTE&&(ve=i.RGB8I),he===i.SHORT&&(ve=i.RGB16I),he===i.INT&&(ve=i.RGB32I)),G===i.RGBA_INTEGER&&(he===i.UNSIGNED_BYTE&&(ve=i.RGBA8UI),he===i.UNSIGNED_SHORT&&(ve=i.RGBA16UI),he===i.UNSIGNED_INT&&(ve=i.RGBA32UI),he===i.BYTE&&(ve=i.RGBA8I),he===i.SHORT&&(ve=i.RGBA16I),he===i.INT&&(ve=i.RGBA32I)),G===i.RGB&&he===i.UNSIGNED_INT_5_9_9_9_REV&&(ve=i.RGB9_E5),G===i.RGBA){const Ne=Te?LinearTransfer$1:ColorManagement$1.getTransfer(Ee);he===i.FLOAT&&(ve=i.RGBA32F),he===i.HALF_FLOAT&&(ve=i.RGBA16F),he===i.UNSIGNED_BYTE&&(ve=Ne===SRGBTransfer$1?i.SRGB8_ALPHA8:i.RGBA8),he===i.UNSIGNED_SHORT_4_4_4_4&&(ve=i.RGBA4),he===i.UNSIGNED_SHORT_5_5_5_1&&(ve=i.RGB5_A1)}return(ve===i.R16F||ve===i.R32F||ve===i.RG16F||ve===i.RG32F||ve===i.RGBA16F||ve===i.RGBA32F)&&e.get("EXT_color_buffer_float"),ve}function A(K,G){let he;return K?G===null||G===UnsignedIntType||G===UnsignedInt248Type?he=i.DEPTH24_STENCIL8:G===FloatType$1?he=i.DEPTH32F_STENCIL8:G===UnsignedShortType&&(he=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):G===null||G===UnsignedIntType||G===UnsignedInt248Type?he=i.DEPTH_COMPONENT24:G===FloatType$1?he=i.DEPTH_COMPONENT32F:G===UnsignedShortType&&(he=i.DEPTH_COMPONENT16),he}function N(K,G){return S(K)===!0||K.isFramebufferTexture&&K.minFilter!==NearestFilter$1&&K.minFilter!==LinearFilter$1?Math.log2(Math.max(G.width,G.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?G.mipmaps.length:1}function L(K){const G=K.target;G.removeEventListener("dispose",L),j(G),G.isVideoTexture&&p.delete(G)}function k(K){const G=K.target;G.removeEventListener("dispose",k),U(G)}function j(K){const G=n.get(K);if(G.__webglInit===void 0)return;const he=K.source,Ee=m.get(he);if(Ee){const Te=Ee[G.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&F(K),Object.keys(Ee).length===0&&m.delete(he)}n.remove(K)}function F(K){const G=n.get(K);i.deleteTexture(G.__webglTexture);const he=K.source,Ee=m.get(he);delete Ee[G.__cacheKey],o.memory.textures--}function U(K){const G=n.get(K);if(K.depthTexture&&(K.depthTexture.dispose(),n.remove(K.depthTexture)),K.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++){if(Array.isArray(G.__webglFramebuffer[Ee]))for(let Te=0;Te<G.__webglFramebuffer[Ee].length;Te++)i.deleteFramebuffer(G.__webglFramebuffer[Ee][Te]);else i.deleteFramebuffer(G.__webglFramebuffer[Ee]);G.__webglDepthbuffer&&i.deleteRenderbuffer(G.__webglDepthbuffer[Ee])}else{if(Array.isArray(G.__webglFramebuffer))for(let Ee=0;Ee<G.__webglFramebuffer.length;Ee++)i.deleteFramebuffer(G.__webglFramebuffer[Ee]);else i.deleteFramebuffer(G.__webglFramebuffer);if(G.__webglDepthbuffer&&i.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&i.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer)for(let Ee=0;Ee<G.__webglColorRenderbuffer.length;Ee++)G.__webglColorRenderbuffer[Ee]&&i.deleteRenderbuffer(G.__webglColorRenderbuffer[Ee]);G.__webglDepthRenderbuffer&&i.deleteRenderbuffer(G.__webglDepthRenderbuffer)}const he=K.textures;for(let Ee=0,Te=he.length;Ee<Te;Ee++){const ve=n.get(he[Ee]);ve.__webglTexture&&(i.deleteTexture(ve.__webglTexture),o.memory.textures--),n.remove(he[Ee])}n.remove(K)}let q=0;function J(){q=0}function ee(){const K=q;return K>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+r.maxTextures),q+=1,K}function Y(K){const G=[];return G.push(K.wrapS),G.push(K.wrapT),G.push(K.wrapR||0),G.push(K.magFilter),G.push(K.minFilter),G.push(K.anisotropy),G.push(K.internalFormat),G.push(K.format),G.push(K.type),G.push(K.generateMipmaps),G.push(K.premultiplyAlpha),G.push(K.flipY),G.push(K.unpackAlignment),G.push(K.colorSpace),G.join()}function $(K,G){const he=n.get(K);if(K.isVideoTexture&&$e(K),K.isRenderTargetTexture===!1&&K.version>0&&he.__version!==K.version){const Ee=K.image;if(Ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Q(he,K,G);return}}t.bindTexture(i.TEXTURE_2D,he.__webglTexture,i.TEXTURE0+G)}function D(K,G){const he=n.get(K);if(K.version>0&&he.__version!==K.version){Q(he,K,G);return}t.bindTexture(i.TEXTURE_2D_ARRAY,he.__webglTexture,i.TEXTURE0+G)}function V(K,G){const he=n.get(K);if(K.version>0&&he.__version!==K.version){Q(he,K,G);return}t.bindTexture(i.TEXTURE_3D,he.__webglTexture,i.TEXTURE0+G)}function P(K,G){const he=n.get(K);if(K.version>0&&he.__version!==K.version){ue(he,K,G);return}t.bindTexture(i.TEXTURE_CUBE_MAP,he.__webglTexture,i.TEXTURE0+G)}const I={[RepeatWrapping$1]:i.REPEAT,[ClampToEdgeWrapping$1]:i.CLAMP_TO_EDGE,[MirroredRepeatWrapping$1]:i.MIRRORED_REPEAT},B={[NearestFilter$1]:i.NEAREST,[NearestMipmapNearestFilter$1]:i.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter$1]:i.NEAREST_MIPMAP_LINEAR,[LinearFilter$1]:i.LINEAR,[LinearMipmapNearestFilter$1]:i.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter$1]:i.LINEAR_MIPMAP_LINEAR},z={[NeverCompare]:i.NEVER,[AlwaysCompare]:i.ALWAYS,[LessCompare]:i.LESS,[LessEqualCompare]:i.LEQUAL,[EqualCompare]:i.EQUAL,[GreaterEqualCompare]:i.GEQUAL,[GreaterCompare]:i.GREATER,[NotEqualCompare]:i.NOTEQUAL};function te(K,G){if(G.type===FloatType$1&&e.has("OES_texture_float_linear")===!1&&(G.magFilter===LinearFilter$1||G.magFilter===LinearMipmapNearestFilter$1||G.magFilter===NearestMipmapLinearFilter$1||G.magFilter===LinearMipmapLinearFilter$1||G.minFilter===LinearFilter$1||G.minFilter===LinearMipmapNearestFilter$1||G.minFilter===NearestMipmapLinearFilter$1||G.minFilter===LinearMipmapLinearFilter$1)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(K,i.TEXTURE_WRAP_S,I[G.wrapS]),i.texParameteri(K,i.TEXTURE_WRAP_T,I[G.wrapT]),(K===i.TEXTURE_3D||K===i.TEXTURE_2D_ARRAY)&&i.texParameteri(K,i.TEXTURE_WRAP_R,I[G.wrapR]),i.texParameteri(K,i.TEXTURE_MAG_FILTER,B[G.magFilter]),i.texParameteri(K,i.TEXTURE_MIN_FILTER,B[G.minFilter]),G.compareFunction&&(i.texParameteri(K,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(K,i.TEXTURE_COMPARE_FUNC,z[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(G.magFilter===NearestFilter$1||G.minFilter!==NearestMipmapLinearFilter$1&&G.minFilter!==LinearMipmapLinearFilter$1||G.type===FloatType$1&&e.has("OES_texture_float_linear")===!1)return;if(G.anisotropy>1||n.get(G).__currentAnisotropy){const he=e.get("EXT_texture_filter_anisotropic");i.texParameterf(K,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,r.getMaxAnisotropy())),n.get(G).__currentAnisotropy=G.anisotropy}}}function ne(K,G){let he=!1;K.__webglInit===void 0&&(K.__webglInit=!0,G.addEventListener("dispose",L));const Ee=G.source;let Te=m.get(Ee);Te===void 0&&(Te={},m.set(Ee,Te));const ve=Y(G);if(ve!==K.__cacheKey){Te[ve]===void 0&&(Te[ve]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,he=!0),Te[ve].usedTimes++;const Ne=Te[K.__cacheKey];Ne!==void 0&&(Te[K.__cacheKey].usedTimes--,Ne.usedTimes===0&&F(G)),K.__cacheKey=ve,K.__webglTexture=Te[ve].texture}return he}function Q(K,G,he){let Ee=i.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(Ee=i.TEXTURE_2D_ARRAY),G.isData3DTexture&&(Ee=i.TEXTURE_3D);const Te=ne(K,G),ve=G.source;t.bindTexture(Ee,K.__webglTexture,i.TEXTURE0+he);const Ne=n.get(ve);if(ve.version!==Ne.__version||Te===!0){t.activeTexture(i.TEXTURE0+he);const Pe=ColorManagement$1.getPrimaries(ColorManagement$1.workingColorSpace),De=G.colorSpace===NoColorSpace$1?null:ColorManagement$1.getPrimaries(G.colorSpace),ct=G.colorSpace===NoColorSpace$1||Pe===De?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,G.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,G.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);let Re=E(G.image,!1,r.maxTextureSize);Re=dt(G,Re);const Ge=s.convert(G.format,G.colorSpace),Qe=s.convert(G.type);let et=T(G.internalFormat,Ge,Qe,G.colorSpace,G.isVideoTexture);te(Ee,G);let Ve;const ut=G.mipmaps,at=G.isVideoTexture!==!0,Ct=Ne.__version===void 0||Te===!0,se=ve.dataReady,Ie=N(G,Re);if(G.isDepthTexture)et=A(G.format===DepthStencilFormat,G.type),Ct&&(at?t.texStorage2D(i.TEXTURE_2D,1,et,Re.width,Re.height):t.texImage2D(i.TEXTURE_2D,0,et,Re.width,Re.height,0,Ge,Qe,null));else if(G.isDataTexture)if(ut.length>0){at&&Ct&&t.texStorage2D(i.TEXTURE_2D,Ie,et,ut[0].width,ut[0].height);for(let ye=0,we=ut.length;ye<we;ye++)Ve=ut[ye],at?se&&t.texSubImage2D(i.TEXTURE_2D,ye,0,0,Ve.width,Ve.height,Ge,Qe,Ve.data):t.texImage2D(i.TEXTURE_2D,ye,et,Ve.width,Ve.height,0,Ge,Qe,Ve.data);G.generateMipmaps=!1}else at?(Ct&&t.texStorage2D(i.TEXTURE_2D,Ie,et,Re.width,Re.height),se&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Re.width,Re.height,Ge,Qe,Re.data)):t.texImage2D(i.TEXTURE_2D,0,et,Re.width,Re.height,0,Ge,Qe,Re.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){at&&Ct&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ie,et,ut[0].width,ut[0].height,Re.depth);for(let ye=0,we=ut.length;ye<we;ye++)if(Ve=ut[ye],G.format!==RGBAFormat$1)if(Ge!==null)if(at){if(se)if(G.layerUpdates.size>0){const Fe=getByteLength(Ve.width,Ve.height,G.format,G.type);for(const je of G.layerUpdates){const lt=Ve.data.subarray(je*Fe/Ve.data.BYTES_PER_ELEMENT,(je+1)*Fe/Ve.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ye,0,0,je,Ve.width,Ve.height,1,Ge,lt)}G.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ye,0,0,0,Ve.width,Ve.height,Re.depth,Ge,Ve.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ye,et,Ve.width,Ve.height,Re.depth,0,Ve.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else at?se&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,ye,0,0,0,Ve.width,Ve.height,Re.depth,Ge,Qe,Ve.data):t.texImage3D(i.TEXTURE_2D_ARRAY,ye,et,Ve.width,Ve.height,Re.depth,0,Ge,Qe,Ve.data)}else{at&&Ct&&t.texStorage2D(i.TEXTURE_2D,Ie,et,ut[0].width,ut[0].height);for(let ye=0,we=ut.length;ye<we;ye++)Ve=ut[ye],G.format!==RGBAFormat$1?Ge!==null?at?se&&t.compressedTexSubImage2D(i.TEXTURE_2D,ye,0,0,Ve.width,Ve.height,Ge,Ve.data):t.compressedTexImage2D(i.TEXTURE_2D,ye,et,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):at?se&&t.texSubImage2D(i.TEXTURE_2D,ye,0,0,Ve.width,Ve.height,Ge,Qe,Ve.data):t.texImage2D(i.TEXTURE_2D,ye,et,Ve.width,Ve.height,0,Ge,Qe,Ve.data)}else if(G.isDataArrayTexture)if(at){if(Ct&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ie,et,Re.width,Re.height,Re.depth),se)if(G.layerUpdates.size>0){const ye=getByteLength(Re.width,Re.height,G.format,G.type);for(const we of G.layerUpdates){const Fe=Re.data.subarray(we*ye/Re.data.BYTES_PER_ELEMENT,(we+1)*ye/Re.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,we,Re.width,Re.height,1,Ge,Qe,Fe)}G.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Re.width,Re.height,Re.depth,Ge,Qe,Re.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,et,Re.width,Re.height,Re.depth,0,Ge,Qe,Re.data);else if(G.isData3DTexture)at?(Ct&&t.texStorage3D(i.TEXTURE_3D,Ie,et,Re.width,Re.height,Re.depth),se&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Re.width,Re.height,Re.depth,Ge,Qe,Re.data)):t.texImage3D(i.TEXTURE_3D,0,et,Re.width,Re.height,Re.depth,0,Ge,Qe,Re.data);else if(G.isFramebufferTexture){if(Ct)if(at)t.texStorage2D(i.TEXTURE_2D,Ie,et,Re.width,Re.height);else{let ye=Re.width,we=Re.height;for(let Fe=0;Fe<Ie;Fe++)t.texImage2D(i.TEXTURE_2D,Fe,et,ye,we,0,Ge,Qe,null),ye>>=1,we>>=1}}else if(ut.length>0){if(at&&Ct){const ye=Ue(ut[0]);t.texStorage2D(i.TEXTURE_2D,Ie,et,ye.width,ye.height)}for(let ye=0,we=ut.length;ye<we;ye++)Ve=ut[ye],at?se&&t.texSubImage2D(i.TEXTURE_2D,ye,0,0,Ge,Qe,Ve):t.texImage2D(i.TEXTURE_2D,ye,et,Ge,Qe,Ve);G.generateMipmaps=!1}else if(at){if(Ct){const ye=Ue(Re);t.texStorage2D(i.TEXTURE_2D,Ie,et,ye.width,ye.height)}se&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ge,Qe,Re)}else t.texImage2D(i.TEXTURE_2D,0,et,Ge,Qe,Re);S(G)&&b(Ee),Ne.__version=ve.version,G.onUpdate&&G.onUpdate(G)}K.__version=G.version}function ue(K,G,he){if(G.image.length!==6)return;const Ee=ne(K,G),Te=G.source;t.bindTexture(i.TEXTURE_CUBE_MAP,K.__webglTexture,i.TEXTURE0+he);const ve=n.get(Te);if(Te.version!==ve.__version||Ee===!0){t.activeTexture(i.TEXTURE0+he);const Ne=ColorManagement$1.getPrimaries(ColorManagement$1.workingColorSpace),Pe=G.colorSpace===NoColorSpace$1?null:ColorManagement$1.getPrimaries(G.colorSpace),De=G.colorSpace===NoColorSpace$1||Ne===Pe?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,G.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,G.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,De);const ct=G.isCompressedTexture||G.image[0].isCompressedTexture,Re=G.image[0]&&G.image[0].isDataTexture,Ge=[];for(let we=0;we<6;we++)!ct&&!Re?Ge[we]=E(G.image[we],!0,r.maxCubemapSize):Ge[we]=Re?G.image[we].image:G.image[we],Ge[we]=dt(G,Ge[we]);const Qe=Ge[0],et=s.convert(G.format,G.colorSpace),Ve=s.convert(G.type),ut=T(G.internalFormat,et,Ve,G.colorSpace),at=G.isVideoTexture!==!0,Ct=ve.__version===void 0||Ee===!0,se=Te.dataReady;let Ie=N(G,Qe);te(i.TEXTURE_CUBE_MAP,G);let ye;if(ct){at&&Ct&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Ie,ut,Qe.width,Qe.height);for(let we=0;we<6;we++){ye=Ge[we].mipmaps;for(let Fe=0;Fe<ye.length;Fe++){const je=ye[Fe];G.format!==RGBAFormat$1?et!==null?at?se&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,Fe,0,0,je.width,je.height,et,je.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,Fe,ut,je.width,je.height,0,je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):at?se&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,Fe,0,0,je.width,je.height,et,Ve,je.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,Fe,ut,je.width,je.height,0,et,Ve,je.data)}}}else{if(ye=G.mipmaps,at&&Ct){ye.length>0&&Ie++;const we=Ue(Ge[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Ie,ut,we.width,we.height)}for(let we=0;we<6;we++)if(Re){at?se&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,Ge[we].width,Ge[we].height,et,Ve,Ge[we].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,ut,Ge[we].width,Ge[we].height,0,et,Ve,Ge[we].data);for(let Fe=0;Fe<ye.length;Fe++){const lt=ye[Fe].image[we].image;at?se&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,Fe+1,0,0,lt.width,lt.height,et,Ve,lt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,Fe+1,ut,lt.width,lt.height,0,et,Ve,lt.data)}}else{at?se&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,et,Ve,Ge[we]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,ut,et,Ve,Ge[we]);for(let Fe=0;Fe<ye.length;Fe++){const je=ye[Fe];at?se&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,Fe+1,0,0,et,Ve,je.image[we]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+we,Fe+1,ut,et,Ve,je.image[we])}}}S(G)&&b(i.TEXTURE_CUBE_MAP),ve.__version=Te.version,G.onUpdate&&G.onUpdate(G)}K.__version=G.version}function me(K,G,he,Ee,Te,ve){const Ne=s.convert(he.format,he.colorSpace),Pe=s.convert(he.type),De=T(he.internalFormat,Ne,Pe,he.colorSpace),ct=n.get(G),Re=n.get(he);if(Re.__renderTarget=G,!ct.__hasExternalTextures){const Ge=Math.max(1,G.width>>ve),Qe=Math.max(1,G.height>>ve);Te===i.TEXTURE_3D||Te===i.TEXTURE_2D_ARRAY?t.texImage3D(Te,ve,De,Ge,Qe,G.depth,0,Ne,Pe,null):t.texImage2D(Te,ve,De,Ge,Qe,0,Ne,Pe,null)}t.bindFramebuffer(i.FRAMEBUFFER,K),Ye(G)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ee,Te,Re.__webglTexture,0,ot(G)):(Te===i.TEXTURE_2D||Te>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ee,Te,Re.__webglTexture,ve),t.bindFramebuffer(i.FRAMEBUFFER,null)}function be(K,G,he){if(i.bindRenderbuffer(i.RENDERBUFFER,K),G.depthBuffer){const Ee=G.depthTexture,Te=Ee&&Ee.isDepthTexture?Ee.type:null,ve=A(G.stencilBuffer,Te),Ne=G.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Pe=ot(G);Ye(G)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Pe,ve,G.width,G.height):he?i.renderbufferStorageMultisample(i.RENDERBUFFER,Pe,ve,G.width,G.height):i.renderbufferStorage(i.RENDERBUFFER,ve,G.width,G.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ne,i.RENDERBUFFER,K)}else{const Ee=G.textures;for(let Te=0;Te<Ee.length;Te++){const ve=Ee[Te],Ne=s.convert(ve.format,ve.colorSpace),Pe=s.convert(ve.type),De=T(ve.internalFormat,Ne,Pe,ve.colorSpace),ct=ot(G);he&&Ye(G)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,ct,De,G.width,G.height):Ye(G)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ct,De,G.width,G.height):i.renderbufferStorage(i.RENDERBUFFER,De,G.width,G.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Ae(K,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,K),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ee=n.get(G.depthTexture);Ee.__renderTarget=G,(!Ee.__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),$(G.depthTexture,0);const Te=Ee.__webglTexture,ve=ot(G);if(G.depthTexture.format===DepthFormat)Ye(G)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Te,0,ve):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Te,0);else if(G.depthTexture.format===DepthStencilFormat)Ye(G)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Te,0,ve):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function qe(K){const G=n.get(K),he=K.isWebGLCubeRenderTarget===!0;if(G.__boundDepthTexture!==K.depthTexture){const Ee=K.depthTexture;if(G.__depthDisposeCallback&&G.__depthDisposeCallback(),Ee){const Te=()=>{delete G.__boundDepthTexture,delete G.__depthDisposeCallback,Ee.removeEventListener("dispose",Te)};Ee.addEventListener("dispose",Te),G.__depthDisposeCallback=Te}G.__boundDepthTexture=Ee}if(K.depthTexture&&!G.__autoAllocateDepthBuffer){if(he)throw new Error("target.depthTexture not supported in Cube render targets");Ae(G.__webglFramebuffer,K)}else if(he){G.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)if(t.bindFramebuffer(i.FRAMEBUFFER,G.__webglFramebuffer[Ee]),G.__webglDepthbuffer[Ee]===void 0)G.__webglDepthbuffer[Ee]=i.createRenderbuffer(),be(G.__webglDepthbuffer[Ee],K,!1);else{const Te=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ve=G.__webglDepthbuffer[Ee];i.bindRenderbuffer(i.RENDERBUFFER,ve),i.framebufferRenderbuffer(i.FRAMEBUFFER,Te,i.RENDERBUFFER,ve)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer===void 0)G.__webglDepthbuffer=i.createRenderbuffer(),be(G.__webglDepthbuffer,K,!1);else{const Ee=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Te=G.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Te),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ee,i.RENDERBUFFER,Te)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Be(K,G,he){const Ee=n.get(K);G!==void 0&&me(Ee.__webglFramebuffer,K,K.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),he!==void 0&&qe(K)}function it(K){const G=K.texture,he=n.get(K),Ee=n.get(G);K.addEventListener("dispose",k);const Te=K.textures,ve=K.isWebGLCubeRenderTarget===!0,Ne=Te.length>1;if(Ne||(Ee.__webglTexture===void 0&&(Ee.__webglTexture=i.createTexture()),Ee.__version=G.version,o.memory.textures++),ve){he.__webglFramebuffer=[];for(let Pe=0;Pe<6;Pe++)if(G.mipmaps&&G.mipmaps.length>0){he.__webglFramebuffer[Pe]=[];for(let De=0;De<G.mipmaps.length;De++)he.__webglFramebuffer[Pe][De]=i.createFramebuffer()}else he.__webglFramebuffer[Pe]=i.createFramebuffer()}else{if(G.mipmaps&&G.mipmaps.length>0){he.__webglFramebuffer=[];for(let Pe=0;Pe<G.mipmaps.length;Pe++)he.__webglFramebuffer[Pe]=i.createFramebuffer()}else he.__webglFramebuffer=i.createFramebuffer();if(Ne)for(let Pe=0,De=Te.length;Pe<De;Pe++){const ct=n.get(Te[Pe]);ct.__webglTexture===void 0&&(ct.__webglTexture=i.createTexture(),o.memory.textures++)}if(K.samples>0&&Ye(K)===!1){he.__webglMultisampledFramebuffer=i.createFramebuffer(),he.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,he.__webglMultisampledFramebuffer);for(let Pe=0;Pe<Te.length;Pe++){const De=Te[Pe];he.__webglColorRenderbuffer[Pe]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,he.__webglColorRenderbuffer[Pe]);const ct=s.convert(De.format,De.colorSpace),Re=s.convert(De.type),Ge=T(De.internalFormat,ct,Re,De.colorSpace,K.isXRRenderTarget===!0),Qe=ot(K);i.renderbufferStorageMultisample(i.RENDERBUFFER,Qe,Ge,K.width,K.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Pe,i.RENDERBUFFER,he.__webglColorRenderbuffer[Pe])}i.bindRenderbuffer(i.RENDERBUFFER,null),K.depthBuffer&&(he.__webglDepthRenderbuffer=i.createRenderbuffer(),be(he.__webglDepthRenderbuffer,K,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(ve){t.bindTexture(i.TEXTURE_CUBE_MAP,Ee.__webglTexture),te(i.TEXTURE_CUBE_MAP,G);for(let Pe=0;Pe<6;Pe++)if(G.mipmaps&&G.mipmaps.length>0)for(let De=0;De<G.mipmaps.length;De++)me(he.__webglFramebuffer[Pe][De],K,G,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,De);else me(he.__webglFramebuffer[Pe],K,G,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0);S(G)&&b(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ne){for(let Pe=0,De=Te.length;Pe<De;Pe++){const ct=Te[Pe],Re=n.get(ct);t.bindTexture(i.TEXTURE_2D,Re.__webglTexture),te(i.TEXTURE_2D,ct),me(he.__webglFramebuffer,K,ct,i.COLOR_ATTACHMENT0+Pe,i.TEXTURE_2D,0),S(ct)&&b(i.TEXTURE_2D)}t.unbindTexture()}else{let Pe=i.TEXTURE_2D;if((K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(Pe=K.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Pe,Ee.__webglTexture),te(Pe,G),G.mipmaps&&G.mipmaps.length>0)for(let De=0;De<G.mipmaps.length;De++)me(he.__webglFramebuffer[De],K,G,i.COLOR_ATTACHMENT0,Pe,De);else me(he.__webglFramebuffer,K,G,i.COLOR_ATTACHMENT0,Pe,0);S(G)&&b(Pe),t.unbindTexture()}K.depthBuffer&&qe(K)}function st(K){const G=K.textures;for(let he=0,Ee=G.length;he<Ee;he++){const Te=G[he];if(S(Te)){const ve=C(K),Ne=n.get(Te).__webglTexture;t.bindTexture(ve,Ne),b(ve),t.unbindTexture()}}}const Oe=[],Z=[];function jt(K){if(K.samples>0){if(Ye(K)===!1){const G=K.textures,he=K.width,Ee=K.height;let Te=i.COLOR_BUFFER_BIT;const ve=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ne=n.get(K),Pe=G.length>1;if(Pe)for(let De=0;De<G.length;De++)t.bindFramebuffer(i.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Ne.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer);for(let De=0;De<G.length;De++){if(K.resolveDepthBuffer&&(K.depthBuffer&&(Te|=i.DEPTH_BUFFER_BIT),K.stencilBuffer&&K.resolveStencilBuffer&&(Te|=i.STENCIL_BUFFER_BIT)),Pe){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Ne.__webglColorRenderbuffer[De]);const ct=n.get(G[De]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,ct,0)}i.blitFramebuffer(0,0,he,Ee,0,0,he,Ee,Te,i.NEAREST),u===!0&&(Oe.length=0,Z.length=0,Oe.push(i.COLOR_ATTACHMENT0+De),K.depthBuffer&&K.resolveDepthBuffer===!1&&(Oe.push(ve),Z.push(ve),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Z)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Oe))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Pe)for(let De=0;De<G.length;De++){t.bindFramebuffer(i.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.RENDERBUFFER,Ne.__webglColorRenderbuffer[De]);const ct=n.get(G[De]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Ne.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.TEXTURE_2D,ct,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer)}else if(K.depthBuffer&&K.resolveDepthBuffer===!1&&u){const G=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[G])}}}function ot(K){return Math.min(r.maxSamples,K.samples)}function Ye(K){const G=n.get(K);return K.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function $e(K){const G=o.render.frame;p.get(K)!==G&&(p.set(K,G),K.update())}function dt(K,G){const he=K.colorSpace,Ee=K.format,Te=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||he!==LinearSRGBColorSpace$1&&he!==NoColorSpace$1&&(ColorManagement$1.getTransfer(he)===SRGBTransfer$1?(Ee!==RGBAFormat$1||Te!==UnsignedByteType$1)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",he)),G}function Ue(K){return typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement?(d.width=K.naturalWidth||K.width,d.height=K.naturalHeight||K.height):typeof VideoFrame<"u"&&K instanceof VideoFrame?(d.width=K.displayWidth,d.height=K.displayHeight):(d.width=K.width,d.height=K.height),d}this.allocateTextureUnit=ee,this.resetTextureUnits=J,this.setTexture2D=$,this.setTexture2DArray=D,this.setTexture3D=V,this.setTextureCube=P,this.rebindTextures=Be,this.setupRenderTarget=it,this.updateRenderTargetMipmap=st,this.updateMultisampleRenderTarget=jt,this.setupDepthRenderbuffer=qe,this.setupFrameBufferTexture=me,this.useMultisampledRTT=Ye}function WebGLUtils(i,e){function t(n,r=NoColorSpace$1){let s;const o=ColorManagement$1.getTransfer(r);if(n===UnsignedByteType$1)return i.UNSIGNED_BYTE;if(n===UnsignedShort4444Type)return i.UNSIGNED_SHORT_4_4_4_4;if(n===UnsignedShort5551Type)return i.UNSIGNED_SHORT_5_5_5_1;if(n===UnsignedInt5999Type)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===ByteType)return i.BYTE;if(n===ShortType)return i.SHORT;if(n===UnsignedShortType)return i.UNSIGNED_SHORT;if(n===IntType)return i.INT;if(n===UnsignedIntType)return i.UNSIGNED_INT;if(n===FloatType$1)return i.FLOAT;if(n===HalfFloatType$1)return i.HALF_FLOAT;if(n===AlphaFormat)return i.ALPHA;if(n===RGBFormat)return i.RGB;if(n===RGBAFormat$1)return i.RGBA;if(n===LuminanceFormat)return i.LUMINANCE;if(n===LuminanceAlphaFormat)return i.LUMINANCE_ALPHA;if(n===DepthFormat)return i.DEPTH_COMPONENT;if(n===DepthStencilFormat)return i.DEPTH_STENCIL;if(n===RedFormat$1)return i.RED;if(n===RedIntegerFormat)return i.RED_INTEGER;if(n===RGFormat)return i.RG;if(n===RGIntegerFormat)return i.RG_INTEGER;if(n===RGBAIntegerFormat)return i.RGBA_INTEGER;if(n===RGB_S3TC_DXT1_Format||n===RGBA_S3TC_DXT1_Format||n===RGBA_S3TC_DXT3_Format||n===RGBA_S3TC_DXT5_Format)if(o===SRGBTransfer$1)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===RGB_S3TC_DXT1_Format)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT1_Format)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT3_Format)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===RGBA_S3TC_DXT5_Format)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===RGB_S3TC_DXT1_Format)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT1_Format)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT3_Format)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===RGBA_S3TC_DXT5_Format)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===RGB_PVRTC_4BPPV1_Format||n===RGB_PVRTC_2BPPV1_Format||n===RGBA_PVRTC_4BPPV1_Format||n===RGBA_PVRTC_2BPPV1_Format)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===RGB_PVRTC_4BPPV1_Format)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===RGB_PVRTC_2BPPV1_Format)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===RGBA_PVRTC_4BPPV1_Format)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===RGBA_PVRTC_2BPPV1_Format)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===RGB_ETC1_Format||n===RGB_ETC2_Format||n===RGBA_ETC2_EAC_Format)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===RGB_ETC1_Format||n===RGB_ETC2_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===RGBA_ETC2_EAC_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===RGBA_ASTC_4x4_Format||n===RGBA_ASTC_5x4_Format||n===RGBA_ASTC_5x5_Format||n===RGBA_ASTC_6x5_Format||n===RGBA_ASTC_6x6_Format||n===RGBA_ASTC_8x5_Format||n===RGBA_ASTC_8x6_Format||n===RGBA_ASTC_8x8_Format||n===RGBA_ASTC_10x5_Format||n===RGBA_ASTC_10x6_Format||n===RGBA_ASTC_10x8_Format||n===RGBA_ASTC_10x10_Format||n===RGBA_ASTC_12x10_Format||n===RGBA_ASTC_12x12_Format)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===RGBA_ASTC_4x4_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===RGBA_ASTC_5x4_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===RGBA_ASTC_5x5_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===RGBA_ASTC_6x5_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===RGBA_ASTC_6x6_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===RGBA_ASTC_8x5_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===RGBA_ASTC_8x6_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===RGBA_ASTC_8x8_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===RGBA_ASTC_10x5_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===RGBA_ASTC_10x6_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===RGBA_ASTC_10x8_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===RGBA_ASTC_10x10_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===RGBA_ASTC_12x10_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===RGBA_ASTC_12x12_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===RGBA_BPTC_Format||n===RGB_BPTC_SIGNED_Format||n===RGB_BPTC_UNSIGNED_Format)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===RGBA_BPTC_Format)return o===SRGBTransfer$1?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===RGB_BPTC_SIGNED_Format)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===RGB_BPTC_UNSIGNED_Format)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===RED_RGTC1_Format||n===SIGNED_RED_RGTC1_Format||n===RED_GREEN_RGTC2_Format||n===SIGNED_RED_GREEN_RGTC2_Format)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===RGBA_BPTC_Format)return s.COMPRESSED_RED_RGTC1_EXT;if(n===SIGNED_RED_RGTC1_Format)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===RED_GREEN_RGTC2_Format)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===SIGNED_RED_GREEN_RGTC2_Format)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===UnsignedInt248Type?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}class ArrayCamera extends PerspectiveCamera$1{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}let Group$1=class extends Object3D$1{constructor(){super(),this.isGroup=!0,this.type="Group"}};const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group$1,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3$1,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3$1),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3$1,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3$1),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const l=this._targetRay,u=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const E of e.hand.values()){const S=t.getJointPose(E,n),b=this._getHandJoint(d,E);S!==null&&(b.matrix.fromArray(S.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=S.radius),b.visible=S!==null}const p=d.joints["index-finger-tip"],g=d.joints["thumb-tip"],m=p.position.distanceTo(g.position),y=.02,_=.005;d.inputState.pinching&&m>y+_?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&m<=y-_&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return l!==null&&(l.visible=r!==null),u!==null&&(u.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Group$1;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new Texture$1,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new ShaderMaterial$1({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Mesh$1(new PlaneGeometry(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher$1{constructor(e,t){super();const n=this;let r=null,s=1,o=null,l="local-floor",u=1,d=null,p=null,g=null,m=null,y=null,_=null;const E=new WebXRDepthSensing,S=t.getContextAttributes();let b=null,C=null;const T=[],A=[],N=new Vector2$1;let L=null;const k=new PerspectiveCamera$1;k.viewport=new Vector4$1;const j=new PerspectiveCamera$1;j.viewport=new Vector4$1;const F=[k,j],U=new ArrayCamera;let q=null,J=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let ue=T[Q];return ue===void 0&&(ue=new WebXRController,T[Q]=ue),ue.getTargetRaySpace()},this.getControllerGrip=function(Q){let ue=T[Q];return ue===void 0&&(ue=new WebXRController,T[Q]=ue),ue.getGripSpace()},this.getHand=function(Q){let ue=T[Q];return ue===void 0&&(ue=new WebXRController,T[Q]=ue),ue.getHandSpace()};function ee(Q){const ue=A.indexOf(Q.inputSource);if(ue===-1)return;const me=T[ue];me!==void 0&&(me.update(Q.inputSource,Q.frame,d||o),me.dispatchEvent({type:Q.type,data:Q.inputSource}))}function Y(){r.removeEventListener("select",ee),r.removeEventListener("selectstart",ee),r.removeEventListener("selectend",ee),r.removeEventListener("squeeze",ee),r.removeEventListener("squeezestart",ee),r.removeEventListener("squeezeend",ee),r.removeEventListener("end",Y),r.removeEventListener("inputsourceschange",$);for(let Q=0;Q<T.length;Q++){const ue=A[Q];ue!==null&&(A[Q]=null,T[Q].disconnect(ue))}q=null,J=null,E.reset(),e.setRenderTarget(b),y=null,m=null,g=null,r=null,C=null,ne.stop(),n.isPresenting=!1,e.setPixelRatio(L),e.setSize(N.width,N.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){s=Q,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){l=Q,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(Q){d=Q},this.getBaseLayer=function(){return m!==null?m:y},this.getBinding=function(){return g},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(Q){if(r=Q,r!==null){if(b=e.getRenderTarget(),r.addEventListener("select",ee),r.addEventListener("selectstart",ee),r.addEventListener("selectend",ee),r.addEventListener("squeeze",ee),r.addEventListener("squeezestart",ee),r.addEventListener("squeezeend",ee),r.addEventListener("end",Y),r.addEventListener("inputsourceschange",$),S.xrCompatible!==!0&&await t.makeXRCompatible(),L=e.getPixelRatio(),e.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let me=null,be=null,Ae=null;S.depth&&(Ae=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,me=S.stencil?DepthStencilFormat:DepthFormat,be=S.stencil?UnsignedInt248Type:UnsignedIntType);const qe={colorFormat:t.RGBA8,depthFormat:Ae,scaleFactor:s};g=new XRWebGLBinding(r,t),m=g.createProjectionLayer(qe),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),C=new WebGLRenderTarget$1(m.textureWidth,m.textureHeight,{format:RGBAFormat$1,type:UnsignedByteType$1,depthTexture:new DepthTexture(m.textureWidth,m.textureHeight,be,void 0,void 0,void 0,void 0,void 0,void 0,me),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const me={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(r,t,me),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),C=new WebGLRenderTarget$1(y.framebufferWidth,y.framebufferHeight,{format:RGBAFormat$1,type:UnsignedByteType$1,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(u),d=null,o=await r.requestReferenceSpace(l),ne.setContext(r),ne.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function $(Q){for(let ue=0;ue<Q.removed.length;ue++){const me=Q.removed[ue],be=A.indexOf(me);be>=0&&(A[be]=null,T[be].disconnect(me))}for(let ue=0;ue<Q.added.length;ue++){const me=Q.added[ue];let be=A.indexOf(me);if(be===-1){for(let qe=0;qe<T.length;qe++)if(qe>=A.length){A.push(me),be=qe;break}else if(A[qe]===null){A[qe]=me,be=qe;break}if(be===-1)break}const Ae=T[be];Ae&&Ae.connect(me)}}const D=new Vector3$1,V=new Vector3$1;function P(Q,ue,me){D.setFromMatrixPosition(ue.matrixWorld),V.setFromMatrixPosition(me.matrixWorld);const be=D.distanceTo(V),Ae=ue.projectionMatrix.elements,qe=me.projectionMatrix.elements,Be=Ae[14]/(Ae[10]-1),it=Ae[14]/(Ae[10]+1),st=(Ae[9]+1)/Ae[5],Oe=(Ae[9]-1)/Ae[5],Z=(Ae[8]-1)/Ae[0],jt=(qe[8]+1)/qe[0],ot=Be*Z,Ye=Be*jt,$e=be/(-Z+jt),dt=$e*-Z;if(ue.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(dt),Q.translateZ($e),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert(),Ae[10]===-1)Q.projectionMatrix.copy(ue.projectionMatrix),Q.projectionMatrixInverse.copy(ue.projectionMatrixInverse);else{const Ue=Be+$e,K=it+$e,G=ot-dt,he=Ye+(be-dt),Ee=st*it/K*Ue,Te=Oe*it/K*Ue;Q.projectionMatrix.makePerspective(G,he,Ee,Te,Ue,K),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}}function I(Q,ue){ue===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(ue.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(r===null)return;let ue=Q.near,me=Q.far;E.texture!==null&&(E.depthNear>0&&(ue=E.depthNear),E.depthFar>0&&(me=E.depthFar)),U.near=j.near=k.near=ue,U.far=j.far=k.far=me,(q!==U.near||J!==U.far)&&(r.updateRenderState({depthNear:U.near,depthFar:U.far}),q=U.near,J=U.far),k.layers.mask=Q.layers.mask|2,j.layers.mask=Q.layers.mask|4,U.layers.mask=k.layers.mask|j.layers.mask;const be=Q.parent,Ae=U.cameras;I(U,be);for(let qe=0;qe<Ae.length;qe++)I(Ae[qe],be);Ae.length===2?P(U,k,j):U.projectionMatrix.copy(k.projectionMatrix),B(Q,U,be)};function B(Q,ue,me){me===null?Q.matrix.copy(ue.matrixWorld):(Q.matrix.copy(me.matrixWorld),Q.matrix.invert(),Q.matrix.multiply(ue.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0),Q.projectionMatrix.copy(ue.projectionMatrix),Q.projectionMatrixInverse.copy(ue.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=RAD2DEG$1*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(m===null&&y===null))return u},this.setFoveation=function(Q){u=Q,m!==null&&(m.fixedFoveation=Q),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=Q)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(U)};let z=null;function te(Q,ue){if(p=ue.getViewerPose(d||o),_=ue,p!==null){const me=p.views;y!==null&&(e.setRenderTargetFramebuffer(C,y.framebuffer),e.setRenderTarget(C));let be=!1;me.length!==U.cameras.length&&(U.cameras.length=0,be=!0);for(let Be=0;Be<me.length;Be++){const it=me[Be];let st=null;if(y!==null)st=y.getViewport(it);else{const Z=g.getViewSubImage(m,it);st=Z.viewport,Be===0&&(e.setRenderTargetTextures(C,Z.colorTexture,Z.depthStencilTexture),e.setRenderTarget(C))}let Oe=F[Be];Oe===void 0&&(Oe=new PerspectiveCamera$1,Oe.layers.enable(Be),Oe.viewport=new Vector4$1,F[Be]=Oe),Oe.matrix.fromArray(it.transform.matrix),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.projectionMatrix.fromArray(it.projectionMatrix),Oe.projectionMatrixInverse.copy(Oe.projectionMatrix).invert(),Oe.viewport.set(st.x,st.y,st.width,st.height),Be===0&&(U.matrix.copy(Oe.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),be===!0&&U.cameras.push(Oe)}const Ae=r.enabledFeatures;if(Ae&&Ae.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&g){const Be=g.getDepthInformation(me[0]);Be&&Be.isValid&&Be.texture&&E.init(e,Be,r.renderState)}}for(let me=0;me<T.length;me++){const be=A[me],Ae=T[me];be!==null&&Ae!==void 0&&Ae.update(be,ue,d||o)}z&&z(Q,ue),ue.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ue}),_=null}const ne=new WebGLAnimation;ne.setAnimationLoop(te),this.setAnimationLoop=function(Q){z=Q},this.dispose=function(){}}}const _e1=new Euler$1,_m1$3=new Matrix4$1;function WebGLMaterials(i,e){function t(S,b){S.matrixAutoUpdate===!0&&S.updateMatrix(),b.value.copy(S.matrix)}function n(S,b){b.color.getRGB(S.fogColor.value,getUnlitUniformColorSpace(i)),b.isFog?(S.fogNear.value=b.near,S.fogFar.value=b.far):b.isFogExp2&&(S.fogDensity.value=b.density)}function r(S,b,C,T,A){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(S,b):b.isMeshToonMaterial?(s(S,b),g(S,b)):b.isMeshPhongMaterial?(s(S,b),p(S,b)):b.isMeshStandardMaterial?(s(S,b),m(S,b),b.isMeshPhysicalMaterial&&y(S,b,A)):b.isMeshMatcapMaterial?(s(S,b),_(S,b)):b.isMeshDepthMaterial?s(S,b):b.isMeshDistanceMaterial?(s(S,b),E(S,b)):b.isMeshNormalMaterial?s(S,b):b.isLineBasicMaterial?(o(S,b),b.isLineDashedMaterial&&l(S,b)):b.isPointsMaterial?u(S,b,C,T):b.isSpriteMaterial?d(S,b):b.isShadowMaterial?(S.color.value.copy(b.color),S.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function s(S,b){S.opacity.value=b.opacity,b.color&&S.diffuse.value.copy(b.color),b.emissive&&S.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(S.map.value=b.map,t(b.map,S.mapTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.bumpMap&&(S.bumpMap.value=b.bumpMap,t(b.bumpMap,S.bumpMapTransform),S.bumpScale.value=b.bumpScale,b.side===BackSide$1&&(S.bumpScale.value*=-1)),b.normalMap&&(S.normalMap.value=b.normalMap,t(b.normalMap,S.normalMapTransform),S.normalScale.value.copy(b.normalScale),b.side===BackSide$1&&S.normalScale.value.negate()),b.displacementMap&&(S.displacementMap.value=b.displacementMap,t(b.displacementMap,S.displacementMapTransform),S.displacementScale.value=b.displacementScale,S.displacementBias.value=b.displacementBias),b.emissiveMap&&(S.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,S.emissiveMapTransform)),b.specularMap&&(S.specularMap.value=b.specularMap,t(b.specularMap,S.specularMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest);const C=e.get(b),T=C.envMap,A=C.envMapRotation;T&&(S.envMap.value=T,_e1.copy(A),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),S.envMapRotation.value.setFromMatrix4(_m1$3.makeRotationFromEuler(_e1)),S.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=b.reflectivity,S.ior.value=b.ior,S.refractionRatio.value=b.refractionRatio),b.lightMap&&(S.lightMap.value=b.lightMap,S.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,S.lightMapTransform)),b.aoMap&&(S.aoMap.value=b.aoMap,S.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,S.aoMapTransform))}function o(S,b){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,b.map&&(S.map.value=b.map,t(b.map,S.mapTransform))}function l(S,b){S.dashSize.value=b.dashSize,S.totalSize.value=b.dashSize+b.gapSize,S.scale.value=b.scale}function u(S,b,C,T){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,S.size.value=b.size*C,S.scale.value=T*.5,b.map&&(S.map.value=b.map,t(b.map,S.uvTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest)}function d(S,b){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,S.rotation.value=b.rotation,b.map&&(S.map.value=b.map,t(b.map,S.mapTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest)}function p(S,b){S.specular.value.copy(b.specular),S.shininess.value=Math.max(b.shininess,1e-4)}function g(S,b){b.gradientMap&&(S.gradientMap.value=b.gradientMap)}function m(S,b){S.metalness.value=b.metalness,b.metalnessMap&&(S.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,S.metalnessMapTransform)),S.roughness.value=b.roughness,b.roughnessMap&&(S.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,S.roughnessMapTransform)),b.envMap&&(S.envMapIntensity.value=b.envMapIntensity)}function y(S,b,C){S.ior.value=b.ior,b.sheen>0&&(S.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),S.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(S.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,S.sheenColorMapTransform)),b.sheenRoughnessMap&&(S.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,S.sheenRoughnessMapTransform))),b.clearcoat>0&&(S.clearcoat.value=b.clearcoat,S.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(S.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,S.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(S.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===BackSide$1&&S.clearcoatNormalScale.value.negate())),b.dispersion>0&&(S.dispersion.value=b.dispersion),b.iridescence>0&&(S.iridescence.value=b.iridescence,S.iridescenceIOR.value=b.iridescenceIOR,S.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(S.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,S.iridescenceMapTransform)),b.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),b.transmission>0&&(S.transmission.value=b.transmission,S.transmissionSamplerMap.value=C.texture,S.transmissionSamplerSize.value.set(C.width,C.height),b.transmissionMap&&(S.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,S.transmissionMapTransform)),S.thickness.value=b.thickness,b.thicknessMap&&(S.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=b.attenuationDistance,S.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(S.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(S.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=b.specularIntensity,S.specularColor.value.copy(b.specularColor),b.specularColorMap&&(S.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,S.specularColorMapTransform)),b.specularIntensityMap&&(S.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,S.specularIntensityMapTransform))}function _(S,b){b.matcap&&(S.matcap.value=b.matcap)}function E(S,b){const C=e.get(b).light;S.referencePosition.value.setFromMatrixPosition(C.matrixWorld),S.nearDistance.value=C.shadow.camera.near,S.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function WebGLUniformsGroups(i,e,t,n){let r={},s={},o=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function u(C,T){const A=T.program;n.uniformBlockBinding(C,A)}function d(C,T){let A=r[C.id];A===void 0&&(_(C),A=p(C),r[C.id]=A,C.addEventListener("dispose",S));const N=T.program;n.updateUBOMapping(C,N);const L=e.render.frame;s[C.id]!==L&&(m(C),s[C.id]=L)}function p(C){const T=g();C.__bindingPointIndex=T;const A=i.createBuffer(),N=C.__size,L=C.usage;return i.bindBuffer(i.UNIFORM_BUFFER,A),i.bufferData(i.UNIFORM_BUFFER,N,L),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,T,A),A}function g(){for(let C=0;C<l;C++)if(o.indexOf(C)===-1)return o.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(C){const T=r[C.id],A=C.uniforms,N=C.__cache;i.bindBuffer(i.UNIFORM_BUFFER,T);for(let L=0,k=A.length;L<k;L++){const j=Array.isArray(A[L])?A[L]:[A[L]];for(let F=0,U=j.length;F<U;F++){const q=j[F];if(y(q,L,F,N)===!0){const J=q.__offset,ee=Array.isArray(q.value)?q.value:[q.value];let Y=0;for(let $=0;$<ee.length;$++){const D=ee[$],V=E(D);typeof D=="number"||typeof D=="boolean"?(q.__data[0]=D,i.bufferSubData(i.UNIFORM_BUFFER,J+Y,q.__data)):D.isMatrix3?(q.__data[0]=D.elements[0],q.__data[1]=D.elements[1],q.__data[2]=D.elements[2],q.__data[3]=0,q.__data[4]=D.elements[3],q.__data[5]=D.elements[4],q.__data[6]=D.elements[5],q.__data[7]=0,q.__data[8]=D.elements[6],q.__data[9]=D.elements[7],q.__data[10]=D.elements[8],q.__data[11]=0):(D.toArray(q.__data,Y),Y+=V.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,J,q.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function y(C,T,A,N){const L=C.value,k=T+"_"+A;if(N[k]===void 0)return typeof L=="number"||typeof L=="boolean"?N[k]=L:N[k]=L.clone(),!0;{const j=N[k];if(typeof L=="number"||typeof L=="boolean"){if(j!==L)return N[k]=L,!0}else if(j.equals(L)===!1)return j.copy(L),!0}return!1}function _(C){const T=C.uniforms;let A=0;const N=16;for(let k=0,j=T.length;k<j;k++){const F=Array.isArray(T[k])?T[k]:[T[k]];for(let U=0,q=F.length;U<q;U++){const J=F[U],ee=Array.isArray(J.value)?J.value:[J.value];for(let Y=0,$=ee.length;Y<$;Y++){const D=ee[Y],V=E(D),P=A%N,I=P%V.boundary,B=P+I;A+=I,B!==0&&N-B<V.storage&&(A+=N-B),J.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=A,A+=V.storage}}}const L=A%N;return L>0&&(A+=N-L),C.__size=A,C.__cache={},this}function E(C){const T={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(T.boundary=4,T.storage=4):C.isVector2?(T.boundary=8,T.storage=8):C.isVector3||C.isColor?(T.boundary=16,T.storage=12):C.isVector4?(T.boundary=16,T.storage=16):C.isMatrix3?(T.boundary=48,T.storage=48):C.isMatrix4?(T.boundary=64,T.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),T}function S(C){const T=C.target;T.removeEventListener("dispose",S);const A=o.indexOf(T.__bindingPointIndex);o.splice(A,1),i.deleteBuffer(r[T.id]),delete r[T.id],delete s[T.id]}function b(){for(const C in r)i.deleteBuffer(r[C]);o=[],r={},s={}}return{bind:u,update:d,dispose:b}}class WebGLRenderer{constructor(e={}){const{canvas:t=createCanvasElement(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=o;const _=new Uint32Array(4),E=new Int32Array(4);let S=null,b=null;const C=[],T=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const A=this;let N=!1;this._outputColorSpace=SRGBColorSpace$1;let L=0,k=0,j=null,F=-1,U=null;const q=new Vector4$1,J=new Vector4$1;let ee=null;const Y=new Color$1(0);let $=0,D=t.width,V=t.height,P=1,I=null,B=null;const z=new Vector4$1(0,0,D,V),te=new Vector4$1(0,0,D,V);let ne=!1;const Q=new Frustum$1;let ue=!1,me=!1;const be=new Matrix4$1,Ae=new Matrix4$1,qe=new Vector3$1,Be=new Vector4$1,it={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let st=!1;function Oe(){return j===null?P:1}let Z=n;function jt(W,oe){return t.getContext(W,oe)}try{const W={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${REVISION$1}`),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",Fe,!1),t.addEventListener("webglcontextcreationerror",je,!1),Z===null){const oe="webgl2";if(Z=jt(oe,W),Z===null)throw jt(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(W){throw console.error("THREE.WebGLRenderer: "+W.message),W}let ot,Ye,$e,dt,Ue,K,G,he,Ee,Te,ve,Ne,Pe,De,ct,Re,Ge,Qe,et,Ve,ut,at,Ct,se;function Ie(){ot=new WebGLExtensions(Z),ot.init(),at=new WebGLUtils(Z,ot),Ye=new WebGLCapabilities(Z,ot,e,at),$e=new WebGLState(Z,ot),Ye.reverseDepthBuffer&&m&&$e.buffers.depth.setReversed(!0),dt=new WebGLInfo(Z),Ue=new WebGLProperties,K=new WebGLTextures(Z,ot,$e,Ue,Ye,at,dt),G=new WebGLCubeMaps(A),he=new WebGLCubeUVMaps(A),Ee=new WebGLAttributes(Z),Ct=new WebGLBindingStates(Z,Ee),Te=new WebGLGeometries(Z,Ee,dt,Ct),ve=new WebGLObjects(Z,Te,Ee,dt),et=new WebGLMorphtargets(Z,Ye,K),Re=new WebGLClipping(Ue),Ne=new WebGLPrograms(A,G,he,ot,Ye,Ct,Re),Pe=new WebGLMaterials(A,Ue),De=new WebGLRenderLists,ct=new WebGLRenderStates(ot),Qe=new WebGLBackground(A,G,he,$e,ve,y,u),Ge=new WebGLShadowMap(A,ve,Ye),se=new WebGLUniformsGroups(Z,dt,Ye,$e),Ve=new WebGLBufferRenderer(Z,ot,dt),ut=new WebGLIndexedBufferRenderer(Z,ot,dt),dt.programs=Ne.programs,A.capabilities=Ye,A.extensions=ot,A.properties=Ue,A.renderLists=De,A.shadowMap=Ge,A.state=$e,A.info=dt}Ie();const ye=new WebXRManager(A,Z);this.xr=ye,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const W=ot.get("WEBGL_lose_context");W&&W.loseContext()},this.forceContextRestore=function(){const W=ot.get("WEBGL_lose_context");W&&W.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(W){W!==void 0&&(P=W,this.setSize(D,V,!1))},this.getSize=function(W){return W.set(D,V)},this.setSize=function(W,oe,ge=!0){if(ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}D=W,V=oe,t.width=Math.floor(W*P),t.height=Math.floor(oe*P),ge===!0&&(t.style.width=W+"px",t.style.height=oe+"px"),this.setViewport(0,0,W,oe)},this.getDrawingBufferSize=function(W){return W.set(D*P,V*P).floor()},this.setDrawingBufferSize=function(W,oe,ge){D=W,V=oe,P=ge,t.width=Math.floor(W*ge),t.height=Math.floor(oe*ge),this.setViewport(0,0,W,oe)},this.getCurrentViewport=function(W){return W.copy(q)},this.getViewport=function(W){return W.copy(z)},this.setViewport=function(W,oe,ge,xe){W.isVector4?z.set(W.x,W.y,W.z,W.w):z.set(W,oe,ge,xe),$e.viewport(q.copy(z).multiplyScalar(P).round())},this.getScissor=function(W){return W.copy(te)},this.setScissor=function(W,oe,ge,xe){W.isVector4?te.set(W.x,W.y,W.z,W.w):te.set(W,oe,ge,xe),$e.scissor(J.copy(te).multiplyScalar(P).round())},this.getScissorTest=function(){return ne},this.setScissorTest=function(W){$e.setScissorTest(ne=W)},this.setOpaqueSort=function(W){I=W},this.setTransparentSort=function(W){B=W},this.getClearColor=function(W){return W.copy(Qe.getClearColor())},this.setClearColor=function(){Qe.setClearColor(...arguments)},this.getClearAlpha=function(){return Qe.getClearAlpha()},this.setClearAlpha=function(){Qe.setClearAlpha(...arguments)},this.clear=function(W=!0,oe=!0,ge=!0){let xe=0;if(W){let le=!1;if(j!==null){const Ce=j.texture.format;le=Ce===RGBAIntegerFormat||Ce===RGIntegerFormat||Ce===RedIntegerFormat}if(le){const Ce=j.texture.type,Le=Ce===UnsignedByteType$1||Ce===UnsignedIntType||Ce===UnsignedShortType||Ce===UnsignedInt248Type||Ce===UnsignedShort4444Type||Ce===UnsignedShort5551Type,ke=Qe.getClearColor(),ze=Qe.getClearAlpha(),nt=ke.r,Ke=ke.g,Xe=ke.b;Le?(_[0]=nt,_[1]=Ke,_[2]=Xe,_[3]=ze,Z.clearBufferuiv(Z.COLOR,0,_)):(E[0]=nt,E[1]=Ke,E[2]=Xe,E[3]=ze,Z.clearBufferiv(Z.COLOR,0,E))}else xe|=Z.COLOR_BUFFER_BIT}oe&&(xe|=Z.DEPTH_BUFFER_BIT),ge&&(xe|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",Fe,!1),t.removeEventListener("webglcontextcreationerror",je,!1),Qe.dispose(),De.dispose(),ct.dispose(),Ue.dispose(),G.dispose(),he.dispose(),ve.dispose(),Ct.dispose(),se.dispose(),Ne.dispose(),ye.dispose(),ye.removeEventListener("sessionstart",Yt),ye.removeEventListener("sessionend",ri),pi.stop()};function we(W){W.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function Fe(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const W=dt.autoReset,oe=Ge.enabled,ge=Ge.autoUpdate,xe=Ge.needsUpdate,le=Ge.type;Ie(),dt.autoReset=W,Ge.enabled=oe,Ge.autoUpdate=ge,Ge.needsUpdate=xe,Ge.type=le}function je(W){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",W.statusMessage)}function lt(W){const oe=W.target;oe.removeEventListener("dispose",lt),Lt(oe)}function Lt(W){Ht(W),Ue.remove(W)}function Ht(W){const oe=Ue.get(W).programs;oe!==void 0&&(oe.forEach(function(ge){Ne.releaseProgram(ge)}),W.isShaderMaterial&&Ne.releaseShaderCache(W))}this.renderBufferDirect=function(W,oe,ge,xe,le,Ce){oe===null&&(oe=it);const Le=le.isMesh&&le.matrixWorld.determinant()<0,ke=Vn(W,oe,ge,xe,le);$e.setMaterial(xe,Le);let ze=ge.index,nt=1;if(xe.wireframe===!0){if(ze=Te.getWireframeAttribute(ge),ze===void 0)return;nt=2}const Ke=ge.drawRange,Xe=ge.attributes.position;let ft=Ke.start*nt,Et=(Ke.start+Ke.count)*nt;Ce!==null&&(ft=Math.max(ft,Ce.start*nt),Et=Math.min(Et,(Ce.start+Ce.count)*nt)),ze!==null?(ft=Math.max(ft,0),Et=Math.min(Et,ze.count)):Xe!=null&&(ft=Math.max(ft,0),Et=Math.min(Et,Xe.count));const Ft=Et-ft;if(Ft<0||Ft===1/0)return;Ct.setup(le,xe,ke,ge,ze);let xt,vt=Ve;if(ze!==null&&(xt=Ee.get(ze),vt=ut,vt.setIndex(xt)),le.isMesh)xe.wireframe===!0?($e.setLineWidth(xe.wireframeLinewidth*Oe()),vt.setMode(Z.LINES)):vt.setMode(Z.TRIANGLES);else if(le.isLine){let Ze=xe.linewidth;Ze===void 0&&(Ze=1),$e.setLineWidth(Ze*Oe()),le.isLineSegments?vt.setMode(Z.LINES):le.isLineLoop?vt.setMode(Z.LINE_LOOP):vt.setMode(Z.LINE_STRIP)}else le.isPoints?vt.setMode(Z.POINTS):le.isSprite&&vt.setMode(Z.TRIANGLES);if(le.isBatchedMesh)if(le._multiDrawInstances!==null)warnOnce("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),vt.renderMultiDrawInstances(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount,le._multiDrawInstances);else if(ot.get("WEBGL_multi_draw"))vt.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else{const Ze=le._multiDrawStarts,Ot=le._multiDrawCounts,bt=le._multiDrawCount,ci=ze?Ee.get(ze).bytesPerElement:1,dn=Ue.get(xe).currentProgram.getUniforms();for(let kt=0;kt<bt;kt++)dn.setValue(Z,"_gl_DrawID",kt),vt.render(Ze[kt]/ci,Ot[kt])}else if(le.isInstancedMesh)vt.renderInstances(ft,Ft,le.count);else if(ge.isInstancedBufferGeometry){const Ze=ge._maxInstanceCount!==void 0?ge._maxInstanceCount:1/0,Ot=Math.min(ge.instanceCount,Ze);vt.renderInstances(ft,Ft,Ot)}else vt.render(ft,Ft)};function _t(W,oe,ge){W.transparent===!0&&W.side===DoubleSide$1&&W.forceSinglePass===!1?(W.side=BackSide$1,W.needsUpdate=!0,un(W,oe,ge),W.side=FrontSide$1,W.needsUpdate=!0,un(W,oe,ge),W.side=DoubleSide$1):un(W,oe,ge)}this.compile=function(W,oe,ge=null){ge===null&&(ge=W),b=ct.get(ge),b.init(oe),T.push(b),ge.traverseVisible(function(le){le.isLight&&le.layers.test(oe.layers)&&(b.pushLight(le),le.castShadow&&b.pushShadow(le))}),W!==ge&&W.traverseVisible(function(le){le.isLight&&le.layers.test(oe.layers)&&(b.pushLight(le),le.castShadow&&b.pushShadow(le))}),b.setupLights();const xe=new Set;return W.traverse(function(le){if(!(le.isMesh||le.isPoints||le.isLine||le.isSprite))return;const Ce=le.material;if(Ce)if(Array.isArray(Ce))for(let Le=0;Le<Ce.length;Le++){const ke=Ce[Le];_t(ke,ge,le),xe.add(ke)}else _t(Ce,ge,le),xe.add(Ce)}),b=T.pop(),xe},this.compileAsync=function(W,oe,ge=null){const xe=this.compile(W,oe,ge);return new Promise(le=>{function Ce(){if(xe.forEach(function(Le){Ue.get(Le).currentProgram.isReady()&&xe.delete(Le)}),xe.size===0){le(W);return}setTimeout(Ce,10)}ot.get("KHR_parallel_shader_compile")!==null?Ce():setTimeout(Ce,10)})};let vi=null;function Jt(W){vi&&vi(W)}function Yt(){pi.stop()}function ri(){pi.start()}const pi=new WebGLAnimation;pi.setAnimationLoop(Jt),typeof self<"u"&&pi.setContext(self),this.setAnimationLoop=function(W){vi=W,ye.setAnimationLoop(W),W===null?pi.stop():pi.start()},ye.addEventListener("sessionstart",Yt),ye.addEventListener("sessionend",ri),this.render=function(W,oe){if(oe!==void 0&&oe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(W.matrixWorldAutoUpdate===!0&&W.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),ye.enabled===!0&&ye.isPresenting===!0&&(ye.cameraAutoUpdate===!0&&ye.updateCamera(oe),oe=ye.getCamera()),W.isScene===!0&&W.onBeforeRender(A,W,oe,j),b=ct.get(W,T.length),b.init(oe),T.push(b),Ae.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),Q.setFromProjectionMatrix(Ae),me=this.localClippingEnabled,ue=Re.init(this.clippingPlanes,me),S=De.get(W,C.length),S.init(),C.push(S),ye.enabled===!0&&ye.isPresenting===!0){const Ce=A.xr.getDepthSensingMesh();Ce!==null&&In(Ce,oe,-1/0,A.sortObjects)}In(W,oe,0,A.sortObjects),S.finish(),A.sortObjects===!0&&S.sort(I,B),st=ye.enabled===!1||ye.isPresenting===!1||ye.hasDepthSensing()===!1,st&&Qe.addToRenderList(S,W),this.info.render.frame++,ue===!0&&Re.beginShadows();const ge=b.state.shadowsArray;Ge.render(ge,W,oe),ue===!0&&Re.endShadows(),this.info.autoReset===!0&&this.info.reset();const xe=S.opaque,le=S.transmissive;if(b.setupLights(),oe.isArrayCamera){const Ce=oe.cameras;if(le.length>0)for(let Le=0,ke=Ce.length;Le<ke;Le++){const ze=Ce[Le];Ts(xe,le,W,ze)}st&&Qe.render(W);for(let Le=0,ke=Ce.length;Le<ke;Le++){const ze=Ce[Le];Ms(S,W,ze,ze.viewport)}}else le.length>0&&Ts(xe,le,W,oe),st&&Qe.render(W),Ms(S,W,oe);j!==null&&k===0&&(K.updateMultisampleRenderTarget(j),K.updateRenderTargetMipmap(j)),W.isScene===!0&&W.onAfterRender(A,W,oe),Ct.resetDefaultState(),F=-1,U=null,T.pop(),T.length>0?(b=T[T.length-1],ue===!0&&Re.setGlobalState(A.clippingPlanes,b.state.camera)):b=null,C.pop(),C.length>0?S=C[C.length-1]:S=null};function In(W,oe,ge,xe){if(W.visible===!1)return;if(W.layers.test(oe.layers)){if(W.isGroup)ge=W.renderOrder;else if(W.isLOD)W.autoUpdate===!0&&W.update(oe);else if(W.isLight)b.pushLight(W),W.castShadow&&b.pushShadow(W);else if(W.isSprite){if(!W.frustumCulled||Q.intersectsSprite(W)){xe&&Be.setFromMatrixPosition(W.matrixWorld).applyMatrix4(Ae);const Le=ve.update(W),ke=W.material;ke.visible&&S.push(W,Le,ke,ge,Be.z,null)}}else if((W.isMesh||W.isLine||W.isPoints)&&(!W.frustumCulled||Q.intersectsObject(W))){const Le=ve.update(W),ke=W.material;if(xe&&(W.boundingSphere!==void 0?(W.boundingSphere===null&&W.computeBoundingSphere(),Be.copy(W.boundingSphere.center)):(Le.boundingSphere===null&&Le.computeBoundingSphere(),Be.copy(Le.boundingSphere.center)),Be.applyMatrix4(W.matrixWorld).applyMatrix4(Ae)),Array.isArray(ke)){const ze=Le.groups;for(let nt=0,Ke=ze.length;nt<Ke;nt++){const Xe=ze[nt],ft=ke[Xe.materialIndex];ft&&ft.visible&&S.push(W,Le,ft,ge,Be.z,Xe)}}else ke.visible&&S.push(W,Le,ke,ge,Be.z,null)}}const Ce=W.children;for(let Le=0,ke=Ce.length;Le<ke;Le++)In(Ce[Le],oe,ge,xe)}function Ms(W,oe,ge,xe){const le=W.opaque,Ce=W.transmissive,Le=W.transparent;b.setupLightsView(ge),ue===!0&&Re.setGlobalState(A.clippingPlanes,ge),xe&&$e.viewport(q.copy(xe)),le.length>0&&jn(le,oe,ge),Ce.length>0&&jn(Ce,oe,ge),Le.length>0&&jn(Le,oe,ge),$e.buffers.depth.setTest(!0),$e.buffers.depth.setMask(!0),$e.buffers.color.setMask(!0),$e.setPolygonOffset(!1)}function Ts(W,oe,ge,xe){if((ge.isScene===!0?ge.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[xe.id]===void 0&&(b.state.transmissionRenderTarget[xe.id]=new WebGLRenderTarget$1(1,1,{generateMipmaps:!0,type:ot.has("EXT_color_buffer_half_float")||ot.has("EXT_color_buffer_float")?HalfFloatType$1:UnsignedByteType$1,minFilter:LinearMipmapLinearFilter$1,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement$1.workingColorSpace}));const Ce=b.state.transmissionRenderTarget[xe.id],Le=xe.viewport||q;Ce.setSize(Le.z*A.transmissionResolutionScale,Le.w*A.transmissionResolutionScale);const ke=A.getRenderTarget();A.setRenderTarget(Ce),A.getClearColor(Y),$=A.getClearAlpha(),$<1&&A.setClearColor(16777215,.5),A.clear(),st&&Qe.render(ge);const ze=A.toneMapping;A.toneMapping=NoToneMapping;const nt=xe.viewport;if(xe.viewport!==void 0&&(xe.viewport=void 0),b.setupLightsView(xe),ue===!0&&Re.setGlobalState(A.clippingPlanes,xe),jn(W,ge,xe),K.updateMultisampleRenderTarget(Ce),K.updateRenderTargetMipmap(Ce),ot.has("WEBGL_multisampled_render_to_texture")===!1){let Ke=!1;for(let Xe=0,ft=oe.length;Xe<ft;Xe++){const Et=oe[Xe],Ft=Et.object,xt=Et.geometry,vt=Et.material,Ze=Et.group;if(vt.side===DoubleSide$1&&Ft.layers.test(xe.layers)){const Ot=vt.side;vt.side=BackSide$1,vt.needsUpdate=!0,ln(Ft,ge,xe,xt,vt,Ze),vt.side=Ot,vt.needsUpdate=!0,Ke=!0}}Ke===!0&&(K.updateMultisampleRenderTarget(Ce),K.updateRenderTargetMipmap(Ce))}A.setRenderTarget(ke),A.setClearColor(Y,$),nt!==void 0&&(xe.viewport=nt),A.toneMapping=ze}function jn(W,oe,ge){const xe=oe.isScene===!0?oe.overrideMaterial:null;for(let le=0,Ce=W.length;le<Ce;le++){const Le=W[le],ke=Le.object,ze=Le.geometry,nt=Le.group;let Ke=Le.material;Ke.allowOverride===!0&&xe!==null&&(Ke=xe),ke.layers.test(ge.layers)&&ln(ke,oe,ge,ze,Ke,nt)}}function ln(W,oe,ge,xe,le,Ce){W.onBeforeRender(A,oe,ge,xe,le,Ce),W.modelViewMatrix.multiplyMatrices(ge.matrixWorldInverse,W.matrixWorld),W.normalMatrix.getNormalMatrix(W.modelViewMatrix),le.onBeforeRender(A,oe,ge,xe,W,Ce),le.transparent===!0&&le.side===DoubleSide$1&&le.forceSinglePass===!1?(le.side=BackSide$1,le.needsUpdate=!0,A.renderBufferDirect(ge,oe,xe,le,W,Ce),le.side=FrontSide$1,le.needsUpdate=!0,A.renderBufferDirect(ge,oe,xe,le,W,Ce),le.side=DoubleSide$1):A.renderBufferDirect(ge,oe,xe,le,W,Ce),W.onAfterRender(A,oe,ge,xe,le,Ce)}function un(W,oe,ge){oe.isScene!==!0&&(oe=it);const xe=Ue.get(W),le=b.state.lights,Ce=b.state.shadowsArray,Le=le.state.version,ke=Ne.getParameters(W,le.state,Ce,oe,ge),ze=Ne.getProgramCacheKey(ke);let nt=xe.programs;xe.environment=W.isMeshStandardMaterial?oe.environment:null,xe.fog=oe.fog,xe.envMap=(W.isMeshStandardMaterial?he:G).get(W.envMap||xe.environment),xe.envMapRotation=xe.environment!==null&&W.envMap===null?oe.environmentRotation:W.envMapRotation,nt===void 0&&(W.addEventListener("dispose",lt),nt=new Map,xe.programs=nt);let Ke=nt.get(ze);if(Ke!==void 0){if(xe.currentProgram===Ke&&xe.lightsStateVersion===Le)return $i(W,ke),Ke}else ke.uniforms=Ne.getUniforms(W),W.onBeforeCompile(ke,A),Ke=Ne.acquireProgram(ke,ze),nt.set(ze,Ke),xe.uniforms=ke.uniforms;const Xe=xe.uniforms;return(!W.isShaderMaterial&&!W.isRawShaderMaterial||W.clipping===!0)&&(Xe.clippingPlanes=Re.uniform),$i(W,ke),xe.needsLights=Wt(W),xe.lightsStateVersion=Le,xe.needsLights&&(Xe.ambientLightColor.value=le.state.ambient,Xe.lightProbe.value=le.state.probe,Xe.directionalLights.value=le.state.directional,Xe.directionalLightShadows.value=le.state.directionalShadow,Xe.spotLights.value=le.state.spot,Xe.spotLightShadows.value=le.state.spotShadow,Xe.rectAreaLights.value=le.state.rectArea,Xe.ltc_1.value=le.state.rectAreaLTC1,Xe.ltc_2.value=le.state.rectAreaLTC2,Xe.pointLights.value=le.state.point,Xe.pointLightShadows.value=le.state.pointShadow,Xe.hemisphereLights.value=le.state.hemi,Xe.directionalShadowMap.value=le.state.directionalShadowMap,Xe.directionalShadowMatrix.value=le.state.directionalShadowMatrix,Xe.spotShadowMap.value=le.state.spotShadowMap,Xe.spotLightMatrix.value=le.state.spotLightMatrix,Xe.spotLightMap.value=le.state.spotLightMap,Xe.pointShadowMap.value=le.state.pointShadowMap,Xe.pointShadowMatrix.value=le.state.pointShadowMatrix),xe.currentProgram=Ke,xe.uniformsList=null,Ke}function zi(W){if(W.uniformsList===null){const oe=W.currentProgram.getUniforms();W.uniformsList=WebGLUniforms.seqWithValue(oe.seq,W.uniforms)}return W.uniformsList}function $i(W,oe){const ge=Ue.get(W);ge.outputColorSpace=oe.outputColorSpace,ge.batching=oe.batching,ge.batchingColor=oe.batchingColor,ge.instancing=oe.instancing,ge.instancingColor=oe.instancingColor,ge.instancingMorph=oe.instancingMorph,ge.skinning=oe.skinning,ge.morphTargets=oe.morphTargets,ge.morphNormals=oe.morphNormals,ge.morphColors=oe.morphColors,ge.morphTargetsCount=oe.morphTargetsCount,ge.numClippingPlanes=oe.numClippingPlanes,ge.numIntersection=oe.numClipIntersection,ge.vertexAlphas=oe.vertexAlphas,ge.vertexTangents=oe.vertexTangents,ge.toneMapping=oe.toneMapping}function Vn(W,oe,ge,xe,le){oe.isScene!==!0&&(oe=it),K.resetTextureUnits();const Ce=oe.fog,Le=xe.isMeshStandardMaterial?oe.environment:null,ke=j===null?A.outputColorSpace:j.isXRRenderTarget===!0?j.texture.colorSpace:LinearSRGBColorSpace$1,ze=(xe.isMeshStandardMaterial?he:G).get(xe.envMap||Le),nt=xe.vertexColors===!0&&!!ge.attributes.color&&ge.attributes.color.itemSize===4,Ke=!!ge.attributes.tangent&&(!!xe.normalMap||xe.anisotropy>0),Xe=!!ge.morphAttributes.position,ft=!!ge.morphAttributes.normal,Et=!!ge.morphAttributes.color;let Ft=NoToneMapping;xe.toneMapped&&(j===null||j.isXRRenderTarget===!0)&&(Ft=A.toneMapping);const xt=ge.morphAttributes.position||ge.morphAttributes.normal||ge.morphAttributes.color,vt=xt!==void 0?xt.length:0,Ze=Ue.get(xe),Ot=b.state.lights;if(ue===!0&&(me===!0||W!==U)){const ei=W===U&&xe.id===F;Re.setState(xe,W,ei)}let bt=!1;xe.version===Ze.__version?(Ze.needsLights&&Ze.lightsStateVersion!==Ot.state.version||Ze.outputColorSpace!==ke||le.isBatchedMesh&&Ze.batching===!1||!le.isBatchedMesh&&Ze.batching===!0||le.isBatchedMesh&&Ze.batchingColor===!0&&le.colorTexture===null||le.isBatchedMesh&&Ze.batchingColor===!1&&le.colorTexture!==null||le.isInstancedMesh&&Ze.instancing===!1||!le.isInstancedMesh&&Ze.instancing===!0||le.isSkinnedMesh&&Ze.skinning===!1||!le.isSkinnedMesh&&Ze.skinning===!0||le.isInstancedMesh&&Ze.instancingColor===!0&&le.instanceColor===null||le.isInstancedMesh&&Ze.instancingColor===!1&&le.instanceColor!==null||le.isInstancedMesh&&Ze.instancingMorph===!0&&le.morphTexture===null||le.isInstancedMesh&&Ze.instancingMorph===!1&&le.morphTexture!==null||Ze.envMap!==ze||xe.fog===!0&&Ze.fog!==Ce||Ze.numClippingPlanes!==void 0&&(Ze.numClippingPlanes!==Re.numPlanes||Ze.numIntersection!==Re.numIntersection)||Ze.vertexAlphas!==nt||Ze.vertexTangents!==Ke||Ze.morphTargets!==Xe||Ze.morphNormals!==ft||Ze.morphColors!==Et||Ze.toneMapping!==Ft||Ze.morphTargetsCount!==vt)&&(bt=!0):(bt=!0,Ze.__version=xe.version);let ci=Ze.currentProgram;bt===!0&&(ci=un(xe,oe,le));let dn=!1,kt=!1,Hi=!1;const Dt=ci.getUniforms(),ui=Ze.uniforms;if($e.useProgram(ci.program)&&(dn=!0,kt=!0,Hi=!0),xe.id!==F&&(F=xe.id,kt=!0),dn||U!==W){$e.buffers.depth.getReversed()?(be.copy(W.projectionMatrix),toNormalizedProjectionMatrix(be),toReversedProjectionMatrix(be),Dt.setValue(Z,"projectionMatrix",be)):Dt.setValue(Z,"projectionMatrix",W.projectionMatrix),Dt.setValue(Z,"viewMatrix",W.matrixWorldInverse);const si=Dt.map.cameraPosition;si!==void 0&&si.setValue(Z,qe.setFromMatrixPosition(W.matrixWorld)),Ye.logarithmicDepthBuffer&&Dt.setValue(Z,"logDepthBufFC",2/(Math.log(W.far+1)/Math.LN2)),(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial)&&Dt.setValue(Z,"isOrthographic",W.isOrthographicCamera===!0),U!==W&&(U=W,kt=!0,Hi=!0)}if(le.isSkinnedMesh){Dt.setOptional(Z,le,"bindMatrix"),Dt.setOptional(Z,le,"bindMatrixInverse");const ei=le.skeleton;ei&&(ei.boneTexture===null&&ei.computeBoneTexture(),Dt.setValue(Z,"boneTexture",ei.boneTexture,K))}le.isBatchedMesh&&(Dt.setOptional(Z,le,"batchingTexture"),Dt.setValue(Z,"batchingTexture",le._matricesTexture,K),Dt.setOptional(Z,le,"batchingIdTexture"),Dt.setValue(Z,"batchingIdTexture",le._indirectTexture,K),Dt.setOptional(Z,le,"batchingColorTexture"),le._colorsTexture!==null&&Dt.setValue(Z,"batchingColorTexture",le._colorsTexture,K));const Kt=ge.morphAttributes;if((Kt.position!==void 0||Kt.normal!==void 0||Kt.color!==void 0)&&et.update(le,ge,ci),(kt||Ze.receiveShadow!==le.receiveShadow)&&(Ze.receiveShadow=le.receiveShadow,Dt.setValue(Z,"receiveShadow",le.receiveShadow)),xe.isMeshGouraudMaterial&&xe.envMap!==null&&(ui.envMap.value=ze,ui.flipEnvMap.value=ze.isCubeTexture&&ze.isRenderTargetTexture===!1?-1:1),xe.isMeshStandardMaterial&&xe.envMap===null&&oe.environment!==null&&(ui.envMapIntensity.value=oe.environmentIntensity),kt&&(Dt.setValue(Z,"toneMappingExposure",A.toneMappingExposure),Ze.needsLights&&hn(ui,Hi),Ce&&xe.fog===!0&&Pe.refreshFogUniforms(ui,Ce),Pe.refreshMaterialUniforms(ui,xe,P,V,b.state.transmissionRenderTarget[W.id]),WebGLUniforms.upload(Z,zi(Ze),ui,K)),xe.isShaderMaterial&&xe.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Z,zi(Ze),ui,K),xe.uniformsNeedUpdate=!1),xe.isSpriteMaterial&&Dt.setValue(Z,"center",le.center),Dt.setValue(Z,"modelViewMatrix",le.modelViewMatrix),Dt.setValue(Z,"normalMatrix",le.normalMatrix),Dt.setValue(Z,"modelMatrix",le.matrixWorld),xe.isShaderMaterial||xe.isRawShaderMaterial){const ei=xe.uniformsGroups;for(let si=0,ji=ei.length;si<ji;si++){const Wi=ei[si];se.update(Wi,ci),se.bind(Wi,ci)}}return ci}function hn(W,oe){W.ambientLightColor.needsUpdate=oe,W.lightProbe.needsUpdate=oe,W.directionalLights.needsUpdate=oe,W.directionalLightShadows.needsUpdate=oe,W.pointLights.needsUpdate=oe,W.pointLightShadows.needsUpdate=oe,W.spotLights.needsUpdate=oe,W.spotLightShadows.needsUpdate=oe,W.rectAreaLights.needsUpdate=oe,W.hemisphereLights.needsUpdate=oe}function Wt(W){return W.isMeshLambertMaterial||W.isMeshToonMaterial||W.isMeshPhongMaterial||W.isMeshStandardMaterial||W.isShadowMaterial||W.isShaderMaterial&&W.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return j},this.setRenderTargetTextures=function(W,oe,ge){const xe=Ue.get(W);xe.__autoAllocateDepthBuffer=W.resolveDepthBuffer===!1,xe.__autoAllocateDepthBuffer===!1&&(xe.__useRenderToTexture=!1),Ue.get(W.texture).__webglTexture=oe,Ue.get(W.depthTexture).__webglTexture=xe.__autoAllocateDepthBuffer?void 0:ge,xe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(W,oe){const ge=Ue.get(W);ge.__webglFramebuffer=oe,ge.__useDefaultFramebuffer=oe===void 0};const Cs=Z.createFramebuffer();this.setRenderTarget=function(W,oe=0,ge=0){j=W,L=oe,k=ge;let xe=!0,le=null,Ce=!1,Le=!1;if(W){const ze=Ue.get(W);if(ze.__useDefaultFramebuffer!==void 0)$e.bindFramebuffer(Z.FRAMEBUFFER,null),xe=!1;else if(ze.__webglFramebuffer===void 0)K.setupRenderTarget(W);else if(ze.__hasExternalTextures)K.rebindTextures(W,Ue.get(W.texture).__webglTexture,Ue.get(W.depthTexture).__webglTexture);else if(W.depthBuffer){const Xe=W.depthTexture;if(ze.__boundDepthTexture!==Xe){if(Xe!==null&&Ue.has(Xe)&&(W.width!==Xe.image.width||W.height!==Xe.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");K.setupDepthRenderbuffer(W)}}const nt=W.texture;(nt.isData3DTexture||nt.isDataArrayTexture||nt.isCompressedArrayTexture)&&(Le=!0);const Ke=Ue.get(W).__webglFramebuffer;W.isWebGLCubeRenderTarget?(Array.isArray(Ke[oe])?le=Ke[oe][ge]:le=Ke[oe],Ce=!0):W.samples>0&&K.useMultisampledRTT(W)===!1?le=Ue.get(W).__webglMultisampledFramebuffer:Array.isArray(Ke)?le=Ke[ge]:le=Ke,q.copy(W.viewport),J.copy(W.scissor),ee=W.scissorTest}else q.copy(z).multiplyScalar(P).floor(),J.copy(te).multiplyScalar(P).floor(),ee=ne;if(ge!==0&&(le=Cs),$e.bindFramebuffer(Z.FRAMEBUFFER,le)&&xe&&$e.drawBuffers(W,le),$e.viewport(q),$e.scissor(J),$e.setScissorTest(ee),Ce){const ze=Ue.get(W.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+oe,ze.__webglTexture,ge)}else if(Le){const ze=Ue.get(W.texture),nt=oe;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,ze.__webglTexture,ge,nt)}else if(W!==null&&ge!==0){const ze=Ue.get(W.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,ze.__webglTexture,ge)}F=-1},this.readRenderTargetPixels=function(W,oe,ge,xe,le,Ce,Le){if(!(W&&W.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ke=Ue.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&Le!==void 0&&(ke=ke[Le]),ke){$e.bindFramebuffer(Z.FRAMEBUFFER,ke);try{const ze=W.texture,nt=ze.format,Ke=ze.type;if(!Ye.textureFormatReadable(nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ye.textureTypeReadable(Ke)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe>=0&&oe<=W.width-xe&&ge>=0&&ge<=W.height-le&&Z.readPixels(oe,ge,xe,le,at.convert(nt),at.convert(Ke),Ce)}finally{const ze=j!==null?Ue.get(j).__webglFramebuffer:null;$e.bindFramebuffer(Z.FRAMEBUFFER,ze)}}},this.readRenderTargetPixelsAsync=async function(W,oe,ge,xe,le,Ce,Le){if(!(W&&W.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ke=Ue.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&Le!==void 0&&(ke=ke[Le]),ke)if(oe>=0&&oe<=W.width-xe&&ge>=0&&ge<=W.height-le){$e.bindFramebuffer(Z.FRAMEBUFFER,ke);const ze=W.texture,nt=ze.format,Ke=ze.type;if(!Ye.textureFormatReadable(nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ye.textureTypeReadable(Ke))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Xe=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Xe),Z.bufferData(Z.PIXEL_PACK_BUFFER,Ce.byteLength,Z.STREAM_READ),Z.readPixels(oe,ge,xe,le,at.convert(nt),at.convert(Ke),0);const ft=j!==null?Ue.get(j).__webglFramebuffer:null;$e.bindFramebuffer(Z.FRAMEBUFFER,ft);const Et=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await probeAsync(Z,Et,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Xe),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,Ce),Z.deleteBuffer(Xe),Z.deleteSync(Et),Ce}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(W,oe=null,ge=0){const xe=Math.pow(2,-ge),le=Math.floor(W.image.width*xe),Ce=Math.floor(W.image.height*xe),Le=oe!==null?oe.x:0,ke=oe!==null?oe.y:0;K.setTexture2D(W,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,ge,0,0,Le,ke,le,Ce),$e.unbindTexture()};const As=Z.createFramebuffer(),Gi=Z.createFramebuffer();this.copyTextureToTexture=function(W,oe,ge=null,xe=null,le=0,Ce=null){Ce===null&&(le!==0?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ce=le,le=0):Ce=0);let Le,ke,ze,nt,Ke,Xe,ft,Et,Ft;const xt=W.isCompressedTexture?W.mipmaps[Ce]:W.image;if(ge!==null)Le=ge.max.x-ge.min.x,ke=ge.max.y-ge.min.y,ze=ge.isBox3?ge.max.z-ge.min.z:1,nt=ge.min.x,Ke=ge.min.y,Xe=ge.isBox3?ge.min.z:0;else{const Kt=Math.pow(2,-le);Le=Math.floor(xt.width*Kt),ke=Math.floor(xt.height*Kt),W.isDataArrayTexture?ze=xt.depth:W.isData3DTexture?ze=Math.floor(xt.depth*Kt):ze=1,nt=0,Ke=0,Xe=0}xe!==null?(ft=xe.x,Et=xe.y,Ft=xe.z):(ft=0,Et=0,Ft=0);const vt=at.convert(oe.format),Ze=at.convert(oe.type);let Ot;oe.isData3DTexture?(K.setTexture3D(oe,0),Ot=Z.TEXTURE_3D):oe.isDataArrayTexture||oe.isCompressedArrayTexture?(K.setTexture2DArray(oe,0),Ot=Z.TEXTURE_2D_ARRAY):(K.setTexture2D(oe,0),Ot=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,oe.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,oe.unpackAlignment);const bt=Z.getParameter(Z.UNPACK_ROW_LENGTH),ci=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),dn=Z.getParameter(Z.UNPACK_SKIP_PIXELS),kt=Z.getParameter(Z.UNPACK_SKIP_ROWS),Hi=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,xt.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,xt.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,nt),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Ke),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Xe);const Dt=W.isDataArrayTexture||W.isData3DTexture,ui=oe.isDataArrayTexture||oe.isData3DTexture;if(W.isDepthTexture){const Kt=Ue.get(W),ei=Ue.get(oe),si=Ue.get(Kt.__renderTarget),ji=Ue.get(ei.__renderTarget);$e.bindFramebuffer(Z.READ_FRAMEBUFFER,si.__webglFramebuffer),$e.bindFramebuffer(Z.DRAW_FRAMEBUFFER,ji.__webglFramebuffer);for(let Wi=0;Wi<ze;Wi++)Dt&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Ue.get(W).__webglTexture,le,Xe+Wi),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Ue.get(oe).__webglTexture,Ce,Ft+Wi)),Z.blitFramebuffer(nt,Ke,Le,ke,ft,Et,Le,ke,Z.DEPTH_BUFFER_BIT,Z.NEAREST);$e.bindFramebuffer(Z.READ_FRAMEBUFFER,null),$e.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(le!==0||W.isRenderTargetTexture||Ue.has(W)){const Kt=Ue.get(W),ei=Ue.get(oe);$e.bindFramebuffer(Z.READ_FRAMEBUFFER,As),$e.bindFramebuffer(Z.DRAW_FRAMEBUFFER,Gi);for(let si=0;si<ze;si++)Dt?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Kt.__webglTexture,le,Xe+si):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Kt.__webglTexture,le),ui?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,ei.__webglTexture,Ce,Ft+si):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,ei.__webglTexture,Ce),le!==0?Z.blitFramebuffer(nt,Ke,Le,ke,ft,Et,Le,ke,Z.COLOR_BUFFER_BIT,Z.NEAREST):ui?Z.copyTexSubImage3D(Ot,Ce,ft,Et,Ft+si,nt,Ke,Le,ke):Z.copyTexSubImage2D(Ot,Ce,ft,Et,nt,Ke,Le,ke);$e.bindFramebuffer(Z.READ_FRAMEBUFFER,null),$e.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else ui?W.isDataTexture||W.isData3DTexture?Z.texSubImage3D(Ot,Ce,ft,Et,Ft,Le,ke,ze,vt,Ze,xt.data):oe.isCompressedArrayTexture?Z.compressedTexSubImage3D(Ot,Ce,ft,Et,Ft,Le,ke,ze,vt,xt.data):Z.texSubImage3D(Ot,Ce,ft,Et,Ft,Le,ke,ze,vt,Ze,xt):W.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Ce,ft,Et,Le,ke,vt,Ze,xt.data):W.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Ce,ft,Et,xt.width,xt.height,vt,xt.data):Z.texSubImage2D(Z.TEXTURE_2D,Ce,ft,Et,Le,ke,vt,Ze,xt);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,bt),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,ci),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,dn),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,kt),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Hi),Ce===0&&oe.generateMipmaps&&Z.generateMipmap(Ot),$e.unbindTexture()},this.copyTextureToTexture3D=function(W,oe,ge=null,xe=null,le=0){return warnOnce('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(W,oe,ge,xe,le)},this.initRenderTarget=function(W){Ue.get(W).__webglFramebuffer===void 0&&K.setupRenderTarget(W)},this.initTexture=function(W){W.isCubeTexture?K.setTextureCube(W,0):W.isData3DTexture?K.setTexture3D(W,0):W.isDataArrayTexture||W.isCompressedArrayTexture?K.setTexture2DArray(W,0):K.setTexture2D(W,0),$e.unbindTexture()},this.resetState=function(){L=0,k=0,j=null,$e.reset(),Ct.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem$1}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=ColorManagement$1._getDrawingBufferColorSpace(e),t.unpackColorSpace=ColorManagement$1._getUnpackColorSpace()}}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="175",MOUSE={ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,AddEquation=100,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,LessEqualDepth=3,MultiplyOperation=0,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,FloatType=1015,HalfFloatType=1016,RGBAFormat=1023,RedFormat=1028,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,TangentSpaceNormalMap=0,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",KeepStencilOp=7680,AlwaysStencilFunc=519,StaticDrawUsage=35044,WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class EventDispatcher{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(_lut[i&255]+_lut[i>>8&255]+_lut[i>>16&255]+_lut[i>>24&255]+"-"+_lut[e&255]+_lut[e>>8&255]+"-"+_lut[e>>16&15|64]+_lut[e>>24&255]+"-"+_lut[t&63|128]+_lut[t>>8&255]+"-"+_lut[t>>16&255]+_lut[t>>24&255]+_lut[n&255]+_lut[n>>8&255]+_lut[n>>16&255]+_lut[n>>24&255]).toLowerCase()}function clamp(i,e,t){return Math.max(e,Math.min(t,i))}function euclideanModulo(i,e){return(i%e+e)%e}function mapLinear(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function inverseLerp(i,e,t){return i!==e?(t-i)/(e-i):0}function lerp(i,e,t){return(1-t)*i+t*e}function damp(i,e,t,n){return lerp(i,e,1-Math.exp(-t*n))}function pingpong(i,e=1){return e-Math.abs(euclideanModulo(i,e*2)-e)}function smoothstep(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function smootherstep(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function randInt(i,e){return i+Math.floor(Math.random()*(e-i+1))}function randFloat(i,e){return i+Math.random()*(e-i)}function randFloatSpread(i){return i*(.5-Math.random())}function seededRandom(i){i!==void 0&&(_seed=i);let e=_seed+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function degToRad(i){return i*DEG2RAD}function radToDeg(i){return i*RAD2DEG}function isPowerOfTwo(i){return(i&i-1)===0&&i!==0}function ceilPowerOfTwo(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function floorPowerOfTwo(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function setQuaternionFromProperEuler(i,e,t,n,r){const s=Math.cos,o=Math.sin,l=s(t/2),u=o(t/2),d=s((e+n)/2),p=o((e+n)/2),g=s((e-n)/2),m=o((e-n)/2),y=s((n-e)/2),_=o((n-e)/2);switch(r){case"XYX":i.set(l*p,u*g,u*m,l*d);break;case"YZY":i.set(u*m,l*p,u*g,l*d);break;case"ZXZ":i.set(u*g,u*m,l*p,l*d);break;case"XZX":i.set(l*p,u*_,u*y,l*d);break;case"YXY":i.set(u*y,l*p,u*_,l*d);break;case"ZYZ":i.set(u*_,u*y,l*p,l*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function denormalize(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function normalize(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(e=0,t=0){Vector2.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=clamp(this.x,e.x,t.x),this.y=clamp(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=clamp(this.x,e,t),this.y=clamp(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(clamp(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(e,t,n,r,s,o,l,u,d){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,u,d)}set(e,t,n,r,s,o,l,u,d){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=s,p[5]=u,p[6]=n,p[7]=o,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[3],u=n[6],d=n[1],p=n[4],g=n[7],m=n[2],y=n[5],_=n[8],E=r[0],S=r[3],b=r[6],C=r[1],T=r[4],A=r[7],N=r[2],L=r[5],k=r[8];return s[0]=o*E+l*C+u*N,s[3]=o*S+l*T+u*L,s[6]=o*b+l*A+u*k,s[1]=d*E+p*C+g*N,s[4]=d*S+p*T+g*L,s[7]=d*b+p*A+g*k,s[2]=m*E+y*C+_*N,s[5]=m*S+y*T+_*L,s[8]=m*b+y*A+_*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],p=e[8];return t*o*p-t*l*d-n*s*p+n*l*u+r*s*d-r*o*u}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],p=e[8],g=p*o-l*d,m=l*u-p*s,y=d*s-o*u,_=t*g+n*m+r*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/_;return e[0]=g*E,e[1]=(r*d-p*n)*E,e[2]=(l*n-r*o)*E,e[3]=m*E,e[4]=(p*t-r*u)*E,e[5]=(r*s-l*t)*E,e[6]=y*E,e[7]=(n*u-d*t)*E,e[8]=(o*t-n*s)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,l){const u=Math.cos(s),d=Math.sin(s);return this.set(n*u,n*d,-n*(u*o+d*l)+o+e,-r*d,r*u,-r*(-d*o+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(_m3.makeScale(e,t)),this}rotate(e){return this.premultiply(_m3.makeRotation(-e)),this}translate(e,t){return this.premultiply(_m3.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function createElementNS(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}const LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const i={enabled:!0,workingColorSpace:LinearSRGBColorSpace,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===SRGBTransfer&&(r.r=SRGBToLinear(r.r),r.g=SRGBToLinear(r.g),r.b=SRGBToLinear(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===SRGBTransfer&&(r.r=LinearToSRGB(r.r),r.g=LinearToSRGB(r.g),r.b=LinearToSRGB(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===NoColorSpace?LinearTransfer:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[LinearSRGBColorSpace]:{primaries:e,whitePoint:n,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}},[SRGBColorSpace]:{primaries:e,whitePoint:n,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}}}),i}const ColorManagement=createColorManagement();function SRGBToLinear(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function LinearToSRGB(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=e.width,_canvas.height=e.height;const r=_canvas.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=_canvas}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=createElementNS("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=SRGBToLinear(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(SRGBToLinear(t[n]/255)*255):t[n]=SRGBToLinear(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _sourceId=0;class Source{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(serializeImage(r[o].image)):s.push(serializeImage(r[o]))}else s=serializeImage(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function serializeImage(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?ImageUtils.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher{constructor(e=Texture.DEFAULT_IMAGE,t=Texture.DEFAULT_MAPPING,n=ClampToEdgeWrapping,r=ClampToEdgeWrapping,s=LinearFilter,o=LinearMipmapLinearFilter,l=RGBAFormat,u=UnsignedByteType,d=Texture.DEFAULT_ANISOTROPY,p=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==UVMapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(e=0,t=0,n=0,r=1){Vector4.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const u=e.elements,d=u[0],p=u[4],g=u[8],m=u[1],y=u[5],_=u[9],E=u[2],S=u[6],b=u[10];if(Math.abs(p-m)<.01&&Math.abs(g-E)<.01&&Math.abs(_-S)<.01){if(Math.abs(p+m)<.1&&Math.abs(g+E)<.1&&Math.abs(_+S)<.1&&Math.abs(d+y+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const T=(d+1)/2,A=(y+1)/2,N=(b+1)/2,L=(p+m)/4,k=(g+E)/4,j=(_+S)/4;return T>A&&T>N?T<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(T),r=L/n,s=k/n):A>N?A<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(A),n=L/r,s=j/r):N<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(N),n=k/s,r=j/s),this.set(n,r,s,t),this}let C=Math.sqrt((S-_)*(S-_)+(g-E)*(g-E)+(m-p)*(m-p));return Math.abs(C)<.001&&(C=1),this.x=(S-_)/C,this.y=(g-E)/C,this.z=(m-p)/C,this.w=Math.acos((d+y+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=clamp(this.x,e.x,t.x),this.y=clamp(this.y,e.y,t.y),this.z=clamp(this.z,e.z,t.z),this.w=clamp(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=clamp(this.x,e,t),this.y=clamp(this.y,e,t),this.z=clamp(this.z,e,t),this.w=clamp(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(clamp(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Texture(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let l=0;l<o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Source(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Quaternion{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,l){let u=n[r+0],d=n[r+1],p=n[r+2],g=n[r+3];const m=s[o+0],y=s[o+1],_=s[o+2],E=s[o+3];if(l===0){e[t+0]=u,e[t+1]=d,e[t+2]=p,e[t+3]=g;return}if(l===1){e[t+0]=m,e[t+1]=y,e[t+2]=_,e[t+3]=E;return}if(g!==E||u!==m||d!==y||p!==_){let S=1-l;const b=u*m+d*y+p*_+g*E,C=b>=0?1:-1,T=1-b*b;if(T>Number.EPSILON){const N=Math.sqrt(T),L=Math.atan2(N,b*C);S=Math.sin(S*L)/N,l=Math.sin(l*L)/N}const A=l*C;if(u=u*S+m*A,d=d*S+y*A,p=p*S+_*A,g=g*S+E*A,S===1-l){const N=1/Math.sqrt(u*u+d*d+p*p+g*g);u*=N,d*=N,p*=N,g*=N}}e[t]=u,e[t+1]=d,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,r,s,o){const l=n[r],u=n[r+1],d=n[r+2],p=n[r+3],g=s[o],m=s[o+1],y=s[o+2],_=s[o+3];return e[t]=l*_+p*g+u*y-d*m,e[t+1]=u*_+p*m+d*g-l*y,e[t+2]=d*_+p*y+l*m-u*g,e[t+3]=p*_-l*g-u*m-d*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,u=Math.sin,d=l(n/2),p=l(r/2),g=l(s/2),m=u(n/2),y=u(r/2),_=u(s/2);switch(o){case"XYZ":this._x=m*p*g+d*y*_,this._y=d*y*g-m*p*_,this._z=d*p*_+m*y*g,this._w=d*p*g-m*y*_;break;case"YXZ":this._x=m*p*g+d*y*_,this._y=d*y*g-m*p*_,this._z=d*p*_-m*y*g,this._w=d*p*g+m*y*_;break;case"ZXY":this._x=m*p*g-d*y*_,this._y=d*y*g+m*p*_,this._z=d*p*_+m*y*g,this._w=d*p*g-m*y*_;break;case"ZYX":this._x=m*p*g-d*y*_,this._y=d*y*g+m*p*_,this._z=d*p*_-m*y*g,this._w=d*p*g+m*y*_;break;case"YZX":this._x=m*p*g+d*y*_,this._y=d*y*g+m*p*_,this._z=d*p*_-m*y*g,this._w=d*p*g-m*y*_;break;case"XZY":this._x=m*p*g-d*y*_,this._y=d*y*g-m*p*_,this._z=d*p*_+m*y*g,this._w=d*p*g+m*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],l=t[5],u=t[9],d=t[2],p=t[6],g=t[10],m=n+l+g;if(m>0){const y=.5/Math.sqrt(m+1);this._w=.25/y,this._x=(p-u)*y,this._y=(s-d)*y,this._z=(o-r)*y}else if(n>l&&n>g){const y=2*Math.sqrt(1+n-l-g);this._w=(p-u)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+d)/y}else if(l>g){const y=2*Math.sqrt(1+l-n-g);this._w=(s-d)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(u+p)/y}else{const y=2*Math.sqrt(1+g-n-l);this._w=(o-r)/y,this._x=(s+d)/y,this._y=(u+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,l=t._x,u=t._y,d=t._z,p=t._w;return this._x=n*p+o*l+r*d-s*u,this._y=r*p+o*u+s*l-n*d,this._z=s*p+o*d+n*u-r*l,this._w=o*p-n*l-r*u-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+n*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*n+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const d=Math.sqrt(u),p=Math.atan2(d,l),g=Math.sin((1-t)*p)/d,m=Math.sin(t*p)/d;return this._w=o*g+this._w*m,this._x=n*g+this._x*m,this._y=r*g+this._y*m,this._z=s*g+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(e=0,t=0,n=0){Vector3.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_quaternion$4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,l=e.z,u=e.w,d=2*(o*r-l*n),p=2*(l*t-s*r),g=2*(s*n-o*t);return this.x=t+u*d+o*g-l*p,this.y=n+u*p+l*d-s*g,this.z=r+u*g+s*p-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=clamp(this.x,e.x,t.x),this.y=clamp(this.y,e.y,t.y),this.z=clamp(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=clamp(this.x,e,t),this.y=clamp(this.y,e,t),this.z=clamp(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(clamp(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,l=t.y,u=t.z;return this.x=r*u-s*l,this.y=s*o-n*u,this.z=n*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return _vector$c.copy(this).projectOnVector(e),this.sub(_vector$c)}reflect(e){return this.sub(_vector$c.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(e=new Vector3(1/0,1/0,1/0),t=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(_vector$b.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(_vector$b.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_vector$b.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,_vector$b):_vector$b.fromBufferAttribute(s,o),_vector$b.applyMatrix4(e.matrixWorld),this.expandByPoint(_vector$b);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),_box$4.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),_box$4.copy(n.boundingBox)),_box$4.applyMatrix4(e.matrixWorld),this.union(_box$4)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,_vector$b),_vector$b.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(e.a,_center),_v1$7.subVectors(e.b,_center),_v2$4.subVectors(e.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let t=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(t,_v0$2,_v1$7,_v2$4,_extents)||(t=[1,0,0,0,1,0,0,0,1],!satForAxes(t,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),t=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(t,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_vector$b).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(_vector$b).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_points),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){_testAxis.fromArray(i,s);const l=r.x*Math.abs(_testAxis.x)+r.y*Math.abs(_testAxis.y)+r.z*Math.abs(_testAxis.z),u=e.dot(_testAxis),d=t.dot(_testAxis),p=n.dot(_testAxis);if(Math.max(-Math.max(u,d,p),Math.min(u,d,p))>l)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(e=new Vector3,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):_box$3.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_v1$6.subVectors(e,this.center);const t=_v1$6.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(_v1$6,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(_v2$3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_v1$6.copy(e.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(e.center).sub(_v2$3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(e=new Vector3,t=new Vector3(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_vector$a)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=_vector$a.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_vector$a.copy(this.origin).addScaledVector(this.direction,t),_vector$a.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){_segCenter.copy(e).add(t).multiplyScalar(.5),_segDir.copy(t).sub(e).normalize(),_diff.copy(this.origin).sub(_segCenter);const s=e.distanceTo(t)*.5,o=-this.direction.dot(_segDir),l=_diff.dot(this.direction),u=-_diff.dot(_segDir),d=_diff.lengthSq(),p=Math.abs(1-o*o);let g,m,y,_;if(p>0)if(g=o*u-l,m=o*l-u,_=s*p,g>=0)if(m>=-_)if(m<=_){const E=1/p;g*=E,m*=E,y=g*(g+o*m+2*l)+m*(o*g+m+2*u)+d}else m=s,g=Math.max(0,-(o*m+l)),y=-g*g+m*(m+2*u)+d;else m=-s,g=Math.max(0,-(o*m+l)),y=-g*g+m*(m+2*u)+d;else m<=-_?(g=Math.max(0,-(-o*s+l)),m=g>0?-s:Math.min(Math.max(-s,-u),s),y=-g*g+m*(m+2*u)+d):m<=_?(g=0,m=Math.min(Math.max(-s,-u),s),y=m*(m+2*u)+d):(g=Math.max(0,-(o*s+l)),m=g>0?s:Math.min(Math.max(-s,-u),s),y=-g*g+m*(m+2*u)+d);else m=o>0?-s:s,g=Math.max(0,-(o*m+l)),y=-g*g+m*(m+2*u)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(_segCenter).addScaledVector(_segDir,m),y}intersectSphere(e,t){_vector$a.subVectors(e.center,this.origin);const n=_vector$a.dot(this.direction),r=_vector$a.dot(_vector$a)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=n-o,u=n+o;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,l,u;const d=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,m=this.origin;return d>=0?(n=(e.min.x-m.x)*d,r=(e.max.x-m.x)*d):(n=(e.max.x-m.x)*d,r=(e.min.x-m.x)*d),p>=0?(s=(e.min.y-m.y)*p,o=(e.max.y-m.y)*p):(s=(e.max.y-m.y)*p,o=(e.min.y-m.y)*p),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),g>=0?(l=(e.min.z-m.z)*g,u=(e.max.z-m.z)*g):(l=(e.max.z-m.z)*g,u=(e.min.z-m.z)*g),n>u||l>r)||((l>n||n!==n)&&(n=l),(u<r||r!==r)&&(r=u),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,_vector$a)!==null}intersectTriangle(e,t,n,r,s){_edge1.subVectors(t,e),_edge2.subVectors(n,e),_normal$1.crossVectors(_edge1,_edge2);let o=this.direction.dot(_normal$1),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;_diff.subVectors(this.origin,e);const u=l*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(u<0)return null;const d=l*this.direction.dot(_edge1.cross(_diff));if(d<0||u+d>o)return null;const p=-l*_diff.dot(_normal$1);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(e,t,n,r,s,o,l,u,d,p,g,m,y,_,E,S){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,u,d,p,g,m,y,_,E,S)}set(e,t,n,r,s,o,l,u,d,p,g,m,y,_,E,S){const b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=r,b[1]=s,b[5]=o,b[9]=l,b[13]=u,b[2]=d,b[6]=p,b[10]=g,b[14]=m,b[3]=y,b[7]=_,b[11]=E,b[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/_v1$5.setFromMatrixColumn(e,0).length(),s=1/_v1$5.setFromMatrixColumn(e,1).length(),o=1/_v1$5.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(r),d=Math.sin(r),p=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const m=o*p,y=o*g,_=l*p,E=l*g;t[0]=u*p,t[4]=-u*g,t[8]=d,t[1]=y+_*d,t[5]=m-E*d,t[9]=-l*u,t[2]=E-m*d,t[6]=_+y*d,t[10]=o*u}else if(e.order==="YXZ"){const m=u*p,y=u*g,_=d*p,E=d*g;t[0]=m+E*l,t[4]=_*l-y,t[8]=o*d,t[1]=o*g,t[5]=o*p,t[9]=-l,t[2]=y*l-_,t[6]=E+m*l,t[10]=o*u}else if(e.order==="ZXY"){const m=u*p,y=u*g,_=d*p,E=d*g;t[0]=m-E*l,t[4]=-o*g,t[8]=_+y*l,t[1]=y+_*l,t[5]=o*p,t[9]=E-m*l,t[2]=-o*d,t[6]=l,t[10]=o*u}else if(e.order==="ZYX"){const m=o*p,y=o*g,_=l*p,E=l*g;t[0]=u*p,t[4]=_*d-y,t[8]=m*d+E,t[1]=u*g,t[5]=E*d+m,t[9]=y*d-_,t[2]=-d,t[6]=l*u,t[10]=o*u}else if(e.order==="YZX"){const m=o*u,y=o*d,_=l*u,E=l*d;t[0]=u*p,t[4]=E-m*g,t[8]=_*g+y,t[1]=g,t[5]=o*p,t[9]=-l*p,t[2]=-d*p,t[6]=y*g+_,t[10]=m-E*g}else if(e.order==="XZY"){const m=o*u,y=o*d,_=l*u,E=l*d;t[0]=u*p,t[4]=-g,t[8]=d*p,t[1]=m*g+E,t[5]=o*p,t[9]=y*g-_,t[2]=_*g-y,t[6]=l*p,t[10]=E*g+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_zero,e,_one)}lookAt(e,t,n){const r=this.elements;return _z.subVectors(e,t),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(n,_z),_x.lengthSq()===0&&(Math.abs(n.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(n,_z)),_x.normalize(),_y.crossVectors(_z,_x),r[0]=_x.x,r[4]=_y.x,r[8]=_z.x,r[1]=_x.y,r[5]=_y.y,r[9]=_z.y,r[2]=_x.z,r[6]=_y.z,r[10]=_z.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[4],u=n[8],d=n[12],p=n[1],g=n[5],m=n[9],y=n[13],_=n[2],E=n[6],S=n[10],b=n[14],C=n[3],T=n[7],A=n[11],N=n[15],L=r[0],k=r[4],j=r[8],F=r[12],U=r[1],q=r[5],J=r[9],ee=r[13],Y=r[2],$=r[6],D=r[10],V=r[14],P=r[3],I=r[7],B=r[11],z=r[15];return s[0]=o*L+l*U+u*Y+d*P,s[4]=o*k+l*q+u*$+d*I,s[8]=o*j+l*J+u*D+d*B,s[12]=o*F+l*ee+u*V+d*z,s[1]=p*L+g*U+m*Y+y*P,s[5]=p*k+g*q+m*$+y*I,s[9]=p*j+g*J+m*D+y*B,s[13]=p*F+g*ee+m*V+y*z,s[2]=_*L+E*U+S*Y+b*P,s[6]=_*k+E*q+S*$+b*I,s[10]=_*j+E*J+S*D+b*B,s[14]=_*F+E*ee+S*V+b*z,s[3]=C*L+T*U+A*Y+N*P,s[7]=C*k+T*q+A*$+N*I,s[11]=C*j+T*J+A*D+N*B,s[15]=C*F+T*ee+A*V+N*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],l=e[5],u=e[9],d=e[13],p=e[2],g=e[6],m=e[10],y=e[14],_=e[3],E=e[7],S=e[11],b=e[15];return _*(+s*u*g-r*d*g-s*l*m+n*d*m+r*l*y-n*u*y)+E*(+t*u*y-t*d*m+s*o*m-r*o*y+r*d*p-s*u*p)+S*(+t*d*g-t*l*y-s*o*g+n*o*y+s*l*p-n*d*p)+b*(-r*l*p-t*u*g+t*l*m+r*o*g-n*o*m+n*u*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],p=e[8],g=e[9],m=e[10],y=e[11],_=e[12],E=e[13],S=e[14],b=e[15],C=g*S*d-E*m*d+E*u*y-l*S*y-g*u*b+l*m*b,T=_*m*d-p*S*d-_*u*y+o*S*y+p*u*b-o*m*b,A=p*E*d-_*g*d+_*l*y-o*E*y-p*l*b+o*g*b,N=_*g*u-p*E*u-_*l*m+o*E*m+p*l*S-o*g*S,L=t*C+n*T+r*A+s*N;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/L;return e[0]=C*k,e[1]=(E*m*s-g*S*s-E*r*y+n*S*y+g*r*b-n*m*b)*k,e[2]=(l*S*s-E*u*s+E*r*d-n*S*d-l*r*b+n*u*b)*k,e[3]=(g*u*s-l*m*s-g*r*d+n*m*d+l*r*y-n*u*y)*k,e[4]=T*k,e[5]=(p*S*s-_*m*s+_*r*y-t*S*y-p*r*b+t*m*b)*k,e[6]=(_*u*s-o*S*s-_*r*d+t*S*d+o*r*b-t*u*b)*k,e[7]=(o*m*s-p*u*s+p*r*d-t*m*d-o*r*y+t*u*y)*k,e[8]=A*k,e[9]=(_*g*s-p*E*s-_*n*y+t*E*y+p*n*b-t*g*b)*k,e[10]=(o*E*s-_*l*s+_*n*d-t*E*d-o*n*b+t*l*b)*k,e[11]=(p*l*s-o*g*s-p*n*d+t*g*d+o*n*y-t*l*y)*k,e[12]=N*k,e[13]=(p*E*r-_*g*r+_*n*m-t*E*m-p*n*S+t*g*S)*k,e[14]=(_*l*r-o*E*r-_*n*u+t*E*u+o*n*S-t*l*S)*k,e[15]=(o*g*r-p*l*r+p*n*u-t*g*u-o*n*m+t*l*m)*k,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,l=e.y,u=e.z,d=s*o,p=s*l;return this.set(d*o+n,d*l-r*u,d*u+r*l,0,d*l+r*u,p*l+n,p*u-r*o,0,d*u-r*l,p*u+r*o,s*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,l=t._z,u=t._w,d=s+s,p=o+o,g=l+l,m=s*d,y=s*p,_=s*g,E=o*p,S=o*g,b=l*g,C=u*d,T=u*p,A=u*g,N=n.x,L=n.y,k=n.z;return r[0]=(1-(E+b))*N,r[1]=(y+A)*N,r[2]=(_-T)*N,r[3]=0,r[4]=(y-A)*L,r[5]=(1-(m+b))*L,r[6]=(S+C)*L,r[7]=0,r[8]=(_+T)*k,r[9]=(S-C)*k,r[10]=(1-(m+E))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=_v1$5.set(r[0],r[1],r[2]).length();const o=_v1$5.set(r[4],r[5],r[6]).length(),l=_v1$5.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],_m1$2.copy(this);const d=1/s,p=1/o,g=1/l;return _m1$2.elements[0]*=d,_m1$2.elements[1]*=d,_m1$2.elements[2]*=d,_m1$2.elements[4]*=p,_m1$2.elements[5]*=p,_m1$2.elements[6]*=p,_m1$2.elements[8]*=g,_m1$2.elements[9]*=g,_m1$2.elements[10]*=g,t.setFromRotationMatrix(_m1$2),n.x=s,n.y=o,n.z=l,this}makePerspective(e,t,n,r,s,o,l=WebGLCoordinateSystem){const u=this.elements,d=2*s/(t-e),p=2*s/(n-r),g=(t+e)/(t-e),m=(n+r)/(n-r);let y,_;if(l===WebGLCoordinateSystem)y=-(o+s)/(o-s),_=-2*o*s/(o-s);else if(l===WebGPUCoordinateSystem)y=-o/(o-s),_=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=d,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=p,u[9]=m,u[13]=0,u[2]=0,u[6]=0,u[10]=y,u[14]=_,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,s,o,l=WebGLCoordinateSystem){const u=this.elements,d=1/(t-e),p=1/(n-r),g=1/(o-s),m=(t+e)*d,y=(n+r)*p;let _,E;if(l===WebGLCoordinateSystem)_=(o+s)*g,E=-2*g;else if(l===WebGPUCoordinateSystem)_=s*g,E=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*d,u[4]=0,u[8]=0,u[12]=-m,u[1]=0,u[5]=2*p,u[9]=0,u[13]=-y,u[2]=0,u[6]=0,u[10]=E,u[14]=-_,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(e=0,t=0,n=0,r=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],u=r[1],d=r[5],p=r[9],g=r[2],m=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(clamp(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,d),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(u,d)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-g,y),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-clamp(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(m,y),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(clamp(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-clamp(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return _matrix$2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_matrix$2,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const e=new Vector3,t=new Euler,n=new Quaternion,r=new Vector3(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return _q1.setFromAxisAngle(e,t),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(e,t){return _q1.setFromAxisAngle(e,t),this.quaternion.premultiply(_q1),this}rotateX(e){return this.rotateOnAxis(_xAxis,e)}rotateY(e){return this.rotateOnAxis(_yAxis,e)}rotateZ(e){return this.rotateOnAxis(_zAxis,e)}translateOnAxis(e,t){return _v1$4.copy(e).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_xAxis,e)}translateY(e){return this.translateOnAxis(_yAxis,e)}translateZ(e){return this.translateOnAxis(_zAxis,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?_target.copy(e):_target.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),r&&(_m1$1.extractRotation(r.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(_addedEvent),_childaddedEvent.child=e,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_removedEvent),_childremovedEvent.child=e,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(e.parent.matrixWorld)),e.applyMatrix4(_m1$1),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(_addedEvent),_childaddedEvent.child=e,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,e,_scale$2),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let d=0,p=u.length;d<p;d++){const g=u[d];s(e.shapes,g)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,d=this.material.length;u<d;u++)l.push(s(e.materials,this.material[u]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];r.animations.push(s(e.animations,u))}}if(t){const l=o(e.geometries),u=o(e.materials),d=o(e.textures),p=o(e.images),g=o(e.shapes),m=o(e.skeletons),y=o(e.animations),_=o(e.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),g.length>0&&(n.shapes=g),m.length>0&&(n.skeletons=m),y.length>0&&(n.animations=y),_.length>0&&(n.nodes=_)}return n.object=r,n;function o(l){const u=[];for(const d in l){const p=l[d];delete p.metadata,u.push(p)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(e=new Vector3,t=new Vector3,n=new Vector3){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),_v0$1.subVectors(e,t),r.cross(_v0$1);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){_v0$1.subVectors(r,t),_v1$3.subVectors(n,t),_v2$2.subVectors(e,t);const o=_v0$1.dot(_v0$1),l=_v0$1.dot(_v1$3),u=_v0$1.dot(_v2$2),d=_v1$3.dot(_v1$3),p=_v1$3.dot(_v2$2),g=o*d-l*l;if(g===0)return s.set(0,0,0),null;const m=1/g,y=(d*u-l*p)*m,_=(o*p-l*u)*m;return s.set(1-y-_,_,y)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(e,t,n,r,s,o,l,u){return this.getBarycoord(e,t,n,r,_v3$2)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,_v3$2.x),u.addScaledVector(o,_v3$2.y),u.addScaledVector(l,_v3$2.z),u)}static getInterpolatedAttribute(e,t,n,r,s,o){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(e,t),_v41.fromBufferAttribute(e,n),_v42.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(_v40,s.x),o.addScaledVector(_v41,s.y),o.addScaledVector(_v42,s.z),o}static isFrontFacing(e,t,n,r){return _v0$1.subVectors(n,t),_v1$3.subVectors(e,t),_v0$1.cross(_v1$3).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Triangle.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Triangle.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Triangle.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,l;_vab.subVectors(r,n),_vac.subVectors(s,n),_vap.subVectors(e,n);const u=_vab.dot(_vap),d=_vac.dot(_vap);if(u<=0&&d<=0)return t.copy(n);_vbp.subVectors(e,r);const p=_vab.dot(_vbp),g=_vac.dot(_vbp);if(p>=0&&g<=p)return t.copy(r);const m=u*g-p*d;if(m<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(n).addScaledVector(_vab,o);_vcp.subVectors(e,s);const y=_vab.dot(_vcp),_=_vac.dot(_vcp);if(_>=0&&y<=_)return t.copy(s);const E=y*d-u*_;if(E<=0&&d>=0&&_<=0)return l=d/(d-_),t.copy(n).addScaledVector(_vac,l);const S=p*_-y*g;if(S<=0&&g-p>=0&&y-_>=0)return _vbc.subVectors(s,r),l=(g-p)/(g-p+(y-_)),t.copy(r).addScaledVector(_vbc,l);const b=1/(S+E+m);return o=E*b,l=m*b,t.copy(n).addScaledVector(_vab,o).addScaledVector(_vac,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Color{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=SRGBColorSpace){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ColorManagement.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=ColorManagement.workingColorSpace){return this.r=e,this.g=t,this.b=n,ColorManagement.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=ColorManagement.workingColorSpace){if(e=euclideanModulo(e,1),t=clamp(t,0,1),n=clamp(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=hue2rgb(o,s,e+1/3),this.g=hue2rgb(o,s,e),this.b=hue2rgb(o,s,e-1/3)}return ColorManagement.toWorkingColorSpace(this,r),this}setStyle(e,t=SRGBColorSpace){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=SRGBColorSpace){const n=_colorKeywords[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}copyLinearToSRGB(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),e),Math.round(clamp(_color.r*255,0,255))*65536+Math.round(clamp(_color.g*255,0,255))*256+Math.round(clamp(_color.b*255,0,255))}getHexString(e=SRGBColorSpace){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),t);const n=_color.r,r=_color.g,s=_color.b,o=Math.max(n,r,s),l=Math.min(n,r,s);let u,d;const p=(l+o)/2;if(l===o)u=0,d=0;else{const g=o-l;switch(d=p<=.5?g/(o+l):g/(2-o-l),o){case n:u=(r-s)/g+(r<s?6:0);break;case r:u=(s-n)/g+2;break;case s:u=(n-r)/g+4;break}u/=6}return e.h=u,e.s=d,e.l=p,e}getRGB(e,t=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),t),e.r=_color.r,e.g=_color.g,e.b=_color.b,e}getStyle(e=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),e);const t=_color.r,n=_color.g,r=_color.b;return e!==SRGBColorSpace?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(_hslA),this.setHSL(_hslA.h+e,_hslA.s+t,_hslA.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(_hslA),e.getHSL(_hslB);const n=lerp(_hslA.h,_hslB.h,t),r=lerp(_hslA.s,_hslB.s,t),s=lerp(_hslA.l,_hslB.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(n.blending=this.blending),this.side!==FrontSide&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(n.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(n.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(n.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class MeshBasicMaterial extends Material{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const _vector$9=new Vector3,_vector2$1=new Vector2;let _id$2=0;class BufferAttribute{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)_vector2$1.fromBufferAttribute(this,t),_vector2$1.applyMatrix3(e),this.setXY(t,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyMatrix3(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyMatrix4(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyNormalMatrix(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.transformDirection(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=denormalize(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=normalize(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=denormalize(t,this.array)),t}setX(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=denormalize(t,this.array)),t}setY(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=denormalize(t,this.array)),t}setZ(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=denormalize(t,this.array)),t}setW(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array),r=normalize(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array),r=normalize(r,this.array),s=normalize(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==StaticDrawUsage&&(e.usage=this.usage),e}}class Uint16BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Uint32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Float32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Float32Array(e),t,n)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32(e)?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Matrix3().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _m1.makeRotationFromQuaternion(e),this.applyMatrix4(_m1),this}rotateX(e){return _m1.makeRotationX(e),this.applyMatrix4(_m1),this}rotateY(e){return _m1.makeRotationY(e),this.applyMatrix4(_m1),this}rotateZ(e){return _m1.makeRotationZ(e),this.applyMatrix4(_m1),this}translate(e,t,n){return _m1.makeTranslation(e,t,n),this.applyMatrix4(_m1),this}scale(e,t,n){return _m1.makeScale(e,t,n),this.applyMatrix4(_m1),this}lookAt(e){return _obj.lookAt(e),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Float32BufferAttribute(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];_box$2.setFromBufferAttribute(s),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(e){const n=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];_boxMorphTargets.setFromBufferAttribute(l),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)_vector$8.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(_vector$8));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],u=this.morphTargetsRelative;for(let d=0,p=l.count;d<p;d++)_vector$8.fromBufferAttribute(l,d),u&&(_offset.fromBufferAttribute(e,d),_vector$8.add(_offset)),r=Math.max(r,n.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),l=[],u=[];for(let j=0;j<n.count;j++)l[j]=new Vector3,u[j]=new Vector3;const d=new Vector3,p=new Vector3,g=new Vector3,m=new Vector2,y=new Vector2,_=new Vector2,E=new Vector3,S=new Vector3;function b(j,F,U){d.fromBufferAttribute(n,j),p.fromBufferAttribute(n,F),g.fromBufferAttribute(n,U),m.fromBufferAttribute(s,j),y.fromBufferAttribute(s,F),_.fromBufferAttribute(s,U),p.sub(d),g.sub(d),y.sub(m),_.sub(m);const q=1/(y.x*_.y-_.x*y.y);isFinite(q)&&(E.copy(p).multiplyScalar(_.y).addScaledVector(g,-y.y).multiplyScalar(q),S.copy(g).multiplyScalar(y.x).addScaledVector(p,-_.x).multiplyScalar(q),l[j].add(E),l[F].add(E),l[U].add(E),u[j].add(S),u[F].add(S),u[U].add(S))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let j=0,F=C.length;j<F;++j){const U=C[j],q=U.start,J=U.count;for(let ee=q,Y=q+J;ee<Y;ee+=3)b(e.getX(ee+0),e.getX(ee+1),e.getX(ee+2))}const T=new Vector3,A=new Vector3,N=new Vector3,L=new Vector3;function k(j){N.fromBufferAttribute(r,j),L.copy(N);const F=l[j];T.copy(F),T.sub(N.multiplyScalar(N.dot(F))).normalize(),A.crossVectors(L,F);const q=A.dot(u[j])<0?-1:1;o.setXYZW(j,T.x,T.y,T.z,q)}for(let j=0,F=C.length;j<F;++j){const U=C[j],q=U.start,J=U.count;for(let ee=q,Y=q+J;ee<Y;ee+=3)k(e.getX(ee+0)),k(e.getX(ee+1)),k(e.getX(ee+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new BufferAttribute(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let m=0,y=n.count;m<y;m++)n.setXYZ(m,0,0,0);const r=new Vector3,s=new Vector3,o=new Vector3,l=new Vector3,u=new Vector3,d=new Vector3,p=new Vector3,g=new Vector3;if(e)for(let m=0,y=e.count;m<y;m+=3){const _=e.getX(m+0),E=e.getX(m+1),S=e.getX(m+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,E),o.fromBufferAttribute(t,S),p.subVectors(o,s),g.subVectors(r,s),p.cross(g),l.fromBufferAttribute(n,_),u.fromBufferAttribute(n,E),d.fromBufferAttribute(n,S),l.add(p),u.add(p),d.add(p),n.setXYZ(_,l.x,l.y,l.z),n.setXYZ(E,u.x,u.y,u.z),n.setXYZ(S,d.x,d.y,d.z)}else for(let m=0,y=t.count;m<y;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),p.subVectors(o,s),g.subVectors(r,s),p.cross(g),n.setXYZ(m+0,p.x,p.y,p.z),n.setXYZ(m+1,p.x,p.y,p.z),n.setXYZ(m+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)_vector$8.fromBufferAttribute(e,t),_vector$8.normalize(),e.setXYZ(t,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function e(l,u){const d=l.array,p=l.itemSize,g=l.normalized,m=new d.constructor(u.length*p);let y=0,_=0;for(let E=0,S=u.length;E<S;E++){l.isInterleavedBufferAttribute?y=u[E]*l.data.stride+l.offset:y=u[E]*p;for(let b=0;b<p;b++)m[_++]=d[y++]}return new BufferAttribute(m,p,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new BufferGeometry,n=this.index.array,r=this.attributes;for(const l in r){const u=r[l],d=e(u,n);t.setAttribute(l,d)}const s=this.morphAttributes;for(const l in s){const u=[],d=s[l];for(let p=0,g=d.length;p<g;p++){const m=d[p],y=e(m,n);u.push(y)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const d=o[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const d in u)u[d]!==void 0&&(e[d]=u[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const d=n[u];e.data.attributes[u]=d.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const d=this.morphAttributes[u],p=[];for(let g=0,m=d.length;g<m;g++){const y=d[g];p.push(y.toJSON(e.data))}p.length>0&&(r[u]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const d in r){const p=r[d];this.setAttribute(d,p.clone(t))}const s=e.morphAttributes;for(const d in s){const p=[],g=s[d];for(let m=0,y=g.length;m<y;m++)p.push(g[m].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,p=o.length;d<p;d++){const g=o[d];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(e=new BufferGeometry,t=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){_morphA.set(0,0,0);for(let u=0,d=s.length;u<d;u++){const p=l[u],g=s[u];p!==0&&(_tempA.fromBufferAttribute(g,e),o?_morphA.addScaledVector(_tempA,p):_morphA.addScaledVector(_tempA.sub(t),p))}t.add(_morphA)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),_sphere$6.copy(n.boundingSphere),_sphere$6.applyMatrix4(s),_ray$3.copy(e.ray).recast(e.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(e.far-e.near)**2))&&(_inverseMatrix$3.copy(s).invert(),_ray$3.copy(e.ray).applyMatrix4(_inverseMatrix$3),!(n.boundingBox!==null&&_ray$3.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,_ray$3)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,l=s.index,u=s.attributes.position,d=s.attributes.uv,p=s.attributes.uv1,g=s.attributes.normal,m=s.groups,y=s.drawRange;if(l!==null)if(Array.isArray(o))for(let _=0,E=m.length;_<E;_++){const S=m[_],b=o[S.materialIndex],C=Math.max(S.start,y.start),T=Math.min(l.count,Math.min(S.start+S.count,y.start+y.count));for(let A=C,N=T;A<N;A+=3){const L=l.getX(A),k=l.getX(A+1),j=l.getX(A+2);r=checkGeometryIntersection(this,b,e,n,d,p,g,L,k,j),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),E=Math.min(l.count,y.start+y.count);for(let S=_,b=E;S<b;S+=3){const C=l.getX(S),T=l.getX(S+1),A=l.getX(S+2);r=checkGeometryIntersection(this,o,e,n,d,p,g,C,T,A),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(o))for(let _=0,E=m.length;_<E;_++){const S=m[_],b=o[S.materialIndex],C=Math.max(S.start,y.start),T=Math.min(u.count,Math.min(S.start+S.count,y.start+y.count));for(let A=C,N=T;A<N;A+=3){const L=A,k=A+1,j=A+2;r=checkGeometryIntersection(this,b,e,n,d,p,g,L,k,j),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),E=Math.min(u.count,y.start+y.count);for(let S=_,b=E;S<b;S+=3){const C=S,T=S+1,A=S+2;r=checkGeometryIntersection(this,o,e,n,d,p,g,C,T,A),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function checkIntersection$1(i,e,t,n,r,s,o,l){let u;if(e.side===BackSide?u=n.intersectTriangle(o,s,r,!0,l):u=n.intersectTriangle(r,s,o,e.side===FrontSide,l),u===null)return null;_intersectionPointWorld.copy(l),_intersectionPointWorld.applyMatrix4(i.matrixWorld);const d=t.ray.origin.distanceTo(_intersectionPointWorld);return d<t.near||d>t.far?null:{distance:d,point:_intersectionPointWorld.clone(),object:i}}function checkGeometryIntersection(i,e,t,n,r,s,o,l,u,d){i.getVertexPosition(l,_vA$1),i.getVertexPosition(u,_vB$1),i.getVertexPosition(d,_vC$1);const p=checkIntersection$1(i,e,t,n,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(p){const g=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA$1,_vB$1,_vC$1,g),r&&(p.uv=Triangle.getInterpolatedAttribute(r,l,u,d,g,new Vector2)),s&&(p.uv1=Triangle.getInterpolatedAttribute(s,l,u,d,g,new Vector2)),o&&(p.normal=Triangle.getInterpolatedAttribute(o,l,u,d,g,new Vector3),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const m={a:l,b:u,c:d,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,m.normal),p.face=m,p.barycoord=g}return p}function cloneUniforms(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function mergeUniforms(i){const e={};for(let t=0;t<i.length;t++){const n=cloneUniforms(i[t]);for(const r in n)e[r]=n[r]}return e}function cloneUniformsGroups(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.uniformsGroups=cloneUniformsGroups(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(_v3$1.x,_v3$1.y).multiplyScalar(-e/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(_v3$1.x,_v3$1.y).multiplyScalar(-e/_v3$1.z)}getViewSize(e,t){return this.getViewBounds(e,_minTarget,_maxTarget),t.subVectors(_maxTarget,_minTarget)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,d=o.fullHeight;s+=o.offsetX*r/u,t-=o.offsetY*n/d,r*=o.width/u,n*=o.height/d}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}class InterleavedBuffer{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$7=new Vector3;class InterleavedBufferAttribute{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)_vector$7.fromBufferAttribute(this,t),_vector$7.applyMatrix4(e),this.setXYZ(t,_vector$7.x,_vector$7.y,_vector$7.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_vector$7.fromBufferAttribute(this,t),_vector$7.applyNormalMatrix(e),this.setXYZ(t,_vector$7.x,_vector$7.y,_vector$7.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_vector$7.fromBufferAttribute(this,t),_vector$7.transformDirection(e),this.setXYZ(t,_vector$7.x,_vector$7.y,_vector$7.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=denormalize(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=normalize(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=denormalize(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=denormalize(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=denormalize(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=denormalize(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array),r=normalize(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array),r=normalize(r,this.array),s=normalize(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new BufferAttribute(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new InterleavedBufferAttribute(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$5=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$5.copy(this.boundingSphere),_sphere$5.applyMatrix4(r),e.ray.intersectsSphere(_sphere$5)!==!1&&(_inverseMatrix$2.copy(r).invert(),_ray$2.copy(e.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,_ray$2)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vector4,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;_skinIndex.fromBufferAttribute(r.attributes.skinIndex,e),_skinWeight.fromBufferAttribute(r.attributes.skinWeight,e),_basePosition.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=_skinWeight.getComponent(s);if(o!==0){const l=_skinIndex.getComponent(s);_matrix4.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(e=null,t=1,n=1,r,s,o,l,u,d=NearestFilter,p=NearestFilter,g,m){super(null,o,l,u,d,p,r,s,g,m),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(e=[],t=[]){this.uuid=generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Matrix4;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(l,t[s]),_offsetMatrix.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new DataTexture(t,e,e,RGBAFormat,FloatType);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Bone),this.bones.push(o),this.boneInverses.push(new Matrix4().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const l=n[r];e.boneInverses.push(l.toArray())}return e}}class InstancedBufferAttribute extends BufferAttribute{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$4=new Sphere;class InstancedMesh extends Mesh{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,_identity)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,_instanceLocalMatrix),_box3.copy(e.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,_instanceLocalMatrix),_sphere$4.copy(e.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$4)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let l=0;l<n.length;l++)n[l]=r[o+l]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(n),e.ray.intersectsSphere(_sphere$4)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(n,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(e,_instanceIntersects);for(let o=0,l=_instanceIntersects.length;o<l;o++){const u=_instanceIntersects[o];u.instanceId=s,u.object=this,t.push(u)}_instanceIntersects.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(r*this.count),r,this.count,RedFormat,FloatType));const s=this.morphTexture.source.data.data;let o=0;for(let d=0;d<n.length;d++)o+=n[d];const l=this.geometry.morphTargetsRelative?1:1-o,u=r*e;s[u]=l,s.set(n,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(e=new Vector3(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=_vector1.subVectors(n,t).cross(_vector2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(_vector1),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||_normalMatrix.getNormalMatrix(e),r=this.coplanarPoint(_vector1).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$3=new Sphere,_vector$6=new Vector3;class Frustum{constructor(e=new Plane,t=new Plane,n=new Plane,r=new Plane,s=new Plane,o=new Plane){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=WebGLCoordinateSystem){const n=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],u=r[3],d=r[4],p=r[5],g=r[6],m=r[7],y=r[8],_=r[9],E=r[10],S=r[11],b=r[12],C=r[13],T=r[14],A=r[15];if(n[0].setComponents(u-s,m-d,S-y,A-b).normalize(),n[1].setComponents(u+s,m+d,S+y,A+b).normalize(),n[2].setComponents(u+o,m+p,S+_,A+C).normalize(),n[3].setComponents(u-o,m-p,S-_,A-C).normalize(),n[4].setComponents(u-l,m-g,S-E,A-T).normalize(),t===WebGLCoordinateSystem)n[5].setComponents(u+l,m+g,S+E,A+T).normalize();else if(t===WebGPUCoordinateSystem)n[5].setComponents(l,g,E,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_sphere$3.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),_sphere$3.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_sphere$3)}intersectsSprite(e){return _sphere$3.center.set(0,0,0),_sphere$3.radius=.7071067811865476,_sphere$3.applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$3)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(_vector$6.x=r.normal.x>0?e.max.x:e.min.x,_vector$6.y=r.normal.y>0?e.max.y:e.min.y,_vector$6.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class LineBasicMaterial extends Material{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1$1=new Ray,_sphere$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(e=new BufferGeometry,t=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)_vStart.fromBufferAttribute(t,r-1),_vEnd.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=_vStart.distanceTo(_vEnd);e.setAttribute("lineDistance",new Float32BufferAttribute(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),_sphere$1.copy(n.boundingSphere),_sphere$1.applyMatrix4(r),_sphere$1.radius+=s,e.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(r).invert(),_ray$1$1.copy(e.ray).applyMatrix4(_inverseMatrix$1);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,d=this.isLineSegments?2:1,p=n.index,m=n.attributes.position;if(p!==null){const y=Math.max(0,o.start),_=Math.min(p.count,o.start+o.count);for(let E=y,S=_-1;E<S;E+=d){const b=p.getX(E),C=p.getX(E+1),T=checkIntersection(this,e,_ray$1$1,u,b,C,E);T&&t.push(T)}if(this.isLineLoop){const E=p.getX(_-1),S=p.getX(y),b=checkIntersection(this,e,_ray$1$1,u,E,S,_-1);b&&t.push(b)}}else{const y=Math.max(0,o.start),_=Math.min(m.count,o.start+o.count);for(let E=y,S=_-1;E<S;E+=d){const b=checkIntersection(this,e,_ray$1$1,u,E,E+1,E);b&&t.push(b)}if(this.isLineLoop){const E=checkIntersection(this,e,_ray$1$1,u,_-1,y,_-1);E&&t.push(E)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function checkIntersection(i,e,t,n,r,s,o){const l=i.geometry.attributes.position;if(_vStart.fromBufferAttribute(l,r),_vEnd.fromBufferAttribute(l,s),t.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>n)return;_intersectPointOnRay.applyMatrix4(i.matrixWorld);const d=e.ray.origin.distanceTo(_intersectPointOnRay);if(!(d<e.near||d>e.far))return{distance:d,point:_intersectPointOnSegment.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)_start.fromBufferAttribute(t,r),_end.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+_start.distanceTo(_end);e.setAttribute("lineDistance",new Float32BufferAttribute(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}let PointsMaterial$1=class extends Material{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}};const _inverseMatrix$4=new Matrix4,_ray$4=new Ray,_sphere$2=new Sphere,_position$2=new Vector3;let Points$1=class extends Object3D{constructor(e=new BufferGeometry,t=new PointsMaterial$1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),_sphere$2.copy(n.boundingSphere),_sphere$2.applyMatrix4(r),_sphere$2.radius+=s,e.ray.intersectsSphere(_sphere$2)===!1)return;_inverseMatrix$4.copy(r).invert(),_ray$4.copy(e.ray).applyMatrix4(_inverseMatrix$4);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,d=n.index,g=n.attributes.position;if(d!==null){const m=Math.max(0,o.start),y=Math.min(d.count,o.start+o.count);for(let _=m,E=y;_<E;_++){const S=d.getX(_);_position$2.fromBufferAttribute(g,S),testPoint$1(_position$2,S,u,r,e,t,this)}}else{const m=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let _=m,E=y;_<E;_++)_position$2.fromBufferAttribute(g,_),testPoint$1(_position$2,_,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}};function testPoint$1(i,e,t,n,r,s,o){const l=_ray$4.distanceSqToPoint(i);if(l<t){const u=new Vector3;_ray$4.closestPointToPoint(i,u),u.applyMatrix4(n);const d=r.ray.origin.distanceTo(u);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class MeshStandardMaterial extends Material{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function convertArray(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function isTypedArray(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function getKeyframeOrder(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function sortedArray(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const l=t[s]*e;for(let u=0;u!==e;++u)r[o++]=i[l+u]}return r}function flattenJSON(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push(...o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}class Interpolant{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;i:{n:if(!(e<r)){for(let l=n+2;;){if(r===void 0){if(e<s)break n;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break i}if(!(e>=s)){const l=t[1];e<l&&(n=2,s=l);for(let u=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break i}break e}for(;n<o;){const l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],u=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:s=e,l=2*t-n;break;case WrapAroundEnding:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:o=e,u=2*n-t;break;case WrapAroundEnding:o=1,u=n+r[1]-r[0];break;default:o=e-1,u=t}const d=(n-t)*.5,p=this.valueSize;this._weightPrev=d/(t-l),this._weightNext=d/(u-n),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,d=u-l,p=this._offsetPrev,g=this._offsetNext,m=this._weightPrev,y=this._weightNext,_=(n-t)/(r-t),E=_*_,S=E*_,b=-m*S+2*m*E-m*_,C=(1+m)*S+(-1.5-2*m)*E+(-.5+m)*_+1,T=(-1-y)*S+(1.5+y)*E+.5*_,A=y*S-y*E;for(let N=0;N!==l;++N)s[N]=b*o[p+N]+C*o[d+N]+T*o[u+N]+A*o[g+N];return s}}class LinearInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,d=u-l,p=(n-t)/(r-t),g=1-p;for(let m=0;m!==l;++m)s[m]=o[d+m]*g+o[u+m]*p;return s}}class DiscreteInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class KeyframeTrack{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=convertArray(t,this.TimeBufferType),this.values=convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:convertArray(e.times,Array),values:convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case InterpolateDiscrete:t=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:t=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const u=n[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(o!==null&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,o),e=!1;break}o=u}if(r!==void 0&&isTypedArray(r))for(let l=0,u=r.length;l!==u;++l){const d=r[l];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===InterpolateSmooth,s=e.length-1;let o=1;for(let l=1;l<s;++l){let u=!1;const d=e[l],p=e[l+1];if(d!==p&&(l!==1||d!==e[0]))if(r)u=!0;else{const g=l*n,m=g-n,y=g+n;for(let _=0;_!==n;++_){const E=t[g+_];if(E!==t[m+_]||E!==t[y+_]){u=!0;break}}}if(u){if(l!==o){e[o]=e[l];const g=l*n,m=o*n;for(let y=0;y!==n;++y)t[m+y]=t[g+y]}++o}}if(s>0){e[o]=e[s];for(let l=s*n,u=o*n,d=0;d!==n;++d)t[u+d]=t[l+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}KeyframeTrack.prototype.ValueTypeName="";KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(e,t,n){super(e,t,n)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{constructor(e,t,n,r){super(e,t,n,r)}}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{constructor(e,t,n,r){super(e,t,n,r)}}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-t)/(r-t);let d=e*l;for(let p=d+l;d!==p;d+=4)Quaternion.slerpFlat(s,0,o,d-l,o,d,u);return s}}class QuaternionKeyframeTrack extends KeyframeTrack{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(e,t,n){super(e,t,n)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{constructor(e,t,n,r){super(e,t,n,r)}}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(e="",t=-1,n=[],r=NormalAnimationBlendMode){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,l=n.length;o!==l;++o)t.push(parseKeyframeTrack(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(KeyframeTrack.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let l=0;l<s;l++){let u=[],d=[];u.push((l+s-1)%s,l,(l+1)%s),d.push(0,1,0);const p=getKeyframeOrder(u);u=sortedArray(u,1,p),d=sortedArray(d,1,p),!r&&u[0]===0&&(u.push(s),d.push(d[0])),o.push(new NumberKeyframeTrack(".morphTargetInfluences["+t[l].name+"]",u,d).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const d=e[l],p=d.name.match(s);if(p&&p.length>1){const g=p[1];let m=r[g];m||(r[g]=m=[]),m.push(d)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,n));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,m,y,_,E){if(y.length!==0){const S=[],b=[];flattenJSON(y,S,b,_),S.length!==0&&E.push(new g(m,S,b))}},r=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let u=e.length||-1;const d=e.hierarchy||[];for(let g=0;g<d.length;g++){const m=d[g].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const y={};let _;for(_=0;_<m.length;_++)if(m[_].morphTargets)for(let E=0;E<m[_].morphTargets.length;E++)y[m[_].morphTargets[E]]=-1;for(const E in y){const S=[],b=[];for(let C=0;C!==m[_].morphTargets.length;++C){const T=m[_];S.push(T.time),b.push(T.morphTarget===E?1:0)}r.push(new NumberKeyframeTrack(".morphTargetInfluence["+E+"]",S,b))}u=y.length*o}else{const y=".bones["+t[g].name+"]";n(VectorKeyframeTrack,y+".position",m,"pos",r),n(QuaternionKeyframeTrack,y+".quaternion",m,"rot",r),n(VectorKeyframeTrack,y+".scale",m,"scl",r)}}return r.length===0?null:new this(s,u,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function parseKeyframeTrack(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=getTrackTypeForValueTypeName(i.type);if(i.times===void 0){const t=[],n=[];flattenJSON(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Cache={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class LoadingManager{constructor(e,t,n){const r=this;let s=!1,o=0,l=0,u;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(p){l++,s===!1&&r.onStart!==void 0&&r.onStart(p,o,l),s=!0},this.itemEnd=function(p){o++,r.onProgress!==void 0&&r.onProgress(p,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return u?u(p):p},this.setURLModifier=function(p){return u=p,this},this.addHandler=function(p,g){return d.push(p,g),this},this.removeHandler=function(p){const g=d.indexOf(p);return g!==-1&&d.splice(g,2),this},this.getHandler=function(p){for(let g=0,m=d.length;g<m;g+=2){const y=d[g],_=d[g+1];if(y.global&&(y.lastIndex=0),y.test(p))return _}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(e){this.manager=e!==void 0?e:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(e,t){super(e),this.response=t}}class FileLoader extends Loader{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Cache.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(loading[e]!==void 0){loading[e].push({onLoad:t,onProgress:n,onError:r});return}loading[e]=[],loading[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const p=loading[e],g=d.body.getReader(),m=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),y=m?parseInt(m):0,_=y!==0;let E=0;const S=new ReadableStream({start(b){C();function C(){g.read().then(({done:T,value:A})=>{if(T)b.close();else{E+=A.byteLength;const N=new ProgressEvent("progress",{lengthComputable:_,loaded:E,total:y});for(let L=0,k=p.length;L<k;L++){const j=p[L];j.onProgress&&j.onProgress(N)}b.enqueue(A),C()}},T=>{b.error(T)})}}});return new Response(S)}else throw new HttpError(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(u){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return d.json();default:if(l==="")return d.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),m=g&&g[1]?g[1].toLowerCase():void 0,y=new TextDecoder(m);return d.arrayBuffer().then(_=>y.decode(_))}}}).then(d=>{Cache.add(e,d);const p=loading[e];delete loading[e];for(let g=0,m=p.length;g<m;g++){const y=p[g];y.onLoad&&y.onLoad(d)}}).catch(d=>{const p=loading[e];if(p===void 0)throw this.manager.itemError(e),d;delete loading[e];for(let g=0,m=p.length;g<m;g++){const y=p[g];y.onError&&y.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ImageLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Cache.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=createElementNS("img");function u(){p(),Cache.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(g){p(),r&&r(g),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",u,!1),l.removeEventListener("error",d,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class TextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const s=new Texture,o=new ImageLoader(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class Light extends Object3D{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(e.matrixWorld),t.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_lookTarget$1),t.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(_projScreenMatrix$1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=RAD2DEG*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class SpotLight extends Light{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(e.matrixWorld),n.position.copy(_lightPositionWorld),_lookTarget.copy(n.position),_lookTarget.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(_lookTarget),n.updateMatrixWorld(),r.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class OrthographicCamera extends Camera{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,l=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,l-=p*this.view.offsetY,u=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class LoaderUtils{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ImageBitmapLoader extends Loader{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Cache.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(d=>{t&&t(d),s.manager.itemEnd(e)}).catch(d=>{r&&r(d)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(e,l).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return Cache.add(e,d),t&&t(d),s.manager.itemEnd(e),d}).catch(function(d){r&&r(d),Cache.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Cache.add(e,u),s.manager.itemStart(e)}}let Clock$1=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=now$1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function now$1(){return performance.now()}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(e,t,n){const r=n||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class PropertyBinding{constructor(e,t,n){this.path=t,this.parsedPath=n||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,n):new PropertyBinding(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(e){const t=_trackRe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);_supportedObjectNames.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const u=n(l.children);if(u)return u}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===d){d=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[r];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Spherical{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=clamp(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(clamp(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Controls extends EventDispatcher{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);function toTrianglesDrawMode(i,e){if(e===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===TriangleFanDrawMode||e===TriangleStripDrawMode){let t=i.getIndex();if(t===null){const o=[],l=i.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)o.push(u);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===TriangleFanDrawMode)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class GLTFLoader extends Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new GLTFMaterialsClearcoatExtension(t)}),this.register(function(t){return new GLTFMaterialsDispersionExtension(t)}),this.register(function(t){return new GLTFTextureBasisUExtension(t)}),this.register(function(t){return new GLTFTextureWebPExtension(t)}),this.register(function(t){return new GLTFTextureAVIFExtension(t)}),this.register(function(t){return new GLTFMaterialsSheenExtension(t)}),this.register(function(t){return new GLTFMaterialsTransmissionExtension(t)}),this.register(function(t){return new GLTFMaterialsVolumeExtension(t)}),this.register(function(t){return new GLTFMaterialsIorExtension(t)}),this.register(function(t){return new GLTFMaterialsEmissiveStrengthExtension(t)}),this.register(function(t){return new GLTFMaterialsSpecularExtension(t)}),this.register(function(t){return new GLTFMaterialsIridescenceExtension(t)}),this.register(function(t){return new GLTFMaterialsAnisotropyExtension(t)}),this.register(function(t){return new GLTFMaterialsBumpExtension(t)}),this.register(function(t){return new GLTFLightsExtension(t)}),this.register(function(t){return new GLTFMeshoptCompression(t)}),this.register(function(t){return new GLTFMeshGpuInstancing(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const d=LoaderUtils.extractUrlBase(e);o=LoaderUtils.resolveURL(d,this.path)}else o=LoaderUtils.extractUrlBase(e);this.manager.itemStart(e);const l=function(d){r?r(d):console.error(d),s.manager.itemError(e),s.manager.itemEnd(e)},u=new FileLoader(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){try{s.parse(d,o,function(p){t(p),s.manager.itemEnd(e)},l)}catch(p){l(p)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},l={},u=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(u.decode(new Uint8Array(e,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{o[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(e)}catch(g){r&&r(g);return}s=JSON.parse(o[EXTENSIONS.KHR_BINARY_GLTF].content)}else s=JSON.parse(u.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new GLTFParser(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const g=this.pluginCallbacks[p](d);g.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[g.name]=g,o[g.name]=!0}if(s.extensionsUsed)for(let p=0;p<s.extensionsUsed.length;++p){const g=s.extensionsUsed[p],m=s.extensionsRequired||[];switch(g){case EXTENSIONS.KHR_MATERIALS_UNLIT:o[g]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:o[g]=new GLTFDracoMeshCompressionExtension(s,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:o[g]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:o[g]=new GLTFMeshQuantizationExtension;break;default:m.indexOf(g)>=0&&l[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}d.setExtensions(o),d.setPlugins(l),d.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function GLTFRegistry(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let d;const p=new Color(16777215);u.color!==void 0&&p.setRGB(u.color[0],u.color[1],u.color[2],LinearSRGBColorSpace);const g=u.range!==void 0?u.range:0;switch(u.type){case"directional":d=new DirectionalLight(p),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new PointLight(p),d.distance=g;break;case"spot":d=new SpotLight(p),d.distance=g,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,d.angle=u.spot.outerConeAngle,d.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return d.position.set(0,0,0),assignExtrasToUserData(d,u),u.intensity!==void 0&&(d.intensity=u.intensity),d.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(d),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return n._getNodeRef(t.cache,l,u)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(e,t,n){const r=[];e.color=new Color(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],LinearSRGBColorSpace),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,SRGBColorSpace))}return Promise.all(r)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Vector2(l,l)}return Promise.all(s)}}class GLTFMaterialsDispersionExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class GLTFMaterialsIridescenceExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class GLTFMaterialsSheenExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],LinearSRGBColorSpace)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,SRGBColorSpace)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class GLTFMaterialsTransmissionExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class GLTFMaterialsVolumeExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new Color().setRGB(l[0],l[1],l[2],LinearSRGBColorSpace),Promise.all(s)}}class GLTFMaterialsIorExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new Color().setRGB(l[0],l[1],l[2],LinearSRGBColorSpace),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,SRGBColorSpace)),Promise.all(s)}}class GLTFMaterialsBumpExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class GLTFMaterialsAnisotropyExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class GLTFTextureBasisUExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class GLTFTextureWebPExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let u=n.textureLoader;if(l.uri){const d=n.options.manager.getHandler(l.uri);d!==null&&(u=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(e,o.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class GLTFTextureAVIFExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let u=n.textureLoader;if(l.uri){const d=n.options.manager.getHandler(l.uri);d!==null&&(u=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(e,o.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(e){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const u=r.byteOffset||0,d=r.byteLength||0,p=r.count,g=r.byteStride,m=new Uint8Array(l,u,d);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(p,g,m,r.mode,r.filter).then(function(y){return y.buffer}):o.ready.then(function(){const y=new ArrayBuffer(p*g);return o.decodeGltfBuffer(new Uint8Array(y),p,g,m,r.mode,r.filter),y})})}else return null}}class GLTFMeshGpuInstancing{constructor(e){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const d of r.primitives)if(d.mode!==WEBGL_CONSTANTS.TRIANGLES&&d.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&d.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&d.mode!==void 0)return null;const o=n.extensions[this.name].attributes,l=[],u={};for(const d in o)l.push(this.parser.getDependency("accessor",o[d]).then(p=>(u[d]=p,u[d])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(d=>{const p=d.pop(),g=p.isGroup?p.children:[p],m=d[0].count,y=[];for(const _ of g){const E=new Matrix4,S=new Vector3,b=new Quaternion,C=new Vector3(1,1,1),T=new InstancedMesh(_.geometry,_.material,m);for(let A=0;A<m;A++)u.TRANSLATION&&S.fromBufferAttribute(u.TRANSLATION,A),u.ROTATION&&b.fromBufferAttribute(u.ROTATION,A),u.SCALE&&C.fromBufferAttribute(u.SCALE,A),T.setMatrixAt(A,E.compose(S,b,C));for(const A in u)if(A==="_COLOR_0"){const N=u[A];T.instanceColor=new InstancedBufferAttribute(N.array,N.itemSize,N.normalized)}else A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&_.geometry.setAttribute(A,u[A]);Object3D.prototype.copy.call(T,_),this.parser.assignFinalMaterial(T),y.push(T)}return p.isGroup?(p.clear(),p.add(...y),p):y[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(e){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,BINARY_EXTENSION_HEADER_LENGTH),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,s=new DataView(e,BINARY_EXTENSION_HEADER_LENGTH);let o=0;for(;o<r;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===BINARY_EXTENSION_CHUNK_TYPES.JSON){const d=new Uint8Array(e,BINARY_EXTENSION_HEADER_LENGTH+o,l);this.content=n.decode(d)}else if(u===BINARY_EXTENSION_CHUNK_TYPES.BIN){const d=BINARY_EXTENSION_HEADER_LENGTH+o;this.body=e.slice(d,d+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},u={},d={};for(const p in o){const g=ATTRIBUTES[p]||p.toLowerCase();l[g]=o[p]}for(const p in e.attributes){const g=ATTRIBUTES[p]||p.toLowerCase();if(o[p]!==void 0){const m=n.accessors[e.attributes[p]],y=WEBGL_COMPONENT_TYPES[m.componentType];d[g]=y.name,u[g]=m.normalized===!0}}return t.getDependency("bufferView",s).then(function(p){return new Promise(function(g,m){r.decodeDracoFile(p,function(y){for(const _ in y.attributes){const E=y.attributes[_],S=u[_];S!==void 0&&(E.normalized=S)}g(y)},l,d,LinearSRGBColorSpace,m)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=l*2,d=l*3,p=r-t,g=(n-t)/p,m=g*g,y=m*g,_=e*d,E=_-d,S=-2*y+3*m,b=y-m,C=1-S,T=b-m+g;for(let A=0;A!==l;A++){const N=o[E+A+l],L=o[E+A+u]*p,k=o[_+A+l],j=o[_+A]*p;s[A]=C*N+T*L+S*k+b*j}return s}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return _q.fromArray(s).normalize().toArray(s),s}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),i.DefaultMaterial}function addUnknownExtensionsToUserData(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function assignExtrasToUserData(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function addMorphTargets(i,e,t){let n=!1,r=!1,s=!1;for(let d=0,p=e.length;d<p;d++){const g=e[d];if(g.POSITION!==void 0&&(n=!0),g.NORMAL!==void 0&&(r=!0),g.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],l=[],u=[];for(let d=0,p=e.length;d<p;d++){const g=e[d];if(n){const m=g.POSITION!==void 0?t.getDependency("accessor",g.POSITION):i.attributes.position;o.push(m)}if(r){const m=g.NORMAL!==void 0?t.getDependency("accessor",g.NORMAL):i.attributes.normal;l.push(m)}if(s){const m=g.COLOR_0!==void 0?t.getDependency("accessor",g.COLOR_0):i.attributes.color;u.push(m)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u)]).then(function(d){const p=d[0],g=d[1],m=d[2];return n&&(i.morphAttributes.position=p),r&&(i.morphAttributes.normal=g),s&&(i.morphAttributes.color=m),i.morphTargetsRelative=!0,i})}function updateMorphTargets(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(i){let e;const t=i.extensions&&i.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+createAttributesKey(t.attributes):e=i.indices+":"+createAttributesKey(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+createAttributesKey(i.targets[n]);return e}function createAttributesKey(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function getNormalizedComponentScale(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":i.search(/\.ktx2($|\?)/i)>0||i.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const l=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(l)===!0;const u=l.match(/Version\/(\d+)/);r=n&&u?parseInt(u[1],10):-1,s=l.indexOf("Firefox")>-1,o=s?l.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&r<17||s&&o<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const l={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return addUnknownExtensionsToUserData(s,l,r),assignExtrasToUserData(l,r),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let l=0,u=o.length;l<u;l++)e[o[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,l)=>{const u=this.associations.get(o);u!=null&&this.associations.set(l,u);for(const[d,p]of o.children.entries())s(p,l.children[d])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(LoaderUtils.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=WEBGL_TYPE_SIZES[r.type],l=WEBGL_COMPONENT_TYPES[r.componentType],u=r.normalized===!0,d=new l(r.count*o);return Promise.resolve(new BufferAttribute(d,o,u))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],u=WEBGL_TYPE_SIZES[r.type],d=WEBGL_COMPONENT_TYPES[r.componentType],p=d.BYTES_PER_ELEMENT,g=p*u,m=r.byteOffset||0,y=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,_=r.normalized===!0;let E,S;if(y&&y!==g){const b=Math.floor(m/y),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+b+":"+r.count;let T=t.cache.get(C);T||(E=new d(l,b*y,r.count*y/p),T=new InterleavedBuffer(E,y/p),t.cache.add(C,T)),S=new InterleavedBufferAttribute(T,u,m%y/p,_)}else l===null?E=new d(r.count*u):E=new d(l,m,r.count*u),S=new BufferAttribute(E,u,_);if(r.sparse!==void 0){const b=WEBGL_TYPE_SIZES.SCALAR,C=WEBGL_COMPONENT_TYPES[r.sparse.indices.componentType],T=r.sparse.indices.byteOffset||0,A=r.sparse.values.byteOffset||0,N=new C(o[1],T,r.sparse.count*b),L=new d(o[2],A,r.sparse.count*u);l!==null&&(S=new BufferAttribute(S.array.slice(),S.itemSize,S.normalized)),S.normalized=!1;for(let k=0,j=N.length;k<j;k++){const F=N[k];if(S.setX(F,L[k*u]),u>=2&&S.setY(F,L[k*u+1]),u>=3&&S.setZ(F,L[k*u+2]),u>=4&&S.setW(F,L[k*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}S.normalized=_}return S})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const u=n.manager.getHandler(o.uri);u!==null&&(l=u)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],l=s.images[t],u=(l.uri||l.bufferView)+":"+o.sampler;if(this.textureCache[u])return this.textureCache[u];const d=this.loadImageSource(t,n).then(function(p){p.flipY=!1,p.name=o.name||l.name||"",p.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(p.name=l.uri);const m=(s.samplers||{})[o.sampler]||{};return p.magFilter=WEBGL_FILTERS[m.magFilter]||LinearFilter,p.minFilter=WEBGL_FILTERS[m.minFilter]||LinearMipmapLinearFilter,p.wrapS=WEBGL_WRAPPINGS[m.wrapS]||RepeatWrapping,p.wrapT=WEBGL_WRAPPINGS[m.wrapT]||RepeatWrapping,p.generateMipmaps=!p.isCompressedTexture&&p.minFilter!==NearestFilter&&p.minFilter!==LinearFilter,r.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[u]=d,d}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(g=>g.clone());const o=r.images[e],l=self.URL||self.webkitURL;let u=o.uri||"",d=!1;if(o.bufferView!==void 0)u=n.getDependency("bufferView",o.bufferView).then(function(g){d=!0;const m=new Blob([g],{type:o.mimeType});return u=l.createObjectURL(m),u});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(u).then(function(g){return new Promise(function(m,y){let _=m;t.isImageBitmapLoader===!0&&(_=function(E){const S=new Texture(E);S.needsUpdate=!0,m(S)}),t.load(LoaderUtils.resolveURL(g,s.path),_,void 0,y)})}).then(function(g){return d===!0&&l.revokeObjectURL(u),assignExtrasToUserData(g,o),g.userData.mimeType=o.mimeType||getImageURIMimeType(o.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),g});return this.sourceCache[e]=p,p}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=s.associations.get(o);o=s.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,u)}}return r!==void 0&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new PointsMaterial$1,Material.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new LineBasicMaterial,Material.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(r||s||o){let l="ClonedMaterial:"+n.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=n.clone(),s&&(u.vertexColors=!0),o&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(n))),n=u}e.material=n}getMaterialType(){return MeshStandardMaterial}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const l={},u=s.extensions||{},d=[];if(u[EXTENSIONS.KHR_MATERIALS_UNLIT]){const g=r[EXTENSIONS.KHR_MATERIALS_UNLIT];o=g.getMaterialType(),d.push(g.extendParams(l,s,t))}else{const g=s.pbrMetallicRoughness||{};if(l.color=new Color(1,1,1),l.opacity=1,Array.isArray(g.baseColorFactor)){const m=g.baseColorFactor;l.color.setRGB(m[0],m[1],m[2],LinearSRGBColorSpace),l.opacity=m[3]}g.baseColorTexture!==void 0&&d.push(t.assignTexture(l,"map",g.baseColorTexture,SRGBColorSpace)),l.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,l.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(d.push(t.assignTexture(l,"metalnessMap",g.metallicRoughnessTexture)),d.push(t.assignTexture(l,"roughnessMap",g.metallicRoughnessTexture))),o=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=DoubleSide);const p=s.alphaMode||ALPHA_MODES.OPAQUE;if(p===ALPHA_MODES.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,p===ALPHA_MODES.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==MeshBasicMaterial&&(d.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new Vector2(1,1),s.normalTexture.scale!==void 0)){const g=s.normalTexture.scale;l.normalScale.set(g,g)}if(s.occlusionTexture!==void 0&&o!==MeshBasicMaterial&&(d.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==MeshBasicMaterial){const g=s.emissiveFactor;l.emissive=new Color().setRGB(g[0],g[1],g[2],LinearSRGBColorSpace)}return s.emissiveTexture!==void 0&&o!==MeshBasicMaterial&&d.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,SRGBColorSpace)),Promise.all(d).then(function(){const g=new o(l);return s.name&&(g.name=s.name),assignExtrasToUserData(g,s),t.associations.set(g,{materials:e}),s.extensions&&addUnknownExtensionsToUserData(r,g,s),g})}createUniqueName(e){const t=PropertyBinding.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(l){return n[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return addPrimitiveAttributes(u,l,t)})}const o=[];for(let l=0,u=e.length;l<u;l++){const d=e[l],p=createPrimitiveKey(d),g=r[p];if(g)o.push(g.promise);else{let m;d.extensions&&d.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?m=s(d):m=addPrimitiveAttributes(new BufferGeometry,d,t),r[p]={primitive:d,promise:m},o.push(m)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,l=[];for(let u=0,d=o.length;u<d;u++){const p=o[u].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",o[u].material);l.push(p)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(u){const d=u.slice(0,u.length-1),p=u[u.length-1],g=[];for(let y=0,_=p.length;y<_;y++){const E=p[y],S=o[y];let b;const C=d[y];if(S.mode===WEBGL_CONSTANTS.TRIANGLES||S.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||S.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||S.mode===void 0)b=s.isSkinnedMesh===!0?new SkinnedMesh(E,C):new Mesh(E,C),b.isSkinnedMesh===!0&&b.normalizeSkinWeights(),S.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?b.geometry=toTrianglesDrawMode(b.geometry,TriangleStripDrawMode):S.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(b.geometry=toTrianglesDrawMode(b.geometry,TriangleFanDrawMode));else if(S.mode===WEBGL_CONSTANTS.LINES)b=new LineSegments(E,C);else if(S.mode===WEBGL_CONSTANTS.LINE_STRIP)b=new Line(E,C);else if(S.mode===WEBGL_CONSTANTS.LINE_LOOP)b=new LineLoop(E,C);else if(S.mode===WEBGL_CONSTANTS.POINTS)b=new Points$1(E,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+S.mode);Object.keys(b.geometry.morphAttributes).length>0&&updateMorphTargets(b,s),b.name=t.createUniqueName(s.name||"mesh_"+e),assignExtrasToUserData(b,s),S.extensions&&addUnknownExtensionsToUserData(r,b,S),t.assignFinalMaterial(b),g.push(b)}for(let y=0,_=g.length;y<_;y++)t.associations.set(g[y],{meshes:e,primitives:y});if(g.length===1)return s.extensions&&addUnknownExtensionsToUserData(r,g[0],s),g[0];const m=new Group;s.extensions&&addUnknownExtensionsToUserData(r,m,s),t.associations.set(m,{meshes:e});for(let y=0,_=g.length;y<_;y++)m.add(g[y]);return m})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new PerspectiveCamera(MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),assignExtrasToUserData(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,l=[],u=[];for(let d=0,p=o.length;d<p;d++){const g=o[d];if(g){l.push(g);const m=new Matrix4;s!==null&&m.fromArray(s.array,d*16),u.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[d])}return new Skeleton(l,u)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],l=[],u=[],d=[],p=[];for(let g=0,m=r.channels.length;g<m;g++){const y=r.channels[g],_=r.samplers[y.sampler],E=y.target,S=E.node,b=r.parameters!==void 0?r.parameters[_.input]:_.input,C=r.parameters!==void 0?r.parameters[_.output]:_.output;E.node!==void 0&&(o.push(this.getDependency("node",S)),l.push(this.getDependency("accessor",b)),u.push(this.getDependency("accessor",C)),d.push(_),p.push(E))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(d),Promise.all(p)]).then(function(g){const m=g[0],y=g[1],_=g[2],E=g[3],S=g[4],b=[];for(let C=0,T=m.length;C<T;C++){const A=m[C],N=y[C],L=_[C],k=E[C],j=S[C];if(A===void 0)continue;A.updateMatrix&&A.updateMatrix();const F=n._createAnimationTracks(A,N,L,k,j);if(F)for(let U=0;U<F.length;U++)b.push(F[U])}return new AnimationClip(s,void 0,b)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(l){if(l.isMesh)for(let u=0,d=r.weights.length;u<d;u++)l.morphTargetInfluences[u]=r.weights[u]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],l=r.children||[];for(let d=0,p=l.length;d<p;d++)o.push(n.getDependency("node",l[d]));const u=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),u]).then(function(d){const p=d[0],g=d[1],m=d[2];m!==null&&p.traverse(function(y){y.isSkinnedMesh&&y.bind(m,_identityMatrix)});for(let y=0,_=g.length;y<_;y++)p.add(g[y]);return p})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",l=[],u=r._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return u&&l.push(u),s.camera!==void 0&&l.push(r.getDependency("camera",s.camera).then(function(d){return r._getNodeRef(r.cameraCache,s.camera,d)})),r._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){l.push(d)}),this.nodeCache[e]=Promise.all(l).then(function(d){let p;if(s.isBone===!0?p=new Bone:d.length>1?p=new Group:d.length===1?p=d[0]:p=new Object3D,p!==d[0])for(let g=0,m=d.length;g<m;g++)p.add(d[g]);if(s.name&&(p.userData.name=s.name,p.name=o),assignExtrasToUserData(p,s),s.extensions&&addUnknownExtensionsToUserData(n,p,s),s.matrix!==void 0){const g=new Matrix4;g.fromArray(s.matrix),p.applyMatrix4(g)}else s.translation!==void 0&&p.position.fromArray(s.translation),s.rotation!==void 0&&p.quaternion.fromArray(s.rotation),s.scale!==void 0&&p.scale.fromArray(s.scale);return r.associations.has(p)||r.associations.set(p,{}),r.associations.get(p).nodes=e,p}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Group;n.name&&(s.name=r.createUniqueName(n.name)),assignExtrasToUserData(s,n),n.extensions&&addUnknownExtensionsToUserData(t,s,n);const o=n.nodes||[],l=[];for(let u=0,d=o.length;u<d;u++)l.push(r.getDependency("node",o[u]));return Promise.all(l).then(function(u){for(let p=0,g=u.length;p<g;p++)s.add(u[p]);const d=p=>{const g=new Map;for(const[m,y]of r.associations)(m instanceof Material||m instanceof Texture)&&g.set(m,y);return p.traverse(m=>{const y=r.associations.get(m);y!=null&&g.set(m,y)}),g};return r.associations=d(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],l=e.name?e.name:e.uuid,u=[];PATH_PROPERTIES[s.path]===PATH_PROPERTIES.weights?e.traverse(function(m){m.morphTargetInfluences&&u.push(m.name?m.name:m.uuid)}):u.push(l);let d;switch(PATH_PROPERTIES[s.path]){case PATH_PROPERTIES.weights:d=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:d=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.translation:case PATH_PROPERTIES.scale:d=VectorKeyframeTrack;break;default:switch(n.itemSize){case 1:d=NumberKeyframeTrack;break;case 2:case 3:default:d=VectorKeyframeTrack;break}break}const p=r.interpolation!==void 0?INTERPOLATION[r.interpolation]:InterpolateLinear,g=this._getArrayFromAccessor(n);for(let m=0,y=u.length;m<y;m++){const _=new d(u[m]+"."+PATH_PROPERTIES[s.path],t.array,g,p);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_),o.push(_)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=getNormalizedComponentScale(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function computeBounds(i,e,t){const n=e.attributes,r=new Box3;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],u=l.min,d=l.max;if(u!==void 0&&d!==void 0){if(r.set(new Vector3(u[0],u[1],u[2]),new Vector3(d[0],d[1],d[2])),l.normalized){const p=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[l.componentType]);r.min.multiplyScalar(p),r.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new Vector3,u=new Vector3;for(let d=0,p=s.length;d<p;d++){const g=s[d];if(g.POSITION!==void 0){const m=t.json.accessors[g.POSITION],y=m.min,_=m.max;if(y!==void 0&&_!==void 0){if(u.setX(Math.max(Math.abs(y[0]),Math.abs(_[0]))),u.setY(Math.max(Math.abs(y[1]),Math.abs(_[1]))),u.setZ(Math.max(Math.abs(y[2]),Math.abs(_[2]))),m.normalized){const E=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[m.componentType]);u.multiplyScalar(E)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}i.boundingBox=r;const o=new Sphere;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function addPrimitiveAttributes(i,e,t){const n=e.attributes,r=[];function s(o,l){return t.getDependency("accessor",o).then(function(u){i.setAttribute(l,u)})}for(const o in n){const l=ATTRIBUTES[o]||o.toLowerCase();l in i.attributes||r.push(s(n[o],l))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(l){i.setIndex(l)});r.push(o)}return ColorManagement.workingColorSpace!==LinearSRGBColorSpace&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ColorManagement.workingColorSpace}" not supported.`),assignExtrasToUserData(i,e),computeBounds(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?addMorphTargets(i,e.targets,t):i})}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{this.parse(o,t,r)},n,r)}parse(e,t,n=()=>{}){this.decodeDracoFile(e,t,null,null,SRGBColorSpace,n).catch(n)}decodeDracoFile(e,t,n,r,s=LinearSRGBColorSpace,o=()=>{}){const l={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:s};return this.decodeGeometry(e,l).then(t).catch(o)}decodeGeometry(e,t){const n=JSON.stringify(t);if(_taskCache.has(e)){const u=_taskCache.get(e);if(u.key===n)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,l=this._getWorker(s,o).then(u=>(r=u,new Promise((d,p)=>{r._callbacks[s]={resolve:d,reject:p},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),_taskCache.set(e,{key:n,promise:l}),l}_createGeometry(e){const t=new BufferGeometry;e.index&&t.setIndex(new BufferAttribute(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,o=r.array,l=r.itemSize,u=new BufferAttribute(o,l);s==="color"&&(this._assignVertexColorSpace(u,r.vertexColorSpace),u.normalized=!(o instanceof Float32Array)),t.setAttribute(s,u)}return t}_assignVertexColorSpace(e,t){if(t!==SRGBColorSpace)return;const n=new Color;for(let r=0,s=e.count;r<s;r++)n.fromBufferAttribute(e,r),ColorManagement.toWorkingColorSpace(n,SRGBColorSpace),e.setXYZ(r,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=DRACOWorker.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function DRACOWorker(){let i,e;onmessage=function(o){const l=o.data;switch(l.type){case"init":i=l.decoderConfig,e=new Promise(function(p){i.onModuleLoaded=function(g){p({draco:g})},DracoDecoderModule(i)});break;case"decode":const u=l.buffer,d=l.taskConfig;e.then(p=>{const g=p.draco,m=new g.Decoder;try{const y=t(g,m,new Int8Array(u),d),_=y.attributes.map(E=>E.array.buffer);y.index&&_.push(y.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:y},_)}catch(y){console.error(y),self.postMessage({type:"error",id:l.id,error:y.message})}finally{g.destroy(m)}});break}};function t(o,l,u,d){const p=d.attributeIDs,g=d.attributeTypes;let m,y;const _=l.GetEncodedGeometryType(u);if(_===o.TRIANGULAR_MESH)m=new o.Mesh,y=l.DecodeArrayToMesh(u,u.byteLength,m);else if(_===o.POINT_CLOUD)m=new o.PointCloud,y=l.DecodeArrayToPointCloud(u,u.byteLength,m);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||m.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const E={index:null,attributes:[]};for(const S in p){const b=self[g[S]];let C,T;if(d.useUniqueIDs)T=p[S],C=l.GetAttributeByUniqueId(m,T);else{if(T=l.GetAttributeId(m,o[p[S]]),T===-1)continue;C=l.GetAttribute(m,T)}const A=r(o,l,m,S,b,C);S==="color"&&(A.vertexColorSpace=d.vertexColorSpace),E.attributes.push(A)}return _===o.TRIANGULAR_MESH&&(E.index=n(o,l,m)),o.destroy(m),E}function n(o,l,u){const p=u.num_faces()*3,g=p*4,m=o._malloc(g);l.GetTrianglesUInt32Array(u,g,m);const y=new Uint32Array(o.HEAPF32.buffer,m,p).slice();return o._free(m),{array:y,itemSize:1}}function r(o,l,u,d,p,g){const m=g.num_components(),_=u.num_points()*m,E=_*p.BYTES_PER_ELEMENT,S=s(o,p),b=o._malloc(E);l.GetAttributeDataArrayForAllPoints(u,g,S,E,b);const C=new p(o.HEAPF32.buffer,b,_).slice();return o._free(b),{name:d,array:C,itemSize:m}}function s(o,l){switch(l){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const _changeEvent={type:"change"},_startEvent={type:"start"},_endEvent={type:"end"},_ray$1=new Ray,_plane=new Plane,_TILT_LIMIT=Math.cos(70*MathUtils.DEG2RAD),_v=new Vector3,_twoPI=2*Math.PI,_STATE={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},_EPS=1e-6;class OrbitControls extends Controls{constructor(e,t=null){super(e,t),this.state=_STATE.NONE,this.target=new Vector3,this.cursor=new Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN},this.touches={ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Vector3,this._lastQuaternion=new Quaternion,this._lastTargetPosition=new Vector3,this._quat=new Quaternion().setFromUnitVectors(e.up,new Vector3(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Spherical,this._sphericalDelta=new Spherical,this._scale=1,this._panOffset=new Vector3,this._rotateStart=new Vector2,this._rotateEnd=new Vector2,this._rotateDelta=new Vector2,this._panStart=new Vector2,this._panEnd=new Vector2,this._panDelta=new Vector2,this._dollyStart=new Vector2,this._dollyEnd=new Vector2,this._dollyDelta=new Vector2,this._dollyDirection=new Vector3,this._mouse=new Vector2,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=onPointerMove.bind(this),this._onPointerDown=onPointerDown.bind(this),this._onPointerUp=onPointerUp.bind(this),this._onContextMenu=onContextMenu.bind(this),this._onMouseWheel=onMouseWheel.bind(this),this._onKeyDown=onKeyDown.bind(this),this._onTouchStart=onTouchStart.bind(this),this._onTouchMove=onTouchMove.bind(this),this._onMouseDown=onMouseDown.bind(this),this._onMouseMove=onMouseMove.bind(this),this._interceptControlDown=interceptControlDown.bind(this),this._interceptControlUp=interceptControlUp.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(_changeEvent),this.update(),this.state=_STATE.NONE}update(e=null){const t=this.object.position;_v.copy(t).sub(this.target),_v.applyQuaternion(this._quat),this._spherical.setFromVector3(_v),this.autoRotate&&this.state===_STATE.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(n)&&isFinite(r)&&(n<-Math.PI?n+=_twoPI:n>Math.PI&&(n-=_twoPI),r<-Math.PI?r+=_twoPI:r>Math.PI&&(r-=_twoPI),n<=r?this._spherical.theta=Math.max(n,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+r)/2?Math.max(n,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(_v.setFromSpherical(this._spherical),_v.applyQuaternion(this._quatInverse),t.copy(this.target).add(_v),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const l=_v.length();o=this._clampDistance(l*this._scale);const u=l-o;this.object.position.addScaledVector(this._dollyDirection,u),this.object.updateMatrixWorld(),s=!!u}else if(this.object.isOrthographicCamera){const l=new Vector3(this._mouse.x,this._mouse.y,0);l.unproject(this.object);const u=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=u!==this.object.zoom;const d=new Vector3(this._mouse.x,this._mouse.y,0);d.unproject(this.object),this.object.position.sub(d).add(l),this.object.updateMatrixWorld(),o=_v.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(_ray$1.origin.copy(this.object.position),_ray$1.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(_ray$1.direction))<_TILT_LIMIT?this.object.lookAt(this.target):(_plane.setFromNormalAndCoplanarPoint(this.object.up,this.target),_ray$1.intersectPlane(_plane,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>_EPS||8*(1-this._lastQuaternion.dot(this.object.quaternion))>_EPS||this._lastTargetPosition.distanceToSquared(this.target)>_EPS?(this.dispatchEvent(_changeEvent),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?_twoPI/60*this.autoRotateSpeed*e:_twoPI/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){_v.setFromMatrixColumn(t,0),_v.multiplyScalar(-e),this._panOffset.add(_v)}_panUp(e,t){this.screenSpacePanning===!0?_v.setFromMatrixColumn(t,1):(_v.setFromMatrixColumn(t,0),_v.crossVectors(this.object.up,_v)),_v.multiplyScalar(e),this._panOffset.add(_v)}_pan(e,t){const n=this.domElement;if(this.object.isPerspectiveCamera){const r=this.object.position;_v.copy(r).sub(this.target);let s=_v.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/n.clientHeight,this.object.matrix),this._panUp(2*t*s/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),r=e-n.left,s=t-n.top,o=n.width,l=n.height;this._mouse.x=r/o*2-1,this._mouse.y=-(s/l)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(_twoPI*this._rotateDelta.x/t.clientHeight),this._rotateUp(_twoPI*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(_twoPI*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-_twoPI*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(_twoPI*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-_twoPI*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(n,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(n,r)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(_twoPI*this._rotateDelta.x/t.clientHeight),this._rotateUp(_twoPI*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(n,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,l=(e.pageY+t.y)*.5;this._updateZoomParameters(o,l)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Vector2,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function onPointerDown(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(i)&&(this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i)))}function onPointerMove(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function onPointerUp(i){switch(this._removePointer(i),this._pointers.length){case 0:this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(_endEvent),this.state=_STATE.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function onMouseDown(i){let e;switch(i.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case MOUSE.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(i),this.state=_STATE.DOLLY;break;case MOUSE.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=_STATE.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=_STATE.ROTATE}break;case MOUSE.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=_STATE.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=_STATE.PAN}break;default:this.state=_STATE.NONE}this.state!==_STATE.NONE&&this.dispatchEvent(_startEvent)}function onMouseMove(i){switch(this.state){case _STATE.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(i);break;case _STATE.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(i);break;case _STATE.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(i);break}}function onMouseWheel(i){this.enabled===!1||this.enableZoom===!1||this.state!==_STATE.NONE||(i.preventDefault(),this.dispatchEvent(_startEvent),this._handleMouseWheel(this._customWheelEvent(i)),this.dispatchEvent(_endEvent))}function onKeyDown(i){this.enabled!==!1&&this._handleKeyDown(i)}function onTouchStart(i){switch(this._trackPointer(i),this._pointers.length){case 1:switch(this.touches.ONE){case TOUCH.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(i),this.state=_STATE.TOUCH_ROTATE;break;case TOUCH.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(i),this.state=_STATE.TOUCH_PAN;break;default:this.state=_STATE.NONE}break;case 2:switch(this.touches.TWO){case TOUCH.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(i),this.state=_STATE.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(i),this.state=_STATE.TOUCH_DOLLY_ROTATE;break;default:this.state=_STATE.NONE}break;default:this.state=_STATE.NONE}this.state!==_STATE.NONE&&this.dispatchEvent(_startEvent)}function onTouchMove(i){switch(this._trackPointer(i),this.state){case _STATE.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(i),this.update();break;case _STATE.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(i),this.update();break;case _STATE.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(i),this.update();break;case _STATE.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(i),this.update();break;default:this.state=_STATE.NONE}}function onContextMenu(i){this.enabled!==!1&&i.preventDefault()}function interceptControlDown(i){i.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function interceptControlUp(i){i.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}class PointsMaterial extends Material$1{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const _inverseMatrix=new Matrix4$1,_ray=new Ray$1,_sphere=new Sphere$1,_position=new Vector3$1;class Points extends Object3D$1{constructor(e=new BufferGeometry$1,t=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),_sphere.copy(n.boundingSphere),_sphere.applyMatrix4(r),_sphere.radius+=s,e.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(r).invert(),_ray.copy(e.ray).applyMatrix4(_inverseMatrix);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,d=n.index,g=n.attributes.position;if(d!==null){const m=Math.max(0,o.start),y=Math.min(d.count,o.start+o.count);for(let _=m,E=y;_<E;_++){const S=d.getX(_);_position.fromBufferAttribute(g,S),testPoint(_position,S,u,r,e,t,this)}}else{const m=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let _=m,E=y;_<E;_++)_position.fromBufferAttribute(g,_),testPoint(_position,_,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function testPoint(i,e,t,n,r,s,o){const l=_ray.distanceSqToPoint(i);if(l<t){const u=new Vector3$1;_ray.closestPointToPoint(i,u),u.applyMatrix4(n);const d=r.ray.origin.distanceTo(u);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Clock{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function now(){return performance.now()}const CopyShader={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Pass{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const _camera=new OrthographicCamera(-1,1,1,-1,0,1);class FullscreenTriangleGeometry extends BufferGeometry{constructor(){super(),this.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2))}}const _geometry=new FullscreenTriangleGeometry;class FullScreenQuad{constructor(e){this._mesh=new Mesh(_geometry,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,_camera)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ShaderPass extends Pass{constructor(e,t="tDiffuse"){super(),this.textureID=t,this.uniforms=null,this.material=null,e instanceof ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=UniformsUtils.clone(e.uniforms),this.material=new ShaderMaterial({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new FullScreenQuad(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class MaskPass extends Pass{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,l;this.inverse?(o=0,l=1):(o=1,l=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(l),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class ClearMaskPass extends Pass{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class EffectComposer{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new Vector2);this._width=n.width,this._height=n.height,t=new WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:HalfFloatType}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ShaderPass(CopyShader),this.copyPass.material.blending=NoBlending,this.clock=new Clock$1}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),o.needsSwap){if(n){const l=this.renderer.getContext(),u=this.renderer.state.buffers.stencil;u.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),u.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}MaskPass!==void 0&&(o instanceof MaskPass?n=!0:o instanceof ClearMaskPass&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class RenderPass extends Pass{constructor(e,t,n=null,r=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Color}render(e,t,n){const r=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=r}}const LuminosityHighPassShader={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Color(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class UnrealBloomPass extends Pass{constructor(e,t=1,n,r){super(),this.strength=t,this.radius=n,this.threshold=r,this.resolution=e!==void 0?new Vector2(e.x,e.y):new Vector2(256,256),this.clearColor=new Color(0,0,0),this.needsSwap=!1,this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new WebGLRenderTarget(s,o,{type:HalfFloatType}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let p=0;p<this.nMips;p++){const g=new WebGLRenderTarget(s,o,{type:HalfFloatType});g.texture.name="UnrealBloomPass.h"+p,g.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(g);const m=new WebGLRenderTarget(s,o,{type:HalfFloatType});m.texture.name="UnrealBloomPass.v"+p,m.texture.generateMipmaps=!1,this.renderTargetsVertical.push(m),s=Math.round(s/2),o=Math.round(o/2)}const l=LuminosityHighPassShader;this.highPassUniforms=UniformsUtils.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const u=[3,5,7,9,11];s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);for(let p=0;p<this.nMips;p++)this.separableBlurMaterials.push(this._getSeparableBlurMaterial(u[p])),this.separableBlurMaterials[p].uniforms.invSize.value=new Vector2(1/s,1/o),s=Math.round(s/2),o=Math.round(o/2);this.compositeMaterial=this._getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1;const d=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=d,this.bloomTintColors=[new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,this.copyUniforms=UniformsUtils.clone(CopyShader.uniforms),this.blendMaterial=new ShaderMaterial({uniforms:this.copyUniforms,vertexShader:CopyShader.vertexShader,fragmentShader:CopyShader.fragmentShader,blending:AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this._oldClearColor=new Color,this._oldClearAlpha=1,this._basic=new MeshBasicMaterial,this._fsQuad=new FullScreenQuad(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this._basic.dispose(),this._fsQuad.dispose()}setSize(e,t){let n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(n,r),this.renderTargetsVertical[s].setSize(n,r),this.separableBlurMaterials[s].uniforms.invSize.value=new Vector2(1/n,1/r),n=Math.round(n/2),r=Math.round(r/2)}render(e,t,n,r,s){e.getClearColor(this._oldClearColor),this._oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this._fsQuad.material=this._basic,this._basic.map=n.texture,e.setRenderTarget(null),e.clear(),this._fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this._fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this._fsQuad.render(e);let l=this.renderTargetBright;for(let u=0;u<this.nMips;u++)this._fsQuad.material=this.separableBlurMaterials[u],this.separableBlurMaterials[u].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[u].uniforms.direction.value=UnrealBloomPass.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[u]),e.clear(),this._fsQuad.render(e),this.separableBlurMaterials[u].uniforms.colorTexture.value=this.renderTargetsHorizontal[u].texture,this.separableBlurMaterials[u].uniforms.direction.value=UnrealBloomPass.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[u]),e.clear(),this._fsQuad.render(e),l=this.renderTargetsVertical[u];this._fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this._fsQuad.render(e),this._fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(n),this._fsQuad.render(e)),e.setClearColor(this._oldClearColor,this._oldClearAlpha),e.autoClear=o}_getSeparableBlurMaterial(e){const t=[];for(let n=0;n<e;n++)t.push(.39894*Math.exp(-.5*n*n/(e*e))/e);return new ShaderMaterial({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Vector2(.5,.5)},direction:{value:new Vector2(.5,.5)},gaussianCoefficients:{value:t}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}_getCompositeMaterial(e){return new ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}UnrealBloomPass.BlurDirectionX=new Vector2(1,0);UnrealBloomPass.BlurDirectionY=new Vector2(0,1);/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function forceCast(i){return i}function isEmpty(i){return i==null}function isObject$1(i){return i!==null&&typeof i=="object"}function isRecord(i){return i!==null&&typeof i=="object"}function deepEqualsArray(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}function deepMerge(i,e){return Array.from(new Set([...Object.keys(i),...Object.keys(e)])).reduce((n,r)=>{const s=i[r],o=e[r];return isRecord(s)&&isRecord(o)?Object.assign(Object.assign({},n),{[r]:deepMerge(s,o)}):Object.assign(Object.assign({},n),{[r]:r in e?o:s})},{})}function isBinding(i){return isObject$1(i)?"target"in i:!1}const CREATE_MESSAGE_MAP={alreadydisposed:()=>"View has been already disposed",invalidparams:i=>`Invalid parameters for '${i.name}'`,nomatchingcontroller:i=>`No matching controller for '${i.key}'`,nomatchingview:i=>`No matching view for '${JSON.stringify(i.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:i=>`Not compatible with  plugin '${i.id}'`,propertynotfound:i=>`Property '${i.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class TpError{static alreadyDisposed(){return new TpError({type:"alreadydisposed"})}static notBindable(){return new TpError({type:"notbindable"})}static notCompatible(e,t){return new TpError({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new TpError({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new TpError({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=CREATE_MESSAGE_MAP[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class BindingTarget{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const n=this.read();if(!BindingTarget.isBindable(n))throw TpError.notBindable();if(!(e in n))throw TpError.propertyNotFound(e);n[e]=t}}class Emitter{constructor(){this.observers_={}}on(e,t,n){var r;let s=this.observers_[e];return s||(s=this.observers_[e]=[]),s.push({handler:t,key:(r=n==null?void 0:n.key)!==null&&r!==void 0?r:t}),this}off(e,t){const n=this.observers_[e];return n&&(this.observers_[e]=n.filter(r=>r.key!==t)),this}emit(e,t){const n=this.observers_[e];n&&n.forEach(r=>{r.handler(t)})}}class ComplexValue{constructor(e,t){var n;this.constraint_=t==null?void 0:t.constraint,this.equals_=(n=t==null?void 0:t.equals)!==null&&n!==void 0?n:(r,s)=>r===s,this.emitter=new Emitter,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const n=t??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_;this.equals_(s,r)&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:r,sender:this}))}}class PrimitiveValue{constructor(e){this.emitter=new Emitter,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const n=t??{forceEmit:!1,last:!0},r=this.value_;r===e&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:this.value_,sender:this}))}}class ReadonlyPrimitiveValue{constructor(e){this.emitter=new Emitter,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function createValue(i,e){const t=e==null?void 0:e.constraint,n=e==null?void 0:e.equals;return!t&&!n?new PrimitiveValue(i):new ComplexValue(i,e)}function createReadonlyValue(i){return[new ReadonlyPrimitiveValue(i),(e,t)=>{i.setRawValue(e,t)}]}class ValueMap{constructor(e){this.emitter=new Emitter,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((n,r)=>Object.assign(n,{[r]:createValue(e[r])}),{})}static fromObject(e){const t=this.createCore(e);return new ValueMap(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}class DefiniteRangeConstraint{constructor(e){this.values=ValueMap.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(e,n),t)}}class RangeConstraint{constructor(e){this.values=ValueMap.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),n=this.values.get("min");let r=e;return isEmpty(n)||(r=Math.max(r,n)),isEmpty(t)||(r=Math.min(r,t)),r}}class StepConstraint{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,n=Math.round((e-t)/this.step);return t+n*this.step}}class NumberLiteralNode{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const BINARY_OPERATION_MAP={"**":(i,e)=>Math.pow(i,e),"*":(i,e)=>i*e,"/":(i,e)=>i/e,"%":(i,e)=>i%e,"+":(i,e)=>i+e,"-":(i,e)=>i-e,"<<":(i,e)=>i<<e,">>":(i,e)=>i>>e,">>>":(i,e)=>i>>>e,"&":(i,e)=>i&e,"^":(i,e)=>i^e,"|":(i,e)=>i|e};class BinaryOperationNode{constructor(e,t,n){this.left=t,this.operator=e,this.right=n}evaluate(){const e=BINARY_OPERATION_MAP[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const UNARY_OPERATION_MAP={"+":i=>i,"-":i=>-i,"~":i=>~i};class UnaryOperationNode{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=UNARY_OPERATION_MAP[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function combineReader(i){return(e,t)=>{for(let n=0;n<i.length;n++){const r=i[n](e,t);if(r!=="")return r}return""}}function readWhitespace(i,e){var t;const n=i.substr(e).match(/^\s+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function readNonZeroDigit(i,e){const t=i.substr(e,1);return t.match(/^[1-9]$/)?t:""}function readDecimalDigits(i,e){var t;const n=i.substr(e).match(/^[0-9]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function readSignedInteger(i,e){const t=readDecimalDigits(i,e);if(t!=="")return t;const n=i.substr(e,1);if(e+=1,n!=="-"&&n!=="+")return"";const r=readDecimalDigits(i,e);return r===""?"":n+r}function readExponentPart(i,e){const t=i.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const n=readSignedInteger(i,e);return n===""?"":t+n}function readDecimalIntegerLiteral(i,e){const t=i.substr(e,1);if(t==="0")return t;const n=readNonZeroDigit(i,e);return e+=n.length,n===""?"":n+readDecimalDigits(i,e)}function readDecimalLiteral1(i,e){const t=readDecimalIntegerLiteral(i,e);if(e+=t.length,t==="")return"";const n=i.substr(e,1);if(e+=n.length,n!==".")return"";const r=readDecimalDigits(i,e);return e+=r.length,t+n+r+readExponentPart(i,e)}function readDecimalLiteral2(i,e){const t=i.substr(e,1);if(e+=t.length,t!==".")return"";const n=readDecimalDigits(i,e);return e+=n.length,n===""?"":t+n+readExponentPart(i,e)}function readDecimalLiteral3(i,e){const t=readDecimalIntegerLiteral(i,e);return e+=t.length,t===""?"":t+readExponentPart(i,e)}const readDecimalLiteral=combineReader([readDecimalLiteral1,readDecimalLiteral2,readDecimalLiteral3]);function parseBinaryDigits(i,e){var t;const n=i.substr(e).match(/^[01]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function readBinaryIntegerLiteral(i,e){const t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const n=parseBinaryDigits(i,e);return n===""?"":t+n}function readOctalDigits(i,e){var t;const n=i.substr(e).match(/^[0-7]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function readOctalIntegerLiteral(i,e){const t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const n=readOctalDigits(i,e);return n===""?"":t+n}function readHexDigits(i,e){var t;const n=i.substr(e).match(/^[0-9a-f]+/i);return(t=n&&n[0])!==null&&t!==void 0?t:""}function readHexIntegerLiteral(i,e){const t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const n=readHexDigits(i,e);return n===""?"":t+n}const readNonDecimalIntegerLiteral=combineReader([readBinaryIntegerLiteral,readOctalIntegerLiteral,readHexIntegerLiteral]),readNumericLiteral=combineReader([readNonDecimalIntegerLiteral,readDecimalLiteral]);function parseLiteral(i,e){const t=readNumericLiteral(i,e);return e+=t.length,t===""?null:{evaluable:new NumberLiteralNode(t),cursor:e}}function parseParenthesizedExpression(i,e){const t=i.substr(e,1);if(e+=t.length,t!=="(")return null;const n=parseExpression(i,e);if(!n)return null;e=n.cursor,e+=readWhitespace(i,e).length;const r=i.substr(e,1);return e+=r.length,r!==")"?null:{evaluable:n.evaluable,cursor:e}}function parsePrimaryExpression(i,e){var t;return(t=parseLiteral(i,e))!==null&&t!==void 0?t:parseParenthesizedExpression(i,e)}function parseUnaryExpression(i,e){const t=parsePrimaryExpression(i,e);if(t)return t;const n=i.substr(e,1);if(e+=n.length,n!=="+"&&n!=="-"&&n!=="~")return null;const r=parseUnaryExpression(i,e);return r?(e=r.cursor,{cursor:e,evaluable:new UnaryOperationNode(n,r.evaluable)}):null}function readBinaryOperator(i,e,t){t+=readWhitespace(e,t).length;const n=i.filter(r=>e.startsWith(r,t))[0];return n?(t+=n.length,t+=readWhitespace(e,t).length,{cursor:t,operator:n}):null}function createBinaryOperationExpressionParser(i,e){return(t,n)=>{const r=i(t,n);if(!r)return null;n=r.cursor;let s=r.evaluable;for(;;){const o=readBinaryOperator(e,t,n);if(!o)break;n=o.cursor;const l=i(t,n);if(!l)return null;n=l.cursor,s=new BinaryOperationNode(o.operator,s,l.evaluable)}return s?{cursor:n,evaluable:s}:null}}const parseBinaryOperationExpression=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((i,e)=>createBinaryOperationExpressionParser(i,e),parseUnaryExpression);function parseExpression(i,e){return e+=readWhitespace(i,e).length,parseBinaryOperationExpression(i,e)}function parseEcmaNumberExpression(i){const e=parseExpression(i,0);return!e||e.cursor+readWhitespace(i,e.cursor).length!==i.length?null:e.evaluable}function parseNumber(i){var e;const t=parseEcmaNumberExpression(i);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}function numberFromUnknown(i){if(typeof i=="number")return i;if(typeof i=="string"){const e=parseNumber(i);if(!isEmpty(e))return e}return 0}function numberToString(i){return String(i)}function createNumberFormatter(i){return e=>e.toFixed(Math.max(Math.min(i,20),0))}function mapRange(i,e,t,n,r){const s=(i-e)/(t-e);return n+s*(r-n)}function getDecimalDigits(i){return String(i.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function constrainRange(i,e,t){return Math.min(Math.max(i,e),t)}function loopRange(i,e){return(i%e+e)%e}function getSuitableDecimalDigits(i,e){return isEmpty(i.step)?Math.max(getDecimalDigits(e),2):getDecimalDigits(i.step)}function getSuitableKeyScale(i){var e;return(e=i.step)!==null&&e!==void 0?e:1}function getSuitablePointerScale(i,e){var t;const n=Math.abs((t=i.step)!==null&&t!==void 0?t:e);return n===0?.1:Math.pow(10,Math.floor(Math.log10(n))-1)}function createStepConstraint(i,e){return isEmpty(i.step)?null:new StepConstraint(i.step,e)}function createRangeConstraint(i){return!isEmpty(i.max)&&!isEmpty(i.min)?new DefiniteRangeConstraint({max:i.max,min:i.min}):!isEmpty(i.max)||!isEmpty(i.min)?new RangeConstraint({max:i.max,min:i.min}):null}function createNumberTextPropsObject(i,e){var t,n,r;return{formatter:(t=i.format)!==null&&t!==void 0?t:createNumberFormatter(getSuitableDecimalDigits(i,e)),keyScale:(n=i.keyScale)!==null&&n!==void 0?n:getSuitableKeyScale(i),pointerScale:(r=i.pointerScale)!==null&&r!==void 0?r:getSuitablePointerScale(i,e)}}function createNumberTextInputParamsParser(i){return{format:i.optional.function,keyScale:i.optional.number,max:i.optional.number,min:i.optional.number,pointerScale:i.optional.number,step:i.optional.number}}function createPointAxis(i){return{constraint:i.constraint,textProps:ValueMap.fromObject(createNumberTextPropsObject(i.params,i.initialValue))}}class BladeApi{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class TpEvent{constructor(e){this.target=e}}class TpChangeEvent extends TpEvent{constructor(e,t,n){super(e),this.value=t,this.last=n??!0}}class TpFoldEvent extends TpEvent{constructor(e,t){super(e),this.expanded=t}}class TpTabSelectEvent extends TpEvent{constructor(e,t){super(e),this.index=t}}class TpMouseEvent extends TpEvent{constructor(e,t){super(e),this.native=t}}class BindingApi extends BladeApi{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Emitter,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const n=t.bind(this);return this.emitter_.on(e,r=>{n(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new TpChangeEvent(this,t.binding.target.read(),e.options.last))}}class InputBindingValue{constructor(e,t){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Emitter}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function isInputBindingValue(i){if(!("binding"in i))return!1;const e=i.binding;return isBinding(e)&&"read"in e&&"write"in e}function parseObject(i,e){const n=Object.keys(e).reduce((r,s)=>{if(r===void 0)return;const o=e[s],l=o(i[s]);return l.succeeded?Object.assign(Object.assign({},r),{[s]:l.value}):void 0},{});return n}function parseArray(i,e){return i.reduce((t,n)=>{if(t===void 0)return;const r=e(n);if(!(!r.succeeded||r.value===void 0))return[...t,r.value]},[])}function isObject(i){return i===null?!1:typeof i=="object"}function createMicroParserBuilder(i){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const n=i(t);return n!==void 0?{succeeded:!0,value:n}:{succeeded:!1,value:void 0}}}function createMicroParserBuilders(i){return{custom:e=>createMicroParserBuilder(e)(i),boolean:createMicroParserBuilder(e=>typeof e=="boolean"?e:void 0)(i),number:createMicroParserBuilder(e=>typeof e=="number"?e:void 0)(i),string:createMicroParserBuilder(e=>typeof e=="string"?e:void 0)(i),function:createMicroParserBuilder(e=>typeof e=="function"?e:void 0)(i),constant:e=>createMicroParserBuilder(t=>t===e?e:void 0)(i),raw:createMicroParserBuilder(e=>e)(i),object:e=>createMicroParserBuilder(t=>{if(isObject(t))return parseObject(t,e)})(i),array:e=>createMicroParserBuilder(t=>{if(Array.isArray(t))return parseArray(t,e)})(i)}}const MicroParsers={optional:createMicroParserBuilders(!0),required:createMicroParserBuilders(!1)};function parseRecord(i,e){const t=e(MicroParsers),n=MicroParsers.required.object(t)(i);return n.succeeded?n.value:void 0}function importBladeState(i,e,t,n){if(e&&!e(i))return!1;const r=parseRecord(i,t);return r?n(r):!1}function exportBladeState(i,e){var t;return deepMerge((t=i==null?void 0:i())!==null&&t!==void 0?t:{},e)}function isValueBladeController(i){return"value"in i}function isBindingValue(i){if(!isObject$1(i)||!("binding"in i))return!1;const e=i.binding;return isBinding(e)}const SVG_NS="http://www.w3.org/2000/svg";function forceReflow(i){i.offsetHeight}function disableTransitionTemporarily(i,e){const t=i.style.transition;i.style.transition="none",e(),i.style.transition=t}function supportsTouch(i){return i.ontouchstart!==void 0}function getGlobalObject(){return globalThis}function getWindowDocument(){return getGlobalObject().document}function getCanvasContext(i){const e=i.ownerDocument.defaultView;return e&&"document"in e?i.getContext("2d",{willReadFrequently:!0}):null}const ICON_ID_TO_INNER_HTML_MAP={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function createSvgIconElement(i,e){const t=i.createElementNS(SVG_NS,"svg");return t.innerHTML=ICON_ID_TO_INNER_HTML_MAP[e],t}function insertElementAt(i,e,t){i.insertBefore(e,i.children[t])}function removeElement(i){i.parentElement&&i.parentElement.removeChild(i)}function removeChildElements(i){for(;i.children.length>0;)i.removeChild(i.children[0])}function removeChildNodes(i){for(;i.childNodes.length>0;)i.removeChild(i.childNodes[0])}function findNextTarget(i){return i.relatedTarget?i.relatedTarget:"explicitOriginalTarget"in i?i.explicitOriginalTarget:null}function bindValue(i,e){i.emitter.on("change",t=>{e(t.rawValue)}),e(i.rawValue)}function bindValueMap(i,e,t){bindValue(i.value(e),t)}const PREFIX="tp";function ClassName(i){return(t,n)=>[PREFIX,"-",i,"v",t?`_${t}`:"",n?`-${n}`:""].join("")}const cn$r=ClassName("lbl");function createLabelNode(i,e){const t=i.createDocumentFragment();return e.split(`
`).map(r=>i.createTextNode(r)).forEach((r,s)=>{s>0&&t.appendChild(i.createElement("br")),t.appendChild(r)}),t}class LabelView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn$r()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(cn$r("l")),bindValueMap(t.props,"label",s=>{isEmpty(s)?this.element.classList.add(cn$r(void 0,"nol")):(this.element.classList.remove(cn$r(void 0,"nol")),removeChildNodes(n),n.appendChild(createLabelNode(e,s)))}),this.element.appendChild(n),this.labelElement=n;const r=e.createElement("div");r.classList.add(cn$r("v")),this.element.appendChild(r),this.valueElement=r}}class LabelController{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new LabelView(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return importBladeState(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return exportBladeState(null,{label:this.props.get("label")})}}function getAllBladePositions(){return["veryfirst","first","last","verylast"]}const cn$q=ClassName(""),POS_TO_CLASS_NAME_MAP={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class BladeController{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{getAllBladePositions().forEach(n=>{t.classList.remove(cn$q(void 0,POS_TO_CLASS_NAME_MAP[n]))}),this.blade.get("positions").forEach(n=>{t.classList.add(cn$q(void 0,POS_TO_CLASS_NAME_MAP[n]))})}),this.viewProps.handleDispose(()=>{removeElement(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return importBladeState(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return exportBladeState(null,Object.assign({},this.viewProps.exportState()))}}class LabeledValueBladeController extends BladeController{constructor(e,t){if(t.value!==t.valueController.value)throw TpError.shouldNeverHappen();const n=t.valueController.viewProps,r=new LabelController(e,{blade:t.blade,props:t.props,valueController:t.valueController});super(Object.assign(Object.assign({},t),{view:new LabelView(e,{props:t.props,viewProps:n}),viewProps:n})),this.labelController=r,this.value=t.value,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return importBladeState(e,t=>{var n,r,s;return super.importState(t)&&this.labelController.importProps(t)&&((s=(r=(n=this.valueController).importProps)===null||r===void 0?void 0:r.call(n,e))!==null&&s!==void 0?s:!0)},t=>({value:t.optional.raw}),t=>(t.value&&(this.value.rawValue=t.value),!0))}exportState(){var e,t,n;return exportBladeState(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(n=(t=(e=this.valueController).exportProps)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:{}))}}function excludeValue(i){const e=Object.assign({},i);return delete e.value,e}class BindingController extends LabeledValueBladeController{constructor(e,t){super(e,t),this.tag=t.tag}importState(e){return importBladeState(e,t=>super.importState(excludeValue(e)),t=>({tag:t.optional.string}),t=>(this.tag=t.tag,!0))}exportState(){return exportBladeState(()=>excludeValue(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function isBindingController(i){return isValueBladeController(i)&&isBindingValue(i.value)}class InputBindingController extends BindingController{importState(e){return importBladeState(e,t=>super.importState(t),t=>({binding:t.required.object({value:t.required.raw})}),t=>(this.value.binding.inject(t.binding.value),this.value.fetch(),!0))}}function isInputBindingController(i){return isValueBladeController(i)&&isInputBindingValue(i.value)}function fillBuffer(i,e){for(;i.length<e;)i.push(void 0)}function initializeBuffer(i){const e=[];return fillBuffer(e,i),e}function createTrimmedBuffer(i){const e=i.indexOf(void 0);return e<0?i:i.slice(0,e)}function createPushedBuffer(i,e){const t=[...createTrimmedBuffer(i),e];return t.length>i.length?t.splice(0,t.length-i.length):fillBuffer(t,i.length),t}class MonitorBindingValue{constructor(e){this.emitter=new Emitter,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=createValue(initializeBuffer(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=createPushedBuffer(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function isMonitorBindingValue(i){if(!("binding"in i))return!1;const e=i.binding;return isBinding(e)&&"read"in e&&!("write"in e)}class MonitorBindingController extends BindingController{exportState(){return exportBladeState(()=>super.exportState(),{binding:{readonly:!0}})}}function isMonitorBindingController(i){return isValueBladeController(i)&&isMonitorBindingValue(i.value)}class ButtonApi extends BladeApi{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const n=t.bind(this);return this.controller.buttonController.emitter.on(e,s=>{n(new TpMouseEvent(this,s.nativeEvent))}),this}off(e,t){return this.controller.buttonController.emitter.off(e,t),this}}function applyClass(i,e,t){t?i.classList.add(e):i.classList.remove(e)}function valueToClassName(i,e){return t=>{applyClass(i,e,t)}}function bindValueToTextContent(i,e){bindValue(i,t=>{e.textContent=t??""})}const cn$p=ClassName("btn");class ButtonView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn$p()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("button");n.classList.add(cn$p("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=e.createElement("div");r.classList.add(cn$p("t")),bindValueToTextContent(t.props.value("title"),r),this.buttonElement.appendChild(r)}}class ButtonController{constructor(e,t){this.emitter=new Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new ButtonView(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return importBladeState(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return exportBladeState(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class ButtonBladeController extends BladeController{constructor(e,t){const n=new ButtonController(e,{props:t.buttonProps,viewProps:t.viewProps}),r=new LabelController(e,{blade:t.blade,props:t.labelProps,valueController:n});super({blade:t.blade,view:r.view,viewProps:t.viewProps}),this.buttonController=n,this.labelController=r}importState(e){return importBladeState(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return exportBladeState(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Semver{constructor(e){const[t,n]=e.split("-"),r=t.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=n??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const VERSION$1=new Semver("2.0.5");function createPlugin(i){return Object.assign({core:VERSION$1},i)}const ButtonBladePlugin=createPlugin({id:"button",type:"blade",accept(i){const e=parseRecord(i,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(i){return new ButtonBladeController(i.document,{blade:i.blade,buttonProps:ValueMap.fromObject({title:i.params.title}),labelProps:ValueMap.fromObject({label:i.params.label}),viewProps:i.viewProps})},api(i){return i.controller instanceof ButtonBladeController?new ButtonApi(i.controller):null}});function addButtonAsBlade(i,e){return i.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function addFolderAsBlade(i,e){return i.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function addTabAsBlade(i,e){return i.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function isRefreshable(i){return isObject$1(i)?"refresh"in i&&typeof i.refresh=="function":!1}function createBindingTarget(i,e){if(!BindingTarget.isBindable(i))throw TpError.notBindable();return new BindingTarget(i,e)}class RackApi{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Emitter,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,n){const r=n??{},s=this.controller_.element.ownerDocument,o=this.pool_.createBinding(s,createBindingTarget(e,t),r),l=this.pool_.createBindingApi(o);return this.add(l,r.index)}addFolder(e){return addFolderAsBlade(this,e)}addButton(e){return addButtonAsBlade(this,e)}addTab(e){return addTabAsBlade(this,e)}add(e,t){const n=e.controller;return this.controller_.rack.add(n,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,n=this.pool_.createBlade(t,e),r=this.pool_.createApi(n);return this.add(r,e.index)}on(e,t){const n=t.bind(this);return this.emitter_.on(e,r=>{n(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.children.forEach(e=>{isRefreshable(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,n=this.pool_.createApi(t),r=isBindingValue(t.value)?t.value.binding:null;this.emitter_.emit("change",new TpChangeEvent(n,r?r.target.read():t.value.rawValue,e.options.last))}}class ContainerBladeApi extends BladeApi{constructor(e,t){super(e),this.rackApi_=new RackApi(e.rackController,t)}refresh(){this.rackApi_.refresh()}}class ContainerBladeController extends BladeController{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return importBladeState(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((n,r)=>n.importState(t.children[r])))}exportState(){return exportBladeState(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function isContainerBladeController(i){return"rackController"in i}class NestedOrderedSet{constructor(e){this.emitter=new Emitter,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw TpError.shouldNeverHappen();const n=t!==void 0?t:this.items_.length;this.items_.splice(n,0,e),this.cache_.add(e);const r=this.extract_(e);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:n,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const n=this.extract_(e);n&&(n.allItems().forEach(r=>{this.cache_.delete(r)}),n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function findValueBladeController(i,e){for(let t=0;t<i.length;t++){const n=i[t];if(isValueBladeController(n)&&n.value===e)return n}return null}function findSubBladeControllerSet(i){return isContainerBladeController(i)?i.rackController.rack.bcSet_:null}class Rack{constructor(e){var t,n;this.emitter=new Emitter,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(n=this.blade_)===null||n===void 0||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new NestedOrderedSet(findSubBladeControllerSet),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var n;(n=e.parent)===null||n===void 0||n.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const n=e.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),isValueBladeController(n))n.value.emitter.on("change",this.onChildValueChange_);else if(isContainerBladeController(n)){const r=n.rackController.rack;if(r){const s=r.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const n=e.item;if(isValueBladeController(n))n.value.emitter.off("change",this.onChildValueChange_);else if(isContainerBladeController(n)){const r=n.rackController.rack;if(r){const s=r.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(r=>!r.viewProps.get("hidden")),t=e[0],n=e[e.length-1];this.bcSet_.items.forEach(r=>{const s=[];r===t&&(s.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&s.push("veryfirst")),r===n&&(s.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&s.push("verylast")),r.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=findValueBladeController(this.find(isValueBladeController),e.sender);if(!t)throw TpError.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class RackController{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new Rack({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let n=this.rack.children.length-1;n>=0;n--)this.rack.children[n].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&insertElementAt(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&removeElement(e.bladeController.view.element)}}function createBlade(){return new ValueMap({positions:createValue([],{equals:deepEqualsArray})})}class Foldable extends ValueMap{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=ValueMap.createCore(t);return new Foldable(n)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!isEmpty(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const n=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};bindValueMap(this,"expanded",n),bindValueMap(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function computeExpandedFolderHeight(i,e){let t=0;return disableTransitionTemporarily(e,()=>{i.set("expandedHeight",null),i.set("temporaryExpanded",!0),forceReflow(e),t=e.clientHeight,i.set("temporaryExpanded",null),forceReflow(e)}),t}function applyHeight(i,e){e.style.height=i.styleHeight}function bindFoldable(i,e){i.value("expanded").emitter.on("beforechange",()=>{if(i.set("completed",!1),isEmpty(i.get("expandedHeight"))){const t=computeExpandedFolderHeight(i,e);t>0&&i.set("expandedHeight",t)}i.set("shouldFixHeight",!0),forceReflow(e)}),i.emitter.on("change",()=>{applyHeight(i,e)}),applyHeight(i,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&i.cleanUpTransition()})}class FolderApi extends ContainerBladeApi{constructor(e,t){super(e,t),this.emitter_=new Emitter,this.controller.foldable.value("expanded").emitter.on("change",n=>{this.emitter_.emit("fold",new TpFoldEvent(this,n.sender.rawValue))}),this.rackApi_.on("change",n=>{this.emitter_.emit("change",n)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,n){return this.rackApi_.addBinding(e,t,n)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const n=t.bind(this);return this.emitter_.on(e,r=>{n(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const bladeContainerClassName=ClassName("cnt");class FolderView{constructor(e,t){var n;this.className_=ClassName((n=t.viewName)!==null&&n!==void 0?n:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),bladeContainerClassName()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),bindValueMap(this.foldable_,"completed",valueToClassName(this.element,this.className_(void 0,"cpl")));const r=e.createElement("button");r.classList.add(this.className_("b")),bindValueMap(t.props,"title",d=>{isEmpty(d)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const o=e.createElement("div");o.classList.add(this.className_("t")),bindValueToTextContent(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);const u=e.createElement("div");u.classList.add(this.className_("c")),this.element.appendChild(u),this.containerElement=u}}class FolderController extends ContainerBladeController{constructor(e,t){var n;const r=Foldable.create((n=t.expanded)!==null&&n!==void 0?n:!0),s=new FolderView(e,{foldable:r,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new RackController({blade:t.blade,element:s.containerElement,root:t.root,viewProps:t.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=r,bindFoldable(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return importBladeState(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return exportBladeState(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const FolderBladePlugin=createPlugin({id:"folder",type:"blade",accept(i){const e=parseRecord(i,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(i){return new FolderController(i.document,{blade:i.blade,expanded:i.params.expanded,props:ValueMap.fromObject({title:i.params.title}),viewProps:i.viewProps})},api(i){return i.controller instanceof FolderController?new FolderApi(i.controller,i.pool):null}}),cn$o=ClassName("");function valueToModifier(i,e){return valueToClassName(i,cn$o(void 0,e))}class ViewProps extends ValueMap{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=createReadonlyValue(createValue(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,n,r;const s=e??{};return new ViewProps(ValueMap.createCore({disabled:(t=s.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(n=s.hidden)!==null&&n!==void 0?n:!1,parent:(r=s.parent)!==null&&r!==void 0?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){bindValue(this.globalDisabled_,valueToModifier(e,"disabled")),bindValueMap(this,"hidden",valueToModifier(e,"hidden"))}bindDisabled(e){bindValue(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){bindValue(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const n=e.previousRawValue;n==null||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const cn$n=ClassName("tbp");class TabPageView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn$n()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(cn$n("c")),this.element.appendChild(n),this.containerElement=n}}const cn$m=ClassName("tbi");class TabItemView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn$m()),t.viewProps.bindClassModifiers(this.element),bindValueMap(t.props,"selected",s=>{s?this.element.classList.add(cn$m(void 0,"sel")):this.element.classList.remove(cn$m(void 0,"sel"))});const n=e.createElement("button");n.classList.add(cn$m("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=e.createElement("div");r.classList.add(cn$m("t")),bindValueToTextContent(t.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}}class TabItemController{constructor(e,t){this.emitter=new Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new TabItemView(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class TabPageController extends ContainerBladeController{constructor(e,t){const n=new TabPageView(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new RackController({blade:t.blade,element:n.containerElement,viewProps:t.viewProps}),view:n})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new TabItemController(e,{props:t.itemProps,viewProps:ViewProps.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,bindValueMap(this.props,"selected",r=>{this.itemController.props.set("selected",r),this.viewProps.set("hidden",!r)})}get itemController(){return this.ic_}importState(e){return importBladeState(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return exportBladeState(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class TabApi extends ContainerBladeApi{constructor(e,t){super(e,t),this.emitter_=new Emitter,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",n=>{this.emitter_.emit("change",n)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,n=new TabPageController(t,{blade:createBlade(),itemProps:ValueMap.fromObject({selected:!1,title:e.title}),props:ValueMap.fromObject({selected:!1}),viewProps:ViewProps.create()}),r=this.pool_.createApi(n);return this.rackApi_.add(r,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const n=t.bind(this);return this.emitter_.on(e,r=>{n(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}onSelect_(e){this.emitter_.emit("select",new TpTabSelectEvent(this,e.rawValue))}}class TabPageApi extends ContainerBladeApi{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,n){return this.rackApi_.addBinding(e,t,n)}addBlade(e){return this.rackApi_.addBlade(e)}}const INDEX_NOT_SELECTED=-1;class Tab{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=createValue(!0),this.selectedIndex=createValue(INDEX_NOT_SELECTED),this.items_=[]}add(e,t){const n=t??this.items_.length;this.items_.splice(n,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=INDEX_NOT_SELECTED,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,n)=>{t.rawValue=n===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,n)=>{t.rawValue=n===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(n=>n===e.sender);this.items_.forEach((n,r)=>{n.rawValue=r===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}}const cn$l=ClassName("tab");class TabView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn$l(),bladeContainerClassName()),t.viewProps.bindClassModifiers(this.element),bindValue(t.empty,valueToClassName(this.element,cn$l(void 0,"nop")));const n=e.createElement("div");n.classList.add(cn$l("t")),this.element.appendChild(n),this.itemsElement=n;const r=e.createElement("div");r.classList.add(cn$l("i")),this.element.appendChild(r);const s=e.createElement("div");s.classList.add(cn$l("c")),this.element.appendChild(s),this.contentsElement=s}}class TabController extends ContainerBladeController{constructor(e,t){const n=new Tab,r=new TabView(e,{empty:n.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new RackController({blade:t.blade,element:r.contentsElement,viewProps:t.viewProps}),view:r}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=n}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;insertElementAt(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;removeElement(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}}const TabBladePlugin=createPlugin({id:"tab",type:"blade",accept(i){const e=parseRecord(i,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(i){const e=new TabController(i.document,{blade:i.blade,viewProps:i.viewProps});return i.params.pages.forEach(t=>{const n=new TabPageController(i.document,{blade:createBlade(),itemProps:ValueMap.fromObject({selected:!1,title:t.title}),props:ValueMap.fromObject({selected:!1}),viewProps:ViewProps.create()});e.add(n)}),e},api(i){return i.controller instanceof TabController?new TabApi(i.controller,i.pool):i.controller instanceof TabPageController?new TabPageApi(i.controller,i.pool):null}});function createBladeController(i,e){const t=i.accept(e.params);if(!t)return null;const n=parseRecord(e.params,r=>({disabled:r.optional.boolean,hidden:r.optional.boolean}));return i.controller({blade:createBlade(),document:e.document,params:Object.assign(Object.assign({},t.params),{disabled:n==null?void 0:n.disabled,hidden:n==null?void 0:n.hidden}),viewProps:ViewProps.create({disabled:n==null?void 0:n.disabled,hidden:n==null?void 0:n.hidden})})}class ListInputBindingApi extends BindingApi{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class ManualTicker{constructor(){this.disabled=!1,this.emitter=new Emitter}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class IntervalTicker{constructor(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Emitter,this.interval_=t,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class CompositeConstraint{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,n)=>n.constrain(t),e)}}function findConstraint(i,e){if(i instanceof e)return i;if(i instanceof CompositeConstraint){const t=i.constraints.reduce((n,r)=>n||(r instanceof e?r:null),null);if(t)return t}return null}class ListConstraint{constructor(e){this.values=ValueMap.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(r=>r.value===e).length>0?e:t[0].value}}function parseListOptions(i){var e;const t=MicroParsers;if(Array.isArray(i))return(e=parseRecord({items:i},n=>({items:n.required.array(n.required.object({text:n.required.string,value:n.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof i=="object")return t.required.raw(i).value}function normalizeListOptions(i){if(Array.isArray(i))return i;const e=[];return Object.keys(i).forEach(t=>{e.push({text:t,value:i[t]})}),e}function createListConstraint(i){return isEmpty(i)?null:new ListConstraint(normalizeListOptions(i))}const cn$k=ClassName("lst");class ListView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(cn$k()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("select");n.classList.add(cn$k("s")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const r=e.createElement("div");r.classList.add(cn$k("m")),r.appendChild(createSvgIconElement(e,"dropdown")),this.element.appendChild(r),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,bindValueMap(this.props_,"options",s=>{removeChildElements(this.selectElement),s.forEach(o=>{const l=e.createElement("option");l.textContent=o.text,this.selectElement.appendChild(l)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class ListController{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new ListView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return importBladeState(e,null,t=>({options:t.required.custom(parseListOptions)}),t=>(this.props.set("options",normalizeListOptions(t.options)),!0))}exportProps(){return exportBladeState(null,{options:this.props.get("options")})}}const cn$j=ClassName("pop");class PopupView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn$j()),t.viewProps.bindClassModifiers(this.element),bindValue(t.shows,valueToClassName(this.element,cn$j(void 0,"v")))}}class PopupController{constructor(e,t){this.shows=createValue(!1),this.viewProps=t.viewProps,this.view=new PopupView(e,{shows:this.shows,viewProps:this.viewProps})}}const cn$i=ClassName("txt");class TextView{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(cn$i()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const n=e.createElement("input");n.classList.add(cn$i("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class TextController{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new TextView(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget.value,r=this.parser_(n);isEmpty(r)||(this.value.rawValue=r),this.view.refresh()}}function boolToString(i){return String(i)}function boolFromUnknown(i){return i==="false"?!1:!!i}function BooleanFormatter(i){return boolToString(i)}function composeParsers(i){return e=>i.reduce((t,n)=>t!==null?t:n(e),null)}const innerFormatter=createNumberFormatter(0);function formatPercentage(i){return innerFormatter(i)+"%"}function stringFromUnknown(i){return String(i)}function formatString(i){return i}function connectValues({primary:i,secondary:e,forward:t,backward:n}){let r=!1;function s(o){r||(r=!0,o(),r=!1)}i.emitter.on("change",o=>{s(()=>{e.setRawValue(t(i.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{s(()=>{i.setRawValue(n(i.rawValue,e.rawValue),o.options)}),s(()=>{e.setRawValue(t(i.rawValue,e.rawValue),o.options)})}),s(()=>{e.setRawValue(t(i.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function getStepForKey(i,e){const t=i*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function getVerticalStepKeys(i){return{altKey:i.altKey,downKey:i.key==="ArrowDown",shiftKey:i.shiftKey,upKey:i.key==="ArrowUp"}}function getHorizontalStepKeys(i){return{altKey:i.altKey,downKey:i.key==="ArrowLeft",shiftKey:i.shiftKey,upKey:i.key==="ArrowRight"}}function isVerticalArrowKey(i){return i==="ArrowUp"||i==="ArrowDown"}function isArrowKey(i){return isVerticalArrowKey(i)||i==="ArrowLeft"||i==="ArrowRight"}function computeOffset$1(i,e){var t,n;const r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:i.pageX-(((t=r&&r.scrollX)!==null&&t!==void 0?t:0)+s.left),y:i.pageY-(((n=r&&r.scrollY)!==null&&n!==void 0?n:0)+s.top)}}class PointerHandler{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Emitter,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(computeOffset$1(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(computeOffset$1(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(computeOffset$1(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const n=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const cn$h=ClassName("txt");class NumberTextView{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(cn$h(),cn$h(void 0,"num")),t.arrayPosition&&this.element.classList.add(cn$h(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("input");n.classList.add(cn$h("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(cn$h()),this.inputElement.classList.add(cn$h("i"));const r=e.createElement("div");r.classList.add(cn$h("k")),this.element.appendChild(r),this.knobElement=r;const s=e.createElementNS(SVG_NS,"svg");s.classList.add(cn$h("g")),this.knobElement.appendChild(s);const o=e.createElementNS(SVG_NS,"path");o.classList.add(cn$h("gb")),s.appendChild(o),this.guideBodyElem_=o;const l=e.createElementNS(SVG_NS,"path");l.classList.add(cn$h("gh")),s.appendChild(l),this.guideHeadElem_=l;const u=e.createElement("div");u.classList.add(ClassName("tt")()),this.knobElement.appendChild(u),this.tooltipElem_=u,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(cn$h(void 0,"drg"));return}this.element.classList.add(cn$h(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),n=t+(t>0?-1:t<0?1:0),r=constrainRange(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+r},0 L${n},4 L${n+r},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class NumberTextController{constructor(e,t){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(n=t.sliderProps)!==null&&n!==void 0?n:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=createValue(null),this.view=new NumberTextView(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const r=new PointerHandler(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,n;const r=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),s=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("max");let o=e;return r!==void 0&&(o=Math.max(o,r)),s!==void 0&&(o=Math.min(o,s)),o}onInputChange_(e){const n=e.currentTarget.value,r=this.parser_(n);isEmpty(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()}onInputKeyDown_(e){const t=getStepForKey(this.props.get("keyScale"),getVerticalStepKeys(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){getStepForKey(this.props.get("keyScale"),getVerticalStepKeys(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const cn$g=ClassName("sld");class SliderView{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(cn$g()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(cn$g("t")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const r=e.createElement("div");r.classList.add(cn$g("k")),this.trackElement.appendChild(r),this.knobElement=r,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=constrainRange(mapRange(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class SliderController{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new SliderView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new PointerHandler(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(mapRange(constrainRange(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=getStepForKey(this.props.get("keyScale"),getHorizontalStepKeys(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){getStepForKey(this.props.get("keyScale"),getHorizontalStepKeys(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const cn$f=ClassName("sldtxt");class SliderTextView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn$f());const n=e.createElement("div");n.classList.add(cn$f("s")),this.sliderView_=t.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const r=e.createElement("div");r.classList.add(cn$f("t")),this.textView_=t.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}class SliderTextController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new SliderController(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new NumberTextController(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new SliderTextView(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return importBladeState(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const n=this.sliderC_.props;return n.set("max",t.max),n.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return exportBladeState(null,{max:e.get("max"),min:e.get("min")})}}function createSliderTextProps(i){return{sliderProps:new ValueMap({keyScale:i.keyScale,max:i.max,min:i.min}),textProps:new ValueMap({formatter:createValue(i.formatter),keyScale:i.keyScale,pointerScale:createValue(i.pointerScale)})}}const CSS_VAR_MAP={containerUnitSize:"cnt-usz"};function getCssVar(i){return`--${CSS_VAR_MAP[i]}`}function createPointDimensionParser(i){return createNumberTextInputParamsParser(i)}function parsePointDimensionParams(i){if(isRecord(i))return parseRecord(i,createPointDimensionParser)}function createDimensionConstraint(i,e){if(!i)return;const t=[],n=createStepConstraint(i,e);n&&t.push(n);const r=createRangeConstraint(i);return r&&t.push(r),new CompositeConstraint(t)}function isCompatible(i){return i?i.major===VERSION$1.major:!1}function parsePickerLayout(i){if(i==="inline"||i==="popup")return i}function writePrimitive(i,e){i.write(e)}const cn$e=ClassName("ckb");class CheckboxView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(cn$e()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("label");n.classList.add(cn$e("l")),this.element.appendChild(n),this.labelElement=n;const r=e.createElement("input");r.classList.add(cn$e("i")),r.type="checkbox",this.labelElement.appendChild(r),this.inputElement=r,t.viewProps.bindDisabled(this.inputElement);const s=e.createElement("div");s.classList.add(cn$e("w")),this.labelElement.appendChild(s);const o=createSvgIconElement(e,"check");s.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class CheckboxController{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new CheckboxView(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function createConstraint$6(i){const e=[],t=createListConstraint(i.options);return t&&e.push(t),new CompositeConstraint(e)}const BooleanInputPlugin=createPlugin({id:"input-bool",type:"input",accept:(i,e)=>{if(typeof i!="boolean")return null;const t=parseRecord(e,n=>({options:n.optional.custom(parseListOptions),readonly:n.optional.constant(!1)}));return t?{initialValue:i,params:t}:null},binding:{reader:i=>boolFromUnknown,constraint:i=>createConstraint$6(i.params),writer:i=>writePrimitive},controller:i=>{const e=i.document,t=i.value,n=i.constraint,r=n&&findConstraint(n,ListConstraint);return r?new ListController(e,{props:new ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps}):new CheckboxController(e,{value:t,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="boolean"?null:i.controller.valueController instanceof ListController?new ListInputBindingApi(i.controller):null}}),cn$d=ClassName("col");class ColorView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn$d()),t.foldable.bindExpandedClass(this.element,cn$d(void 0,"expanded")),bindValueMap(t.foldable,"completed",valueToClassName(this.element,cn$d(void 0,"cpl")));const n=e.createElement("div");n.classList.add(cn$d("h")),this.element.appendChild(n);const r=e.createElement("div");r.classList.add(cn$d("s")),n.appendChild(r),this.swatchElement=r;const s=e.createElement("div");if(s.classList.add(cn$d("t")),n.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(cn$d("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function rgbToHslInt(i,e,t){const n=constrainRange(i/255,0,1),r=constrainRange(e/255,0,1),s=constrainRange(t/255,0,1),o=Math.max(n,r,s),l=Math.min(n,r,s),u=o-l;let d=0,p=0;const g=(l+o)/2;return u!==0&&(p=u/(1-Math.abs(o+l-1)),n===o?d=(r-s)/u:r===o?d=2+(s-n)/u:d=4+(n-r)/u,d=d/6+(d<0?1:0)),[d*360,p*100,g*100]}function hslToRgbInt(i,e,t){const n=(i%360+360)%360,r=constrainRange(e/100,0,1),s=constrainRange(t/100,0,1),o=(1-Math.abs(2*s-1))*r,l=o*(1-Math.abs(n/60%2-1)),u=s-o/2;let d,p,g;return n>=0&&n<60?[d,p,g]=[o,l,0]:n>=60&&n<120?[d,p,g]=[l,o,0]:n>=120&&n<180?[d,p,g]=[0,o,l]:n>=180&&n<240?[d,p,g]=[0,l,o]:n>=240&&n<300?[d,p,g]=[l,0,o]:[d,p,g]=[o,0,l],[(d+u)*255,(p+u)*255,(g+u)*255]}function rgbToHsvInt(i,e,t){const n=constrainRange(i/255,0,1),r=constrainRange(e/255,0,1),s=constrainRange(t/255,0,1),o=Math.max(n,r,s),l=Math.min(n,r,s),u=o-l;let d;u===0?d=0:o===n?d=60*(((r-s)/u%6+6)%6):o===r?d=60*((s-n)/u+2):d=60*((n-r)/u+4);const p=o===0?0:u/o,g=o;return[d,p*100,g*100]}function hsvToRgbInt(i,e,t){const n=loopRange(i,360),r=constrainRange(e/100,0,1),s=constrainRange(t/100,0,1),o=s*r,l=o*(1-Math.abs(n/60%2-1)),u=s-o;let d,p,g;return n>=0&&n<60?[d,p,g]=[o,l,0]:n>=60&&n<120?[d,p,g]=[l,o,0]:n>=120&&n<180?[d,p,g]=[0,o,l]:n>=180&&n<240?[d,p,g]=[0,l,o]:n>=240&&n<300?[d,p,g]=[l,0,o]:[d,p,g]=[o,0,l],[(d+u)*255,(p+u)*255,(g+u)*255]}function hslToHsvInt(i,e,t){const n=t+e*(100-Math.abs(2*t-100))/200;return[i,n!==0?e*(100-Math.abs(2*t-100))/n:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}function hsvToHslInt(i,e,t){const n=100-Math.abs(t*(200-e)/100-100);return[i,n!==0?e*t/n:0,t*(200-e)/(2*100)]}function removeAlphaComponent(i){return[i[0],i[1],i[2]]}function appendAlphaComponent(i,e){return[i[0],i[1],i[2],e]}const MODE_CONVERTER_MAP={hsl:{hsl:(i,e,t)=>[i,e,t],hsv:hslToHsvInt,rgb:hslToRgbInt},hsv:{hsl:hsvToHslInt,hsv:(i,e,t)=>[i,e,t],rgb:hsvToRgbInt},rgb:{hsl:rgbToHslInt,hsv:rgbToHsvInt,rgb:(i,e,t)=>[i,e,t]}};function getColorMaxComponents(i,e){return[e==="float"?1:i==="rgb"?255:360,e==="float"?1:i==="rgb"?255:100,e==="float"?1:i==="rgb"?255:100]}function loopHueRange(i,e){return i===e?e:loopRange(i,e)}function constrainColorComponents(i,e,t){var n;const r=getColorMaxComponents(e,t);return[e==="rgb"?constrainRange(i[0],0,r[0]):loopHueRange(i[0],r[0]),constrainRange(i[1],0,r[1]),constrainRange(i[2],0,r[2]),constrainRange((n=i[3])!==null&&n!==void 0?n:1,0,1)]}function convertColorType(i,e,t,n){const r=getColorMaxComponents(e,t),s=getColorMaxComponents(e,n);return i.map((o,l)=>o/r[l]*s[l])}function convertColor(i,e,t){const n=convertColorType(i,e.mode,e.type,"int"),r=MODE_CONVERTER_MAP[e.mode][t.mode](...n);return convertColorType(r,t.mode,"int",t.type)}class IntColor{static black(){return new IntColor([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=constrainColorComponents(e,t,this.type)}getComponents(e){return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const cn$c=ClassName("colp");class ColorPickerView{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(cn$c()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(cn$c("hsv"));const r=e.createElement("div");r.classList.add(cn$c("sv")),this.svPaletteView_=t.svPaletteView,r.appendChild(this.svPaletteView_.element),n.appendChild(r);const s=e.createElement("div");s.classList.add(cn$c("h")),this.hPaletteView_=t.hPaletteView,s.appendChild(this.hPaletteView_.element),n.appendChild(s),this.element.appendChild(n);const o=e.createElement("div");if(o.classList.add(cn$c("rgb")),this.textsView_=t.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const l=e.createElement("div");l.classList.add(cn$c("a"));const u=e.createElement("div");u.classList.add(cn$c("ap")),u.appendChild(this.alphaViews_.palette.element),l.appendChild(u);const d=e.createElement("div");d.classList.add(cn$c("at")),d.appendChild(this.alphaViews_.text.element),l.appendChild(d),this.element.appendChild(l)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function parseColorType(i){return i==="int"?"int":i==="float"?"float":void 0}function parseColorInputParams(i){return parseRecord(i,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(parseColorType)}),expanded:e.optional.boolean,picker:e.optional.custom(parsePickerLayout),readonly:e.optional.constant(!1)}))}function getKeyScaleForColor(i){return i?.1:1}function extractColorType(i){var e;return(e=i.color)===null||e===void 0?void 0:e.type}class FloatColor{constructor(e,t){this.type="float",this.mode=t,this.comps_=constrainColorComponents(e,t,this.type)}getComponents(e){return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const TYPE_TO_CONSTRUCTOR_MAP={int:(i,e)=>new IntColor(i,e),float:(i,e)=>new FloatColor(i,e)};function createColor(i,e,t){return TYPE_TO_CONSTRUCTOR_MAP[t](i,e)}function isFloatColor(i){return i.type==="float"}function isIntColor(i){return i.type==="int"}function convertFloatToInt(i){const e=i.getComponents(),t=getColorMaxComponents(i.mode,"int");return new IntColor([Math.round(mapRange(e[0],0,1,0,t[0])),Math.round(mapRange(e[1],0,1,0,t[1])),Math.round(mapRange(e[2],0,1,0,t[2])),e[3]],i.mode)}function convertIntToFloat(i){const e=i.getComponents(),t=getColorMaxComponents(i.mode,"int");return new FloatColor([mapRange(e[0],0,t[0],0,1),mapRange(e[1],0,t[1],0,1),mapRange(e[2],0,t[2],0,1),e[3]],i.mode)}function mapColorType(i,e){if(i.type===e)return i;if(isIntColor(i)&&e==="float")return convertIntToFloat(i);if(isFloatColor(i)&&e==="int")return convertFloatToInt(i);throw TpError.shouldNeverHappen()}function equalsStringColorFormat(i,e){return i.alpha===e.alpha&&i.mode===e.mode&&i.notation===e.notation&&i.type===e.type}function parseCssNumberOrPercentage(i,e){const t=i.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(i),e)}const ANGLE_TO_DEG_MAP={deg:i=>i,grad:i=>i*360/400,rad:i=>i*360/(2*Math.PI),turn:i=>i*360};function parseCssNumberOrAngle(i){const e=i.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(i);const t=parseFloat(e[1]),n=e[2];return ANGLE_TO_DEG_MAP[n](t)}function parseFunctionalRgbColorComponents(i){const e=i.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[parseCssNumberOrPercentage(e[1],255),parseCssNumberOrPercentage(e[2],255),parseCssNumberOrPercentage(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function parseFunctionalRgbColor(i){const e=parseFunctionalRgbColorComponents(i);return e?new IntColor(e,"rgb"):null}function parseFunctionalRgbaColorComponents(i){const e=i.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[parseCssNumberOrPercentage(e[1],255),parseCssNumberOrPercentage(e[2],255),parseCssNumberOrPercentage(e[3],255),parseCssNumberOrPercentage(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function parseFunctionalRgbaColor(i){const e=parseFunctionalRgbaColorComponents(i);return e?new IntColor(e,"rgb"):null}function parseFunctionalHslColorComponents(i){const e=i.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[parseCssNumberOrAngle(e[1]),parseCssNumberOrPercentage(e[2],100),parseCssNumberOrPercentage(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function parseFunctionalHslColor(i){const e=parseFunctionalHslColorComponents(i);return e?new IntColor(e,"hsl"):null}function parseHslaColorComponents(i){const e=i.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[parseCssNumberOrAngle(e[1]),parseCssNumberOrPercentage(e[2],100),parseCssNumberOrPercentage(e[3],100),parseCssNumberOrPercentage(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function parseFunctionalHslaColor(i){const e=parseHslaColorComponents(i);return e?new IntColor(e,"hsl"):null}function parseHexRgbColorComponents(i){const e=i.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=i.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function parseHexRgbColor(i){const e=parseHexRgbColorComponents(i);return e?new IntColor(e,"rgb"):null}function parseHexRgbaColorComponents(i){const e=i.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),mapRange(parseInt(e[4]+e[4],16),0,255,0,1)];const t=i.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),mapRange(parseInt(t[4],16),0,255,0,1)]:null}function parseHexRgbaColor(i){const e=parseHexRgbaColorComponents(i);return e?new IntColor(e,"rgb"):null}function parseObjectRgbColorComponents(i){const e=i.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function createObjectRgbColorParser(i){return e=>{const t=parseObjectRgbColorComponents(e);return t?createColor(t,"rgb",i):null}}function parseObjectRgbaColorComponents(i){const e=i.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function createObjectRgbaColorParser(i){return e=>{const t=parseObjectRgbaColorComponents(e);return t?createColor(t,"rgb",i):null}}const PARSER_AND_RESULT=[{parser:parseHexRgbColorComponents,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:parseHexRgbaColorComponents,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:parseFunctionalRgbColorComponents,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:parseFunctionalRgbaColorComponents,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:parseFunctionalHslColorComponents,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:parseHslaColorComponents,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:parseObjectRgbColorComponents,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:parseObjectRgbaColorComponents,result:{alpha:!0,mode:"rgb",notation:"object"}}];function detectStringColor(i){return PARSER_AND_RESULT.reduce((e,{parser:t,result:n})=>e||(t(i)?n:null),null)}function detectStringColorFormat(i,e="int"){const t=detectStringColor(i);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function createColorStringParser(i){const e=[parseHexRgbColor,parseHexRgbaColor,parseFunctionalRgbColor,parseFunctionalRgbaColor,parseFunctionalHslColor,parseFunctionalHslaColor];e.push(createObjectRgbColorParser("int"),createObjectRgbaColorParser("int"));const t=composeParsers(e);return n=>{const r=t(n);return r?mapColorType(r,i):null}}function readIntColorString(i){const e=createColorStringParser("int");if(typeof i!="string")return IntColor.black();const t=e(i);return t??IntColor.black()}function zerofill(i){const e=constrainRange(Math.floor(i),0,255).toString(16);return e.length===1?`0${e}`:e}function colorToHexRgbString(i,e="#"){const t=removeAlphaComponent(i.getComponents("rgb")).map(zerofill).join("");return`${e}${t}`}function colorToHexRgbaString(i,e="#"){const t=i.getComponents("rgb"),n=[t[0],t[1],t[2],t[3]*255].map(zerofill).join("");return`${e}${n}`}function colorToFunctionalRgbString(i){const e=createNumberFormatter(0),t=mapColorType(i,"int");return`rgb(${removeAlphaComponent(t.getComponents("rgb")).map(r=>e(r)).join(", ")})`}function colorToFunctionalRgbaString(i){const e=createNumberFormatter(2),t=createNumberFormatter(0);return`rgba(${mapColorType(i,"int").getComponents("rgb").map((s,o)=>(o===3?e:t)(s)).join(", ")})`}function colorToFunctionalHslString(i){const e=[createNumberFormatter(0),formatPercentage,formatPercentage],t=mapColorType(i,"int");return`hsl(${removeAlphaComponent(t.getComponents("hsl")).map((r,s)=>e[s](r)).join(", ")})`}function colorToFunctionalHslaString(i){const e=[createNumberFormatter(0),formatPercentage,formatPercentage,createNumberFormatter(2)];return`hsla(${mapColorType(i,"int").getComponents("hsl").map((r,s)=>e[s](r)).join(", ")})`}function colorToObjectRgbString(i,e){const t=createNumberFormatter(e==="float"?2:0),n=["r","g","b"],r=mapColorType(i,e);return`{${removeAlphaComponent(r.getComponents("rgb")).map((o,l)=>`${n[l]}: ${t(o)}`).join(", ")}}`}function createObjectRgbColorFormatter(i){return e=>colorToObjectRgbString(e,i)}function colorToObjectRgbaString(i,e){const t=createNumberFormatter(2),n=createNumberFormatter(e==="float"?2:0),r=["r","g","b","a"];return`{${mapColorType(i,e).getComponents("rgb").map((l,u)=>{const d=u===3?t:n;return`${r[u]}: ${d(l)}`}).join(", ")}}`}function createObjectRgbaColorFormatter(i){return e=>colorToObjectRgbaString(e,i)}const FORMAT_AND_STRINGIFIERS=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:colorToHexRgbString},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:colorToHexRgbaString},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:colorToFunctionalRgbString},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:colorToFunctionalRgbaString},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:colorToFunctionalHslString},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:colorToFunctionalHslaString},...["int","float"].reduce((i,e)=>[...i,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:createObjectRgbColorFormatter(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:createObjectRgbaColorFormatter(e)}],[])];function findColorStringifier(i){return FORMAT_AND_STRINGIFIERS.reduce((e,t)=>e||(equalsStringColorFormat(t.format,i)?t.stringifier:null),null)}const cn$b=ClassName("apl");class APaletteView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(cn$b()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const n=e.createElement("div");n.classList.add(cn$b("b")),this.element.appendChild(n);const r=e.createElement("div");r.classList.add(cn$b("c")),n.appendChild(r),this.colorElem_=r;const s=e.createElement("div");s.classList.add(cn$b("m")),this.element.appendChild(s),this.markerElem_=s;const o=e.createElement("div");o.classList.add(cn$b("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),n=new IntColor([t[0],t[1],t[2],0],"rgb"),r=new IntColor([t[0],t[1],t[2],255],"rgb"),s=["to right",colorToFunctionalRgbaString(n),colorToFunctionalRgbaString(r)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=colorToFunctionalRgbaString(e);const o=mapRange(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class APaletteController{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new APaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=e.point.x/e.bounds.width,r=this.value.rawValue,[s,o,l]=r.getComponents("hsv");this.value.setRawValue(new IntColor([s,o,l,n],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=getStepForKey(getKeyScaleForColor(!0),getHorizontalStepKeys(e));if(t===0)return;const n=this.value.rawValue,[r,s,o,l]=n.getComponents("hsv");this.value.setRawValue(new IntColor([r,s,o,l+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){getStepForKey(getKeyScaleForColor(!0),getHorizontalStepKeys(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const cn$a=ClassName("coltxt");function createModeSelectElement(i){const e=i.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((n,r)=>{const s=i.createElement("option");return s.textContent=r.text,s.value=r.value,n.appendChild(s),n},i.createDocumentFragment())),e}class ColorTextsView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn$a()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(cn$a("m")),this.modeElem_=createModeSelectElement(e),this.modeElem_.classList.add(cn$a("ms")),n.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const r=e.createElement("div");r.classList.add(cn$a("mm")),r.appendChild(createSvgIconElement(e,"dropdown")),n.appendChild(r),this.element.appendChild(n);const s=e.createElement("div");s.classList.add(cn$a("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=t.inputViews,this.applyInputViews_(),bindValue(t.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){removeChildElements(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const n=e.createElement("div");n.classList.add(cn$a("c")),n.appendChild(t.element),this.inputsElem_.appendChild(n)})}}function createFormatter$2(i){return createNumberFormatter(i==="float"?2:0)}function createConstraint$5(i,e,t){const n=getColorMaxComponents(i,e)[t];return new DefiniteRangeConstraint({min:0,max:n})}function createComponentController(i,e,t){return new NumberTextController(i,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:ValueMap.fromObject({formatter:createFormatter$2(e.colorType),keyScale:getKeyScaleForColor(!1),pointerScale:e.colorType==="float"?.01:1}),value:createValue(0,{constraint:createConstraint$5(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function createComponentControllers(i,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:parseNumber,viewProps:e.viewProps};return[0,1,2].map(n=>{const r=createComponentController(i,t,n);return connectValues({primary:e.value,secondary:r.value,forward(s){return mapColorType(s,e.colorType).getComponents(e.colorMode)[n]},backward(s,o){const l=e.colorMode,d=mapColorType(s,e.colorType).getComponents(l);d[n]=o;const p=createColor(appendAlphaComponent(removeAlphaComponent(d),d[3]),l,e.colorType);return mapColorType(p,"int")}}),r})}function createHexController(i,e){const t=new TextController(i,{parser:createColorStringParser("int"),props:ValueMap.fromObject({formatter:colorToHexRgbString}),value:createValue(IntColor.black()),viewProps:e.viewProps});return connectValues({primary:e.value,secondary:t.value,forward:n=>new IntColor(removeAlphaComponent(n.getComponents()),n.mode),backward:(n,r)=>new IntColor(appendAlphaComponent(removeAlphaComponent(r.getComponents(n.mode)),n.getComponents()[3]),n.mode)}),[t]}function isColorMode(i){return i!=="hex"}class ColorTextsController{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=createValue(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new ColorTextsView(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return isColorMode(t)?createComponentControllers(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):createHexController(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(n=>n.view)}}const cn$9=ClassName("hpl");class HPaletteView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(cn$9()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const n=e.createElement("div");n.classList.add(cn$9("c")),this.element.appendChild(n);const r=e.createElement("div");r.classList.add(cn$9("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=colorToFunctionalRgbString(new IntColor([t,100,100],"hsv"));const n=mapRange(t,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class HPaletteController{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new HPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=mapRange(constrainRange(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,[,s,o,l]=r.getComponents("hsv");this.value.setRawValue(new IntColor([n,s,o,l],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=getStepForKey(getKeyScaleForColor(!1),getHorizontalStepKeys(e));if(t===0)return;const n=this.value.rawValue,[r,s,o,l]=n.getComponents("hsv");this.value.setRawValue(new IntColor([r+t,s,o,l],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){getStepForKey(getKeyScaleForColor(!1),getHorizontalStepKeys(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const cn$8=ClassName("svp"),CANVAS_RESOL=64;class SvPaletteView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(cn$8()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const n=e.createElement("canvas");n.height=CANVAS_RESOL,n.width=CANVAS_RESOL,n.classList.add(cn$8("c")),this.element.appendChild(n),this.canvasElement=n;const r=e.createElement("div");r.classList.add(cn$8("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=getCanvasContext(this.canvasElement);if(!e)return;const n=this.value.rawValue.getComponents("hsv"),r=this.canvasElement.width,s=this.canvasElement.height,o=e.getImageData(0,0,r,s),l=o.data;for(let p=0;p<s;p++)for(let g=0;g<r;g++){const m=mapRange(g,0,r,0,100),y=mapRange(p,0,s,100,0),_=hsvToRgbInt(n[0],m,y),E=(p*r+g)*4;l[E]=_[0],l[E+1]=_[1],l[E+2]=_[2],l[E+3]=255}e.putImageData(o,0,0);const u=mapRange(n[1],0,100,0,100);this.markerElem_.style.left=`${u}%`;const d=mapRange(n[2],0,100,100,0);this.markerElem_.style.top=`${d}%`}onValueChange_(){this.update_()}}class SvPaletteController{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new SvPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=mapRange(e.point.x,0,e.bounds.width,0,100),r=mapRange(e.point.y,0,e.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new IntColor([s,n,r,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){isArrowKey(e.key)&&e.preventDefault();const[t,n,r,s]=this.value.rawValue.getComponents("hsv"),o=getKeyScaleForColor(!1),l=getStepForKey(o,getHorizontalStepKeys(e)),u=getStepForKey(o,getVerticalStepKeys(e));l===0&&u===0||this.value.setRawValue(new IntColor([t,n+l,r+u,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=getKeyScaleForColor(!1),n=getStepForKey(t,getHorizontalStepKeys(e)),r=getStepForKey(t,getVerticalStepKeys(e));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ColorPickerController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new HPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new SvPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new APaletteController(e,{value:this.value,viewProps:this.viewProps}),text:new NumberTextController(e,{parser:parseNumber,props:ValueMap.fromObject({pointerScale:.01,keyScale:.1,formatter:createNumberFormatter(2)}),value:createValue(0,{constraint:new DefiniteRangeConstraint({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&connectValues({primary:this.value,secondary:this.alphaIcs_.text.value,forward:n=>n.getComponents()[3],backward:(n,r)=>{const s=n.getComponents();return s[3]=r,new IntColor(s,n.mode)}}),this.textsC_=new ColorTextsController(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new ColorPickerView(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const cn$7=ClassName("colsw");class ColorSwatchView{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(cn$7()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(cn$7("sw")),this.element.appendChild(n),this.swatchElem_=n;const r=e.createElement("button");r.classList.add(cn$7("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=colorToHexRgbaString(e)}onValueChange_(){this.update_()}}class ColorSwatchController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new ColorSwatchView(e,{value:this.value,viewProps:this.viewProps})}}class ColorController{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Foldable.create(t.expanded),this.swatchC_=new ColorSwatchController(e,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new TextController(e,{parser:t.parser,props:ValueMap.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new ColorView(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new PopupController(e,{viewProps:this.viewProps}):null;const r=new ColorPickerController(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),connectValues({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),bindFoldable(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,n=e.relatedTarget;(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,n=findNextTarget(e);n&&t.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!supportsTouch(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function colorToRgbNumber(i){return removeAlphaComponent(i.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function colorToRgbaNumber(i){return i.getComponents("rgb").reduce((e,t,n)=>{const r=Math.floor(n===3?t*255:t)&255;return e<<8|r},0)>>>0}function numberToRgbColor(i){return new IntColor([i>>16&255,i>>8&255,i&255],"rgb")}function numberToRgbaColor(i){return new IntColor([i>>24&255,i>>16&255,i>>8&255,mapRange(i&255,0,255,0,1)],"rgb")}function colorFromRgbNumber(i){return typeof i!="number"?IntColor.black():numberToRgbColor(i)}function colorFromRgbaNumber(i){return typeof i!="number"?IntColor.black():numberToRgbaColor(i)}function isRgbColorComponent(i,e){return typeof i!="object"||isEmpty(i)?!1:e in i&&typeof i[e]=="number"}function isRgbColorObject(i){return isRgbColorComponent(i,"r")&&isRgbColorComponent(i,"g")&&isRgbColorComponent(i,"b")}function isRgbaColorObject(i){return isRgbColorObject(i)&&isRgbColorComponent(i,"a")}function isColorObject(i){return isRgbColorObject(i)}function equalsColor(i,e){if(i.mode!==e.mode||i.type!==e.type)return!1;const t=i.getComponents(),n=e.getComponents();for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}function createColorComponentsFromRgbObject(i){return"a"in i?[i.r,i.g,i.b,i.a]:[i.r,i.g,i.b]}function createColorStringWriter(i){const e=findColorStringifier(i);return e?(t,n)=>{writePrimitive(t,e(n))}:null}function createColorNumberWriter(i){const e=i?colorToRgbaNumber:colorToRgbNumber;return(t,n)=>{writePrimitive(t,e(n))}}function writeRgbaColorObject(i,e,t){const r=mapColorType(e,t).toRgbaObject();i.writeProperty("r",r.r),i.writeProperty("g",r.g),i.writeProperty("b",r.b),i.writeProperty("a",r.a)}function writeRgbColorObject(i,e,t){const r=mapColorType(e,t).toRgbaObject();i.writeProperty("r",r.r),i.writeProperty("g",r.g),i.writeProperty("b",r.b)}function createColorObjectWriter(i,e){return(t,n)=>{i?writeRgbaColorObject(t,n,e):writeRgbColorObject(t,n,e)}}function shouldSupportAlpha$1(i){var e;return!!(!((e=i==null?void 0:i.color)===null||e===void 0)&&e.alpha)}function createFormatter$1(i){return i?e=>colorToHexRgbaString(e,"0x"):e=>colorToHexRgbString(e,"0x")}function isForColor(i){return"color"in i||i.view==="color"}const NumberColorInputPlugin=createPlugin({id:"input-color-number",type:"input",accept:(i,e)=>{if(typeof i!="number"||!isForColor(e))return null;const t=parseColorInputParams(e);return t?{initialValue:i,params:Object.assign(Object.assign({},t),{supportsAlpha:shouldSupportAlpha$1(e)})}:null},binding:{reader:i=>i.params.supportsAlpha?colorFromRgbaNumber:colorFromRgbNumber,equals:equalsColor,writer:i=>createColorNumberWriter(i.params.supportsAlpha)},controller:i=>{var e,t;return new ColorController(i.document,{colorType:"int",expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,formatter:createFormatter$1(i.params.supportsAlpha),parser:createColorStringParser("int"),pickerLayout:(t=i.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i.params.supportsAlpha,value:i.value,viewProps:i.viewProps})}});function colorFromObject(i,e){if(!isColorObject(i))return mapColorType(IntColor.black(),e);if(e==="int"){const t=createColorComponentsFromRgbObject(i);return new IntColor(t,"rgb")}if(e==="float"){const t=createColorComponentsFromRgbObject(i);return new FloatColor(t,"rgb")}return mapColorType(IntColor.black(),"int")}function shouldSupportAlpha(i){return isRgbaColorObject(i)}function createColorObjectBindingReader(i){return e=>{const t=colorFromObject(e,i);return mapColorType(t,"int")}}function createColorObjectFormatter(i,e){return t=>i?colorToObjectRgbaString(t,e):colorToObjectRgbString(t,e)}const ObjectColorInputPlugin=createPlugin({id:"input-color-object",type:"input",accept:(i,e)=>{var t;if(!isColorObject(i))return null;const n=parseColorInputParams(e);return n?{initialValue:i,params:Object.assign(Object.assign({},n),{colorType:(t=extractColorType(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:i=>createColorObjectBindingReader(i.params.colorType),equals:equalsColor,writer:i=>createColorObjectWriter(shouldSupportAlpha(i.initialValue),i.params.colorType)},controller:i=>{var e,t;const n=isRgbaColorObject(i.initialValue);return new ColorController(i.document,{colorType:i.params.colorType,expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,formatter:createColorObjectFormatter(n,i.params.colorType),parser:createColorStringParser("int"),pickerLayout:(t=i.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n,value:i.value,viewProps:i.viewProps})}}),StringColorInputPlugin=createPlugin({id:"input-color-string",type:"input",accept:(i,e)=>{if(typeof i!="string"||e.view==="text")return null;const t=detectStringColorFormat(i,extractColorType(e));if(!t)return null;const n=findColorStringifier(t);if(!n)return null;const r=parseColorInputParams(e);return r?{initialValue:i,params:Object.assign(Object.assign({},r),{format:t,stringifier:n})}:null},binding:{reader:()=>readIntColorString,equals:equalsColor,writer:i=>{const e=createColorStringWriter(i.params.format);if(!e)throw TpError.notBindable();return e}},controller:i=>{var e,t;return new ColorController(i.document,{colorType:i.params.format.type,expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,formatter:i.params.stringifier,parser:createColorStringParser("int"),pickerLayout:(t=i.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i.params.format.alpha,value:i.value,viewProps:i.viewProps})}});class PointNdConstraint{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((n,r)=>{var s,o;return(o=(s=this.components[r])===null||s===void 0?void 0:s.constrain(n))!==null&&o!==void 0?o:n});return this.asm_.fromComponents(t)}}const cn$6=ClassName("pndtxt");class PointNdTextView{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(cn$6()),this.textViews.forEach(n=>{const r=e.createElement("div");r.classList.add(cn$6("a")),r.appendChild(n.element),this.element.appendChild(r)})}}function createAxisController(i,e,t){return new NumberTextController(i,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:createValue(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}class PointNdTextController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((n,r)=>createAxisController(e,t,r)),this.acs_.forEach((n,r)=>{connectValues({primary:this.value,secondary:n.value,forward:s=>t.assembly.toComponents(s)[r],backward:(s,o)=>{const l=t.assembly.toComponents(s);return l[r]=o,t.assembly.fromComponents(l)}})}),this.view=new PointNdTextView(e,{textViews:this.acs_.map(n=>n.view)})}get textControllers(){return this.acs_}}class SliderInputBindingApi extends BindingApi{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function createConstraint$4(i,e){const t=[],n=createStepConstraint(i,e);n&&t.push(n);const r=createRangeConstraint(i);r&&t.push(r);const s=createListConstraint(i.options);return s&&t.push(s),new CompositeConstraint(t)}const NumberInputPlugin=createPlugin({id:"input-number",type:"input",accept:(i,e)=>{if(typeof i!="number")return null;const t=parseRecord(e,n=>Object.assign(Object.assign({},createNumberTextInputParamsParser(n)),{options:n.optional.custom(parseListOptions),readonly:n.optional.constant(!1)}));return t?{initialValue:i,params:t}:null},binding:{reader:i=>numberFromUnknown,constraint:i=>createConstraint$4(i.params,i.initialValue),writer:i=>writePrimitive},controller:i=>{const e=i.value,t=i.constraint,n=t&&findConstraint(t,ListConstraint);if(n)return new ListController(i.document,{props:new ValueMap({options:n.values.value("options")}),value:e,viewProps:i.viewProps});const r=createNumberTextPropsObject(i.params,e.rawValue),s=t&&findConstraint(t,DefiniteRangeConstraint);return s?new SliderTextController(i.document,Object.assign(Object.assign({},createSliderTextProps(Object.assign(Object.assign({},r),{keyScale:createValue(r.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:parseNumber,value:e,viewProps:i.viewProps})):new NumberTextController(i.document,{parser:parseNumber,props:ValueMap.fromObject(r),value:e,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="number"?null:i.controller.valueController instanceof SliderTextController?new SliderInputBindingApi(i.controller):i.controller.valueController instanceof ListController?new ListInputBindingApi(i.controller):null}});class Point2d{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(isEmpty(e))return!1;const t=e.x,n=e.y;return!(typeof t!="number"||typeof n!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const Point2dAssembly={toComponents:i=>i.getComponents(),fromComponents:i=>new Point2d(...i)},cn$5=ClassName("p2d");class Point2dView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn$5()),t.viewProps.bindClassModifiers(this.element),bindValue(t.expanded,valueToClassName(this.element,cn$5(void 0,"expanded")));const n=e.createElement("div");n.classList.add(cn$5("h")),this.element.appendChild(n);const r=e.createElement("button");r.classList.add(cn$5("b")),r.appendChild(createSvgIconElement(e,"p2dpad")),t.viewProps.bindDisabled(r),n.appendChild(r),this.buttonElement=r;const s=e.createElement("div");if(s.classList.add(cn$5("t")),n.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(cn$5("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const cn$4=ClassName("p2dp");class Point2dPickerView{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(cn$4()),t.layout==="popup"&&this.element.classList.add(cn$4(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(cn$4("p")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const r=e.createElementNS(SVG_NS,"svg");r.classList.add(cn$4("g")),this.padElement.appendChild(r),this.svgElem_=r;const s=e.createElementNS(SVG_NS,"line");s.classList.add(cn$4("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=e.createElementNS(SVG_NS,"line");o.classList.add(cn$4("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const l=e.createElementNS(SVG_NS,"line");l.classList.add(cn$4("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;const u=e.createElement("div");u.classList.add(cn$4("m")),this.padElement.appendChild(u),this.markerElem_=u,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),n=this.props_.get("max"),r=mapRange(e,-n,+n,0,100),s=mapRange(t,-n,+n,0,100),o=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function computeOffset(i,e,t){return[getStepForKey(e[0],getHorizontalStepKeys(i)),getStepForKey(e[1],getVerticalStepKeys(i))*(t?1:-1)]}class Point2dPickerController{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Point2dPickerView(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new PointerHandler(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=this.props.get("max"),r=mapRange(e.point.x,0,e.bounds.width,-n,+n),s=mapRange(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-n,+n);this.value.setRawValue(new Point2d(r,s),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){isArrowKey(e.key)&&e.preventDefault();const[t,n]=computeOffset(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&n===0||this.value.setRawValue(new Point2d(this.value.rawValue.x+t,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,n]=computeOffset(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&n===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Point2dController{constructor(e,t){var n,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Foldable.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new PopupController(e,{viewProps:this.viewProps}):null;const s=new Point2dPickerController(e,{layout:t.pickerLayout,props:new ValueMap({invertsY:createValue(t.invertsY),max:createValue(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new PointNdTextController(e,{assembly:Point2dAssembly,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new Point2dView(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(n=this.view.buttonElement)===null||n===void 0||n.addEventListener("blur",this.onPadButtonBlur_),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),connectValues({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),bindFoldable(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,n=e.relatedTarget;(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,n=findNextTarget(e);n&&t.contains(n)||n&&n===this.view.buttonElement&&!supportsTouch(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function point2dFromUnknown(i){return Point2d.isObject(i)?new Point2d(i.x,i.y):new Point2d}function writePoint2d(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y)}function createConstraint$3(i,e){return new PointNdConstraint({assembly:Point2dAssembly,components:[createDimensionConstraint(Object.assign(Object.assign({},i),i.x),e.x),createDimensionConstraint(Object.assign(Object.assign({},i),i.y),e.y)]})}function getSuitableMaxDimensionValue(i,e){var t,n;if(!isEmpty(i.min)||!isEmpty(i.max))return Math.max(Math.abs((t=i.min)!==null&&t!==void 0?t:0),Math.abs((n=i.max)!==null&&n!==void 0?n:0));const r=getSuitableKeyScale(i);return Math.max(Math.abs(r)*10,Math.abs(e)*10)}function getSuitableMax(i,e){var t,n;const r=getSuitableMaxDimensionValue(deepMerge(i,(t=i.x)!==null&&t!==void 0?t:{}),e.x),s=getSuitableMaxDimensionValue(deepMerge(i,(n=i.y)!==null&&n!==void 0?n:{}),e.y);return Math.max(r,s)}function shouldInvertY(i){if(!("y"in i))return!1;const e=i.y;return e&&"inverted"in e?!!e.inverted:!1}const Point2dInputPlugin=createPlugin({id:"input-point2d",type:"input",accept:(i,e)=>{if(!Point2d.isObject(i))return null;const t=parseRecord(e,n=>Object.assign(Object.assign({},createPointDimensionParser(n)),{expanded:n.optional.boolean,picker:n.optional.custom(parsePickerLayout),readonly:n.optional.constant(!1),x:n.optional.custom(parsePointDimensionParams),y:n.optional.object(Object.assign(Object.assign({},createPointDimensionParser(n)),{inverted:n.optional.boolean}))}));return t?{initialValue:i,params:t}:null},binding:{reader:()=>point2dFromUnknown,constraint:i=>createConstraint$3(i.params,i.initialValue),equals:Point2d.equals,writer:()=>writePoint2d},controller:i=>{var e,t;const n=i.document,r=i.value,s=i.constraint,o=[i.params.x,i.params.y];return new Point2dController(n,{axes:r.rawValue.getComponents().map((l,u)=>{var d;return createPointAxis({constraint:s.components[u],initialValue:l,params:deepMerge(i.params,(d=o[u])!==null&&d!==void 0?d:{})})}),expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,invertsY:shouldInvertY(i.params),max:getSuitableMax(i.params,r.rawValue),parser:parseNumber,pickerLayout:(t=i.params.picker)!==null&&t!==void 0?t:"popup",value:r,viewProps:i.viewProps})}});class Point3d{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(isEmpty(e))return!1;const t=e.x,n=e.y,r=e.z;return!(typeof t!="number"||typeof n!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Point3dAssembly={toComponents:i=>i.getComponents(),fromComponents:i=>new Point3d(...i)};function point3dFromUnknown(i){return Point3d.isObject(i)?new Point3d(i.x,i.y,i.z):new Point3d}function writePoint3d(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z)}function createConstraint$2(i,e){return new PointNdConstraint({assembly:Point3dAssembly,components:[createDimensionConstraint(Object.assign(Object.assign({},i),i.x),e.x),createDimensionConstraint(Object.assign(Object.assign({},i),i.y),e.y),createDimensionConstraint(Object.assign(Object.assign({},i),i.z),e.z)]})}const Point3dInputPlugin=createPlugin({id:"input-point3d",type:"input",accept:(i,e)=>{if(!Point3d.isObject(i))return null;const t=parseRecord(e,n=>Object.assign(Object.assign({},createPointDimensionParser(n)),{readonly:n.optional.constant(!1),x:n.optional.custom(parsePointDimensionParams),y:n.optional.custom(parsePointDimensionParams),z:n.optional.custom(parsePointDimensionParams)}));return t?{initialValue:i,params:t}:null},binding:{reader:i=>point3dFromUnknown,constraint:i=>createConstraint$2(i.params,i.initialValue),equals:Point3d.equals,writer:i=>writePoint3d},controller:i=>{const e=i.value,t=i.constraint,n=[i.params.x,i.params.y,i.params.z];return new PointNdTextController(i.document,{assembly:Point3dAssembly,axes:e.rawValue.getComponents().map((r,s)=>{var o;return createPointAxis({constraint:t.components[s],initialValue:r,params:deepMerge(i.params,(o=n[s])!==null&&o!==void 0?o:{})})}),parser:parseNumber,value:e,viewProps:i.viewProps})}});class Point4d{constructor(e=0,t=0,n=0,r=0){this.x=e,this.y=t,this.z=n,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(isEmpty(e))return!1;const t=e.x,n=e.y,r=e.z,s=e.w;return!(typeof t!="number"||typeof n!="number"||typeof r!="number"||typeof s!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Point4dAssembly={toComponents:i=>i.getComponents(),fromComponents:i=>new Point4d(...i)};function point4dFromUnknown(i){return Point4d.isObject(i)?new Point4d(i.x,i.y,i.z,i.w):new Point4d}function writePoint4d(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z),i.writeProperty("w",e.w)}function createConstraint$1(i,e){return new PointNdConstraint({assembly:Point4dAssembly,components:[createDimensionConstraint(Object.assign(Object.assign({},i),i.x),e.x),createDimensionConstraint(Object.assign(Object.assign({},i),i.y),e.y),createDimensionConstraint(Object.assign(Object.assign({},i),i.z),e.z),createDimensionConstraint(Object.assign(Object.assign({},i),i.w),e.w)]})}const Point4dInputPlugin=createPlugin({id:"input-point4d",type:"input",accept:(i,e)=>{if(!Point4d.isObject(i))return null;const t=parseRecord(e,n=>Object.assign(Object.assign({},createPointDimensionParser(n)),{readonly:n.optional.constant(!1),w:n.optional.custom(parsePointDimensionParams),x:n.optional.custom(parsePointDimensionParams),y:n.optional.custom(parsePointDimensionParams),z:n.optional.custom(parsePointDimensionParams)}));return t?{initialValue:i,params:t}:null},binding:{reader:i=>point4dFromUnknown,constraint:i=>createConstraint$1(i.params,i.initialValue),equals:Point4d.equals,writer:i=>writePoint4d},controller:i=>{const e=i.value,t=i.constraint,n=[i.params.x,i.params.y,i.params.z,i.params.w];return new PointNdTextController(i.document,{assembly:Point4dAssembly,axes:e.rawValue.getComponents().map((r,s)=>{var o;return createPointAxis({constraint:t.components[s],initialValue:r,params:deepMerge(i.params,(o=n[s])!==null&&o!==void 0?o:{})})}),parser:parseNumber,value:e,viewProps:i.viewProps})}});function createConstraint(i){const e=[],t=createListConstraint(i.options);return t&&e.push(t),new CompositeConstraint(e)}const StringInputPlugin=createPlugin({id:"input-string",type:"input",accept:(i,e)=>{if(typeof i!="string")return null;const t=parseRecord(e,n=>({readonly:n.optional.constant(!1),options:n.optional.custom(parseListOptions)}));return t?{initialValue:i,params:t}:null},binding:{reader:i=>stringFromUnknown,constraint:i=>createConstraint(i.params),writer:i=>writePrimitive},controller:i=>{const e=i.document,t=i.value,n=i.constraint,r=n&&findConstraint(n,ListConstraint);return r?new ListController(e,{props:new ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps}):new TextController(e,{parser:s=>s,props:ValueMap.fromObject({formatter:formatString}),value:t,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="string"?null:i.controller.valueController instanceof ListController?new ListInputBindingApi(i.controller):null}}),Constants={monitor:{defaultInterval:200,defaultRows:3}},cn$3=ClassName("mll");class MultiLogView{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(cn$3()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("textarea");n.classList.add(cn$3("i")),n.style.height=`calc(var(${getCssVar("containerUnitSize")}) * ${t.rows})`,n.readOnly=!0,t.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,n=[];this.value.rawValue.forEach(r=>{r!==void 0&&n.push(this.formatter_(r))}),e.textContent=n.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class MultiLogController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new MultiLogView(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}}const cn$2=ClassName("sgl");class SingleLogView{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(cn$2()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("input");n.classList.add(cn$2("i")),n.readOnly=!0,n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}}class SingleLogController{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new SingleLogView(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}}const BooleanMonitorPlugin=createPlugin({id:"monitor-bool",type:"monitor",accept:(i,e)=>{if(typeof i!="boolean")return null;const t=parseRecord(e,n=>({readonly:n.required.constant(!0),rows:n.optional.number}));return t?{initialValue:i,params:t}:null},binding:{reader:i=>boolFromUnknown},controller:i=>{var e;return i.value.rawValue.length===1?new SingleLogController(i.document,{formatter:BooleanFormatter,value:i.value,viewProps:i.viewProps}):new MultiLogController(i.document,{formatter:BooleanFormatter,rows:(e=i.params.rows)!==null&&e!==void 0?e:Constants.monitor.defaultRows,value:i.value,viewProps:i.viewProps})}});class GraphLogMonitorBindingApi extends BindingApi{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const cn$1=ClassName("grl");class GraphLogView{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(cn$1()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=e.createElementNS(SVG_NS,"svg");n.classList.add(cn$1("g")),n.style.height=`calc(var(${getCssVar("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(n),this.svgElem_=n;const r=e.createElementNS(SVG_NS,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const s=e.createElement("div");s.classList.add(cn$1("t"),ClassName("tt")()),this.element.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,n=this.value.rawValue.length-1,r=this.props_.get("min"),s=this.props_.get("max"),o=[];this.value.rawValue.forEach((g,m)=>{if(g===void 0)return;const y=mapRange(m,0,n,0,e),_=mapRange(g,r,s,t,0);o.push([y,_].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const l=this.tooltipElem_,u=this.value.rawValue[this.cursor_.rawValue];if(u===void 0){l.classList.remove(cn$1("t","a"));return}const d=mapRange(this.cursor_.rawValue,0,n,0,e),p=mapRange(u,r,s,t,0);l.style.left=`${d}px`,l.style.top=`${p}px`,l.textContent=`${this.formatter_(u)}`,l.classList.contains(cn$1("t","a"))||(l.classList.add(cn$1("t","a"),cn$1("t","in")),forceReflow(l),l.classList.remove(cn$1("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class GraphLogController{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=createValue(-1),this.view=new GraphLogView(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!supportsTouch(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const n=new PointerHandler(this.view.element);n.emitter.on("down",this.onGraphPointerDown_),n.emitter.on("move",this.onGraphPointerMove_),n.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return importBladeState(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return exportBladeState(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(mapRange(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(mapRange(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function createFormatter(i){return isEmpty(i.format)?createNumberFormatter(2):i.format}function createTextMonitor(i){var e;return i.value.rawValue.length===1?new SingleLogController(i.document,{formatter:createFormatter(i.params),value:i.value,viewProps:i.viewProps}):new MultiLogController(i.document,{formatter:createFormatter(i.params),rows:(e=i.params.rows)!==null&&e!==void 0?e:Constants.monitor.defaultRows,value:i.value,viewProps:i.viewProps})}function createGraphMonitor(i){var e,t,n;return new GraphLogController(i.document,{formatter:createFormatter(i.params),rows:(e=i.params.rows)!==null&&e!==void 0?e:Constants.monitor.defaultRows,props:ValueMap.fromObject({max:(t=i.params.max)!==null&&t!==void 0?t:100,min:(n=i.params.min)!==null&&n!==void 0?n:0}),value:i.value,viewProps:i.viewProps})}function shouldShowGraph(i){return i.view==="graph"}const NumberMonitorPlugin=createPlugin({id:"monitor-number",type:"monitor",accept:(i,e)=>{if(typeof i!="number")return null;const t=parseRecord(e,n=>({format:n.optional.function,max:n.optional.number,min:n.optional.number,readonly:n.required.constant(!0),rows:n.optional.number,view:n.optional.string}));return t?{initialValue:i,params:t}:null},binding:{defaultBufferSize:i=>shouldShowGraph(i)?64:1,reader:i=>numberFromUnknown},controller:i=>shouldShowGraph(i.params)?createGraphMonitor(i):createTextMonitor(i),api:i=>i.controller.valueController instanceof GraphLogController?new GraphLogMonitorBindingApi(i.controller):null}),StringMonitorPlugin=createPlugin({id:"monitor-string",type:"monitor",accept:(i,e)=>{if(typeof i!="string")return null;const t=parseRecord(e,n=>({multiline:n.optional.boolean,readonly:n.required.constant(!0),rows:n.optional.number}));return t?{initialValue:i,params:t}:null},binding:{reader:i=>stringFromUnknown},controller:i=>{var e;const t=i.value;return t.rawValue.length>1||i.params.multiline?new MultiLogController(i.document,{formatter:formatString,rows:(e=i.params.rows)!==null&&e!==void 0?e:Constants.monitor.defaultRows,value:t,viewProps:i.viewProps}):new SingleLogController(i.document,{formatter:formatString,value:t,viewProps:i.viewProps})}});class BladeApiCache{constructor(){this.map_=new Map}get(e){var t;return(t=this.map_.get(e))!==null&&t!==void 0?t:null}has(e){return this.map_.has(e)}add(e,t){return this.map_.set(e,t),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),t}}class ReadWriteBinding{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function createInputBindingController(i,e){var t;const n=i.accept(e.target.read(),e.params);if(isEmpty(n))return null;const r={target:e.target,initialValue:n.initialValue,params:n.params},s=parseRecord(e.params,g=>({disabled:g.optional.boolean,hidden:g.optional.boolean,label:g.optional.string,tag:g.optional.string})),o=i.binding.reader(r),l=i.binding.constraint?i.binding.constraint(r):void 0,u=new ReadWriteBinding({reader:o,target:e.target,writer:i.binding.writer(r)}),d=new InputBindingValue(createValue(o(n.initialValue),{constraint:l,equals:i.binding.equals}),u),p=i.controller({constraint:l,document:e.document,initialValue:n.initialValue,params:n.params,value:d,viewProps:ViewProps.create({disabled:s==null?void 0:s.disabled,hidden:s==null?void 0:s.hidden})});return new InputBindingController(e.document,{blade:createBlade(),props:ValueMap.fromObject({label:"label"in e.params?(t=s==null?void 0:s.label)!==null&&t!==void 0?t:null:e.target.key}),tag:s==null?void 0:s.tag,value:d,valueController:p})}class ReadonlyBinding{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function createTicker(i,e){return e===0?new ManualTicker:new IntervalTicker(i,e??Constants.monitor.defaultInterval)}function createMonitorBindingController(i,e){var t,n,r;const s=i.accept(e.target.read(),e.params);if(isEmpty(s))return null;const o={target:e.target,initialValue:s.initialValue,params:s.params},l=parseRecord(e.params,m=>({bufferSize:m.optional.number,disabled:m.optional.boolean,hidden:m.optional.boolean,interval:m.optional.number,label:m.optional.string})),u=i.binding.reader(o),d=(n=(t=l==null?void 0:l.bufferSize)!==null&&t!==void 0?t:i.binding.defaultBufferSize&&i.binding.defaultBufferSize(s.params))!==null&&n!==void 0?n:1,p=new MonitorBindingValue({binding:new ReadonlyBinding({reader:u,target:e.target}),bufferSize:d,ticker:createTicker(e.document,l==null?void 0:l.interval)}),g=i.controller({document:e.document,params:s.params,value:p,viewProps:ViewProps.create({disabled:l==null?void 0:l.disabled,hidden:l==null?void 0:l.hidden})});return g.viewProps.bindDisabled(p.ticker),g.viewProps.handleDispose(()=>{p.ticker.dispose()}),new MonitorBindingController(e.document,{blade:createBlade(),props:ValueMap.fromObject({label:"label"in e.params?(r=l==null?void 0:l.label)!==null&&r!==void 0?r:null:e.target.key}),value:p,valueController:g})}class PluginPool{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,t){if(!isCompatible(t.core))throw TpError.notCompatible(e,t.id);t.type==="blade"?this.pluginsMap_.blades.unshift(t):t.type==="input"?this.pluginsMap_.inputs.unshift(t):t.type==="monitor"&&this.pluginsMap_.monitors.unshift(t)}createInput_(e,t,n){return this.pluginsMap_.inputs.reduce((r,s)=>r??createInputBindingController(s,{document:e,target:t,params:n}),null)}createMonitor_(e,t,n){return this.pluginsMap_.monitors.reduce((r,s)=>r??createMonitorBindingController(s,{document:e,params:n,target:t}),null)}createBinding(e,t,n){const r=t.read();if(isEmpty(r))throw new TpError({context:{key:t.key},type:"nomatchingcontroller"});const s=this.createInput_(e,t,n);if(s)return s;const o=this.createMonitor_(e,t,n);if(o)return o;throw new TpError({context:{key:t.key},type:"nomatchingcontroller"})}createBlade(e,t){const n=this.pluginsMap_.blades.reduce((r,s)=>r??createBladeController(s,{document:e,params:t}),null);if(!n)throw new TpError({type:"nomatchingview",context:{params:t}});return n}createInputBindingApi_(e){const t=this.pluginsMap_.inputs.reduce((n,r)=>{var s,o;return n||((o=(s=r.api)===null||s===void 0?void 0:s.call(r,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new BindingApi(e))}createMonitorBindingApi_(e){const t=this.pluginsMap_.monitors.reduce((n,r)=>{var s,o;return n||((o=(s=r.api)===null||s===void 0?void 0:s.call(r,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new BindingApi(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(isInputBindingController(e))return this.createInputBindingApi_(e);if(isMonitorBindingController(e))return this.createMonitorBindingApi_(e);throw TpError.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(isBindingController(e))return this.createBindingApi(e);const t=this.pluginsMap_.blades.reduce((n,r)=>n??r.api({controller:e,pool:this}),null);if(!t)throw TpError.shouldNeverHappen();return this.apiCache_.add(e,t)}}const sharedCache=new BladeApiCache;function createDefaultPluginPool(){const i=new PluginPool(sharedCache);return[Point2dInputPlugin,Point3dInputPlugin,Point4dInputPlugin,StringInputPlugin,NumberInputPlugin,StringColorInputPlugin,ObjectColorInputPlugin,NumberColorInputPlugin,BooleanInputPlugin,BooleanMonitorPlugin,StringMonitorPlugin,NumberMonitorPlugin,ButtonBladePlugin,FolderBladePlugin,TabBladePlugin].forEach(e=>{i.register("core",e)}),i}class ListBladeApi extends BladeApi{constructor(e){super(e),this.emitter_=new Emitter,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new TpChangeEvent(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const n=t.bind(this);return this.emitter_.on(e,r=>{n(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class SeparatorBladeApi extends BladeApi{}class SliderBladeApi extends BladeApi{constructor(e){super(e),this.emitter_=new Emitter,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new TpChangeEvent(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const n=t.bind(this);return this.emitter_.on(e,r=>{n(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class TextBladeApi extends BladeApi{constructor(e){super(e),this.emitter_=new Emitter,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new TpChangeEvent(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const n=t.bind(this);return this.emitter_.on(e,r=>{n(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const ListBladePlugin=function(){return{id:"list",type:"blade",core:VERSION$1,accept(i){const e=parseRecord(i,t=>({options:t.required.custom(parseListOptions),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string}));return e?{params:e}:null},controller(i){const e=new ListConstraint(normalizeListOptions(i.params.options)),t=createValue(i.params.value,{constraint:e}),n=new ListController(i.document,{props:new ValueMap({options:e.values.value("options")}),value:t,viewProps:i.viewProps});return new LabeledValueBladeController(i.document,{blade:i.blade,props:ValueMap.fromObject({label:i.params.label}),value:t,valueController:n})},api(i){return!(i.controller instanceof LabeledValueBladeController)||!(i.controller.valueController instanceof ListController)?null:new ListBladeApi(i.controller)}}}();class RootApi extends FolderApi{constructor(e,t){super(e,t)}get element(){return this.controller.view.element}}class RootController extends FolderController{constructor(e,t){super(e,{expanded:t.expanded,blade:t.blade,props:t.props,root:!0,viewProps:t.viewProps})}}const cn=ClassName("spr");class SeparatorView{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(cn()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("hr");n.classList.add(cn("r")),this.element.appendChild(n)}}class SeparatorController extends BladeController{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new SeparatorView(e,{viewProps:t.viewProps})}))}}const SeparatorBladePlugin={id:"separator",type:"blade",core:VERSION$1,accept(i){const e=parseRecord(i,t=>({view:t.required.constant("separator")}));return e?{params:e}:null},controller(i){return new SeparatorController(i.document,{blade:i.blade,viewProps:i.viewProps})},api(i){return i.controller instanceof SeparatorController?new SeparatorBladeApi(i.controller):null}},SliderBladePlugin={id:"slider",type:"blade",core:VERSION$1,accept(i){const e=parseRecord(i,t=>({max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number}));return e?{params:e}:null},controller(i){var e,t;const n=(e=i.params.value)!==null&&e!==void 0?e:0,r=new DefiniteRangeConstraint({max:i.params.max,min:i.params.min}),s=createValue(n,{constraint:r}),o=new SliderTextController(i.document,Object.assign(Object.assign({},createSliderTextProps({formatter:(t=i.params.format)!==null&&t!==void 0?t:numberToString,keyScale:createValue(1),max:r.values.value("max"),min:r.values.value("min"),pointerScale:getSuitablePointerScale(i.params,n)})),{parser:parseNumber,value:s,viewProps:i.viewProps}));return new LabeledValueBladeController(i.document,{blade:i.blade,props:ValueMap.fromObject({label:i.params.label}),value:s,valueController:o})},api(i){return!(i.controller instanceof LabeledValueBladeController)||!(i.controller.valueController instanceof SliderTextController)?null:new SliderBladeApi(i.controller)}},TextBladePlugin=function(){return{id:"text",type:"blade",core:VERSION$1,accept(i){const e=parseRecord(i,t=>({parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string}));return e?{params:e}:null},controller(i){var e;const t=createValue(i.params.value),n=new TextController(i.document,{parser:i.params.parse,props:ValueMap.fromObject({formatter:(e=i.params.format)!==null&&e!==void 0?e:r=>String(r)}),value:t,viewProps:i.viewProps});return new LabeledValueBladeController(i.document,{blade:i.blade,props:ValueMap.fromObject({label:i.params.label}),value:t,valueController:n})},api(i){return!(i.controller instanceof LabeledValueBladeController)||!(i.controller.valueController instanceof TextController)?null:new TextBladeApi(i.controller)}}}();function createDefaultWrapperElement(i){const e=i.createElement("div");return e.classList.add(ClassName("dfw")()),i.body&&i.body.appendChild(e),e}function embedStyle(i,e,t){if(i.querySelector(`style[data-tp-style=${e}]`))return;const n=i.createElement("style");n.dataset.tpStyle=e,n.textContent=t,i.head.appendChild(n)}class Pane extends RootApi{constructor(e){var t,n;const r=e??{},s=(t=r.document)!==null&&t!==void 0?t:getWindowDocument(),o=createDefaultPluginPool(),l=new RootController(s,{expanded:r.expanded,blade:createBlade(),props:ValueMap.fromObject({title:r.title}),viewProps:ViewProps.create()});super(l,o),this.pool_=o,this.containerElem_=(n=r.container)!==null&&n!==void 0?n:createDefaultWrapperElement(s),this.containerElem_.appendChild(this.element),this.doc_=s,this.usesDefaultWrapper_=!r.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw TpError.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw TpError.alreadyDisposed();if(this.usesDefaultWrapper_){const t=e.parentElement;t&&t.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&embedStyle(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(n=>{this.pool_.register(e.id,n)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[ListBladePlugin,SeparatorBladePlugin,SliderBladePlugin,TabBladePlugin,TextBladePlugin]})}}const VERSION=new Semver("4.0.5"),Tweakpane=Object.freeze(Object.defineProperty({__proto__:null,BladeApi,ButtonApi,FolderApi,ListBladeApi,ListInputBindingApi,Pane,Semver,SeparatorBladeApi,SliderBladeApi,SliderInputBindingApi,TabApi,TabPageApi,TextBladeApi,TpChangeEvent,VERSION},Symbol.toStringTag,{value:"Module"}));function Hero3d({className:i,onModelLoaded:e=()=>{}}){const t=reactExports.useRef(null);return reactExports.useEffect(()=>{const n=new App3D(t.current,e);return setTimeout(()=>n.init(),250),()=>{try{n.destroy()}catch(r){console.error(r)}}},[]),jsxRuntimeExports.jsx("div",{className:i,children:jsxRuntimeExports.jsx("div",{ref:t,className:"absolute top-0 left-0 w-full h-full bg-black"})})}class App3D{constructor(e,t=()=>{}){this.container=e,this.onModelLoaded=t,this.config={color_1:[239,242,255],color_2:[0,18,181],bloomPass:{threshold:.1,strength:.3,radius:.5}},this._resizeCb=()=>this._onResize()}init(){this._createScene(),this._createCamera(),this._createRenderer(),this._createControls(),this._createClock(),this._createPostProcess(),this._addListeners(),this._loadModel().then(()=>{this.renderer.setAnimationLoop(()=>{this._update(),this._render()}),this.onModelLoaded()})}destroy(){this.renderer.dispose(),this._removeListeners()}_update(){this.points.material.uniforms.u_time.value=this.clock.getElapsedTime(),this.points.material.uniformsNeedUpdate=!0,this.controls.update()}_render(){this.composer.render(this.scene,this.camera)}_createScene(){this.scene=new Scene}_createCamera(){this.camera=new PerspectiveCamera$1(75,this.container.clientWidth/this.container.clientHeight,.1,100),this.camera.position.set(1,1,20)}_createRenderer(){this.renderer=new WebGLRenderer({alpha:!0,antialias:!0}),this.container.appendChild(this.renderer.domElement),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(Math.min(1.5,window.devicePixelRatio)),this.renderer.setClearColor(0,0),this.renderer.gammaOutput=!0,this.renderer.physicallyCorrectLights=!0}_loadModel(){return new Promise(e=>{this.loader=new GLTFLoader;const t=new DRACOLoader;t.setDecoderPath("/"),this.loader.setDRACOLoader(t),this.loader.load("/assets/zeus.glb",async n=>{this.mesh=n.scene.children[0];const s=await(await fetch("/shaders/vertex.glsl")).text(),l=await(await fetch("/shaders/fragment.glsl")).text(),u=new ShaderMaterial$1({vertexShader:s,fragmentShader:l,transparent:!0,blending:1,uniforms:{u_time:{type:"f",value:0},u_color_1:{type:"vec3",value:new Color$1().setRGB(this.config.color_1[0]/255,this.config.color_1[1]/255,this.config.color_1[2]/255)},u_color_2:{type:"vec3",value:new Color$1().setRGB(this.config.color_2[0]/255,this.config.color_2[1]/255,this.config.color_2[2]/255)}}});this.points=new Points(this.mesh.geometry,u),this.points.scale.set(1,1,1),this.scene.add(this.points),e()})})}_createControls(){this.controls=new OrbitControls(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.enableZoom=!1}_createClock(){this.clock=new Clock}_createDebugPanel(){this.pane=new Tweakpane;const e=this.pane.addFolder({title:"Scene"});let t={background:{r:0,g:0,b:0}};e.addInput(t,"background",{label:"Background Color"}).on("change",s=>{this.renderer.setClearColor(new Color$1().setRGB(s.r/255,s.g/255,s.b/255))});const n=this.pane.addFolder({title:"Colors"});t={color_1:{r:this.config.color_1[0],g:this.config.color_1[1],b:this.config.color_1[2]},color_2:{r:this.config.color_2[0],g:this.config.color_2[1],b:this.config.color_2[2]}},n.addInput(t,"color_1",{label:"Color 1"}).on("change",s=>{this.points.material.uniforms.u_color_1.value=new Color$1().setRGB(s.r/255,s.g/255,s.b/255),this.points.material.uniformsNeedUpdate=!0}),n.addInput(t,"color_2",{label:"Color 2"}).on("change",s=>{this.points.material.uniforms.u_color_2.value=new Color$1().setRGB(s.r/255,s.g/255,s.b/255),this.points.material.uniformsNeedUpdate=!0});const r=this.pane.addFolder({title:"Bloom"});t={threshold:this.config.bloomPass.threshold,strength:this.config.bloomPass.strength,radius:this.config.bloomPass.radius},r.addInput(t,"threshold",{label:"Threshold",min:.1,max:.5}).on("change",s=>{this.bloomPass.threshold=s}),r.addInput(t,"strength",{label:"Strength",min:0,max:1}).on("change",s=>{this.bloomPass.strength=s}),r.addInput(t,"radius",{label:"Radius",min:0,max:1}).on("change",s=>{this.bloomPass.radius=s})}_hideDebugPanel(){this.pane.domElement.style.display="none"}_createPostProcess(){const e=new RenderPass(this.scene,this.camera);this.bloomPass=new UnrealBloomPass(new Vector2$1(this.container.clientWidth,this.container.clientHeight),this.config.bloomPass.strength,this.config.bloomPass.radius,this.config.bloomPass.threshold),this.composer=new EffectComposer(this.renderer),this.composer.addPass(e),this.composer.addPass(this.bloomPass)}_addListeners(){window.addEventListener("resize",this._resizeCb,{passive:!0})}_removeListeners(){window.removeEventListener("resize",this._resizeCb,{passive:!0})}_onResize(){this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.composer.setSize(this.container.clientWidth,this.container.clientHeight)}}const Hero3=()=>{const[i,e]=reactExports.useState(!1),t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},n={hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{duration:.8,ease:[.25,.1,.25,1]}}},r=()=>{e(!0)};return jsxRuntimeExports.jsxs("div",{className:"relative w-full min-h-screen bg-black text-white overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 z-0",children:jsxRuntimeExports.jsx(Hero3d,{className:"w-full h-full transform",onModelLoaded:r})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 backdrop-blur-none z-5"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-black/70 z-10"}),jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-20 sm:py-36 relative z-20",children:jsxRuntimeExports.jsxs(motion.div,{className:"text-center space-y-6 sm:space-y-8",variants:t,initial:"hidden",animate:i?"visible":"hidden",children:[jsxRuntimeExports.jsxs(motion.h1,{className:"text-3xl sm:text-5xl md:text-7xl font-bold tracking-tight leading-tight",variants:n,children:[jsxRuntimeExports.jsx("span",{style:{color:"#dffe00"},children:"UOMI"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"WHERE AI MEETS"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"DECENTRALIZATION"})]}),jsxRuntimeExports.jsx(motion.p,{className:"text-base sm:text-lg text-zinc-300 max-w-2xl mx-auto px-2",variants:n,children:"UOMI is the first Layer 1 built for secure AI computation and unstoppable agents that think, act, trade, and evolve, without human input."}),jsxRuntimeExports.jsxs(motion.div,{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-5 pt-4",variants:n,children:[jsxRuntimeExports.jsx(motion.button,{className:"text-black px-6 sm:px-8 py-3 sm:py-3.5 rounded font-bold shadow-xl text-sm sm:text-base w-full sm:w-auto hover:cursor-pointer",style:{backgroundColor:"#dffe00",boxShadow:"0 8px 16px -4px rgba(223, 254, 0, 0.4)"},whileHover:{scale:1.03,backgroundColor:"#c8e500"},whileTap:{scale:.98},transition:{duration:.2},onClick:()=>window.open("./docs","_blank"),children:jsxRuntimeExports.jsx("span",{children:"START BUILDING"})}),jsxRuntimeExports.jsx(motion.button,{className:"px-6 sm:px-8 py-3 sm:py-3.5 rounded font-bold border border-zinc-700 hover:border-zinc-600 bg-zinc-900/60 backdrop-blur-md shadow-md text-sm sm:text-base w-full sm:w-auto mt-3 sm:mt-0 hover:cursor-pointer",whileHover:{scale:1.03,borderColor:"#dffe00",backgroundColor:"rgba(63, 63, 70, 0.6)"},whileTap:{scale:.98},transition:{duration:.2},onClick:()=>window.open("https://discord.gg/4ySAfR73VM","_blank"),children:jsxRuntimeExports.jsx("span",{children:"JOIN THE COMMUNITY"})})]})]})})]})},EnhancedTitles$1=({category:i="Features",title:e=void 0,titleBreak:t=!0})=>{const n={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.25,.1,.25,1]}}},r={hidden:{width:0,opacity:0},visible:{width:"6rem",opacity:1,transition:{duration:1.2,ease:"easeOut",delay:.4}}},s={hidden:{y:20,opacity:0},visible:d=>({y:0,opacity:1,transition:{delay:d*.05,duration:.5,ease:[.25,.1,.25,1]}})},o={hidden:{scale:.5,opacity:0},visible:{scale:[1,1.2,1],opacity:[.7,1,.7],transition:{duration:2,repeat:1/0,repeatType:"reverse"}}};let l=e,u="";if(e&&t){const d=Math.floor(e.length/2),p=e.indexOf(" ",d);p!==-1&&(l=e.substring(0,p),u=e.substring(p+1))}return jsxRuntimeExports.jsxs("div",{className:`${e?"mb-16":"mb-8"} relative`,children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute w-20 h-20 -top-10 left-1/2 -ml-10 opacity-20 pointer-events-none",initial:{opacity:0},animate:{opacity:[.1,.2,.1],rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"#dffe00",strokeWidth:"1",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"30",stroke:"#dffe00",strokeWidth:"0.5",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"20",stroke:"#dffe00",strokeWidth:"0.3",fill:"none"})]})}),jsxRuntimeExports.jsx(motion.div,{variants:o,initial:"hidden",animate:"visible",className:"absolute h-2 w-2 bg-yellow-300 rounded-full top-0 left-1/4 blur-sm"}),jsxRuntimeExports.jsx(motion.div,{variants:o,initial:"hidden",animate:"visible",transition:{delay:.5},className:"absolute h-2 w-2 bg-yellow-300 rounded-full top-16 right-1/4 blur-sm"}),jsxRuntimeExports.jsxs(motion.div,{variants:n,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:`flex items-center justify-center ${e?"mb-3":"mb-8"} relative`,children:[jsxRuntimeExports.jsx("div",{className:"h-px w-6 bg-zinc-700 mr-3"}),jsxRuntimeExports.jsx("span",{className:"text-[#dffe00] text-sm font-medium tracking-widest uppercase bg-black px-4 py-1 rounded-full border border-zinc-800 shadow-lg",children:i}),jsxRuntimeExports.jsx("div",{className:"h-px w-6 bg-zinc-700 ml-3"})]}),e&&jsxRuntimeExports.jsxs(motion.h2,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-center mb-6 relative px-3",children:[jsxRuntimeExports.jsx("div",{className:"sm:hidden",children:u?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{className:"block relative mb-1 overflow-hidden",variants:n,children:jsxRuntimeExports.jsx("span",{className:"inline-block",style:{backgroundImage:"linear-gradient(to right, #dffe00, #c8e500)",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",textFillColor:"transparent"},children:l})}),jsxRuntimeExports.jsx(motion.div,{className:"block relative mt-1 overflow-hidden",variants:n,children:jsxRuntimeExports.jsx("span",{className:"inline-block",style:{backgroundImage:"linear-gradient(to right, #dffe00, #c8e500)",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",textFillColor:"transparent"},children:u})})]}):jsxRuntimeExports.jsx(motion.div,{className:"block overflow-hidden",variants:n,children:jsxRuntimeExports.jsx("span",{className:"inline-block",style:{backgroundImage:"linear-gradient(to right, #dffe00, #c8e500)",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",textFillColor:"transparent"},children:l})})}),jsxRuntimeExports.jsx("div",{className:"hidden sm:block",children:u?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{className:"block relative mb-1 overflow-hidden",children:l.split("").map((d,p)=>jsxRuntimeExports.jsx(motion.span,{custom:p,variants:s,className:"inline-block",style:{whiteSpace:"pre",backgroundImage:"linear-gradient(to right, #dffe00, #c8e500)",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",textFillColor:"transparent",lineHeight:"1.2"},children:d},p))}),jsxRuntimeExports.jsx(motion.div,{className:"block relative mt-1 overflow-hidden",children:u.split("").map((d,p)=>jsxRuntimeExports.jsx(motion.span,{custom:p+l.length+5,variants:s,className:"inline-block",style:{whiteSpace:"pre",backgroundImage:"linear-gradient(to right, #dffe00, #c8e500)",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",textFillColor:"transparent",lineHeight:"1.2"},children:d},p+100))})]}):jsxRuntimeExports.jsx(motion.div,{className:"block overflow-hidden",children:l.split("").map((d,p)=>jsxRuntimeExports.jsx(motion.span,{custom:p,variants:s,className:"inline-block",style:{whiteSpace:"pre",backgroundImage:"linear-gradient(to right, #dffe00, #c8e500)",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",textFillColor:"transparent",lineHeight:"1.2"},children:d},p))})}),jsxRuntimeExports.jsx(motion.div,{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-40 h-8 blur-md",initial:{opacity:0},animate:{opacity:[.1,.3,.1],width:["10rem","12rem","10rem"]},transition:{duration:3,repeat:1/0,repeatType:"reverse"},style:{background:"radial-gradient(ellipse at center, rgba(223, 254, 0, 0.3) 0%, rgba(223, 254, 0, 0) 70%)",pointerEvents:"none"}})]}),e&&jsxRuntimeExports.jsx("div",{className:"flex justify-center relative",children:jsxRuntimeExports.jsx(motion.div,{variants:r,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"h-px mb-12 relative overflow-hidden",style:{background:"linear-gradient(to right, transparent, #dffe00, transparent)"},children:jsxRuntimeExports.jsx(motion.div,{className:"absolute top-0 h-full w-12 bg-white",initial:{left:"-10%",opacity:.7},animate:{left:"110%",opacity:0},transition:{duration:2,repeat:1/0,repeatDelay:3,ease:"easeInOut"},style:{filter:"blur(3px)"}})})})]})},nm="Main Scene",ddd=0,h=402,w=403,meta={g:"@lottiefiles/creator 1.45.1"},layers=[{ty:0,nm:"Nested Scene 1",sr:1,st:0,op:60,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[825.0000244379044,990.0220336914062]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[825,990.0221]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},w:403,h:402,refId:"precomp_Shape Layer - SVG",ind:1},{ty:4,nm:"amarelo",sr:1,st:0,op:60,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[201.5,201,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-.062,-120.5],[-.062,-185]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:15,ix:5},c:{a:0,k:[.8745,.9961,0],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"rp",bm:0,hd:!1,mn:"ADBE Vector Filter - Repeater",nm:"Repeater 1",ix:4,m:1,c:{a:0,k:7,ix:1},o:{a:1,k:[{o:{x:.167,y:0},i:{x:.833,y:.917},s:[0],t:0},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[0],t:1},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[1],t:2},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[1],t:3},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[2],t:4},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[2],t:5},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[2],t:6},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[3],t:7},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[3],t:8},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[4],t:9},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[4],t:10},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[4],t:11},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[5],t:12},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[5],t:13},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[6],t:14},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[6],t:15},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[6],t:16},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[7],t:17},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[7],t:18},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[8],t:19},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[8],t:20},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[8],t:21},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[9],t:22},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[9],t:23},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[10],t:24},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[10],t:25},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[10],t:26},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[11],t:27},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[11],t:28},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[12],t:29},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[12],t:30},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[12],t:31},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[13],t:32},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[13],t:33},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[14],t:34},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[14],t:35},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[14],t:36},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[15],t:37},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[15],t:38},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[16],t:39},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[16],t:40},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[16],t:41},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[17],t:42},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[17],t:43},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[18],t:44},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[18],t:45},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[18],t:46},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[19],t:47},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[19],t:48},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[20],t:49},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[20],t:50},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[20],t:51},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[21],t:52},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[21],t:53},{o:{x:.167,y:.083},i:{x:.833,y:1},s:[22],t:54},{o:{x:.167,y:0},i:{x:.833,y:.917},s:[22],t:55},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[22],t:56},{o:{x:.167,y:.083},i:{x:.833,y:.917},s:[23],t:57},{o:{x:.167,y:.083},i:{x:.833,y:.833},s:[23],t:58},{s:[24],t:59}],ix:2},tr:{a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0},p:{a:0,k:[0,0],ix:2},r:{a:0,k:15,ix:4},sa:{a:0,k:0},so:{a:0,k:100,ix:5},eo:{a:0,k:100,ix:6}}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"cinza",sr:1,st:0,op:60,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[201.5,201,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-.062,-120.5],[-.062,-185]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:14,ix:5},c:{a:0,k:[.251,.251,.251],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"rp",bm:0,hd:!1,mn:"ADBE Vector Filter - Repeater",nm:"Repeater 1",ix:4,m:1,c:{a:0,k:24,ix:1},o:{a:0,k:0,ix:2},tr:{a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0},p:{a:0,k:[0,0],ix:2},r:{a:0,k:15,ix:4},sa:{a:0,k:0},so:{a:0,k:100,ix:5},eo:{a:0,k:100,ix:6}}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3}],v="5.7.0",fr=60,op=60,ip=0,assets=[{nm:"Nested Scene 1",id:"precomp_Shape Layer - SVG",fr:60,layers:[{ty:4,nm:"Shape Layer - SVG",sr:1,st:0,op:60,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0]},s:{a:0,k:[7.98,7.98]},sk:{a:0,k:0},p:{a:0,k:[135.665,121.9962]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},shapes:[{ty:"gr",bm:0,hd:!1,nm:"Group 1",it:[{ty:"sh",bm:0,hd:!1,nm:"Path 1",d:1,ks:{a:0,k:{c:!0,i:[[0,0],[343,98.79999999999995],[0,0],[0,-234.39999999999998],[251.4000000000001,-60.09999999999991],[0,0],[0,0],[0,0],[0,-408.6],[-343.00000000000006,-98.79999999999995],[0,0],[0,234.39999999999998],[-251.39999999999998,60],[0,0],[0,0],[0,0],[0,408.6]],o:[[0,-374.79999999999995],[0,0],[202.29999999999995,88.20000000000005],[0,234.39999999999998],[0,0],[0,0],[0,0],[-390.60000000000014,63.5],[0,408.6],[0,0],[-202.3,-88.20000000000005],[0,-234.39999999999998],[0,0],[0,0],[0,0],[390.5999999999999,-63.5],[0,0]],v:[[1646.8,990],[1052.8,200.5],[1052.8,465.6],[1396.9,990],[957.9000000000001,1546.1],[957.9000000000001,0],[692.1000000000001,0],[692.1000000000001,179.1],[3.2,990],[597.2,1779.5],[597.2,1514.4],[253.10000000000002,990.0000000000001],[692.1,433.9000000000001],[692.1,1980],[957.9000000000001,1980],[957.9000000000001,1800.9],[1646.8000000000002,990.0000000000001]]}}},{ty:"fl",bm:0,hd:!1,nm:"Fill",c:{a:0,k:[1,1,1]},r:1,o:{a:0,k:100}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:1}]}],image={nm,ddd,h,w,meta,layers,v,fr,op,ip,assets};var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,function(module,exports){typeof navigator<"u"&&function(i,e){module.exports=e()}(lottie$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(i){return document.createElement(i)}function extendPrototype(i,e){var t,n=i.length,r;for(t=0;t<n;t+=1){r=i[t].prototype;for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e.prototype[s]=r[s])}}function getDescriptor(i,e){return Object.getOwnPropertyDescriptor(i,e)}function createProxyFunction(i){function e(){}return e.prototype=i,e}var audioControllerFactory=function(){function i(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return i.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].pause()},resume:function(){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].resume()},setRate:function(t){var n,r=this.audios.length;for(n=0;n<r;n+=1)this.audios[n].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):window.Howl?new window.Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new i}}(),createTypedArray=function(){function i(t,n){var r=0,s=[],o;switch(t){case"int16":case"uint8c":o=1;break;default:o=1.1;break}for(r=0;r<n;r+=1)s.push(o);return s}function e(t,n){return t==="float32"?new Float32Array(n):t==="int16"?new Int16Array(n):t==="uint8c"?new Uint8ClampedArray(n):i(t,n)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?e:i}();function createSizedArray(i){return Array.apply(null,{length:i})}function _typeof$6(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(t){return typeof t}:_typeof$6=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$6(i)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var i=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e,t=i.length;for(e=0;e<t;e+=1)BMMath[i[e]]=Math[i[e]]})(),BMMath.random=Math.random,BMMath.abs=function(i){var e=_typeof$6(i);if(e==="object"&&i.length){var t=createSizedArray(i.length),n,r=i.length;for(n=0;n<r;n+=1)t[n]=Math.abs(i[n]);return t}return Math.abs(i)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(i){i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.display="block",i.style.transformOrigin="0 0",i.style.webkitTransformOrigin="0 0",i.style.backfaceVisibility="visible",i.style.webkitBackfaceVisibility="visible",i.style.transformStyle="preserve-3d",i.style.webkitTransformStyle="preserve-3d",i.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(i,e,t,n){this.type=i,this.currentTime=e,this.totalTime=t,this.direction=n<0?-1:1}function BMCompleteEvent(i,e){this.type=i,this.direction=e<0?-1:1}function BMCompleteLoopEvent(i,e,t,n){this.type=i,this.currentLoop=t,this.totalLoops=e,this.direction=n<0?-1:1}function BMSegmentStartEvent(i,e,t){this.type=i,this.firstFrame=e,this.totalFrames=t}function BMDestroyEvent(i,e){this.type=i,this.target=e}function BMRenderFrameErrorEvent(i,e){this.type="renderFrameError",this.nativeError=i,this.currentTime=e}function BMConfigErrorEvent(i){this.type="configError",this.nativeError=i}var createElementID=function(){var i=0;return function(){return i+=1,idPrefix$1+"__lottie_element_"+i}}();function HSVtoRGB(i,e,t){var n,r,s,o,l,u,d,p;switch(o=Math.floor(i*6),l=i*6-o,u=t*(1-e),d=t*(1-l*e),p=t*(1-(1-l)*e),o%6){case 0:n=t,r=p,s=u;break;case 1:n=d,r=t,s=u;break;case 2:n=u,r=t,s=p;break;case 3:n=u,r=d,s=t;break;case 4:n=p,r=u,s=t;break;case 5:n=t,r=u,s=d;break}return[n,r,s]}function RGBtoHSV(i,e,t){var n=Math.max(i,e,t),r=Math.min(i,e,t),s=n-r,o,l=n===0?0:s/n,u=n/255;switch(n){case r:o=0;break;case i:o=e-t+s*(e<t?6:0),o/=6*s;break;case e:o=t-i+s*2,o/=6*s;break;case t:o=i-e+s*4,o/=6*s;break}return[o,l,u]}function addSaturationToRGB(i,e){var t=RGBtoHSV(i[0]*255,i[1]*255,i[2]*255);return t[1]+=e,t[1]>1?t[1]=1:t[1]<=0&&(t[1]=0),HSVtoRGB(t[0],t[1],t[2])}function addBrightnessToRGB(i,e){var t=RGBtoHSV(i[0]*255,i[1]*255,i[2]*255);return t[2]+=e,t[2]>1?t[2]=1:t[2]<0&&(t[2]=0),HSVtoRGB(t[0],t[1],t[2])}function addHueToRGB(i,e){var t=RGBtoHSV(i[0]*255,i[1]*255,i[2]*255);return t[0]+=e/360,t[0]>1?t[0]-=1:t[0]<0&&(t[0]+=1),HSVtoRGB(t[0],t[1],t[2])}var rgbToHex=function(){var i=[],e,t;for(e=0;e<256;e+=1)t=e.toString(16),i[e]=t.length===1?"0"+t:t;return function(n,r,s){return n<0&&(n=0),r<0&&(r=0),s<0&&(s=0),"#"+i[n]+i[r]+i[s]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e};function createNS(i){return document.createElementNS(svgNS,i)}function _typeof$5(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(t){return typeof t}:_typeof$5=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$5(i)}var dataManager=function(){var i=1,e=[],t,n,r={onmessage:function(){},postMessage:function(y){t({data:y})}},s={postMessage:function(y){r.onmessage({data:y})}};function o(m){if(window.Worker&&window.Blob&&getWebWorker()){var y=new Blob(["var _workerSelf = self; self.onmessage = ",m.toString()],{type:"text/javascript"}),_=URL.createObjectURL(y);return new Worker(_)}return t=m,r}function l(){n||(n=o(function(y){function _(){function S($,D){var V,P,I=$.length,B,z,te,ne;for(P=0;P<I;P+=1)if(V=$[P],"ks"in V&&!V.completed){if(V.completed=!0,V.hasMask){var Q=V.masksProperties;for(z=Q.length,B=0;B<z;B+=1)if(Q[B].pt.k.i)N(Q[B].pt.k);else for(ne=Q[B].pt.k.length,te=0;te<ne;te+=1)Q[B].pt.k[te].s&&N(Q[B].pt.k[te].s[0]),Q[B].pt.k[te].e&&N(Q[B].pt.k[te].e[0])}V.ty===0?(V.layers=T(V.refId,D),S(V.layers,D)):V.ty===4?A(V.shapes):V.ty===5&&ee(V)}}function b($,D){if($){var V=0,P=$.length;for(V=0;V<P;V+=1)$[V].t===1&&($[V].data.layers=T($[V].data.refId,D),S($[V].data.layers,D))}}function C($,D){for(var V=0,P=D.length;V<P;){if(D[V].id===$)return D[V];V+=1}return null}function T($,D){var V=C($,D);return V?V.layers.__used?JSON.parse(JSON.stringify(V.layers)):(V.layers.__used=!0,V.layers):null}function A($){var D,V=$.length,P,I;for(D=V-1;D>=0;D-=1)if($[D].ty==="sh")if($[D].ks.k.i)N($[D].ks.k);else for(I=$[D].ks.k.length,P=0;P<I;P+=1)$[D].ks.k[P].s&&N($[D].ks.k[P].s[0]),$[D].ks.k[P].e&&N($[D].ks.k[P].e[0]);else $[D].ty==="gr"&&A($[D].it)}function N($){var D,V=$.i.length;for(D=0;D<V;D+=1)$.i[D][0]+=$.v[D][0],$.i[D][1]+=$.v[D][1],$.o[D][0]+=$.v[D][0],$.o[D][1]+=$.v[D][1]}function L($,D){var V=D?D.split("."):[100,100,100];return $[0]>V[0]?!0:V[0]>$[0]?!1:$[1]>V[1]?!0:V[1]>$[1]?!1:$[2]>V[2]?!0:V[2]>$[2]?!1:null}var k=function(){var $=[4,4,14];function D(P){var I=P.t.d;P.t.d={k:[{s:I,t:0}]}}function V(P){var I,B=P.length;for(I=0;I<B;I+=1)P[I].ty===5&&D(P[I])}return function(P){if(L($,P.v)&&(V(P.layers),P.assets)){var I,B=P.assets.length;for(I=0;I<B;I+=1)P.assets[I].layers&&V(P.assets[I].layers)}}}(),j=function(){var $=[4,7,99];return function(D){if(D.chars&&!L($,D.v)){var V,P=D.chars.length;for(V=0;V<P;V+=1){var I=D.chars[V];I.data&&I.data.shapes&&(A(I.data.shapes),I.data.ip=0,I.data.op=99999,I.data.st=0,I.data.sr=1,I.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},D.chars[V].t||(I.data.shapes.push({ty:"no"}),I.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),F=function(){var $=[5,7,15];function D(P){var I=P.t.p;typeof I.a=="number"&&(I.a={a:0,k:I.a}),typeof I.p=="number"&&(I.p={a:0,k:I.p}),typeof I.r=="number"&&(I.r={a:0,k:I.r})}function V(P){var I,B=P.length;for(I=0;I<B;I+=1)P[I].ty===5&&D(P[I])}return function(P){if(L($,P.v)&&(V(P.layers),P.assets)){var I,B=P.assets.length;for(I=0;I<B;I+=1)P.assets[I].layers&&V(P.assets[I].layers)}}}(),U=function(){var $=[4,1,9];function D(P){var I,B=P.length,z,te;for(I=0;I<B;I+=1)if(P[I].ty==="gr")D(P[I].it);else if(P[I].ty==="fl"||P[I].ty==="st")if(P[I].c.k&&P[I].c.k[0].i)for(te=P[I].c.k.length,z=0;z<te;z+=1)P[I].c.k[z].s&&(P[I].c.k[z].s[0]/=255,P[I].c.k[z].s[1]/=255,P[I].c.k[z].s[2]/=255,P[I].c.k[z].s[3]/=255),P[I].c.k[z].e&&(P[I].c.k[z].e[0]/=255,P[I].c.k[z].e[1]/=255,P[I].c.k[z].e[2]/=255,P[I].c.k[z].e[3]/=255);else P[I].c.k[0]/=255,P[I].c.k[1]/=255,P[I].c.k[2]/=255,P[I].c.k[3]/=255}function V(P){var I,B=P.length;for(I=0;I<B;I+=1)P[I].ty===4&&D(P[I].shapes)}return function(P){if(L($,P.v)&&(V(P.layers),P.assets)){var I,B=P.assets.length;for(I=0;I<B;I+=1)P.assets[I].layers&&V(P.assets[I].layers)}}}(),q=function(){var $=[4,4,18];function D(P){var I,B=P.length,z,te;for(I=B-1;I>=0;I-=1)if(P[I].ty==="sh")if(P[I].ks.k.i)P[I].ks.k.c=P[I].closed;else for(te=P[I].ks.k.length,z=0;z<te;z+=1)P[I].ks.k[z].s&&(P[I].ks.k[z].s[0].c=P[I].closed),P[I].ks.k[z].e&&(P[I].ks.k[z].e[0].c=P[I].closed);else P[I].ty==="gr"&&D(P[I].it)}function V(P){var I,B,z=P.length,te,ne,Q,ue;for(B=0;B<z;B+=1){if(I=P[B],I.hasMask){var me=I.masksProperties;for(ne=me.length,te=0;te<ne;te+=1)if(me[te].pt.k.i)me[te].pt.k.c=me[te].cl;else for(ue=me[te].pt.k.length,Q=0;Q<ue;Q+=1)me[te].pt.k[Q].s&&(me[te].pt.k[Q].s[0].c=me[te].cl),me[te].pt.k[Q].e&&(me[te].pt.k[Q].e[0].c=me[te].cl)}I.ty===4&&D(I.shapes)}}return function(P){if(L($,P.v)&&(V(P.layers),P.assets)){var I,B=P.assets.length;for(I=0;I<B;I+=1)P.assets[I].layers&&V(P.assets[I].layers)}}}();function J($){$.__complete||(U($),k($),j($),F($),q($),S($.layers,$.assets),b($.chars,$.assets),$.__complete=!0)}function ee($){$.t.a.length===0&&"m"in $.t.p}var Y={};return Y.completeData=J,Y.checkColors=U,Y.checkChars=j,Y.checkPathProperties=F,Y.checkShapes=q,Y.completeLayers=S,Y}if(s.dataManager||(s.dataManager=_()),s.assetLoader||(s.assetLoader=function(){function S(C){var T=C.getResponseHeader("content-type");return T&&C.responseType==="json"&&T.indexOf("json")!==-1||C.response&&_typeof$5(C.response)==="object"?C.response:C.response&&typeof C.response=="string"?JSON.parse(C.response):C.responseText?JSON.parse(C.responseText):null}function b(C,T,A,N){var L,k=new XMLHttpRequest;try{k.responseType="json"}catch{}k.onreadystatechange=function(){if(k.readyState===4)if(k.status===200)L=S(k),A(L);else try{L=S(k),A(L)}catch(j){N&&N(j)}};try{k.open(["G","E","T"].join(""),C,!0)}catch{k.open(["G","E","T"].join(""),T+"/"+C,!0)}k.send()}return{load:b}}()),y.data.type==="loadAnimation")s.assetLoader.load(y.data.path,y.data.fullPath,function(S){s.dataManager.completeData(S),s.postMessage({id:y.data.id,payload:S,status:"success"})},function(){s.postMessage({id:y.data.id,status:"error"})});else if(y.data.type==="complete"){var E=y.data.animation;s.dataManager.completeData(E),s.postMessage({id:y.data.id,payload:E,status:"success"})}else y.data.type==="loadData"&&s.assetLoader.load(y.data.path,y.data.fullPath,function(S){s.postMessage({id:y.data.id,payload:S,status:"success"})},function(){s.postMessage({id:y.data.id,status:"error"})})}),n.onmessage=function(m){var y=m.data,_=y.id,E=e[_];e[_]=null,y.status==="success"?E.onComplete(y.payload):E.onError&&E.onError()})}function u(m,y){i+=1;var _="processId_"+i;return e[_]={onComplete:m,onError:y},_}function d(m,y,_){l();var E=u(y,_);n.postMessage({type:"loadAnimation",path:m,fullPath:window.location.origin+window.location.pathname,id:E})}function p(m,y,_){l();var E=u(y,_);n.postMessage({type:"loadData",path:m,fullPath:window.location.origin+window.location.pathname,id:E})}function g(m,y,_){l();var E=u(y,_);n.postMessage({type:"complete",animation:m,id:E})}return{loadAnimation:d,loadData:p,completeAnimation:g}}(),ImagePreloader=function(){var i=function(){var b=createTag("canvas");b.width=1,b.height=1;var C=b.getContext("2d");return C.fillStyle="rgba(0,0,0,0)",C.fillRect(0,0,1,1),b}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function t(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(b,C,T){var A="";if(b.e)A=b.p;else if(C){var N=b.p;N.indexOf("images/")!==-1&&(N=N.split("/")[1]),A=C+N}else A=T,A+=b.u?b.u:"",A+=b.p;return A}function r(b){var C=0,T=setInterval((function(){var A=b.getBBox();(A.width||C>500)&&(this._imageLoaded(),clearInterval(T)),C+=1}).bind(this),50)}function s(b){var C=n(b,this.assetsPath,this.path),T=createNS("image");isSafari?this.testImageLoaded(T):T.addEventListener("load",this._imageLoaded,!1),T.addEventListener("error",(function(){A.img=i,this._imageLoaded()}).bind(this),!1),T.setAttributeNS("http://www.w3.org/1999/xlink","href",C),this._elementHelper.append?this._elementHelper.append(T):this._elementHelper.appendChild(T);var A={img:T,assetData:b};return A}function o(b){var C=n(b,this.assetsPath,this.path),T=createTag("img");T.crossOrigin="anonymous",T.addEventListener("load",this._imageLoaded,!1),T.addEventListener("error",(function(){A.img=i,this._imageLoaded()}).bind(this),!1),T.src=C;var A={img:T,assetData:b};return A}function l(b){var C={assetData:b},T=n(b,this.assetsPath,this.path);return dataManager.loadData(T,(function(A){C.img=A,this._footageLoaded()}).bind(this),(function(){C.img={},this._footageLoaded()}).bind(this)),C}function u(b,C){this.imagesLoadedCb=C;var T,A=b.length;for(T=0;T<A;T+=1)b[T].layers||(!b[T].t||b[T].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(b[T]))):b[T].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(b[T]))))}function d(b){this.path=b||""}function p(b){this.assetsPath=b||""}function g(b){for(var C=0,T=this.images.length;C<T;){if(this.images[C].assetData===b)return this.images[C].img;C+=1}return null}function m(){this.imagesLoadedCb=null,this.images.length=0}function y(){return this.totalImages===this.loadedAssets}function _(){return this.totalFootages===this.loadedFootagesCount}function E(b,C){b==="svg"?(this._elementHelper=C,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function S(){this._imageLoaded=e.bind(this),this._footageLoaded=t.bind(this),this.testImageLoaded=r.bind(this),this.createFootageData=l.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return S.prototype={loadAssets:u,setAssetsPath:p,setPath:d,loadedImages:y,loadedFootages:_,destroy:m,getAsset:g,createImgData:o,createImageData:s,imageLoaded:e,footageLoaded:t,setCacheType:E},S}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var n=this._cbs[e],r=0;r<n.length;r+=1)n[r](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),(function(){this.removeEventListener(e,t)}).bind(this)},removeEventListener:function(e,t){if(!t)this._cbs[e]=null;else if(this._cbs[e]){for(var n=0,r=this._cbs[e].length;n<r;)this._cbs[e][n]===t&&(this._cbs[e].splice(n,1),n-=1,r-=1),n+=1;this._cbs[e].length||(this._cbs[e]=null)}}};var markerParser=function(){function i(e){for(var t=e.split(`\r
`),n={},r,s=0,o=0;o<t.length;o+=1)r=t[o].split(":"),r.length===2&&(n[r[0]]=r[1].trim(),s+=1);if(s===0)throw new Error;return n}return function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e[n],s={time:r.tm,duration:r.dr};try{s.payload=JSON.parse(e[n].cm)}catch{try{s.payload=i(e[n].cm)}catch{s.payload={name:e[n].cm}}}t.push(s)}return t}}(),ProjectInterface=function(){function i(e){this.compositions.push(e)}return function(){function e(t){for(var n=0,r=this.compositions.length;n<r;){if(this.compositions[n].data&&this.compositions[n].data.nm===t)return this.compositions[n].prepareFrame&&this.compositions[n].data.xt&&this.compositions[n].prepareFrame(this.currentFrame),this.compositions[n].compInterface;n+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=i,e}}(),renderers={},registerRenderer=function(e,t){renderers[e]=t};function getRenderer(i){return renderers[i]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var i in renderers)if(renderers[i])return i;return""}function _typeof$4(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(t){return typeof t}:_typeof$4=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$4(i)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(i){(i.wrapper||i.container)&&(this.wrapper=i.wrapper||i.container);var e="svg";i.animType?e=i.animType:i.renderer&&(e=i.renderer);var t=getRenderer(e);this.renderer=new t(this,i.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,i.loop===""||i.loop===null||i.loop===void 0||i.loop===!0?this.loop=!0:i.loop===!1?this.loop=!1:this.loop=parseInt(i.loop,10),this.autoplay="autoplay"in i?i.autoplay:!0,this.name=i.name?i.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(i,"autoloadSegments")?i.autoloadSegments:!0,this.assetsPath=i.assetsPath,this.initialSegment=i.initialSegment,i.audioFactory&&this.audioController.setAudioFactory(i.audioFactory),i.animationData?this.setupAnimation(i.animationData):i.path&&(i.path.lastIndexOf("\\")!==-1?this.path=i.path.substr(0,i.path.lastIndexOf("\\")+1):this.path=i.path.substr(0,i.path.lastIndexOf("/")+1),this.fileName=i.path.substr(i.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(i.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(i){dataManager.completeAnimation(i,this.configAnimation)},AnimationItem.prototype.setData=function(i,e){e&&_typeof$4(e)!=="object"&&(e=JSON.parse(e));var t={wrapper:i,animationData:e},n=i.attributes;t.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",t.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var r=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";r==="false"?t.loop=!1:r==="true"?t.loop=!0:r!==""&&(t.loop=parseInt(r,10));var s=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:n.getNamedItem("bm-autoplay")?n.getNamedItem("bm-autoplay").value:!0;t.autoplay=s!=="false",t.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"";var o=n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"";o==="false"&&(t.prerender=!1),t.path?this.setParams(t):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(i){i.op>this.animationData.op&&(this.animationData.op=i.op,this.totalFrames=Math.floor(i.op-this.animationData.ip));var e=this.animationData.layers,t,n=e.length,r=i.layers,s,o=r.length;for(s=0;s<o;s+=1)for(t=0;t<n;){if(e[t].id===r[s].id){e[t]=r[s];break}t+=1}if((i.chars||i.fonts)&&(this.renderer.globalData.fontManager.addChars(i.chars),this.renderer.globalData.fontManager.addFonts(i.fonts,this.renderer.globalData.defs)),i.assets)for(n=i.assets.length,t=0;t<n;t+=1)this.animationData.assets.push(i.assets[t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(i){this.animationData=i;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var i=this.animationData.segments;if(!i||i.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var e=i.shift();this.timeCompleted=e.time*this.frameRate;var t=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(t,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var i=this.animationData.segments;i||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(i){if(this.renderer)try{this.animationData=i,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(i),i.assets||(i.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(i.assets),this.markers=markerParser(i.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var i=getExpressionsPlugin();i&&i.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(i,e){var t=typeof i=="number"?i:void 0,n=typeof e=="number"?e:void 0;this.renderer.updateContainerSize(t,n)},AnimationItem.prototype.setSubframe=function(i){this.isSubframeEnabled=!!i},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(i){this.triggerRenderFrameError(i)}},AnimationItem.prototype.play=function(i){i&&this.name!==i||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(i){i&&this.name!==i||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(i){i&&this.name!==i||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(i){i&&this.name!==i||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(i){for(var e,t=0;t<this.markers.length;t+=1)if(e=this.markers[t],e.payload&&e.payload.name===i)return e;return null},AnimationItem.prototype.goToAndStop=function(i,e,t){if(!(t&&this.name!==t)){var n=Number(i);if(isNaN(n)){var r=this.getMarkerData(i);r&&this.goToAndStop(r.time,!0)}else e?this.setCurrentRawFrameValue(i):this.setCurrentRawFrameValue(i*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(i,e,t){if(!(t&&this.name!==t)){var n=Number(i);if(isNaN(n)){var r=this.getMarkerData(i);r&&(r.duration?this.playSegments([r.time,r.time+r.duration],!0):this.goToAndStop(r.time,!0))}else this.goToAndStop(n,e,t);this.play()}},AnimationItem.prototype.advanceTime=function(i){if(!(this.isPaused===!0||this.isLoaded===!1)){var e=this.currentRawFrame+i*this.frameModifier,t=!1;e>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(t=!0,e=this.totalFrames-1):e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):e<0?this.checkSegments(e%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(t=!0,e=0)):this.setCurrentRawFrameValue(e),t&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(i,e){this.playCount=0,i[1]<i[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=i[0]-i[1],this.timeCompleted=this.totalFrames,this.firstFrame=i[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):i[1]>i[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=i[1]-i[0],this.timeCompleted=this.totalFrames,this.firstFrame=i[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(i,e){var t=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<i?t=i:this.currentRawFrame+this.firstFrame>e&&(t=e-i)),this.firstFrame=i,this.totalFrames=e-i,this.timeCompleted=this.totalFrames,t!==-1&&this.goToAndStop(t,!0)},AnimationItem.prototype.playSegments=function(i,e){if(e&&(this.segments.length=0),_typeof$4(i[0])==="object"){var t,n=i.length;for(t=0;t<n;t+=1)this.segments.push(i[t])}else this.segments.push(i);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(i){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),i&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(i){return this.segments.length?(this.adjustSegment(this.segments.shift(),i),!0):!1},AnimationItem.prototype.destroy=function(i){i&&this.name!==i||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(i){this.currentRawFrame=i,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(i){this.playSpeed=i,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(i){this.playDirection=i<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(i){this.loop=i},AnimationItem.prototype.setVolume=function(i,e){e&&this.name!==e||this.audioController.setVolume(i)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(i){i&&this.name!==i||this.audioController.mute()},AnimationItem.prototype.unmute=function(i){i&&this.name!==i||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(i){var e="";if(i.e)e=i.p;else if(this.assetsPath){var t=i.p;t.indexOf("images/")!==-1&&(t=t.split("/")[1]),e=this.assetsPath+t}else e=this.path,e+=i.u?i.u:"",e+=i.p;return e},AnimationItem.prototype.getAssetData=function(i){for(var e=0,t=this.assets.length;e<t;){if(i===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(i){return i?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(i,e,t){try{var n=this.renderer.getElementByPath(i);n.updateDocumentData(e,t)}catch{}},AnimationItem.prototype.trigger=function(i){if(this._cbs&&this._cbs[i])switch(i){case"enterFrame":this.triggerEvent(i,new BMEnterFrameEvent(i,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(i,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(i,new BMCompleteLoopEvent(i,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(i,new BMCompleteEvent(i,this.frameMult));break;case"segmentStart":this.triggerEvent(i,new BMSegmentStartEvent(i,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(i,new BMDestroyEvent(i,this));break;default:this.triggerEvent(i)}i==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(i,this.currentFrame,this.totalFrames,this.frameMult)),i==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(i,this.loop,this.playCount,this.frameMult)),i==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(i,this.frameMult)),i==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(i,this.firstFrame,this.totalFrames)),i==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(i,this))},AnimationItem.prototype.triggerRenderFrameError=function(i){var e=new BMRenderFrameErrorEvent(i,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(i){var e=new BMConfigErrorEvent(i,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var i={},e=[],t=0,n=0,r=0,s=!0,o=!1;function l(D){for(var V=0,P=D.target;V<n;)e[V].animation===P&&(e.splice(V,1),V-=1,n-=1,P.isPaused||g()),V+=1}function u(D,V){if(!D)return null;for(var P=0;P<n;){if(e[P].elem===D&&e[P].elem!==null)return e[P].animation;P+=1}var I=new AnimationItem;return m(I,D),I.setData(D,V),I}function d(){var D,V=e.length,P=[];for(D=0;D<V;D+=1)P.push(e[D].animation);return P}function p(){r+=1,U()}function g(){r-=1}function m(D,V){D.addEventListener("destroy",l),D.addEventListener("_active",p),D.addEventListener("_idle",g),e.push({elem:V,animation:D}),n+=1}function y(D){var V=new AnimationItem;return m(V,null),V.setParams(D),V}function _(D,V){var P;for(P=0;P<n;P+=1)e[P].animation.setSpeed(D,V)}function E(D,V){var P;for(P=0;P<n;P+=1)e[P].animation.setDirection(D,V)}function S(D){var V;for(V=0;V<n;V+=1)e[V].animation.play(D)}function b(D){var V=D-t,P;for(P=0;P<n;P+=1)e[P].animation.advanceTime(V);t=D,r&&!o?window.requestAnimationFrame(b):s=!0}function C(D){t=D,window.requestAnimationFrame(b)}function T(D){var V;for(V=0;V<n;V+=1)e[V].animation.pause(D)}function A(D,V,P){var I;for(I=0;I<n;I+=1)e[I].animation.goToAndStop(D,V,P)}function N(D){var V;for(V=0;V<n;V+=1)e[V].animation.stop(D)}function L(D){var V;for(V=0;V<n;V+=1)e[V].animation.togglePause(D)}function k(D){var V;for(V=n-1;V>=0;V-=1)e[V].animation.destroy(D)}function j(D,V,P){var I=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),B,z=I.length;for(B=0;B<z;B+=1)P&&I[B].setAttribute("data-bm-type",P),u(I[B],D);if(V&&z===0){P||(P="svg");var te=document.getElementsByTagName("body")[0];te.innerText="";var ne=createTag("div");ne.style.width="100%",ne.style.height="100%",ne.setAttribute("data-bm-type",P),te.appendChild(ne),u(ne,D)}}function F(){var D;for(D=0;D<n;D+=1)e[D].animation.resize()}function U(){!o&&r&&s&&(window.requestAnimationFrame(C),s=!1)}function q(){o=!0}function J(){o=!1,U()}function ee(D,V){var P;for(P=0;P<n;P+=1)e[P].animation.setVolume(D,V)}function Y(D){var V;for(V=0;V<n;V+=1)e[V].animation.mute(D)}function $(D){var V;for(V=0;V<n;V+=1)e[V].animation.unmute(D)}return i.registerAnimation=u,i.loadAnimation=y,i.setSpeed=_,i.setDirection=E,i.play=S,i.pause=T,i.stop=N,i.togglePause=L,i.searchAnimations=j,i.resize=F,i.goToAndStop=A,i.destroy=k,i.freeze=q,i.unfreeze=J,i.setVolume=ee,i.mute=Y,i.unmute=$,i.getRegisteredAnimations=d,i}(),BezierFactory=function(){var i={};i.getBezierEasing=t;var e={};function t(C,T,A,N,L){var k=L||("bez_"+C+"_"+T+"_"+A+"_"+N).replace(/\./g,"p");if(e[k])return e[k];var j=new b([C,T,A,N]);return e[k]=j,j}var n=4,r=.001,s=1e-7,o=10,l=11,u=1/(l-1),d=typeof Float32Array=="function";function p(C,T){return 1-3*T+3*C}function g(C,T){return 3*T-6*C}function m(C){return 3*C}function y(C,T,A){return((p(T,A)*C+g(T,A))*C+m(T))*C}function _(C,T,A){return 3*p(T,A)*C*C+2*g(T,A)*C+m(T)}function E(C,T,A,N,L){var k,j,F=0;do j=T+(A-T)/2,k=y(j,N,L)-C,k>0?A=j:T=j;while(Math.abs(k)>s&&++F<o);return j}function S(C,T,A,N){for(var L=0;L<n;++L){var k=_(T,A,N);if(k===0)return T;var j=y(T,A,N)-C;T-=j/k}return T}function b(C){this._p=C,this._mSampleValues=d?new Float32Array(l):new Array(l),this._precomputed=!1,this.get=this.get.bind(this)}return b.prototype={get:function(T){var A=this._p[0],N=this._p[1],L=this._p[2],k=this._p[3];return this._precomputed||this._precompute(),A===N&&L===k?T:T===0?0:T===1?1:y(this._getTForX(T),N,k)},_precompute:function(){var T=this._p[0],A=this._p[1],N=this._p[2],L=this._p[3];this._precomputed=!0,(T!==A||N!==L)&&this._calcSampleValues()},_calcSampleValues:function(){for(var T=this._p[0],A=this._p[2],N=0;N<l;++N)this._mSampleValues[N]=y(N*u,T,A)},_getTForX:function(T){for(var A=this._p[0],N=this._p[2],L=this._mSampleValues,k=0,j=1,F=l-1;j!==F&&L[j]<=T;++j)k+=u;--j;var U=(T-L[j])/(L[j+1]-L[j]),q=k+U*u,J=_(q,A,N);return J>=r?S(T,q,A,N):J===0?q:E(T,k,k+u,A,N)}},i}(),pooling=function(){function i(e){return e.concat(createSizedArray(e.length))}return{double:i}}(),poolFactory=function(){return function(i,e,t){var n=0,r=i,s=createSizedArray(r),o={newElement:l,release:u};function l(){var d;return n?(n-=1,d=s[n]):d=e(),d}function u(d){n===r&&(s=pooling.double(s),r*=2),t&&t(d),s[n]=d,n+=1}return o}}(),bezierLengthPool=function(){function i(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,i)}(),segmentsLengthPool=function(){function i(){return{lengths:[],totalLength:0}}function e(t){var n,r=t.lengths.length;for(n=0;n<r;n+=1)bezierLengthPool.release(t.lengths[n]);t.lengths.length=0}return poolFactory(8,i,e)}();function bezFunction(){var i=Math;function e(m,y,_,E,S,b){var C=m*E+y*S+_*b-S*E-b*m-_*y;return C>-.001&&C<.001}function t(m,y,_,E,S,b,C,T,A){if(_===0&&b===0&&A===0)return e(m,y,E,S,C,T);var N=i.sqrt(i.pow(E-m,2)+i.pow(S-y,2)+i.pow(b-_,2)),L=i.sqrt(i.pow(C-m,2)+i.pow(T-y,2)+i.pow(A-_,2)),k=i.sqrt(i.pow(C-E,2)+i.pow(T-S,2)+i.pow(A-b,2)),j;return N>L?N>k?j=N-L-k:j=k-L-N:k>L?j=k-L-N:j=L-N-k,j>-1e-4&&j<1e-4}var n=function(){return function(m,y,_,E){var S=getDefaultCurveSegments(),b,C,T,A,N,L=0,k,j=[],F=[],U=bezierLengthPool.newElement();for(T=_.length,b=0;b<S;b+=1){for(N=b/(S-1),k=0,C=0;C<T;C+=1)A=bmPow(1-N,3)*m[C]+3*bmPow(1-N,2)*N*_[C]+3*(1-N)*bmPow(N,2)*E[C]+bmPow(N,3)*y[C],j[C]=A,F[C]!==null&&(k+=bmPow(j[C]-F[C],2)),F[C]=j[C];k&&(k=bmSqrt(k),L+=k),U.percents[b]=N,U.lengths[b]=L}return U.addedLength=L,U}}();function r(m){var y=segmentsLengthPool.newElement(),_=m.c,E=m.v,S=m.o,b=m.i,C,T=m._length,A=y.lengths,N=0;for(C=0;C<T-1;C+=1)A[C]=n(E[C],E[C+1],S[C],b[C+1]),N+=A[C].addedLength;return _&&T&&(A[C]=n(E[C],E[0],S[C],b[0]),N+=A[C].addedLength),y.totalLength=N,y}function s(m){this.segmentLength=0,this.points=new Array(m)}function o(m,y){this.partialLength=m,this.point=y}var l=function(){var m={};return function(y,_,E,S){var b=(y[0]+"_"+y[1]+"_"+_[0]+"_"+_[1]+"_"+E[0]+"_"+E[1]+"_"+S[0]+"_"+S[1]).replace(/\./g,"p");if(!m[b]){var C=getDefaultCurveSegments(),T,A,N,L,k,j=0,F,U,q=null;y.length===2&&(y[0]!==_[0]||y[1]!==_[1])&&e(y[0],y[1],_[0],_[1],y[0]+E[0],y[1]+E[1])&&e(y[0],y[1],_[0],_[1],_[0]+S[0],_[1]+S[1])&&(C=2);var J=new s(C);for(N=E.length,T=0;T<C;T+=1){for(U=createSizedArray(N),k=T/(C-1),F=0,A=0;A<N;A+=1)L=bmPow(1-k,3)*y[A]+3*bmPow(1-k,2)*k*(y[A]+E[A])+3*(1-k)*bmPow(k,2)*(_[A]+S[A])+bmPow(k,3)*_[A],U[A]=L,q!==null&&(F+=bmPow(U[A]-q[A],2));F=bmSqrt(F),j+=F,J.points[T]=new o(F,U),q=U}J.segmentLength=j,m[b]=J}return m[b]}}();function u(m,y){var _=y.percents,E=y.lengths,S=_.length,b=bmFloor((S-1)*m),C=m*y.addedLength,T=0;if(b===S-1||b===0||C===E[b])return _[b];for(var A=E[b]>C?-1:1,N=!0;N;)if(E[b]<=C&&E[b+1]>C?(T=(C-E[b])/(E[b+1]-E[b]),N=!1):b+=A,b<0||b>=S-1){if(b===S-1)return _[b];N=!1}return _[b]+(_[b+1]-_[b])*T}function d(m,y,_,E,S,b){var C=u(S,b),T=1-C,A=i.round((T*T*T*m[0]+(C*T*T+T*C*T+T*T*C)*_[0]+(C*C*T+T*C*C+C*T*C)*E[0]+C*C*C*y[0])*1e3)/1e3,N=i.round((T*T*T*m[1]+(C*T*T+T*C*T+T*T*C)*_[1]+(C*C*T+T*C*C+C*T*C)*E[1]+C*C*C*y[1])*1e3)/1e3;return[A,N]}var p=createTypedArray("float32",8);function g(m,y,_,E,S,b,C){S<0?S=0:S>1&&(S=1);var T=u(S,C);b=b>1?1:b;var A=u(b,C),N,L=m.length,k=1-T,j=1-A,F=k*k*k,U=T*k*k*3,q=T*T*k*3,J=T*T*T,ee=k*k*j,Y=T*k*j+k*T*j+k*k*A,$=T*T*j+k*T*A+T*k*A,D=T*T*A,V=k*j*j,P=T*j*j+k*A*j+k*j*A,I=T*A*j+k*A*A+T*j*A,B=T*A*A,z=j*j*j,te=A*j*j+j*A*j+j*j*A,ne=A*A*j+j*A*A+A*j*A,Q=A*A*A;for(N=0;N<L;N+=1)p[N*4]=i.round((F*m[N]+U*_[N]+q*E[N]+J*y[N])*1e3)/1e3,p[N*4+1]=i.round((ee*m[N]+Y*_[N]+$*E[N]+D*y[N])*1e3)/1e3,p[N*4+2]=i.round((V*m[N]+P*_[N]+I*E[N]+B*y[N])*1e3)/1e3,p[N*4+3]=i.round((z*m[N]+te*_[N]+ne*E[N]+Q*y[N])*1e3)/1e3;return p}return{getSegmentsLength:r,getNewSegment:g,getPointInSegment:d,buildBezierData:l,pointOnLine2D:e,pointOnLine3D:t}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(i,e){var t=this.offsetTime,n;this.propType==="multidimensional"&&(n=createTypedArray("float32",this.pv.length));for(var r=e.lastIndex,s=r,o=this.keyframes.length-1,l=!0,u,d,p;l;){if(u=this.keyframes[s],d=this.keyframes[s+1],s===o-1&&i>=d.t-t){u.h&&(u=d),r=0;break}if(d.t-t>i){r=s;break}s<o-1?s+=1:(r=0,l=!1)}p=this.keyframesMetadata[s]||{};var g,m,y,_,E,S,b=d.t-t,C=u.t-t,T;if(u.to){p.bezierData||(p.bezierData=bez.buildBezierData(u.s,d.s||u.e,u.to,u.ti));var A=p.bezierData;if(i>=b||i<C){var N=i>=b?A.points.length-1:0;for(m=A.points[N].point.length,g=0;g<m;g+=1)n[g]=A.points[N].point[g]}else{p.__fnct?S=p.__fnct:(S=BezierFactory.getBezierEasing(u.o.x,u.o.y,u.i.x,u.i.y,u.n).get,p.__fnct=S),y=S((i-C)/(b-C));var L=A.segmentLength*y,k,j=e.lastFrame<i&&e._lastKeyframeIndex===s?e._lastAddedLength:0;for(E=e.lastFrame<i&&e._lastKeyframeIndex===s?e._lastPoint:0,l=!0,_=A.points.length;l;){if(j+=A.points[E].partialLength,L===0||y===0||E===A.points.length-1){for(m=A.points[E].point.length,g=0;g<m;g+=1)n[g]=A.points[E].point[g];break}else if(L>=j&&L<j+A.points[E+1].partialLength){for(k=(L-j)/A.points[E+1].partialLength,m=A.points[E].point.length,g=0;g<m;g+=1)n[g]=A.points[E].point[g]+(A.points[E+1].point[g]-A.points[E].point[g])*k;break}E<_-1?E+=1:l=!1}e._lastPoint=E,e._lastAddedLength=j-A.points[E].partialLength,e._lastKeyframeIndex=s}}else{var F,U,q,J,ee;if(o=u.s.length,T=d.s||u.e,this.sh&&u.h!==1)if(i>=b)n[0]=T[0],n[1]=T[1],n[2]=T[2];else if(i<=C)n[0]=u.s[0],n[1]=u.s[1],n[2]=u.s[2];else{var Y=createQuaternion(u.s),$=createQuaternion(T),D=(i-C)/(b-C);quaternionToEuler(n,slerp(Y,$,D))}else for(s=0;s<o;s+=1)u.h!==1&&(i>=b?y=1:i<C?y=0:(u.o.x.constructor===Array?(p.__fnct||(p.__fnct=[]),p.__fnct[s]?S=p.__fnct[s]:(F=u.o.x[s]===void 0?u.o.x[0]:u.o.x[s],U=u.o.y[s]===void 0?u.o.y[0]:u.o.y[s],q=u.i.x[s]===void 0?u.i.x[0]:u.i.x[s],J=u.i.y[s]===void 0?u.i.y[0]:u.i.y[s],S=BezierFactory.getBezierEasing(F,U,q,J).get,p.__fnct[s]=S)):p.__fnct?S=p.__fnct:(F=u.o.x,U=u.o.y,q=u.i.x,J=u.i.y,S=BezierFactory.getBezierEasing(F,U,q,J).get,u.keyframeMetadata=S),y=S((i-C)/(b-C)))),T=d.s||u.e,ee=u.h===1?u.s[s]:u.s[s]+(T[s]-u.s[s])*y,this.propType==="multidimensional"?n[s]=ee:n=ee}return e.lastIndex=r,n}function slerp(i,e,t){var n=[],r=i[0],s=i[1],o=i[2],l=i[3],u=e[0],d=e[1],p=e[2],g=e[3],m,y,_,E,S;return y=r*u+s*d+o*p+l*g,y<0&&(y=-y,u=-u,d=-d,p=-p,g=-g),1-y>1e-6?(m=Math.acos(y),_=Math.sin(m),E=Math.sin((1-t)*m)/_,S=Math.sin(t*m)/_):(E=1-t,S=t),n[0]=E*r+S*u,n[1]=E*s+S*d,n[2]=E*o+S*p,n[3]=E*l+S*g,n}function quaternionToEuler(i,e){var t=e[0],n=e[1],r=e[2],s=e[3],o=Math.atan2(2*n*s-2*t*r,1-2*n*n-2*r*r),l=Math.asin(2*t*n+2*r*s),u=Math.atan2(2*t*s-2*n*r,1-2*t*t-2*r*r);i[0]=o/degToRads,i[1]=l/degToRads,i[2]=u/degToRads}function createQuaternion(i){var e=i[0]*degToRads,t=i[1]*degToRads,n=i[2]*degToRads,r=Math.cos(e/2),s=Math.cos(t/2),o=Math.cos(n/2),l=Math.sin(e/2),u=Math.sin(t/2),d=Math.sin(n/2),p=r*s*o-l*u*d,g=l*u*o+r*s*d,m=l*s*o+r*u*d,y=r*u*o-l*s*d;return[g,m,y,p]}function getValueAtCurrentTime(){var i=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,t=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(i===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=t&&i>=t||this._caching.lastFrame<e&&i<e))){this._caching.lastFrame>=i&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var n=this.interpolateValue(i,this._caching);this.pv=n}return this._caching.lastFrame=i,this.pv}function setVValue(i){var e;if(this.propType==="unidimensional")e=i*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var t=0,n=this.v.length;t<n;)e=i[t]*this.mult,mathAbs(this.v[t]-e)>1e-5&&(this.v[t]=e,this._mdf=!0),t+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var i,e=this.effectsSequence.length,t=this.kf?this.pv:this.data.k;for(i=0;i<e;i+=1)t=this.effectsSequence[i](t);this.setVValue(t),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(i){this.effectsSequence.push(i),this.container.addDynamicProperty(this)}function ValueProperty(i,e,t,n){this.propType="unidimensional",this.mult=t||1,this.data=e,this.v=t?e.k*t:e.k,this.pv=e.k,this._mdf=!1,this.elem=i,this.container=n,this.comp=i.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(i,e,t,n){this.propType="multidimensional",this.mult=t||1,this.data=e,this._mdf=!1,this.elem=i,this.container=n,this.comp=i.comp,this.k=!1,this.kf=!1,this.frameId=-1;var r,s=e.k.length;for(this.v=createTypedArray("float32",s),this.pv=createTypedArray("float32",s),this.vel=createTypedArray("float32",s),r=0;r<s;r+=1)this.v[r]=e.k[r]*this.mult,this.pv[r]=e.k[r];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(i,e,t,n){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=i.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=t||1,this.elem=i,this.container=n,this.comp=i.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(i,e,t,n){this.propType="multidimensional";var r,s=e.k.length,o,l,u,d;for(r=0;r<s-1;r+=1)e.k[r].to&&e.k[r].s&&e.k[r+1]&&e.k[r+1].s&&(o=e.k[r].s,l=e.k[r+1].s,u=e.k[r].to,d=e.k[r].ti,(o.length===2&&!(o[0]===l[0]&&o[1]===l[1])&&bez.pointOnLine2D(o[0],o[1],l[0],l[1],o[0]+u[0],o[1]+u[1])&&bez.pointOnLine2D(o[0],o[1],l[0],l[1],l[0]+d[0],l[1]+d[1])||o.length===3&&!(o[0]===l[0]&&o[1]===l[1]&&o[2]===l[2])&&bez.pointOnLine3D(o[0],o[1],o[2],l[0],l[1],l[2],o[0]+u[0],o[1]+u[1],o[2]+u[2])&&bez.pointOnLine3D(o[0],o[1],o[2],l[0],l[1],l[2],l[0]+d[0],l[1]+d[1],l[2]+d[2]))&&(e.k[r].to=null,e.k[r].ti=null),o[0]===l[0]&&o[1]===l[1]&&u[0]===0&&u[1]===0&&d[0]===0&&d[1]===0&&(o.length===2||o[2]===l[2]&&u[2]===0&&d[2]===0)&&(e.k[r].to=null,e.k[r].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=i.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=t||1,this.elem=i,this.container=n,this.comp=i.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var p=e.k[0].s.length;for(this.v=createTypedArray("float32",p),this.pv=createTypedArray("float32",p),r=0;r<p;r+=1)this.v[r]=initFrame,this.pv[r]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",p)},this.addEffect=addEffect}var PropertyFactory=function(){function i(t,n,r,s,o){n.sid&&(n=t.globalData.slotManager.getProp(n));var l;if(!n.k.length)l=new ValueProperty(t,n,s,o);else if(typeof n.k[0]=="number")l=new MultiDimensionalProperty(t,n,s,o);else switch(r){case 0:l=new KeyframedValueProperty(t,n,s,o);break;case 1:l=new KeyframedMultidimensionalProperty(t,n,s,o);break}return l.effectsSequence.length&&o.addDynamicProperty(l),l}var e={getProp:i};return e}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var e,t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function i(){return createTypedArray("float32",2)}return poolFactory(8,i)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(i,e){this.c=i,this.setLength(e);for(var t=0;t<e;)this.v[t]=pointPool.newElement(),this.o[t]=pointPool.newElement(),this.i[t]=pointPool.newElement(),t+=1},ShapePath.prototype.setLength=function(i){for(;this._maxLength<i;)this.doubleArrayLength();this._length=i},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(i,e,t,n,r){var s;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),t){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o;break;default:s=[];break}(!s[n]||s[n]&&!r)&&(s[n]=pointPool.newElement()),s[n][0]=i,s[n][1]=e},ShapePath.prototype.setTripleAt=function(i,e,t,n,r,s,o,l){this.setXYAt(i,e,"v",o,l),this.setXYAt(t,n,"o",o,l),this.setXYAt(r,s,"i",o,l)},ShapePath.prototype.reverse=function(){var i=new ShapePath;i.setPathData(this.c,this._length);var e=this.v,t=this.o,n=this.i,r=0;this.c&&(i.setTripleAt(e[0][0],e[0][1],n[0][0],n[0][1],t[0][0],t[0][1],0,!1),r=1);var s=this._length-1,o=this._length,l;for(l=r;l<o;l+=1)i.setTripleAt(e[s][0],e[s][1],n[s][0],n[s][1],t[s][0],t[s][1],l,!1),s-=1;return i},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function i(){return new ShapePath}function e(r){var s=r._length,o;for(o=0;o<s;o+=1)pointPool.release(r.v[o]),pointPool.release(r.i[o]),pointPool.release(r.o[o]),r.v[o]=null,r.i[o]=null,r.o[o]=null;r._length=0,r.c=!1}function t(r){var s=n.newElement(),o,l=r._length===void 0?r.v.length:r._length;for(s.setLength(l),s.c=r.c,o=0;o<l;o+=1)s.setTripleAt(r.v[o][0],r.v[o][1],r.o[o][0],r.o[o][1],r.i[o][0],r.i[o][1],o);return s}var n=poolFactory(4,i,e);return n.clone=t,n}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(i){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=i,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var i;for(i=0;i<this._length;i+=1)shapePool.release(this.shapes[i]);this._length=0};var shapeCollectionPool=function(){var i={newShapeCollection:r,release:s},e=0,t=4,n=createSizedArray(t);function r(){var o;return e?(e-=1,o=n[e]):o=new ShapeCollection,o}function s(o){var l,u=o._length;for(l=0;l<u;l+=1)shapePool.release(o.shapes[l]);o._length=0,e===t&&(n=pooling.double(n),t*=2),n[e]=o,e+=1}return i}(),ShapePropertyFactory=function(){var i=-999999;function e(b,C,T){var A=T.lastIndex,N,L,k,j,F,U,q,J,ee,Y=this.keyframes;if(b<Y[0].t-this.offsetTime)N=Y[0].s[0],k=!0,A=0;else if(b>=Y[Y.length-1].t-this.offsetTime)N=Y[Y.length-1].s?Y[Y.length-1].s[0]:Y[Y.length-2].e[0],k=!0;else{for(var $=A,D=Y.length-1,V=!0,P,I,B;V&&(P=Y[$],I=Y[$+1],!(I.t-this.offsetTime>b));)$<D-1?$+=1:V=!1;if(B=this.keyframesMetadata[$]||{},k=P.h===1,A=$,!k){if(b>=I.t-this.offsetTime)J=1;else if(b<P.t-this.offsetTime)J=0;else{var z;B.__fnct?z=B.__fnct:(z=BezierFactory.getBezierEasing(P.o.x,P.o.y,P.i.x,P.i.y).get,B.__fnct=z),J=z((b-(P.t-this.offsetTime))/(I.t-this.offsetTime-(P.t-this.offsetTime)))}L=I.s?I.s[0]:P.e[0]}N=P.s[0]}for(U=C._length,q=N.i[0].length,T.lastIndex=A,j=0;j<U;j+=1)for(F=0;F<q;F+=1)ee=k?N.i[j][F]:N.i[j][F]+(L.i[j][F]-N.i[j][F])*J,C.i[j][F]=ee,ee=k?N.o[j][F]:N.o[j][F]+(L.o[j][F]-N.o[j][F])*J,C.o[j][F]=ee,ee=k?N.v[j][F]:N.v[j][F]+(L.v[j][F]-N.v[j][F])*J,C.v[j][F]=ee}function t(){var b=this.comp.renderedFrame-this.offsetTime,C=this.keyframes[0].t-this.offsetTime,T=this.keyframes[this.keyframes.length-1].t-this.offsetTime,A=this._caching.lastFrame;return A!==i&&(A<C&&b<C||A>T&&b>T)||(this._caching.lastIndex=A<b?this._caching.lastIndex:0,this.interpolateShape(b,this.pv,this._caching)),this._caching.lastFrame=b,this.pv}function n(){this.paths=this.localShapeCollection}function r(b,C){if(b._length!==C._length||b.c!==C.c)return!1;var T,A=b._length;for(T=0;T<A;T+=1)if(b.v[T][0]!==C.v[T][0]||b.v[T][1]!==C.v[T][1]||b.o[T][0]!==C.o[T][0]||b.o[T][1]!==C.o[T][1]||b.i[T][0]!==C.i[T][0]||b.i[T][1]!==C.i[T][1])return!1;return!0}function s(b){r(this.v,b)||(this.v=shapePool.clone(b),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var b;this.kf?b=this.pv:this.data.ks?b=this.data.ks.k:b=this.data.pt.k;var C,T=this.effectsSequence.length;for(C=0;C<T;C+=1)b=this.effectsSequence[C](b);this.setVValue(b),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function l(b,C,T){this.propType="shape",this.comp=b.comp,this.container=b,this.elem=b,this.data=C,this.k=!1,this.kf=!1,this._mdf=!1;var A=T===3?C.pt.k:C.ks.k;this.v=shapePool.clone(A),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n,this.effectsSequence=[]}function u(b){this.effectsSequence.push(b),this.container.addDynamicProperty(this)}l.prototype.interpolateShape=e,l.prototype.getValue=o,l.prototype.setVValue=s,l.prototype.addEffect=u;function d(b,C,T){this.propType="shape",this.comp=b.comp,this.elem=b,this.container=b,this.offsetTime=b.data.st,this.keyframes=T===3?C.pt.k:C.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var A=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,A),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=i,this.reset=n,this._caching={lastFrame:i,lastIndex:0},this.effectsSequence=[t.bind(this)]}d.prototype.getValue=o,d.prototype.interpolateShape=e,d.prototype.setVValue=s,d.prototype.addEffect=u;var p=function(){var b=roundCorner;function C(T,A){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=A.d,this.elem=T,this.comp=T.comp,this.frameId=-1,this.initDynamicPropertyContainer(T),this.p=PropertyFactory.getProp(T,A.p,1,0,this),this.s=PropertyFactory.getProp(T,A.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return C.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var A=this.p.v[0],N=this.p.v[1],L=this.s.v[0]/2,k=this.s.v[1]/2,j=this.d!==3,F=this.v;F.v[0][0]=A,F.v[0][1]=N-k,F.v[1][0]=j?A+L:A-L,F.v[1][1]=N,F.v[2][0]=A,F.v[2][1]=N+k,F.v[3][0]=j?A-L:A+L,F.v[3][1]=N,F.i[0][0]=j?A-L*b:A+L*b,F.i[0][1]=N-k,F.i[1][0]=j?A+L:A-L,F.i[1][1]=N-k*b,F.i[2][0]=j?A+L*b:A-L*b,F.i[2][1]=N+k,F.i[3][0]=j?A-L:A+L,F.i[3][1]=N+k*b,F.o[0][0]=j?A+L*b:A-L*b,F.o[0][1]=N-k,F.o[1][0]=j?A+L:A-L,F.o[1][1]=N+k*b,F.o[2][0]=j?A-L*b:A+L*b,F.o[2][1]=N+k,F.o[3][0]=j?A-L:A+L,F.o[3][1]=N-k*b}},extendPrototype([DynamicPropertyContainer],C),C}(),g=function(){function b(C,T){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=C,this.comp=C.comp,this.data=T,this.frameId=-1,this.d=T.d,this.initDynamicPropertyContainer(C),T.sy===1?(this.ir=PropertyFactory.getProp(C,T.ir,0,0,this),this.is=PropertyFactory.getProp(C,T.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(C,T.pt,0,0,this),this.p=PropertyFactory.getProp(C,T.p,1,0,this),this.r=PropertyFactory.getProp(C,T.r,0,degToRads,this),this.or=PropertyFactory.getProp(C,T.or,0,0,this),this.os=PropertyFactory.getProp(C,T.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return b.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var T=Math.floor(this.pt.v)*2,A=Math.PI*2/T,N=!0,L=this.or.v,k=this.ir.v,j=this.os.v,F=this.is.v,U=2*Math.PI*L/(T*2),q=2*Math.PI*k/(T*2),J,ee,Y,$,D=-Math.PI/2;D+=this.r.v;var V=this.data.d===3?-1:1;for(this.v._length=0,J=0;J<T;J+=1){ee=N?L:k,Y=N?j:F,$=N?U:q;var P=ee*Math.cos(D),I=ee*Math.sin(D),B=P===0&&I===0?0:I/Math.sqrt(P*P+I*I),z=P===0&&I===0?0:-P/Math.sqrt(P*P+I*I);P+=+this.p.v[0],I+=+this.p.v[1],this.v.setTripleAt(P,I,P-B*$*Y*V,I-z*$*Y*V,P+B*$*Y*V,I+z*$*Y*V,J,!0),N=!N,D+=A*V}},convertPolygonToPath:function(){var T=Math.floor(this.pt.v),A=Math.PI*2/T,N=this.or.v,L=this.os.v,k=2*Math.PI*N/(T*4),j,F=-Math.PI*.5,U=this.data.d===3?-1:1;for(F+=this.r.v,this.v._length=0,j=0;j<T;j+=1){var q=N*Math.cos(F),J=N*Math.sin(F),ee=q===0&&J===0?0:J/Math.sqrt(q*q+J*J),Y=q===0&&J===0?0:-q/Math.sqrt(q*q+J*J);q+=+this.p.v[0],J+=+this.p.v[1],this.v.setTripleAt(q,J,q-ee*k*L*U,J-Y*k*L*U,q+ee*k*L*U,J+Y*k*L*U,j,!0),F+=A*U}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],b),b}(),m=function(){function b(C,T){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=C,this.comp=C.comp,this.frameId=-1,this.d=T.d,this.initDynamicPropertyContainer(C),this.p=PropertyFactory.getProp(C,T.p,1,0,this),this.s=PropertyFactory.getProp(C,T.s,1,0,this),this.r=PropertyFactory.getProp(C,T.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return b.prototype={convertRectToPath:function(){var T=this.p.v[0],A=this.p.v[1],N=this.s.v[0]/2,L=this.s.v[1]/2,k=bmMin(N,L,this.r.v),j=k*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(T+N,A-L+k,T+N,A-L+k,T+N,A-L+j,0,!0),this.v.setTripleAt(T+N,A+L-k,T+N,A+L-j,T+N,A+L-k,1,!0),k!==0?(this.v.setTripleAt(T+N-k,A+L,T+N-k,A+L,T+N-j,A+L,2,!0),this.v.setTripleAt(T-N+k,A+L,T-N+j,A+L,T-N+k,A+L,3,!0),this.v.setTripleAt(T-N,A+L-k,T-N,A+L-k,T-N,A+L-j,4,!0),this.v.setTripleAt(T-N,A-L+k,T-N,A-L+j,T-N,A-L+k,5,!0),this.v.setTripleAt(T-N+k,A-L,T-N+k,A-L,T-N+j,A-L,6,!0),this.v.setTripleAt(T+N-k,A-L,T+N-j,A-L,T+N-k,A-L,7,!0)):(this.v.setTripleAt(T-N,A+L,T-N+j,A+L,T-N,A+L,2),this.v.setTripleAt(T-N,A-L,T-N,A-L+j,T-N,A-L,3))):(this.v.setTripleAt(T+N,A-L+k,T+N,A-L+j,T+N,A-L+k,0,!0),k!==0?(this.v.setTripleAt(T+N-k,A-L,T+N-k,A-L,T+N-j,A-L,1,!0),this.v.setTripleAt(T-N+k,A-L,T-N+j,A-L,T-N+k,A-L,2,!0),this.v.setTripleAt(T-N,A-L+k,T-N,A-L+k,T-N,A-L+j,3,!0),this.v.setTripleAt(T-N,A+L-k,T-N,A+L-j,T-N,A+L-k,4,!0),this.v.setTripleAt(T-N+k,A+L,T-N+k,A+L,T-N+j,A+L,5,!0),this.v.setTripleAt(T+N-k,A+L,T+N-j,A+L,T+N-k,A+L,6,!0),this.v.setTripleAt(T+N,A+L-k,T+N,A+L-k,T+N,A+L-j,7,!0)):(this.v.setTripleAt(T-N,A-L,T-N+j,A-L,T-N,A-L,1,!0),this.v.setTripleAt(T-N,A+L,T-N,A+L-j,T-N,A+L,2,!0),this.v.setTripleAt(T+N,A+L,T+N-j,A+L,T+N,A+L,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:n},extendPrototype([DynamicPropertyContainer],b),b}();function y(b,C,T){var A;if(T===3||T===4){var N=T===3?C.pt:C.ks,L=N.k;L.length?A=new d(b,C,T):A=new l(b,C,T)}else T===5?A=new m(b,C):T===6?A=new p(b,C):T===7&&(A=new g(b,C));return A.k&&b.addDynamicProperty(A),A}function _(){return l}function E(){return d}var S={};return S.getShapeProp=y,S.getConstructorFunction=_,S.getKeyframedConstructorFunction=E,S}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var i=Math.cos,e=Math.sin,t=Math.tan,n=Math.round;function r(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(P){if(P===0)return this;var I=i(P),B=e(P);return this._t(I,-B,0,0,B,I,0,0,0,0,1,0,0,0,0,1)}function o(P){if(P===0)return this;var I=i(P),B=e(P);return this._t(1,0,0,0,0,I,-B,0,0,B,I,0,0,0,0,1)}function l(P){if(P===0)return this;var I=i(P),B=e(P);return this._t(I,0,B,0,0,1,0,0,-B,0,I,0,0,0,0,1)}function u(P){if(P===0)return this;var I=i(P),B=e(P);return this._t(I,-B,0,0,B,I,0,0,0,0,1,0,0,0,0,1)}function d(P,I){return this._t(1,I,P,1,0,0)}function p(P,I){return this.shear(t(P),t(I))}function g(P,I){var B=i(I),z=e(I);return this._t(B,z,0,0,-z,B,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,t(P),1,0,0,0,0,1,0,0,0,0,1)._t(B,-z,0,0,z,B,0,0,0,0,1,0,0,0,0,1)}function m(P,I,B){return!B&&B!==0&&(B=1),P===1&&I===1&&B===1?this:this._t(P,0,0,0,0,I,0,0,0,0,B,0,0,0,0,1)}function y(P,I,B,z,te,ne,Q,ue,me,be,Ae,qe,Be,it,st,Oe){return this.props[0]=P,this.props[1]=I,this.props[2]=B,this.props[3]=z,this.props[4]=te,this.props[5]=ne,this.props[6]=Q,this.props[7]=ue,this.props[8]=me,this.props[9]=be,this.props[10]=Ae,this.props[11]=qe,this.props[12]=Be,this.props[13]=it,this.props[14]=st,this.props[15]=Oe,this}function _(P,I,B){return B=B||0,P!==0||I!==0||B!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,P,I,B,1):this}function E(P,I,B,z,te,ne,Q,ue,me,be,Ae,qe,Be,it,st,Oe){var Z=this.props;if(P===1&&I===0&&B===0&&z===0&&te===0&&ne===1&&Q===0&&ue===0&&me===0&&be===0&&Ae===1&&qe===0)return Z[12]=Z[12]*P+Z[15]*Be,Z[13]=Z[13]*ne+Z[15]*it,Z[14]=Z[14]*Ae+Z[15]*st,Z[15]*=Oe,this._identityCalculated=!1,this;var jt=Z[0],ot=Z[1],Ye=Z[2],$e=Z[3],dt=Z[4],Ue=Z[5],K=Z[6],G=Z[7],he=Z[8],Ee=Z[9],Te=Z[10],ve=Z[11],Ne=Z[12],Pe=Z[13],De=Z[14],ct=Z[15];return Z[0]=jt*P+ot*te+Ye*me+$e*Be,Z[1]=jt*I+ot*ne+Ye*be+$e*it,Z[2]=jt*B+ot*Q+Ye*Ae+$e*st,Z[3]=jt*z+ot*ue+Ye*qe+$e*Oe,Z[4]=dt*P+Ue*te+K*me+G*Be,Z[5]=dt*I+Ue*ne+K*be+G*it,Z[6]=dt*B+Ue*Q+K*Ae+G*st,Z[7]=dt*z+Ue*ue+K*qe+G*Oe,Z[8]=he*P+Ee*te+Te*me+ve*Be,Z[9]=he*I+Ee*ne+Te*be+ve*it,Z[10]=he*B+Ee*Q+Te*Ae+ve*st,Z[11]=he*z+Ee*ue+Te*qe+ve*Oe,Z[12]=Ne*P+Pe*te+De*me+ct*Be,Z[13]=Ne*I+Pe*ne+De*be+ct*it,Z[14]=Ne*B+Pe*Q+De*Ae+ct*st,Z[15]=Ne*z+Pe*ue+De*qe+ct*Oe,this._identityCalculated=!1,this}function S(P){var I=P.props;return this.transform(I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],I[12],I[13],I[14],I[15])}function b(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function C(P){for(var I=0;I<16;){if(P.props[I]!==this.props[I])return!1;I+=1}return!0}function T(P){var I;for(I=0;I<16;I+=1)P.props[I]=this.props[I];return P}function A(P){var I;for(I=0;I<16;I+=1)this.props[I]=P[I]}function N(P,I,B){return{x:P*this.props[0]+I*this.props[4]+B*this.props[8]+this.props[12],y:P*this.props[1]+I*this.props[5]+B*this.props[9]+this.props[13],z:P*this.props[2]+I*this.props[6]+B*this.props[10]+this.props[14]}}function L(P,I,B){return P*this.props[0]+I*this.props[4]+B*this.props[8]+this.props[12]}function k(P,I,B){return P*this.props[1]+I*this.props[5]+B*this.props[9]+this.props[13]}function j(P,I,B){return P*this.props[2]+I*this.props[6]+B*this.props[10]+this.props[14]}function F(){var P=this.props[0]*this.props[5]-this.props[1]*this.props[4],I=this.props[5]/P,B=-this.props[1]/P,z=-this.props[4]/P,te=this.props[0]/P,ne=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/P,Q=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/P,ue=new Matrix;return ue.props[0]=I,ue.props[1]=B,ue.props[4]=z,ue.props[5]=te,ue.props[12]=ne,ue.props[13]=Q,ue}function U(P){var I=this.getInverseMatrix();return I.applyToPointArray(P[0],P[1],P[2]||0)}function q(P){var I,B=P.length,z=[];for(I=0;I<B;I+=1)z[I]=U(P[I]);return z}function J(P,I,B){var z=createTypedArray("float32",6);if(this.isIdentity())z[0]=P[0],z[1]=P[1],z[2]=I[0],z[3]=I[1],z[4]=B[0],z[5]=B[1];else{var te=this.props[0],ne=this.props[1],Q=this.props[4],ue=this.props[5],me=this.props[12],be=this.props[13];z[0]=P[0]*te+P[1]*Q+me,z[1]=P[0]*ne+P[1]*ue+be,z[2]=I[0]*te+I[1]*Q+me,z[3]=I[0]*ne+I[1]*ue+be,z[4]=B[0]*te+B[1]*Q+me,z[5]=B[0]*ne+B[1]*ue+be}return z}function ee(P,I,B){var z;return this.isIdentity()?z=[P,I,B]:z=[P*this.props[0]+I*this.props[4]+B*this.props[8]+this.props[12],P*this.props[1]+I*this.props[5]+B*this.props[9]+this.props[13],P*this.props[2]+I*this.props[6]+B*this.props[10]+this.props[14]],z}function Y(P,I){if(this.isIdentity())return P+","+I;var B=this.props;return Math.round((P*B[0]+I*B[4]+B[12])*100)/100+","+Math.round((P*B[1]+I*B[5]+B[13])*100)/100}function $(){for(var P=0,I=this.props,B="matrix3d(",z=1e4;P<16;)B+=n(I[P]*z)/z,B+=P===15?")":",",P+=1;return B}function D(P){var I=1e4;return P<1e-6&&P>0||P>-1e-6&&P<0?n(P*I)/I:P}function V(){var P=this.props,I=D(P[0]),B=D(P[1]),z=D(P[4]),te=D(P[5]),ne=D(P[12]),Q=D(P[13]);return"matrix("+I+","+B+","+z+","+te+","+ne+","+Q+")"}return function(){this.reset=r,this.rotate=s,this.rotateX=o,this.rotateY=l,this.rotateZ=u,this.skew=p,this.skewFromAxis=g,this.shear=d,this.scale=m,this.setTransform=y,this.translate=_,this.transform=E,this.multiply=S,this.applyToPoint=N,this.applyToX=L,this.applyToY=k,this.applyToZ=j,this.applyToPointArray=ee,this.applyToTriplePoints=J,this.applyToPointStringified=Y,this.toCSS=$,this.to2dCSS=V,this.clone=T,this.cloneFromProps=A,this.equals=C,this.inversePoints=q,this.inversePoint=U,this.getInverseMatrix=F,this._t=this.transform,this.isIdentity=b,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(t){return typeof t}:_typeof$3=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(i)}var lottie={};function setLocation(i){setLocationHref(i)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(i){setSubframeEnabled(i)}function setPrefix(i){setIdPrefix(i)}function loadAnimation(i){return animationManager.loadAnimation(i)}function setQuality(i){if(typeof i=="string")switch(i){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(i)&&i>1&&setDefaultCurveSegments(i)}function inBrowser(){return typeof navigator<"u"}function installPlugin(i,e){i==="expressions"&&setExpressionsPlugin(e)}function getFactory(i){switch(i){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(i){for(var e=queryString.split("&"),t=0;t<e.length;t+=1){var n=e[t].split("=");if(decodeURIComponent(n[0])==i)return decodeURIComponent(n[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(i){}var ShapeModifiers=function(){var i={},e={};i.registerModifier=t,i.getModifier=n;function t(r,s){e[r]||(e[r]=s)}function n(r,s,o){return new e[r](s,o)}return i}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(i){if(!this.closed){i.sh.container.addDynamicProperty(i.sh);var e={shape:i.sh,data:i,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&i.setAsAnimated()}},ShapeModifier.prototype.init=function(i,e){this.shapes=[],this.elem=i,this.initDynamicPropertyContainer(i),this.initModifierProperties(i,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(i,e){this.s=PropertyFactory.getProp(i,e.s,0,.01,this),this.e=PropertyFactory.getProp(i,e.e,0,.01,this),this.o=PropertyFactory.getProp(i,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(i){i.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(i,e,t,n,r){var s=[];e<=1?s.push({s:i,e}):i>=1?s.push({s:i-1,e:e-1}):(s.push({s:i,e:1}),s.push({s:0,e:e-1}));var o=[],l,u=s.length,d;for(l=0;l<u;l+=1)if(d=s[l],!(d.e*r<n||d.s*r>n+t)){var p,g;d.s*r<=n?p=0:p=(d.s*r-n)/t,d.e*r>=n+t?g=1:g=(d.e*r-n)/t,o.push([p,g])}return o.length||o.push([0,0]),o},TrimModifier.prototype.releasePathsData=function(i){var e,t=i.length;for(e=0;e<t;e+=1)segmentsLengthPool.release(i[e]);return i.length=0,i},TrimModifier.prototype.processShapes=function(i){var e,t;if(this._mdf||i){var n=this.o.v%360/360;if(n<0&&(n+=1),this.s.v>1?e=1+n:this.s.v<0?e=0+n:e=this.s.v+n,this.e.v>1?t=1+n:this.e.v<0?t=0+n:t=this.e.v+n,e>t){var r=e;e=t,t=r}e=Math.round(e*1e4)*1e-4,t=Math.round(t*1e4)*1e-4,this.sValue=e,this.eValue=t}else e=this.sValue,t=this.eValue;var s,o,l=this.shapes.length,u,d,p,g,m,y=0;if(t===e)for(o=0;o<l;o+=1)this.shapes[o].localShapeCollection.releaseShapes(),this.shapes[o].shape._mdf=!0,this.shapes[o].shape.paths=this.shapes[o].localShapeCollection,this._mdf&&(this.shapes[o].pathsData.length=0);else if(t===1&&e===0||t===0&&e===1){if(this._mdf)for(o=0;o<l;o+=1)this.shapes[o].pathsData.length=0,this.shapes[o].shape._mdf=!0}else{var _=[],E,S;for(o=0;o<l;o+=1)if(E=this.shapes[o],!E.shape._mdf&&!this._mdf&&!i&&this.m!==2)E.shape.paths=E.localShapeCollection;else{if(s=E.shape.paths,d=s._length,m=0,!E.shape._mdf&&E.pathsData.length)m=E.totalShapeLength;else{for(p=this.releasePathsData(E.pathsData),u=0;u<d;u+=1)g=bez.getSegmentsLength(s.shapes[u]),p.push(g),m+=g.totalLength;E.totalShapeLength=m,E.pathsData=p}y+=m,E.shape._mdf=!0}var b=e,C=t,T=0,A;for(o=l-1;o>=0;o-=1)if(E=this.shapes[o],E.shape._mdf){for(S=E.localShapeCollection,S.releaseShapes(),this.m===2&&l>1?(A=this.calculateShapeEdges(e,t,E.totalShapeLength,T,y),T+=E.totalShapeLength):A=[[b,C]],d=A.length,u=0;u<d;u+=1){b=A[u][0],C=A[u][1],_.length=0,C<=1?_.push({s:E.totalShapeLength*b,e:E.totalShapeLength*C}):b>=1?_.push({s:E.totalShapeLength*(b-1),e:E.totalShapeLength*(C-1)}):(_.push({s:E.totalShapeLength*b,e:E.totalShapeLength}),_.push({s:0,e:E.totalShapeLength*(C-1)}));var N=this.addShapes(E,_[0]);if(_[0].s!==_[0].e){if(_.length>1){var L=E.shape.paths.shapes[E.shape.paths._length-1];if(L.c){var k=N.pop();this.addPaths(N,S),N=this.addShapes(E,_[1],k)}else this.addPaths(N,S),N=this.addShapes(E,_[1])}this.addPaths(N,S)}}E.shape.paths=S}}},TrimModifier.prototype.addPaths=function(i,e){var t,n=i.length;for(t=0;t<n;t+=1)e.addShape(i[t])},TrimModifier.prototype.addSegment=function(i,e,t,n,r,s,o){r.setXYAt(e[0],e[1],"o",s),r.setXYAt(t[0],t[1],"i",s+1),o&&r.setXYAt(i[0],i[1],"v",s),r.setXYAt(n[0],n[1],"v",s+1)},TrimModifier.prototype.addSegmentFromArray=function(i,e,t,n){e.setXYAt(i[1],i[5],"o",t),e.setXYAt(i[2],i[6],"i",t+1),n&&e.setXYAt(i[0],i[4],"v",t),e.setXYAt(i[3],i[7],"v",t+1)},TrimModifier.prototype.addShapes=function(i,e,t){var n=i.pathsData,r=i.shape.paths.shapes,s,o=i.shape.paths._length,l,u,d=0,p,g,m,y,_=[],E,S=!0;for(t?(g=t._length,E=t._length):(t=shapePool.newElement(),g=0,E=0),_.push(t),s=0;s<o;s+=1){for(m=n[s].lengths,t.c=r[s].c,u=r[s].c?m.length:m.length+1,l=1;l<u;l+=1)if(p=m[l-1],d+p.addedLength<e.s)d+=p.addedLength,t.c=!1;else if(d>e.e){t.c=!1;break}else e.s<=d&&e.e>=d+p.addedLength?(this.addSegment(r[s].v[l-1],r[s].o[l-1],r[s].i[l],r[s].v[l],t,g,S),S=!1):(y=bez.getNewSegment(r[s].v[l-1],r[s].v[l],r[s].o[l-1],r[s].i[l],(e.s-d)/p.addedLength,(e.e-d)/p.addedLength,m[l-1]),this.addSegmentFromArray(y,t,g,S),S=!1,t.c=!1),d+=p.addedLength,g+=1;if(r[s].c&&m.length){if(p=m[l-1],d<=e.e){var b=m[l-1].addedLength;e.s<=d&&e.e>=d+b?(this.addSegment(r[s].v[l-1],r[s].o[l-1],r[s].i[0],r[s].v[0],t,g,S),S=!1):(y=bez.getNewSegment(r[s].v[l-1],r[s].v[0],r[s].o[l-1],r[s].i[0],(e.s-d)/b,(e.e-d)/b,m[l-1]),this.addSegmentFromArray(y,t,g,S),S=!1,t.c=!1)}else t.c=!1;d+=p.addedLength,g+=1}if(t._length&&(t.setXYAt(t.v[E][0],t.v[E][1],"i",E),t.setXYAt(t.v[t._length-1][0],t.v[t._length-1][1],"o",t._length-1)),d>e.e)break;s<o-1&&(t=shapePool.newElement(),S=!0,_.push(t),g=0)}return _};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(i,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(i,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(i,e){var t=e/100,n=[0,0],r=i._length,s=0;for(s=0;s<r;s+=1)n[0]+=i.v[s][0],n[1]+=i.v[s][1];n[0]/=r,n[1]/=r;var o=shapePool.newElement();o.c=i.c;var l,u,d,p,g,m;for(s=0;s<r;s+=1)l=i.v[s][0]+(n[0]-i.v[s][0])*t,u=i.v[s][1]+(n[1]-i.v[s][1])*t,d=i.o[s][0]+(n[0]-i.o[s][0])*-t,p=i.o[s][1]+(n[1]-i.o[s][1])*-t,g=i.i[s][0]+(n[0]-i.i[s][0])*-t,m=i.i[s][1]+(n[1]-i.i[s][1])*-t,o.setTripleAt(l,u,d,p,g,m,s);return o},PuckerAndBloatModifier.prototype.processShapes=function(i){var e,t,n=this.shapes.length,r,s,o=this.amount.v;if(o!==0){var l,u;for(t=0;t<n;t+=1){if(l=this.shapes[t],u=l.localShapeCollection,!(!l.shape._mdf&&!this._mdf&&!i))for(u.releaseShapes(),l.shape._mdf=!0,e=l.shape.paths.shapes,s=l.shape.paths._length,r=0;r<s;r+=1)u.addShape(this.processPath(e[r],o));l.shape.paths=l.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var i=[0,0];function e(u){var d=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||d,this.a&&u.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&u.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&u.skewFromAxis(-this.sk.v,this.sa.v),this.r?u.rotate(-this.r.v):u.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?u.translate(this.px.v,this.py.v,-this.pz.v):u.translate(this.px.v,this.py.v,0):u.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function t(u){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||u){var d;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var p,g;if(d=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(p=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/d,0),g=this.p.getValueAtTime(this.p.keyframes[0].t/d,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(p=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/d,0),g=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/d,0)):(p=this.p.pv,g=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/d,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){p=[],g=[];var m=this.px,y=this.py;m._caching.lastFrame+m.offsetTime<=m.keyframes[0].t?(p[0]=m.getValueAtTime((m.keyframes[0].t+.01)/d,0),p[1]=y.getValueAtTime((y.keyframes[0].t+.01)/d,0),g[0]=m.getValueAtTime(m.keyframes[0].t/d,0),g[1]=y.getValueAtTime(y.keyframes[0].t/d,0)):m._caching.lastFrame+m.offsetTime>=m.keyframes[m.keyframes.length-1].t?(p[0]=m.getValueAtTime(m.keyframes[m.keyframes.length-1].t/d,0),p[1]=y.getValueAtTime(y.keyframes[y.keyframes.length-1].t/d,0),g[0]=m.getValueAtTime((m.keyframes[m.keyframes.length-1].t-.01)/d,0),g[1]=y.getValueAtTime((y.keyframes[y.keyframes.length-1].t-.01)/d,0)):(p=[m.pv,y.pv],g[0]=m.getValueAtTime((m._caching.lastFrame+m.offsetTime-.01)/d,m.offsetTime),g[1]=y.getValueAtTime((y._caching.lastFrame+y.offsetTime-.01)/d,y.offsetTime))}else g=i,p=g;this.v.rotate(-Math.atan2(p[1]-g[1],p[0]-g[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function n(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function r(){}function s(u){this._addDynamicProperty(u),this.elem.addDynamicProperty(u),this._isDirty=!0}function o(u,d,p){if(this.elem=u,this.frameId=-1,this.propType="transform",this.data=d,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(p||u),d.p&&d.p.s?(this.px=PropertyFactory.getProp(u,d.p.x,0,0,this),this.py=PropertyFactory.getProp(u,d.p.y,0,0,this),d.p.z&&(this.pz=PropertyFactory.getProp(u,d.p.z,0,0,this))):this.p=PropertyFactory.getProp(u,d.p||{k:[0,0,0]},1,0,this),d.rx){if(this.rx=PropertyFactory.getProp(u,d.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(u,d.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(u,d.rz,0,degToRads,this),d.or.k[0].ti){var g,m=d.or.k.length;for(g=0;g<m;g+=1)d.or.k[g].to=null,d.or.k[g].ti=null}this.or=PropertyFactory.getProp(u,d.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(u,d.r||{k:0},0,degToRads,this);d.sk&&(this.sk=PropertyFactory.getProp(u,d.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(u,d.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(u,d.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(u,d.s||{k:[100,100,100]},1,.01,this),d.o?this.o=PropertyFactory.getProp(u,d.o,0,.01,u):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}o.prototype={applyToMatrix:e,getValue:t,precalculateMatrix:n,autoOrient:r},extendPrototype([DynamicPropertyContainer],o),o.prototype.addDynamicProperty=s,o.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function l(u,d,p){return new o(u,d,p)}return{getTransformProperty:l}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(i,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(i,e.c,0,null,this),this.o=PropertyFactory.getProp(i,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(i,e.tr,this),this.so=PropertyFactory.getProp(i,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(i,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(i,e,t,n,r,s){var o=s?-1:1,l=n.s.v[0]+(1-n.s.v[0])*(1-r),u=n.s.v[1]+(1-n.s.v[1])*(1-r);i.translate(n.p.v[0]*o*r,n.p.v[1]*o*r,n.p.v[2]),e.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),e.rotate(-n.r.v*o*r),e.translate(n.a.v[0],n.a.v[1],n.a.v[2]),t.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),t.scale(s?1/l:l,s?1/u:u),t.translate(n.a.v[0],n.a.v[1],n.a.v[2])},RepeaterModifier.prototype.init=function(i,e,t,n){for(this.elem=i,this.arr=e,this.pos=t,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(i),this.initModifierProperties(i,e[t]);t>0;)t-=1,this._elements.unshift(e[t]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(i){var e,t=i.length;for(e=0;e<t;e+=1)i[e]._processed=!1,i[e].ty==="gr"&&this.resetElements(i[e].it)},RepeaterModifier.prototype.cloneElements=function(i){var e=JSON.parse(JSON.stringify(i));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(i,e){var t,n=i.length;for(t=0;t<n;t+=1)i[t]._render=e,i[t].ty==="gr"&&this.changeGroupRender(i[t].it,e)},RepeaterModifier.prototype.processShapes=function(i){var e,t,n,r,s,o=!1;if(this._mdf||i){var l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var u={it:this.cloneElements(this._elements),ty:"gr"};u.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,u),this._groups.splice(0,0,u),this._currentCopies+=1}this.elem.reloadShapes(),o=!0}s=0;var d;for(n=0;n<=this._groups.length-1;n+=1){if(d=s<l,this._groups[n]._render=d,this.changeGroupRender(this._groups[n].it,d),!d){var p=this.elemsData[n].it,g=p[p.length-1];g.transform.op.v!==0?(g.transform.op._mdf=!0,g.transform.op.v=0):g.transform.op._mdf=!1}s+=1}this._currentCopies=l;var m=this.o.v,y=m%1,_=m>0?Math.floor(m):Math.ceil(m),E=this.pMatrix.props,S=this.rMatrix.props,b=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var C=0;if(m>0){for(;C<_;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),C+=1;y&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,y,!1),C+=y)}else if(m<0){for(;C>_;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),C-=1;y&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-y,!0),C-=y)}n=this.data.m===1?0:this._currentCopies-1,r=this.data.m===1?1:-1,s=this._currentCopies;for(var T,A;s;){if(e=this.elemsData[n].it,t=e[e.length-1].transform.mProps.v.props,A=t.length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(n/(this._currentCopies-1)),C!==0){for((n!==0&&r===1||n!==this._currentCopies-1&&r===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14],S[15]),this.matrix.transform(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15]),this.matrix.transform(E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],E[8],E[9],E[10],E[11],E[12],E[13],E[14],E[15]),T=0;T<A;T+=1)t[T]=this.matrix.props[T];this.matrix.reset()}else for(this.matrix.reset(),T=0;T<A;T+=1)t[T]=this.matrix.props[T];C+=1,s-=1,n+=r}}else for(s=this._currentCopies,n=0,r=1;s;)e=this.elemsData[n].it,t=e[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,s-=1,n+=r;return o},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(i,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(i,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(i,e){var t=shapePool.newElement();t.c=i.c;var n,r=i._length,s,o,l,u,d,p,g=0,m,y,_,E,S,b;for(n=0;n<r;n+=1)s=i.v[n],l=i.o[n],o=i.i[n],s[0]===l[0]&&s[1]===l[1]&&s[0]===o[0]&&s[1]===o[1]?(n===0||n===r-1)&&!i.c?(t.setTripleAt(s[0],s[1],l[0],l[1],o[0],o[1],g),g+=1):(n===0?u=i.v[r-1]:u=i.v[n-1],d=Math.sqrt(Math.pow(s[0]-u[0],2)+Math.pow(s[1]-u[1],2)),p=d?Math.min(d/2,e)/d:0,S=s[0]+(u[0]-s[0])*p,m=S,b=s[1]-(s[1]-u[1])*p,y=b,_=m-(m-s[0])*roundCorner,E=y-(y-s[1])*roundCorner,t.setTripleAt(m,y,_,E,S,b,g),g+=1,n===r-1?u=i.v[0]:u=i.v[n+1],d=Math.sqrt(Math.pow(s[0]-u[0],2)+Math.pow(s[1]-u[1],2)),p=d?Math.min(d/2,e)/d:0,_=s[0]+(u[0]-s[0])*p,m=_,E=s[1]+(u[1]-s[1])*p,y=E,S=m-(m-s[0])*roundCorner,b=y-(y-s[1])*roundCorner,t.setTripleAt(m,y,_,E,S,b,g),g+=1):(t.setTripleAt(i.v[n][0],i.v[n][1],i.o[n][0],i.o[n][1],i.i[n][0],i.i[n][1],g),g+=1);return t},RoundCornersModifier.prototype.processShapes=function(i){var e,t,n=this.shapes.length,r,s,o=this.rd.v;if(o!==0){var l,u;for(t=0;t<n;t+=1){if(l=this.shapes[t],u=l.localShapeCollection,!(!l.shape._mdf&&!this._mdf&&!i))for(u.releaseShapes(),l.shape._mdf=!0,e=l.shape.paths.shapes,s=l.shape.paths._length,r=0;r<s;r+=1)u.addShape(this.processPath(e[r],o));l.shape.paths=l.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(i,e){return Math.abs(i-e)*1e5<=Math.min(Math.abs(i),Math.abs(e))}function floatZero(i){return Math.abs(i)<=1e-5}function lerp(i,e,t){return i*(1-t)+e*t}function lerpPoint(i,e,t){return[lerp(i[0],e[0],t),lerp(i[1],e[1],t)]}function quadRoots(i,e,t){if(i===0)return[];var n=e*e-4*i*t;if(n<0)return[];var r=-e/(2*i);if(n===0)return[r];var s=Math.sqrt(n)/(2*i);return[r-s,r+s]}function polynomialCoefficients(i,e,t,n){return[-i+3*e-3*t+n,3*i-6*e+3*t,-3*i+3*e,i]}function singlePoint(i){return new PolynomialBezier(i,i,i,i,!1)}function PolynomialBezier(i,e,t,n,r){r&&pointEqual(i,e)&&(e=lerpPoint(i,n,1/3)),r&&pointEqual(t,n)&&(t=lerpPoint(i,n,2/3));var s=polynomialCoefficients(i[0],e[0],t[0],n[0]),o=polynomialCoefficients(i[1],e[1],t[1],n[1]);this.a=[s[0],o[0]],this.b=[s[1],o[1]],this.c=[s[2],o[2]],this.d=[s[3],o[3]],this.points=[i,e,t,n]}PolynomialBezier.prototype.point=function(i){return[((this.a[0]*i+this.b[0])*i+this.c[0])*i+this.d[0],((this.a[1]*i+this.b[1])*i+this.c[1])*i+this.d[1]]},PolynomialBezier.prototype.derivative=function(i){return[(3*i*this.a[0]+2*this.b[0])*i+this.c[0],(3*i*this.a[1]+2*this.b[1])*i+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(i){var e=this.derivative(i);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(i){var e=this.derivative(i);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var i=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(i))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/i,t=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/i;if(t<0)return[];var n=Math.sqrt(t);return floatZero(n)?n>0&&n<1?[e]:[]:[e-n,e+n].filter(function(r){return r>0&&r<1})},PolynomialBezier.prototype.split=function(i){if(i<=0)return[singlePoint(this.points[0]),this];if(i>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],i),t=lerpPoint(this.points[1],this.points[2],i),n=lerpPoint(this.points[2],this.points[3],i),r=lerpPoint(e,t,i),s=lerpPoint(t,n,i),o=lerpPoint(r,s,i);return[new PolynomialBezier(this.points[0],e,r,o,!0),new PolynomialBezier(o,s,n,this.points[3],!0)]};function extrema(i,e){var t=i.points[0][e],n=i.points[i.points.length-1][e];if(t>n){var r=n;n=t,t=r}for(var s=quadRoots(3*i.a[e],2*i.b[e],i.c[e]),o=0;o<s.length;o+=1)if(s[o]>0&&s[o]<1){var l=i.point(s[o])[e];l<t?t=l:l>n&&(n=l)}return{min:t,max:n}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var i=this.bounds();return{left:i.x.min,right:i.x.max,top:i.y.min,bottom:i.y.max,width:i.x.max-i.x.min,height:i.y.max-i.y.min,cx:(i.x.max+i.x.min)/2,cy:(i.y.max+i.y.min)/2}};function intersectData(i,e,t){var n=i.boundingBox();return{cx:n.cx,cy:n.cy,width:n.width,height:n.height,bez:i,t:(e+t)/2,t1:e,t2:t}}function splitData(i){var e=i.bez.split(.5);return[intersectData(e[0],i.t1,i.t),intersectData(e[1],i.t,i.t2)]}function boxIntersect(i,e){return Math.abs(i.cx-e.cx)*2<i.width+e.width&&Math.abs(i.cy-e.cy)*2<i.height+e.height}function intersectsImpl(i,e,t,n,r,s){if(boxIntersect(i,e)){if(t>=s||i.width<=n&&i.height<=n&&e.width<=n&&e.height<=n){r.push([i.t,e.t]);return}var o=splitData(i),l=splitData(e);intersectsImpl(o[0],l[0],t+1,n,r,s),intersectsImpl(o[0],l[1],t+1,n,r,s),intersectsImpl(o[1],l[0],t+1,n,r,s),intersectsImpl(o[1],l[1],t+1,n,r,s)}}PolynomialBezier.prototype.intersections=function(i,e,t){e===void 0&&(e=2),t===void 0&&(t=7);var n=[];return intersectsImpl(intersectData(this,0,1),intersectData(i,0,1),0,e,n,t),n},PolynomialBezier.shapeSegment=function(i,e){var t=(e+1)%i.length();return new PolynomialBezier(i.v[e],i.o[e],i.i[t],i.v[t],!0)},PolynomialBezier.shapeSegmentInverted=function(i,e){var t=(e+1)%i.length();return new PolynomialBezier(i.v[t],i.i[t],i.o[e],i.v[e],!0)};function crossProduct(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function lineIntersection(i,e,t,n){var r=[i[0],i[1],1],s=[e[0],e[1],1],o=[t[0],t[1],1],l=[n[0],n[1],1],u=crossProduct(crossProduct(r,s),crossProduct(o,l));return floatZero(u[2])?null:[u[0]/u[2],u[1]/u[2]]}function polarOffset(i,e,t){return[i[0]+Math.cos(e)*t,i[1]-Math.sin(e)*t]}function pointDistance(i,e){return Math.hypot(i[0]-e[0],i[1]-e[1])}function pointEqual(i,e){return floatEqual(i[0],e[0])&&floatEqual(i[1],e[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(i,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(i,e.s,0,null,this),this.frequency=PropertyFactory.getProp(i,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(i,e.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(i,e,t,n,r,s,o){var l=t-Math.PI/2,u=t+Math.PI/2,d=e[0]+Math.cos(t)*n*r,p=e[1]-Math.sin(t)*n*r;i.setTripleAt(d,p,d+Math.cos(l)*s,p-Math.sin(l)*s,d+Math.cos(u)*o,p-Math.sin(u)*o,i.length())}function getPerpendicularVector(i,e){var t=[e[0]-i[0],e[1]-i[1]],n=-Math.PI*.5,r=[Math.cos(n)*t[0]-Math.sin(n)*t[1],Math.sin(n)*t[0]+Math.cos(n)*t[1]];return r}function getProjectingAngle(i,e){var t=e===0?i.length()-1:e-1,n=(e+1)%i.length(),r=i.v[t],s=i.v[n],o=getPerpendicularVector(r,s);return Math.atan2(0,1)-Math.atan2(o[1],o[0])}function zigZagCorner(i,e,t,n,r,s,o){var l=getProjectingAngle(e,t),u=e.v[t%e._length],d=e.v[t===0?e._length-1:t-1],p=e.v[(t+1)%e._length],g=s===2?Math.sqrt(Math.pow(u[0]-d[0],2)+Math.pow(u[1]-d[1],2)):0,m=s===2?Math.sqrt(Math.pow(u[0]-p[0],2)+Math.pow(u[1]-p[1],2)):0;setPoint(i,e.v[t%e._length],l,o,n,m/((r+1)*2),g/((r+1)*2))}function zigZagSegment(i,e,t,n,r,s){for(var o=0;o<n;o+=1){var l=(o+1)/(n+1),u=r===2?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,d=e.normalAngle(l),p=e.point(l);setPoint(i,p,d,s,t,u/((n+1)*2),u/((n+1)*2)),s=-s}return s}ZigZagModifier.prototype.processPath=function(i,e,t,n){var r=i._length,s=shapePool.newElement();if(s.c=i.c,i.c||(r-=1),r===0)return s;var o=-1,l=PolynomialBezier.shapeSegment(i,0);zigZagCorner(s,i,0,e,t,n,o);for(var u=0;u<r;u+=1)o=zigZagSegment(s,l,e,t,n,-o),u===r-1&&!i.c?l=null:l=PolynomialBezier.shapeSegment(i,(u+1)%r),zigZagCorner(s,i,u+1,e,t,n,o);return s},ZigZagModifier.prototype.processShapes=function(i){var e,t,n=this.shapes.length,r,s,o=this.amplitude.v,l=Math.max(0,Math.round(this.frequency.v)),u=this.pointsType.v;if(o!==0){var d,p;for(t=0;t<n;t+=1){if(d=this.shapes[t],p=d.localShapeCollection,!(!d.shape._mdf&&!this._mdf&&!i))for(p.releaseShapes(),d.shape._mdf=!0,e=d.shape.paths.shapes,s=d.shape.paths._length,r=0;r<s;r+=1)p.addShape(this.processPath(e[r],o,l,u));d.shape.paths=d.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(i,e,t){var n=Math.atan2(e[0]-i[0],e[1]-i[1]);return[polarOffset(i,n,t),polarOffset(e,n,t)]}function offsetSegment(i,e){var t,n,r,s,o,l,u;u=linearOffset(i.points[0],i.points[1],e),t=u[0],n=u[1],u=linearOffset(i.points[1],i.points[2],e),r=u[0],s=u[1],u=linearOffset(i.points[2],i.points[3],e),o=u[0],l=u[1];var d=lineIntersection(t,n,r,s);d===null&&(d=n);var p=lineIntersection(o,l,r,s);return p===null&&(p=o),new PolynomialBezier(t,d,p,l)}function joinLines(i,e,t,n,r){var s=e.points[3],o=t.points[0];if(n===3||pointEqual(s,o))return s;if(n===2){var l=-e.tangentAngle(1),u=-t.tangentAngle(0)+Math.PI,d=lineIntersection(s,polarOffset(s,l+Math.PI/2,100),o,polarOffset(o,l+Math.PI/2,100)),p=d?pointDistance(d,s):pointDistance(s,o)/2,g=polarOffset(s,l,2*p*roundCorner);return i.setXYAt(g[0],g[1],"o",i.length()-1),g=polarOffset(o,u,2*p*roundCorner),i.setTripleAt(o[0],o[1],o[0],o[1],g[0],g[1],i.length()),o}var m=pointEqual(s,e.points[2])?e.points[0]:e.points[2],y=pointEqual(o,t.points[1])?t.points[3]:t.points[1],_=lineIntersection(m,s,o,y);return _&&pointDistance(_,s)<r?(i.setTripleAt(_[0],_[1],_[0],_[1],_[0],_[1],i.length()),_):s}function getIntersection(i,e){var t=i.intersections(e);return t.length&&floatEqual(t[0][0],1)&&t.shift(),t.length?t[0]:null}function pruneSegmentIntersection(i,e){var t=i.slice(),n=e.slice(),r=getIntersection(i[i.length-1],e[0]);return r&&(t[i.length-1]=i[i.length-1].split(r[0])[0],n[0]=e[0].split(r[1])[1]),i.length>1&&e.length>1&&(r=getIntersection(i[0],e[e.length-1]),r)?[[i[0].split(r[0])[0]],[e[e.length-1].split(r[1])[1]]]:[t,n]}function pruneIntersections(i){for(var e,t=1;t<i.length;t+=1)e=pruneSegmentIntersection(i[t-1],i[t]),i[t-1]=e[0],i[t]=e[1];return i.length>1&&(e=pruneSegmentIntersection(i[i.length-1],i[0]),i[i.length-1]=e[0],i[0]=e[1]),i}function offsetSegmentSplit(i,e){var t=i.inflectionPoints(),n,r,s,o;if(t.length===0)return[offsetSegment(i,e)];if(t.length===1||floatEqual(t[1],1))return s=i.split(t[0]),n=s[0],r=s[1],[offsetSegment(n,e),offsetSegment(r,e)];s=i.split(t[0]),n=s[0];var l=(t[1]-t[0])/(1-t[0]);return s=s[1].split(l),o=s[0],r=s[1],[offsetSegment(n,e),offsetSegment(o,e),offsetSegment(r,e)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(i,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(i,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(i,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(i,e,t,n){var r=shapePool.newElement();r.c=i.c;var s=i.length();i.c||(s-=1);var o,l,u,d=[];for(o=0;o<s;o+=1)u=PolynomialBezier.shapeSegment(i,o),d.push(offsetSegmentSplit(u,e));if(!i.c)for(o=s-1;o>=0;o-=1)u=PolynomialBezier.shapeSegmentInverted(i,o),d.push(offsetSegmentSplit(u,e));d=pruneIntersections(d);var p=null,g=null;for(o=0;o<d.length;o+=1){var m=d[o];for(g&&(p=joinLines(r,g,m[0],t,n)),g=m[m.length-1],l=0;l<m.length;l+=1)u=m[l],p&&pointEqual(u.points[0],p)?r.setXYAt(u.points[1][0],u.points[1][1],"o",r.length()-1):r.setTripleAt(u.points[0][0],u.points[0][1],u.points[1][0],u.points[1][1],u.points[0][0],u.points[0][1],r.length()),r.setTripleAt(u.points[3][0],u.points[3][1],u.points[3][0],u.points[3][1],u.points[2][0],u.points[2][1],r.length()),p=u.points[3]}return d.length&&joinLines(r,g,d[0][0],t,n),r},OffsetPathModifier.prototype.processShapes=function(i){var e,t,n=this.shapes.length,r,s,o=this.amount.v,l=this.miterLimit.v,u=this.lineJoin;if(o!==0){var d,p;for(t=0;t<n;t+=1){if(d=this.shapes[t],p=d.localShapeCollection,!(!d.shape._mdf&&!this._mdf&&!i))for(p.releaseShapes(),d.shape._mdf=!0,e=d.shape.paths.shapes,s=d.shape.paths._length,r=0;r<s;r+=1)p.addShape(this.processPath(e[r],o,u,l));d.shape.paths=d.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(i){for(var e=i.fStyle?i.fStyle.split(" "):[],t="normal",n="normal",r=e.length,s,o=0;o<r;o+=1)switch(s=e[o].toLowerCase(),s){case"italic":n="italic";break;case"bold":t="700";break;case"black":t="900";break;case"medium":t="500";break;case"regular":case"normal":t="400";break;case"light":case"thin":t="200";break}return{style:n,weight:i.fWeight||t}}var FontManager=function(){var i=5e3,e={w:0,size:0,shapes:[],data:{shapes:[]}},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=127988,r=917631,s=917601,o=917626,l=65039,u=8205,d=127462,p=127487,g=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function m(D){var V=D.split(","),P,I=V.length,B=[];for(P=0;P<I;P+=1)V[P]!=="sans-serif"&&V[P]!=="monospace"&&B.push(V[P]);return B.join(",")}function y(D,V){var P=createTag("span");P.setAttribute("aria-hidden",!0),P.style.fontFamily=V;var I=createTag("span");I.innerText="giItT1WQy@!-/#",P.style.position="absolute",P.style.left="-10000px",P.style.top="-10000px",P.style.fontSize="300px",P.style.fontVariant="normal",P.style.fontStyle="normal",P.style.fontWeight="normal",P.style.letterSpacing="0",P.appendChild(I),document.body.appendChild(P);var B=I.offsetWidth;return I.style.fontFamily=m(D)+", "+V,{node:I,w:B,parent:P}}function _(){var D,V=this.fonts.length,P,I,B=V;for(D=0;D<V;D+=1)this.fonts[D].loaded?B-=1:this.fonts[D].fOrigin==="n"||this.fonts[D].origin===0?this.fonts[D].loaded=!0:(P=this.fonts[D].monoCase.node,I=this.fonts[D].monoCase.w,P.offsetWidth!==I?(B-=1,this.fonts[D].loaded=!0):(P=this.fonts[D].sansCase.node,I=this.fonts[D].sansCase.w,P.offsetWidth!==I&&(B-=1,this.fonts[D].loaded=!0)),this.fonts[D].loaded&&(this.fonts[D].sansCase.parent.parentNode.removeChild(this.fonts[D].sansCase.parent),this.fonts[D].monoCase.parent.parentNode.removeChild(this.fonts[D].monoCase.parent)));B!==0&&Date.now()-this.initTime<i?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function E(D,V){var P=document.body&&V?"svg":"canvas",I,B=getFontProperties(D);if(P==="svg"){var z=createNS("text");z.style.fontSize="100px",z.setAttribute("font-family",D.fFamily),z.setAttribute("font-style",B.style),z.setAttribute("font-weight",B.weight),z.textContent="1",D.fClass?(z.style.fontFamily="inherit",z.setAttribute("class",D.fClass)):z.style.fontFamily=D.fFamily,V.appendChild(z),I=z}else{var te=new OffscreenCanvas(500,500).getContext("2d");te.font=B.style+" "+B.weight+" 100px "+D.fFamily,I=te}function ne(Q){return P==="svg"?(I.textContent=Q,I.getComputedTextLength()):I.measureText(Q).width}return{measureText:ne}}function S(D,V){if(!D){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=D.list;return}if(!document.body){this.isLoaded=!0,D.list.forEach(function(Ae){Ae.helper=E(Ae),Ae.cache={}}),this.fonts=D.list;return}var P=D.list,I,B=P.length,z=B;for(I=0;I<B;I+=1){var te=!0,ne,Q;if(P[I].loaded=!1,P[I].monoCase=y(P[I].fFamily,"monospace"),P[I].sansCase=y(P[I].fFamily,"sans-serif"),!P[I].fPath)P[I].loaded=!0,z-=1;else if(P[I].fOrigin==="p"||P[I].origin===3){if(ne=document.querySelectorAll('style[f-forigin="p"][f-family="'+P[I].fFamily+'"], style[f-origin="3"][f-family="'+P[I].fFamily+'"]'),ne.length>0&&(te=!1),te){var ue=createTag("style");ue.setAttribute("f-forigin",P[I].fOrigin),ue.setAttribute("f-origin",P[I].origin),ue.setAttribute("f-family",P[I].fFamily),ue.type="text/css",ue.innerText="@font-face {font-family: "+P[I].fFamily+"; font-style: normal; src: url('"+P[I].fPath+"');}",V.appendChild(ue)}}else if(P[I].fOrigin==="g"||P[I].origin===1){for(ne=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Q=0;Q<ne.length;Q+=1)ne[Q].href.indexOf(P[I].fPath)!==-1&&(te=!1);if(te){var me=createTag("link");me.setAttribute("f-forigin",P[I].fOrigin),me.setAttribute("f-origin",P[I].origin),me.type="text/css",me.rel="stylesheet",me.href=P[I].fPath,document.body.appendChild(me)}}else if(P[I].fOrigin==="t"||P[I].origin===2){for(ne=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Q=0;Q<ne.length;Q+=1)P[I].fPath===ne[Q].src&&(te=!1);if(te){var be=createTag("link");be.setAttribute("f-forigin",P[I].fOrigin),be.setAttribute("f-origin",P[I].origin),be.setAttribute("rel","stylesheet"),be.setAttribute("href",P[I].fPath),V.appendChild(be)}}P[I].helper=E(P[I],V),P[I].cache={},this.fonts.push(P[I])}z===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function b(D){if(D){this.chars||(this.chars=[]);var V,P=D.length,I,B=this.chars.length,z;for(V=0;V<P;V+=1){for(I=0,z=!1;I<B;)this.chars[I].style===D[V].style&&this.chars[I].fFamily===D[V].fFamily&&this.chars[I].ch===D[V].ch&&(z=!0),I+=1;z||(this.chars.push(D[V]),B+=1)}}}function C(D,V,P){for(var I=0,B=this.chars.length;I<B;){if(this.chars[I].ch===D&&this.chars[I].style===V&&this.chars[I].fFamily===P)return this.chars[I];I+=1}return(typeof D=="string"&&D.charCodeAt(0)!==13||!D)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",D,V,P)),e}function T(D,V,P){var I=this.getFontByName(V),B=D;if(!I.cache[B]){var z=I.helper;if(D===" "){var te=z.measureText("|"+D+"|"),ne=z.measureText("||");I.cache[B]=(te-ne)/100}else I.cache[B]=z.measureText(D)/100}return I.cache[B]*P}function A(D){for(var V=0,P=this.fonts.length;V<P;){if(this.fonts[V].fName===D)return this.fonts[V];V+=1}return this.fonts[0]}function N(D){var V=0,P=D.charCodeAt(0);if(P>=55296&&P<=56319){var I=D.charCodeAt(1);I>=56320&&I<=57343&&(V=(P-55296)*1024+I-56320+65536)}return V}function L(D,V){var P=D.toString(16)+V.toString(16);return g.indexOf(P)!==-1}function k(D){return D===u}function j(D){return D===l}function F(D){var V=N(D);return V>=d&&V<=p}function U(D){return F(D.substr(0,2))&&F(D.substr(2,2))}function q(D){return t.indexOf(D)!==-1}function J(D,V){var P=N(D.substr(V,2));if(P!==n)return!1;var I=0;for(V+=2;I<5;){if(P=N(D.substr(V,2)),P<s||P>o)return!1;I+=1,V+=2}return N(D.substr(V,2))===r}function ee(){this.isLoaded=!0}var Y=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Y.isModifier=L,Y.isZeroWidthJoiner=k,Y.isFlagEmoji=U,Y.isRegionalCode=F,Y.isCombinedCharacter=q,Y.isRegionalFlag=J,Y.isVariationSelector=j,Y.BLACK_FLAG_CODE_POINT=n;var $={addChars:b,addFonts:S,getCharData:C,getFontByName:A,measureText:T,checkLoadedFonts:_,setIsLoaded:ee};return Y.prototype=$,Y}();function SlotManager(i){this.animationData=i}SlotManager.prototype.getProp=function(i){return this.animationData.slots&&this.animationData.slots[i.sid]?Object.assign(i,this.animationData.slots[i.sid].p):i};function slotFactory(i){return new SlotManager(i)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){this.renderableComponents.indexOf(e)===-1&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){this.renderableComponents.indexOf(e)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var i={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return i[e]||""}}();function SliderEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,0,0,t)}function AngleEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,0,0,t)}function ColorEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,1,0,t)}function PointEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,1,0,t)}function LayerIndexEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,0,0,t)}function MaskIndexEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,0,0,t)}function CheckboxEffect(i,e,t){this.p=PropertyFactory.getProp(e,i.v,0,0,t)}function NoValueEffect(){this.p={}}function EffectsManager(i,e){var t=i.ef||[];this.effectElements=[];var n,r=t.length,s;for(n=0;n<r;n+=1)s=new GroupEffect(t[n],e),this.effectElements.push(s)}function GroupEffect(i,e){this.init(i,e)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(i,e){this.data=i,this.effectElements=[],this.initDynamicPropertyContainer(e);var t,n=this.data.ef.length,r,s=this.data.ef;for(t=0;t<n;t+=1){switch(r=null,s[t].ty){case 0:r=new SliderEffect(s[t],e,this);break;case 1:r=new AngleEffect(s[t],e,this);break;case 2:r=new ColorEffect(s[t],e,this);break;case 3:r=new PointEffect(s[t],e,this);break;case 4:case 7:r=new CheckboxEffect(s[t],e,this);break;case 10:r=new LayerIndexEffect(s[t],e,this);break;case 11:r=new MaskIndexEffect(s[t],e,this);break;case 5:r=new EffectsManager(s[t],e);break;default:r=new NoValueEffect(s[t]);break}r&&this.effectElements.push(r)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if(this.data.masksProperties[e].mode!=="n"&&this.data.masksProperties[e].cl!==!1)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var t=e("layer"),n=e("effects"),r=e("shape"),s=e("text"),o=e("comp");this.layerInterface=t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var l=n.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(l),this.data.ty===0||this.data.xt?this.compInterface=o(this):this.data.ty===4?(this.layerInterface.shapeInterface=r(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=s(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm),t=this.baseElement||this.layerElement;t.style["mix-blend-mode"]=e},initBaseData:function(e,t,n){this.globalData=t,this.comp=n,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var n,r=this.dynamicProperties.length;for(n=0;n<r;n+=1)(t||this._isParent&&this.dynamicProperties[n].propType==="transform")&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&this.dynamicProperties.push(e)}};function FootageElement(i,e,t){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(i.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(i,e,t)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var i=getExpressionInterfaces();if(i){var e=i("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(i,e,t){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(i.refId),this.initBaseData(i,e,t),this._isPlaying=!1,this._canPlay=!1;var n=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(n),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,i.au&&i.au.lv?i.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(i){if(this.prepareRenderableFrame(i,!0),this.prepareProperties(i,!0),this.tm._placeholder)this._currentTime=i/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var t=this._volume*this._volumeMultiplier;this._previousVolume!==t&&(this._previousVolume=t,this.audio.volume(t))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(i){this.audio.rate(i)},AudioElement.prototype.volume=function(i){this._volumeMultiplier=i,this._previousVolume=i*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(i){var e,t=this.layers.length,n;for(this.completeLayers=!0,e=t-1;e>=0;e-=1)this.elements[e]||(n=this.layers[e],n.ip-n.st<=i-this.layers[e].st&&n.op-n.st>i-this.layers[e].st&&this.buildItem(e)),this.completeLayers=this.elements[e]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(i){switch(i.ty){case 2:return this.createImage(i);case 0:return this.createComp(i);case 1:return this.createSolid(i);case 3:return this.createNull(i);case 4:return this.createShape(i);case 5:return this.createText(i);case 6:return this.createAudio(i);case 13:return this.createCamera(i);case 15:return this.createFootage(i);default:return this.createNull(i)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(i){return new AudioElement(i,this.globalData,this)},BaseRenderer.prototype.createFootage=function(i){return new FootageElement(i,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var i,e=this.layers.length;for(i=0;i<e;i+=1)this.buildItem(i);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(i){this.completeLayers=!1;var e,t=i.length,n,r=this.layers.length;for(e=0;e<t;e+=1)for(n=0;n<r;){if(this.layers[n].id===i[e].id){this.layers[n]=i[e];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(i){this.globalData.projectInterface=i},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(i,e,t){for(var n=this.elements,r=this.layers,s=0,o=r.length;s<o;)r[s].ind==e&&(!n[s]||n[s]===!0?(this.buildItem(s),this.addPendingElement(i)):(t.push(n[s]),n[s].setAsParent(),r[s].parent!==void 0?this.buildElementParenting(i,r[s].parent,t):i.setHierarchy(t))),s+=1},BaseRenderer.prototype.addPendingElement=function(i){this.pendingElements.push(i)},BaseRenderer.prototype.searchExtraCompositions=function(i){var e,t=i.length;for(e=0;e<t;e+=1)if(i[e].xt){var n=this.createComp(i[e]);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},BaseRenderer.prototype.getElementById=function(i){var e,t=this.elements.length;for(e=0;e<t;e+=1)if(this.elements[e].data.ind===i)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(i){var e=i.shift(),t;if(typeof e=="number")t=this.elements[e];else{var n,r=this.elements.length;for(n=0;n<r;n+=1)if(this.elements[n].data.nm===e){t=this.elements[n];break}}return i.length===0?t:t.getElementByPath(i)},BaseRenderer.prototype.setupGlobalData=function(i,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(i),this.globalData.fontManager.addChars(i.chars),this.globalData.fontManager.addFonts(i.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=i.fr,this.globalData.nm=i.nm,this.globalData.compSize={w:i.w,h:i.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,n=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<r;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),n=0;n<r;n+=1)t.multiply(this.hierarchy[n].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<t;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var n=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(n),e=1;e<t;e+=1){var r=this.localTransforms[e].matrix;n.multiply(r)}n.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var s=this.finalTransform.localOpacity;for(e=0;e<t;e+=1)s*=this.localTransforms[e].opacity*.01;this.finalTransform.localOpacity=s}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var t=0,n=e.length;for(t=0;t<n;t+=1)this.localTransforms.push(e[t])}}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var n=!0,r=this.comp;n;)r.finalTransform?(r.data.hasMask&&t.splice(0,0,r.finalTransform),r=r.comp):n=!1;var s,o=t.length,l;for(s=0;s<o;s+=1)l=t[s].mat.applyToPointArray(0,0,0),e=[e[0]-l[0],e[1]-l[1],0];return e},mHelper:new Matrix};function MaskElement(i,e,t){this.data=i,this.element=e,this.globalData=t,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var n=this.globalData.defs,r,s=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(s),this.solidPath="";var o,l=this.masksProperties,u=0,d=[],p,g,m=createElementID(),y,_,E,S,b="clipPath",C="clip-path";for(r=0;r<s;r+=1)if((l[r].mode!=="a"&&l[r].mode!=="n"||l[r].inv||l[r].o.k!==100||l[r].o.x)&&(b="mask",C="mask"),(l[r].mode==="s"||l[r].mode==="i")&&u===0?(y=createNS("rect"),y.setAttribute("fill","#ffffff"),y.setAttribute("width",this.element.comp.data.w||0),y.setAttribute("height",this.element.comp.data.h||0),d.push(y)):y=null,o=createNS("path"),l[r].mode==="n")this.viewData[r]={op:PropertyFactory.getProp(this.element,l[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[r],3),elem:o,lastPath:""},n.appendChild(o);else{u+=1,o.setAttribute("fill",l[r].mode==="s"?"#000000":"#ffffff"),o.setAttribute("clip-rule","nonzero");var T;if(l[r].x.k!==0?(b="mask",C="mask",S=PropertyFactory.getProp(this.element,l[r].x,0,null,this.element),T=createElementID(),_=createNS("filter"),_.setAttribute("id",T),E=createNS("feMorphology"),E.setAttribute("operator","erode"),E.setAttribute("in","SourceGraphic"),E.setAttribute("radius","0"),_.appendChild(E),n.appendChild(_),o.setAttribute("stroke",l[r].mode==="s"?"#000000":"#ffffff")):(E=null,S=null),this.storedData[r]={elem:o,x:S,expan:E,lastPath:"",lastOperator:"",filterId:T,lastRadius:0},l[r].mode==="i"){g=d.length;var A=createNS("g");for(p=0;p<g;p+=1)A.appendChild(d[p]);var N=createNS("mask");N.setAttribute("mask-type","alpha"),N.setAttribute("id",m+"_"+u),N.appendChild(o),n.appendChild(N),A.setAttribute("mask","url("+getLocationHref()+"#"+m+"_"+u+")"),d.length=0,d.push(A)}else d.push(o);l[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:o,lastPath:"",op:PropertyFactory.getProp(this.element,l[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[r],3),invRect:y},this.viewData[r].prop.k||this.drawPath(l[r],this.viewData[r].prop.v,this.viewData[r])}for(this.maskElement=createNS(b),s=d.length,r=0;r<s;r+=1)this.maskElement.appendChild(d[r]);u>0&&(this.maskElement.setAttribute("id",m),this.element.maskedElement.setAttribute(C,"url("+getLocationHref()+"#"+m+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(i){return this.viewData[i].prop},MaskElement.prototype.renderFrame=function(i){var e=this.element.finalTransform.mat,t,n=this.masksProperties.length;for(t=0;t<n;t+=1)if((this.viewData[t].prop._mdf||i)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||i)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),this.masksProperties[t].mode!=="n"&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||i)&&this.viewData[t].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||i))){var r=this.storedData[t].expan;this.storedData[t].x.v<0?(this.storedData[t].lastOperator!=="erode"&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[t].filterId+")")),r.setAttribute("radius",-this.storedData[t].x.v)):(this.storedData[t].lastOperator!=="dilate"&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",this.storedData[t].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var i="M0,0 ";return i+=" h"+this.globalData.compSize.w,i+=" v"+this.globalData.compSize.h,i+=" h-"+this.globalData.compSize.w,i+=" v-"+this.globalData.compSize.h+" ",i},MaskElement.prototype.drawPath=function(i,e,t){var n=" M"+e.v[0][0]+","+e.v[0][1],r,s;for(s=e._length,r=1;r<s;r+=1)n+=" C"+e.o[r-1][0]+","+e.o[r-1][1]+" "+e.i[r][0]+","+e.i[r][1]+" "+e.v[r][0]+","+e.v[r][1];if(e.c&&s>1&&(n+=" C"+e.o[r-1][0]+","+e.o[r-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),t.lastPath!==n){var o="";t.elem&&(e.c&&(o=i.inv?this.solidPath+n:n),t.elem.setAttribute("d",o)),t.lastPath=n}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var i={};i.createFilter=e,i.createAlphaToLuminanceFilter=t;function e(n,r){var s=createNS("filter");return s.setAttribute("id",n),r!==!0&&(s.setAttribute("filterUnits","objectBoundingBox"),s.setAttribute("x","0%"),s.setAttribute("y","0%"),s.setAttribute("width","100%"),s.setAttribute("height","100%")),s}function t(){var n=createNS("feColorMatrix");return n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),n}return i}(),featureSupport=function(){var i={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(i.maskType=!1),/firefox/i.test(navigator.userAgent)&&(i.svgLumaHidden=!1),i}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(i){var e,t="SourceGraphic",n=i.data.ef?i.data.ef.length:0,r=createElementID(),s=filtersFactory.createFilter(r,!0),o=0;this.filters=[];var l;for(e=0;e<n;e+=1){l=null;var u=i.data.ef[e].ty;if(registeredEffects$1[u]){var d=registeredEffects$1[u].effect;l=new d(s,i.effectsManager.effectElements[e],i,idPrefix+o,t),t=idPrefix+o,registeredEffects$1[u].countsAsEffect&&(o+=1)}l&&this.filters.push(l)}o&&(i.globalData.defs.appendChild(s),i.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+r+")")),this.filters.length&&i.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(i){var e,t=this.filters.length;for(e=0;e<t;e+=1)this.filters[e].renderFrame(i)},SVGEffects.prototype.getEffects=function(i){var e,t=this.filters.length,n=[];for(e=0;e<t;e+=1)this.filters[e].type===i&&n.push(this.filters[e]);return n};function registerEffect$1(i,e,t){registeredEffects$1[i]={effect:e,countsAsEffect:t}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var t=createNS("g");t.setAttribute("id",this.layerId),t.appendChild(this.layerElement),e=t,this.globalData.defs.appendChild(t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var n=createNS("clipPath"),r=createNS("path");r.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var s=createElementID();if(n.setAttribute("id",s),n.appendChild(r),this.globalData.defs.appendChild(n),this.checkMasks()){var o=createNS("g");o.setAttribute("clip-path","url("+getLocationHref()+"#"+s+")"),o.appendChild(this.layerElement),this.transformedElement=o,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+s+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var t=this.layerId+"_"+e,n,r,s,o;if(e===1||e===3){var l=createNS("mask");l.setAttribute("id",t),l.setAttribute("mask-type",e===3?"luminance":"alpha"),s=createNS("use"),s.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),l.appendChild(s),this.globalData.defs.appendChild(l),!featureSupport.maskType&&e===1&&(l.setAttribute("mask-type","luminance"),n=createElementID(),r=filtersFactory.createFilter(n),this.globalData.defs.appendChild(r),r.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),o.appendChild(s),l.appendChild(o),o.setAttribute("filter","url("+getLocationHref()+"#"+n+")"))}else if(e===2){var u=createNS("mask");u.setAttribute("id",t),u.setAttribute("mask-type","alpha");var d=createNS("g");u.appendChild(d),n=createElementID(),r=filtersFactory.createFilter(n);var p=createNS("feComponentTransfer");p.setAttribute("in","SourceGraphic"),r.appendChild(p);var g=createNS("feFuncA");g.setAttribute("type","table"),g.setAttribute("tableValues","1.0 0.0"),p.appendChild(g),this.globalData.defs.appendChild(r);var m=createNS("rect");m.setAttribute("width",this.comp.data.w),m.setAttribute("height",this.comp.data.h),m.setAttribute("x","0"),m.setAttribute("y","0"),m.setAttribute("fill","#ffffff"),m.setAttribute("opacity","0"),d.setAttribute("filter","url("+getLocationHref()+"#"+n+")"),d.appendChild(m),s=createNS("use"),s.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),d.appendChild(s),featureSupport.maskType||(u.setAttribute("mask-type","luminance"),r.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),d.appendChild(m),o.appendChild(this.layerElement),d.appendChild(o)),this.globalData.defs.appendChild(u)}this.matteMasks[e]=t}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var i={initElement:function(t,n,r){this.initFrame(),this.initBaseData(t,n,r),this.initTransform(t,n,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var t=this.baseElement||this.layerElement;t.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var t=this.baseElement||this.layerElement;t.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(i)],RenderableDOMElement)})();function IImageElement(i,e,t){this.assetData=e.getAssetData(i.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(i,e,t),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var i=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(i,e){this.elem=i,this.pos=e}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(e){var t,n=this.shapeModifiers.length;for(t=0;t<n;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=0,n=this.shapeModifiers.length;t<n;)if(this.shapeModifiers[t].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();t=this.shapeModifiers.length;var n;for(e=t-1;e>=0&&(n=this.shapeModifiers[e].processShapes(this._isFirstFrame),!n);e-=1);}},searchProcessedElement:function(e){for(var t=this.processedElements,n=0,r=t.length;n<r;){if(t[n].elem===e)return t[n].pos;n+=1}return 0},addProcessedElement:function(e,t){for(var n=this.processedElements,r=n.length;r;)if(r-=1,n[r].elem===e){n[r].pos=t;return}n.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(i,e,t){this.caches=[],this.styles=[],this.transformers=i,this.lStr="",this.sh=t,this.lvl=e,this._isAnimated=!!t.k;for(var n=0,r=i.length;n<r;){if(i[n].mProps.dynamicProperties.length){this._isAnimated=!0;break}n+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(i,e){this.data=i,this.type=i.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=i.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(i,e,t,n){this.elem=i,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=t,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(n);var r,s=e.length||0,o;for(r=0;r<s;r+=1)o=PropertyFactory.getProp(i,e[r].v,0,0,this),this.k=o.k||this.k,this.dataProps[r]={n:e[r].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(i){if(!(this.elem.globalData.frameId===this.frameId&&!i)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||i,this._mdf)){var e=0,t=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),e=0;e<t;e+=1)this.dataProps[e].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(i,e,t){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(i,e.o,0,.01,this),this.w=PropertyFactory.getProp(i,e.w,0,null,this),this.d=new DashProperty(i,e.d||{},"svg",this),this.c=PropertyFactory.getProp(i,e.c,1,255,this),this.style=t,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(i,e,t){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(i,e.o,0,.01,this),this.c=PropertyFactory.getProp(i,e.c,1,255,this),this.style=t}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(i,e,t){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.style=t}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(i,e,t){this.data=e,this.c=createTypedArray("uint8c",e.p*4);var n=e.k.k[0].s?e.k.k[0].s.length-e.p*4:e.k.k.length-e.p*4;this.o=createTypedArray("float32",n),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=n,this.initDynamicPropertyContainer(t),this.prop=PropertyFactory.getProp(i,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(i,e){for(var t=0,n=this.o.length/2,r;t<n;){if(r=Math.abs(i[t*4]-i[e*4+t*2]),r>.01)return!1;t+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var i=0,e=this.data.k.k.length;i<e;){if(!this.comparePoints(this.data.k.k[i].s,this.data.p))return!1;i+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(i){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||i){var e,t=this.data.p*4,n,r;for(e=0;e<t;e+=1)n=e%4===0?100:255,r=Math.round(this.prop.v[e]*n),this.c[e]!==r&&(this.c[e]=r,this._cmdf=!i);if(this.o.length)for(t=this.prop.v.length,e=this.data.p*4;e<t;e+=1)n=e%2===0?100:1,r=e%2===0?Math.round(this.prop.v[e]*100):this.prop.v[e],this.o[e-this.data.p*4]!==r&&(this.o[e-this.data.p*4]=r,this._omdf=!i);this._mdf=!i}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(i,e,t){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.initGradientData(i,e,t)}SVGGradientFillStyleData.prototype.initGradientData=function(i,e,t){this.o=PropertyFactory.getProp(i,e.o,0,.01,this),this.s=PropertyFactory.getProp(i,e.s,1,null,this),this.e=PropertyFactory.getProp(i,e.e,1,null,this),this.h=PropertyFactory.getProp(i,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(i,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(i,e.g,this),this.style=t,this.stops=[],this.setGradientData(t.pElem,e),this.setGradientOpacity(e,t),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(i,e){var t=createElementID(),n=createNS(e.t===1?"linearGradient":"radialGradient");n.setAttribute("id",t),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var r=[],s,o,l;for(l=e.g.p*4,o=0;o<l;o+=4)s=createNS("stop"),n.appendChild(s),r.push(s);i.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+t+")"),this.gf=n,this.cst=r},SVGGradientFillStyleData.prototype.setGradientOpacity=function(i,e){if(this.g._hasOpacity&&!this.g._collapsable){var t,n,r,s=createNS("mask"),o=createNS("path");s.appendChild(o);var l=createElementID(),u=createElementID();s.setAttribute("id",u);var d=createNS(i.t===1?"linearGradient":"radialGradient");d.setAttribute("id",l),d.setAttribute("spreadMethod","pad"),d.setAttribute("gradientUnits","userSpaceOnUse"),r=i.g.k.k[0].s?i.g.k.k[0].s.length:i.g.k.k.length;var p=this.stops;for(n=i.g.p*4;n<r;n+=2)t=createNS("stop"),t.setAttribute("stop-color","rgb(255,255,255)"),d.appendChild(t),p.push(t);o.setAttribute(i.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+l+")"),i.ty==="gs"&&(o.setAttribute("stroke-linecap",lineCapEnum[i.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[i.lj||2]),i.lj===1&&o.setAttribute("stroke-miterlimit",i.ml)),this.of=d,this.ms=s,this.ost=p,this.maskId=u,e.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(i,e,t){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(i,e.w,0,null,this),this.d=new DashProperty(i,e.d||{},"svg",this),this.initGradientData(i,e,t),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(i,e,t){this.transform={mProps:i,op:e,container:t},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(e,t,n,r){if(t===0)return"";var s=e.o,o=e.i,l=e.v,u,d=" M"+r.applyToPointStringified(l[0][0],l[0][1]);for(u=1;u<t;u+=1)d+=" C"+r.applyToPointStringified(s[u-1][0],s[u-1][1])+" "+r.applyToPointStringified(o[u][0],o[u][1])+" "+r.applyToPointStringified(l[u][0],l[u][1]);return n&&t&&(d+=" C"+r.applyToPointStringified(s[u-1][0],s[u-1][1])+" "+r.applyToPointStringified(o[0][0],o[0][1])+" "+r.applyToPointStringified(l[0][0],l[0][1]),d+="z"),d},SVGElementsRenderer=function(){var i=new Matrix,e=new Matrix,t={createRenderFunction:n};function n(g){switch(g.ty){case"fl":return l;case"gf":return d;case"gs":return u;case"st":return p;case"sh":case"el":case"rc":case"sr":return o;case"tr":return r;case"no":return s;default:return null}}function r(g,m,y){(y||m.transform.op._mdf)&&m.transform.container.setAttribute("opacity",m.transform.op.v),(y||m.transform.mProps._mdf)&&m.transform.container.setAttribute("transform",m.transform.mProps.v.to2dCSS())}function s(){}function o(g,m,y){var _,E,S,b,C,T,A=m.styles.length,N=m.lvl,L,k,j,F;for(T=0;T<A;T+=1){if(b=m.sh._mdf||y,m.styles[T].lvl<N){for(k=e.reset(),j=N-m.styles[T].lvl,F=m.transformers.length-1;!b&&j>0;)b=m.transformers[F].mProps._mdf||b,j-=1,F-=1;if(b)for(j=N-m.styles[T].lvl,F=m.transformers.length-1;j>0;)k.multiply(m.transformers[F].mProps.v),j-=1,F-=1}else k=i;if(L=m.sh.paths,E=L._length,b){for(S="",_=0;_<E;_+=1)C=L.shapes[_],C&&C._length&&(S+=buildShapeString(C,C._length,C.c,k));m.caches[T]=S}else S=m.caches[T];m.styles[T].d+=g.hd===!0?"":S,m.styles[T]._mdf=b||m.styles[T]._mdf}}function l(g,m,y){var _=m.style;(m.c._mdf||y)&&_.pElem.setAttribute("fill","rgb("+bmFloor(m.c.v[0])+","+bmFloor(m.c.v[1])+","+bmFloor(m.c.v[2])+")"),(m.o._mdf||y)&&_.pElem.setAttribute("fill-opacity",m.o.v)}function u(g,m,y){d(g,m,y),p(g,m,y)}function d(g,m,y){var _=m.gf,E=m.g._hasOpacity,S=m.s.v,b=m.e.v;if(m.o._mdf||y){var C=g.ty==="gf"?"fill-opacity":"stroke-opacity";m.style.pElem.setAttribute(C,m.o.v)}if(m.s._mdf||y){var T=g.t===1?"x1":"cx",A=T==="x1"?"y1":"cy";_.setAttribute(T,S[0]),_.setAttribute(A,S[1]),E&&!m.g._collapsable&&(m.of.setAttribute(T,S[0]),m.of.setAttribute(A,S[1]))}var N,L,k,j;if(m.g._cmdf||y){N=m.cst;var F=m.g.c;for(k=N.length,L=0;L<k;L+=1)j=N[L],j.setAttribute("offset",F[L*4]+"%"),j.setAttribute("stop-color","rgb("+F[L*4+1]+","+F[L*4+2]+","+F[L*4+3]+")")}if(E&&(m.g._omdf||y)){var U=m.g.o;for(m.g._collapsable?N=m.cst:N=m.ost,k=N.length,L=0;L<k;L+=1)j=N[L],m.g._collapsable||j.setAttribute("offset",U[L*2]+"%"),j.setAttribute("stop-opacity",U[L*2+1])}if(g.t===1)(m.e._mdf||y)&&(_.setAttribute("x2",b[0]),_.setAttribute("y2",b[1]),E&&!m.g._collapsable&&(m.of.setAttribute("x2",b[0]),m.of.setAttribute("y2",b[1])));else{var q;if((m.s._mdf||m.e._mdf||y)&&(q=Math.sqrt(Math.pow(S[0]-b[0],2)+Math.pow(S[1]-b[1],2)),_.setAttribute("r",q),E&&!m.g._collapsable&&m.of.setAttribute("r",q)),m.e._mdf||m.h._mdf||m.a._mdf||y){q||(q=Math.sqrt(Math.pow(S[0]-b[0],2)+Math.pow(S[1]-b[1],2)));var J=Math.atan2(b[1]-S[1],b[0]-S[0]),ee=m.h.v;ee>=1?ee=.99:ee<=-1&&(ee=-.99);var Y=q*ee,$=Math.cos(J+m.a.v)*Y+S[0],D=Math.sin(J+m.a.v)*Y+S[1];_.setAttribute("fx",$),_.setAttribute("fy",D),E&&!m.g._collapsable&&(m.of.setAttribute("fx",$),m.of.setAttribute("fy",D))}}}function p(g,m,y){var _=m.style,E=m.d;E&&(E._mdf||y)&&E.dashStr&&(_.pElem.setAttribute("stroke-dasharray",E.dashStr),_.pElem.setAttribute("stroke-dashoffset",E.dashoffset[0])),m.c&&(m.c._mdf||y)&&_.pElem.setAttribute("stroke","rgb("+bmFloor(m.c.v[0])+","+bmFloor(m.c.v[1])+","+bmFloor(m.c.v[2])+")"),(m.o._mdf||y)&&_.pElem.setAttribute("stroke-opacity",m.o.v),(m.w._mdf||y)&&(_.pElem.setAttribute("stroke-width",m.w.v),_.msElem&&_.msElem.setAttribute("stroke-width",m.w.v))}return t}();function SVGShapeElement(i,e,t){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(i,e,t),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var i,e=this.shapes.length,t,n,r=this.stylesList.length,s,o=[],l=!1;for(n=0;n<r;n+=1){for(s=this.stylesList[n],l=!1,o.length=0,i=0;i<e;i+=1)t=this.shapes[i],t.styles.indexOf(s)!==-1&&(o.push(t),l=t._isAnimated||l);o.length>1&&l&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(i){var e,t=i.length;for(e=0;e<t;e+=1)i[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(i,e){var t,n=new SVGStyleData(i,e),r=n.pElem;if(i.ty==="st")t=new SVGStrokeStyleData(this,i,n);else if(i.ty==="fl")t=new SVGFillStyleData(this,i,n);else if(i.ty==="gf"||i.ty==="gs"){var s=i.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;t=new s(this,i,n),this.globalData.defs.appendChild(t.gf),t.maskId&&(this.globalData.defs.appendChild(t.ms),this.globalData.defs.appendChild(t.of),r.setAttribute("mask","url("+getLocationHref()+"#"+t.maskId+")"))}else i.ty==="no"&&(t=new SVGNoStyleData(this,i,n));return(i.ty==="st"||i.ty==="gs")&&(r.setAttribute("stroke-linecap",lineCapEnum[i.lc||2]),r.setAttribute("stroke-linejoin",lineJoinEnum[i.lj||2]),r.setAttribute("fill-opacity","0"),i.lj===1&&r.setAttribute("stroke-miterlimit",i.ml)),i.r===2&&r.setAttribute("fill-rule","evenodd"),i.ln&&r.setAttribute("id",i.ln),i.cl&&r.setAttribute("class",i.cl),i.bm&&(r.style["mix-blend-mode"]=getBlendMode(i.bm)),this.stylesList.push(n),this.addToAnimatedContents(i,t),t},SVGShapeElement.prototype.createGroupElement=function(i){var e=new ShapeGroupData;return i.ln&&e.gr.setAttribute("id",i.ln),i.cl&&e.gr.setAttribute("class",i.cl),i.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(i.bm)),e},SVGShapeElement.prototype.createTransformElement=function(i,e){var t=TransformPropertyFactory.getTransformProperty(this,i,this),n=new SVGTransformData(t,t.o,e);return this.addToAnimatedContents(i,n),n},SVGShapeElement.prototype.createShapeElement=function(i,e,t){var n=4;i.ty==="rc"?n=5:i.ty==="el"?n=6:i.ty==="sr"&&(n=7);var r=ShapePropertyFactory.getShapeProp(this,i,n,this),s=new SVGShapeData(e,t,r);return this.shapes.push(s),this.addShapeToModifiers(s),this.addToAnimatedContents(i,s),s},SVGShapeElement.prototype.addToAnimatedContents=function(i,e){for(var t=0,n=this.animatedContents.length;t<n;){if(this.animatedContents[t].element===e)return;t+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(i),element:e,data:i})},SVGShapeElement.prototype.setElementStyles=function(i){var e=i.styles,t,n=this.stylesList.length;for(t=0;t<n;t+=1)this.stylesList[t].closed||e.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var i,e=this.itemsData.length;for(i=0;i<e;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,i=0;i<e;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(i,e,t,n,r,s,o){var l=[].concat(s),u,d=i.length-1,p,g,m=[],y=[],_,E,S;for(u=d;u>=0;u-=1){if(S=this.searchProcessedElement(i[u]),S?e[u]=t[S-1]:i[u]._render=o,i[u].ty==="fl"||i[u].ty==="st"||i[u].ty==="gf"||i[u].ty==="gs"||i[u].ty==="no")S?e[u].style.closed=!1:e[u]=this.createStyleElement(i[u],r),i[u]._render&&e[u].style.pElem.parentNode!==n&&n.appendChild(e[u].style.pElem),m.push(e[u].style);else if(i[u].ty==="gr"){if(!S)e[u]=this.createGroupElement(i[u]);else for(g=e[u].it.length,p=0;p<g;p+=1)e[u].prevViewData[p]=e[u].it[p];this.searchShapes(i[u].it,e[u].it,e[u].prevViewData,e[u].gr,r+1,l,o),i[u]._render&&e[u].gr.parentNode!==n&&n.appendChild(e[u].gr)}else i[u].ty==="tr"?(S||(e[u]=this.createTransformElement(i[u],n)),_=e[u].transform,l.push(_)):i[u].ty==="sh"||i[u].ty==="rc"||i[u].ty==="el"||i[u].ty==="sr"?(S||(e[u]=this.createShapeElement(i[u],l,r)),this.setElementStyles(e[u])):i[u].ty==="tm"||i[u].ty==="rd"||i[u].ty==="ms"||i[u].ty==="pb"||i[u].ty==="zz"||i[u].ty==="op"?(S?(E=e[u],E.closed=!1):(E=ShapeModifiers.getModifier(i[u].ty),E.init(this,i[u]),e[u]=E,this.shapeModifiers.push(E)),y.push(E)):i[u].ty==="rp"&&(S?(E=e[u],E.closed=!0):(E=ShapeModifiers.getModifier(i[u].ty),e[u]=E,E.init(this,i,u,e),this.shapeModifiers.push(E),o=!1),y.push(E));this.addProcessedElement(i[u],u+1)}for(d=m.length,u=0;u<d;u+=1)m[u].closed=!0;for(d=y.length,u=0;u<d;u+=1)y[u].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var i,e=this.stylesList.length;for(i=0;i<e;i+=1)this.stylesList[i].reset();for(this.renderShape(),i=0;i<e;i+=1)(this.stylesList[i]._mdf||this._isFirstFrame)&&(this.stylesList[i].msElem&&(this.stylesList[i].msElem.setAttribute("d",this.stylesList[i].d),this.stylesList[i].d="M0 0"+this.stylesList[i].d),this.stylesList[i].pElem.setAttribute("d",this.stylesList[i].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var i,e=this.animatedContents.length,t;for(i=0;i<e;i+=1)t=this.animatedContents[i],(this._isFirstFrame||t.element._isAnimated)&&t.data!==!0&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(i,e,t,n,r,s){this.o=i,this.sw=e,this.sc=t,this.fc=n,this.m=r,this.p=s,this._mdf={o:!0,sw:!!e,sc:!!t,fc:!!n,m:!0,p:!0}}LetterProps.prototype.update=function(i,e,t,n,r,s){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==i&&(this.o=i,this._mdf.o=!0,o=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,o=!0),this.sc!==t&&(this.sc=t,this._mdf.sc=!0,o=!0),this.fc!==n&&(this.fc=n,this._mdf.fc=!0,o=!0),this.m!==r&&(this.m=r,this._mdf.m=!0,o=!0),s.length&&(this.p[0]!==s[0]||this.p[1]!==s[1]||this.p[4]!==s[4]||this.p[5]!==s[5]||this.p[12]!==s[12]||this.p[13]!==s[13])&&(this.p=s,this._mdf.p=!0,o=!0),o};function TextProperty(i,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=i.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=i,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(i,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t]);return i},TextProperty.prototype.setCurrentData=function(i){i.__complete||this.completeTextData(i),this.currentData=i,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(i){this.effectsSequence.push(i),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(i){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!i)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,t=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var n,r=this.effectsSequence.length,s=i||this.data.d.k[this.keysIndex].s;for(n=0;n<r;n+=1)t!==this.keysIndex?s=this.effectsSequence[n](s,s.t):s=this.effectsSequence[n](this.currentData,s.t);e!==s&&this.setCurrentData(s),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var i=this.data.d.k,e=this.elem.comp.renderedFrame,t=0,n=i.length;t<=n-1&&!(t===n-1||i[t+1].t>e);)t+=1;return this.keysIndex!==t&&(this.keysIndex=t),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(i){for(var e=[],t=0,n=i.length,r,s,o=!1,l=!1,u="";t<n;)o=l,l=!1,r=i.charCodeAt(t),u=i.charAt(t),FontManager.isCombinedCharacter(r)?o=!0:r>=55296&&r<=56319?FontManager.isRegionalFlag(i,t)?u=i.substr(t,14):(s=i.charCodeAt(t+1),s>=56320&&s<=57343&&(FontManager.isModifier(r,s)?(u=i.substr(t,2),o=!0):FontManager.isFlagEmoji(i.substr(t,4))?u=i.substr(t,4):u=i.substr(t,2))):r>56319?(s=i.charCodeAt(t+1),FontManager.isVariationSelector(r)&&(o=!0)):FontManager.isZeroWidthJoiner(r)&&(o=!0,l=!0),o?(e[e.length-1]+=u,o=!1):e.push(u),t+=u.length;return e},TextProperty.prototype.completeTextData=function(i){i.__complete=!0;var e=this.elem.globalData.fontManager,t=this.data,n=[],r,s,o,l=0,u,d=t.m.g,p=0,g=0,m=0,y=[],_=0,E=0,S,b,C=e.getFontByName(i.f),T,A=0,N=getFontProperties(C);i.fWeight=N.weight,i.fStyle=N.style,i.finalSize=i.s,i.finalText=this.buildFinalText(i.t),s=i.finalText.length,i.finalLineHeight=i.lh;var L=i.tr/1e3*i.finalSize,k;if(i.sz)for(var j=!0,F=i.sz[0],U=i.sz[1],q,J;j;){J=this.buildFinalText(i.t),q=0,_=0,s=J.length,L=i.tr/1e3*i.finalSize;var ee=-1;for(r=0;r<s;r+=1)k=J[r].charCodeAt(0),o=!1,J[r]===" "?ee=r:(k===13||k===3)&&(_=0,o=!0,q+=i.finalLineHeight||i.finalSize*1.2),e.chars?(T=e.getCharData(J[r],C.fStyle,C.fFamily),A=o?0:T.w*i.finalSize/100):A=e.measureText(J[r],i.f,i.finalSize),_+A>F&&J[r]!==" "?(ee===-1?s+=1:r=ee,q+=i.finalLineHeight||i.finalSize*1.2,J.splice(r,ee===r?1:0,"\r"),ee=-1,_=0):(_+=A,_+=L);q+=C.ascent*i.finalSize/100,this.canResize&&i.finalSize>this.minimumFontSize&&U<q?(i.finalSize-=1,i.finalLineHeight=i.finalSize*i.lh/i.s):(i.finalText=J,s=i.finalText.length,j=!1)}_=-L,A=0;var Y=0,$;for(r=0;r<s;r+=1)if(o=!1,$=i.finalText[r],k=$.charCodeAt(0),k===13||k===3?(Y=0,y.push(_),E=_>E?_:E,_=-2*L,u="",o=!0,m+=1):u=$,e.chars?(T=e.getCharData($,C.fStyle,e.getFontByName(i.f).fFamily),A=o?0:T.w*i.finalSize/100):A=e.measureText(u,i.f,i.finalSize),$===" "?Y+=A+L:(_+=A+L+Y,Y=0),n.push({l:A,an:A,add:p,n:o,anIndexes:[],val:u,line:m,animatorJustifyOffset:0}),d==2){if(p+=A,u===""||u===" "||r===s-1){for((u===""||u===" ")&&(p-=A);g<=r;)n[g].an=p,n[g].ind=l,n[g].extra=A,g+=1;l+=1,p=0}}else if(d==3){if(p+=A,u===""||r===s-1){for(u===""&&(p-=A);g<=r;)n[g].an=p,n[g].ind=l,n[g].extra=A,g+=1;p=0,l+=1}}else n[l].ind=l,n[l].extra=0,l+=1;if(i.l=n,E=_>E?_:E,y.push(_),i.sz)i.boxWidth=i.sz[0],i.justifyOffset=0;else switch(i.boxWidth=E,i.j){case 1:i.justifyOffset=-i.boxWidth;break;case 2:i.justifyOffset=-i.boxWidth/2;break;default:i.justifyOffset=0}i.lineWidths=y;var D=t.a,V,P;b=D.length;var I,B,z=[];for(S=0;S<b;S+=1){for(V=D[S],V.a.sc&&(i.strokeColorAnim=!0),V.a.sw&&(i.strokeWidthAnim=!0),(V.a.fc||V.a.fh||V.a.fs||V.a.fb)&&(i.fillColorAnim=!0),B=0,I=V.s.b,r=0;r<s;r+=1)P=n[r],P.anIndexes[S]=B,(I==1&&P.val!==""||I==2&&P.val!==""&&P.val!==" "||I==3&&(P.n||P.val==" "||r==s-1)||I==4&&(P.n||r==s-1))&&(V.s.rn===1&&z.push(B),B+=1);t.a[S].s.totalChars=B;var te=-1,ne;if(V.s.rn===1)for(r=0;r<s;r+=1)P=n[r],te!=P.anIndexes[S]&&(te=P.anIndexes[S],ne=z.splice(Math.floor(Math.random()*z.length),1)[0]),P.anIndexes[S]=ne}i.yOffset=i.finalLineHeight||i.finalSize*1.2,i.ls=i.ls||0,i.ascent=C.ascent*i.finalSize/100},TextProperty.prototype.updateDocumentData=function(i,e){e=e===void 0?this.keysIndex:e;var t=this.copyData({},this.data.d.k[e].s);t=this.copyData(t,i),this.data.d.k[e].s=t,this.recalculate(e),this.setCurrentData(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(i){var e=this.data.d.k[i].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(i){this.canResize=i,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(i){this.minimumFontSize=Math.floor(i)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var i=Math.max,e=Math.min,t=Math.floor;function n(s,o){this._currentTextLength=-1,this.k=!1,this.data=o,this.elem=s,this.comp=s.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(s),this.s=PropertyFactory.getProp(s,o.s||{k:0},0,0,this),"e"in o?this.e=PropertyFactory.getProp(s,o.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(s,o.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(s,o.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(s,o.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(s,o.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(s,o.a,0,.01,this),this.dynamicProperties.length||this.getValue()}n.prototype={getMult:function(o){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var l=0,u=0,d=1,p=1;this.ne.v>0?l=this.ne.v/100:u=-this.ne.v/100,this.xe.v>0?d=1-this.xe.v/100:p=1+this.xe.v/100;var g=BezierFactory.getBezierEasing(l,u,d,p).get,m=0,y=this.finalS,_=this.finalE,E=this.data.sh;if(E===2)_===y?m=o>=_?1:0:m=i(0,e(.5/(_-y)+(o-y)/(_-y),1)),m=g(m);else if(E===3)_===y?m=o>=_?0:1:m=1-i(0,e(.5/(_-y)+(o-y)/(_-y),1)),m=g(m);else if(E===4)_===y?m=0:(m=i(0,e(.5/(_-y)+(o-y)/(_-y),1)),m<.5?m*=2:m=1-2*(m-.5)),m=g(m);else if(E===5){if(_===y)m=0;else{var S=_-y;o=e(i(0,o+.5-y),_-y);var b=-S/2+o,C=S/2;m=Math.sqrt(1-b*b/(C*C))}m=g(m)}else E===6?(_===y?m=0:(o=e(i(0,o+.5-y),_-y),m=(1+Math.cos(Math.PI+Math.PI*2*o/(_-y)))/2),m=g(m)):(o>=t(y)&&(o-y<0?m=i(0,e(e(_,1)-(y-o),1)):m=i(0,e(_-o,1))),m=g(m));if(this.sm.v!==100){var T=this.sm.v*.01;T===0&&(T=1e-8);var A=.5-T*.5;m<A?m=0:(m=(m-A)/T,m>1&&(m=1))}return m*this.a.v},getValue:function(o){this.iterateDynamicProperties(),this._mdf=o||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,o&&this.data.r===2&&(this.e.v=this._currentTextLength);var l=this.data.r===2?1:100/this.data.totalChars,u=this.o.v/l,d=this.s.v/l+u,p=this.e.v/l+u;if(d>p){var g=d;d=p,p=g}this.finalS=d,this.finalE=p}},extendPrototype([DynamicPropertyContainer],n);function r(s,o,l){return new n(s,o)}return{getTextSelectorProp:r}}();function TextAnimatorDataProperty(i,e,t){var n={propType:!1},r=PropertyFactory.getProp,s=e.a;this.a={r:s.r?r(i,s.r,0,degToRads,t):n,rx:s.rx?r(i,s.rx,0,degToRads,t):n,ry:s.ry?r(i,s.ry,0,degToRads,t):n,sk:s.sk?r(i,s.sk,0,degToRads,t):n,sa:s.sa?r(i,s.sa,0,degToRads,t):n,s:s.s?r(i,s.s,1,.01,t):n,a:s.a?r(i,s.a,1,0,t):n,o:s.o?r(i,s.o,0,.01,t):n,p:s.p?r(i,s.p,1,0,t):n,sw:s.sw?r(i,s.sw,0,0,t):n,sc:s.sc?r(i,s.sc,1,0,t):n,fc:s.fc?r(i,s.fc,1,0,t):n,fh:s.fh?r(i,s.fh,0,0,t):n,fs:s.fs?r(i,s.fs,0,.01,t):n,fb:s.fb?r(i,s.fb,0,.01,t):n,t:s.t?r(i,s.t,0,0,t):n},this.s=TextSelectorProp.getTextSelectorProp(i,e.s,t),this.s.t=e.s.t}function TextAnimatorProperty(i,e,t){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=i,this._renderType=e,this._elem=t,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(t)}TextAnimatorProperty.prototype.searchProperties=function(){var i,e=this._textData.a.length,t,n=PropertyFactory.getProp;for(i=0;i<e;i+=1)t=this._textData.a[i],this._animatorsData[i]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:n(this._elem,this._textData.p.a,0,0,this),f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:n(this._elem,this._textData.p.r,0,0,this),p:n(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(i,e){if(this.lettersChangedFlag=e,!(!this._mdf&&!this._isFirstFrame&&!e&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var t=this._moreOptions.alignment.v,n=this._animatorsData,r=this._textData,s=this.mHelper,o=this._renderType,l=this.renderedLetters.length,u,d,p,g,m=i.l,y,_,E,S,b,C,T,A,N,L,k,j,F,U,q;if(this._hasMaskedPath){if(q=this._pathData.m,!this._pathData.n||this._pathData._mdf){var J=q.v;this._pathData.r.v&&(J=J.reverse()),y={tLength:0,segments:[]},g=J._length-1;var ee;for(j=0,p=0;p<g;p+=1)ee=bez.buildBezierData(J.v[p],J.v[p+1],[J.o[p][0]-J.v[p][0],J.o[p][1]-J.v[p][1]],[J.i[p+1][0]-J.v[p+1][0],J.i[p+1][1]-J.v[p+1][1]]),y.tLength+=ee.segmentLength,y.segments.push(ee),j+=ee.segmentLength;p=g,q.v.c&&(ee=bez.buildBezierData(J.v[p],J.v[0],[J.o[p][0]-J.v[p][0],J.o[p][1]-J.v[p][1]],[J.i[0][0]-J.v[0][0],J.i[0][1]-J.v[0][1]]),y.tLength+=ee.segmentLength,y.segments.push(ee),j+=ee.segmentLength),this._pathData.pi=y}if(y=this._pathData.pi,_=this._pathData.f.v,T=0,C=1,S=0,b=!0,L=y.segments,_<0&&q.v.c)for(y.tLength<Math.abs(_)&&(_=-Math.abs(_)%y.tLength),T=L.length-1,N=L[T].points,C=N.length-1;_<0;)_+=N[C].partialLength,C-=1,C<0&&(T-=1,N=L[T].points,C=N.length-1);N=L[T].points,A=N[C-1],E=N[C],k=E.partialLength}g=m.length,u=0,d=0;var Y=i.finalSize*1.2*.714,$=!0,D,V,P,I,B;I=n.length;var z,te=-1,ne,Q,ue,me=_,be=T,Ae=C,qe=-1,Be,it,st,Oe,Z,jt,ot,Ye,$e="",dt=this.defaultPropsArray,Ue;if(i.j===2||i.j===1){var K=0,G=0,he=i.j===2?-.5:-1,Ee=0,Te=!0;for(p=0;p<g;p+=1)if(m[p].n){for(K&&(K+=G);Ee<p;)m[Ee].animatorJustifyOffset=K,Ee+=1;K=0,Te=!0}else{for(P=0;P<I;P+=1)D=n[P].a,D.t.propType&&(Te&&i.j===2&&(G+=D.t.v*he),V=n[P].s,z=V.getMult(m[p].anIndexes[P],r.a[P].s.totalChars),z.length?K+=D.t.v*z[0]*he:K+=D.t.v*z*he);Te=!1}for(K&&(K+=G);Ee<p;)m[Ee].animatorJustifyOffset=K,Ee+=1}for(p=0;p<g;p+=1){if(s.reset(),Be=1,m[p].n)u=0,d+=i.yOffset,d+=$?1:0,_=me,$=!1,this._hasMaskedPath&&(T=be,C=Ae,N=L[T].points,A=N[C-1],E=N[C],k=E.partialLength,S=0),$e="",Ye="",jt="",Ue="",dt=this.defaultPropsArray;else{if(this._hasMaskedPath){if(qe!==m[p].line){switch(i.j){case 1:_+=j-i.lineWidths[m[p].line];break;case 2:_+=(j-i.lineWidths[m[p].line])/2;break}qe=m[p].line}te!==m[p].ind&&(m[te]&&(_+=m[te].extra),_+=m[p].an/2,te=m[p].ind),_+=t[0]*m[p].an*.005;var ve=0;for(P=0;P<I;P+=1)D=n[P].a,D.p.propType&&(V=n[P].s,z=V.getMult(m[p].anIndexes[P],r.a[P].s.totalChars),z.length?ve+=D.p.v[0]*z[0]:ve+=D.p.v[0]*z),D.a.propType&&(V=n[P].s,z=V.getMult(m[p].anIndexes[P],r.a[P].s.totalChars),z.length?ve+=D.a.v[0]*z[0]:ve+=D.a.v[0]*z);for(b=!0,this._pathData.a.v&&(_=m[0].an*.5+(j-this._pathData.f.v-m[0].an*.5-m[m.length-1].an*.5)*te/(g-1),_+=this._pathData.f.v);b;)S+k>=_+ve||!N?(F=(_+ve-S)/E.partialLength,Q=A.point[0]+(E.point[0]-A.point[0])*F,ue=A.point[1]+(E.point[1]-A.point[1])*F,s.translate(-t[0]*m[p].an*.005,-(t[1]*Y)*.01),b=!1):N&&(S+=E.partialLength,C+=1,C>=N.length&&(C=0,T+=1,L[T]?N=L[T].points:q.v.c?(C=0,T=0,N=L[T].points):(S-=E.partialLength,N=null)),N&&(A=E,E=N[C],k=E.partialLength));ne=m[p].an/2-m[p].add,s.translate(-ne,0,0)}else ne=m[p].an/2-m[p].add,s.translate(-ne,0,0),s.translate(-t[0]*m[p].an*.005,-t[1]*Y*.01,0);for(P=0;P<I;P+=1)D=n[P].a,D.t.propType&&(V=n[P].s,z=V.getMult(m[p].anIndexes[P],r.a[P].s.totalChars),(u!==0||i.j!==0)&&(this._hasMaskedPath?z.length?_+=D.t.v*z[0]:_+=D.t.v*z:z.length?u+=D.t.v*z[0]:u+=D.t.v*z));for(i.strokeWidthAnim&&(st=i.sw||0),i.strokeColorAnim&&(i.sc?it=[i.sc[0],i.sc[1],i.sc[2]]:it=[0,0,0]),i.fillColorAnim&&i.fc&&(Oe=[i.fc[0],i.fc[1],i.fc[2]]),P=0;P<I;P+=1)D=n[P].a,D.a.propType&&(V=n[P].s,z=V.getMult(m[p].anIndexes[P],r.a[P].s.totalChars),z.length?s.translate(-D.a.v[0]*z[0],-D.a.v[1]*z[1],D.a.v[2]*z[2]):s.translate(-D.a.v[0]*z,-D.a.v[1]*z,D.a.v[2]*z));for(P=0;P<I;P+=1)D=n[P].a,D.s.propType&&(V=n[P].s,z=V.getMult(m[p].anIndexes[P],r.a[P].s.totalChars),z.length?s.scale(1+(D.s.v[0]-1)*z[0],1+(D.s.v[1]-1)*z[1],1):s.scale(1+(D.s.v[0]-1)*z,1+(D.s.v[1]-1)*z,1));for(P=0;P<I;P+=1){if(D=n[P].a,V=n[P].s,z=V.getMult(m[p].anIndexes[P],r.a[P].s.totalChars),D.sk.propType&&(z.length?s.skewFromAxis(-D.sk.v*z[0],D.sa.v*z[1]):s.skewFromAxis(-D.sk.v*z,D.sa.v*z)),D.r.propType&&(z.length?s.rotateZ(-D.r.v*z[2]):s.rotateZ(-D.r.v*z)),D.ry.propType&&(z.length?s.rotateY(D.ry.v*z[1]):s.rotateY(D.ry.v*z)),D.rx.propType&&(z.length?s.rotateX(D.rx.v*z[0]):s.rotateX(D.rx.v*z)),D.o.propType&&(z.length?Be+=(D.o.v*z[0]-Be)*z[0]:Be+=(D.o.v*z-Be)*z),i.strokeWidthAnim&&D.sw.propType&&(z.length?st+=D.sw.v*z[0]:st+=D.sw.v*z),i.strokeColorAnim&&D.sc.propType)for(Z=0;Z<3;Z+=1)z.length?it[Z]+=(D.sc.v[Z]-it[Z])*z[0]:it[Z]+=(D.sc.v[Z]-it[Z])*z;if(i.fillColorAnim&&i.fc){if(D.fc.propType)for(Z=0;Z<3;Z+=1)z.length?Oe[Z]+=(D.fc.v[Z]-Oe[Z])*z[0]:Oe[Z]+=(D.fc.v[Z]-Oe[Z])*z;D.fh.propType&&(z.length?Oe=addHueToRGB(Oe,D.fh.v*z[0]):Oe=addHueToRGB(Oe,D.fh.v*z)),D.fs.propType&&(z.length?Oe=addSaturationToRGB(Oe,D.fs.v*z[0]):Oe=addSaturationToRGB(Oe,D.fs.v*z)),D.fb.propType&&(z.length?Oe=addBrightnessToRGB(Oe,D.fb.v*z[0]):Oe=addBrightnessToRGB(Oe,D.fb.v*z))}}for(P=0;P<I;P+=1)D=n[P].a,D.p.propType&&(V=n[P].s,z=V.getMult(m[p].anIndexes[P],r.a[P].s.totalChars),this._hasMaskedPath?z.length?s.translate(0,D.p.v[1]*z[0],-D.p.v[2]*z[1]):s.translate(0,D.p.v[1]*z,-D.p.v[2]*z):z.length?s.translate(D.p.v[0]*z[0],D.p.v[1]*z[1],-D.p.v[2]*z[2]):s.translate(D.p.v[0]*z,D.p.v[1]*z,-D.p.v[2]*z));if(i.strokeWidthAnim&&(jt=st<0?0:st),i.strokeColorAnim&&(ot="rgb("+Math.round(it[0]*255)+","+Math.round(it[1]*255)+","+Math.round(it[2]*255)+")"),i.fillColorAnim&&i.fc&&(Ye="rgb("+Math.round(Oe[0]*255)+","+Math.round(Oe[1]*255)+","+Math.round(Oe[2]*255)+")"),this._hasMaskedPath){if(s.translate(0,-i.ls),s.translate(0,t[1]*Y*.01+d,0),this._pathData.p.v){U=(E.point[1]-A.point[1])/(E.point[0]-A.point[0]);var Ne=Math.atan(U)*180/Math.PI;E.point[0]<A.point[0]&&(Ne+=180),s.rotate(-Ne*Math.PI/180)}s.translate(Q,ue,0),_-=t[0]*m[p].an*.005,m[p+1]&&te!==m[p+1].ind&&(_+=m[p].an/2,_+=i.tr*.001*i.finalSize)}else{switch(s.translate(u,d,0),i.ps&&s.translate(i.ps[0],i.ps[1]+i.ascent,0),i.j){case 1:s.translate(m[p].animatorJustifyOffset+i.justifyOffset+(i.boxWidth-i.lineWidths[m[p].line]),0,0);break;case 2:s.translate(m[p].animatorJustifyOffset+i.justifyOffset+(i.boxWidth-i.lineWidths[m[p].line])/2,0,0);break}s.translate(0,-i.ls),s.translate(ne,0,0),s.translate(t[0]*m[p].an*.005,t[1]*Y*.01,0),u+=m[p].l+i.tr*.001*i.finalSize}o==="html"?$e=s.toCSS():o==="svg"?$e=s.to2dCSS():dt=[s.props[0],s.props[1],s.props[2],s.props[3],s.props[4],s.props[5],s.props[6],s.props[7],s.props[8],s.props[9],s.props[10],s.props[11],s.props[12],s.props[13],s.props[14],s.props[15]],Ue=Be}l<=p?(B=new LetterProps(Ue,jt,ot,Ye,$e,dt),this.renderedLetters.push(B),l+=1,this.lettersChangedFlag=!0):(B=this.renderedLetters[p],this.lettersChangedFlag=B.update(Ue,jt,ot,Ye,$e,dt)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(i,e,t){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(i,e,t),this.textProperty=new TextProperty(this,i.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(i.t,this.renderType,this),this.initTransform(i,e,t),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(i){this._mdf=!1,this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange)},ITextElement.prototype.createPathShape=function(i,e){var t,n=e.length,r,s="";for(t=0;t<n;t+=1)e[t].ty==="sh"&&(r=e[t].ks.k,s+=buildShapeString(r,r.i.length,!0,i));return s},ITextElement.prototype.updateDocumentData=function(i,e){this.textProperty.updateDocumentData(i,e)},ITextElement.prototype.canResizeFont=function(i){this.textProperty.canResizeFont(i)},ITextElement.prototype.setMinimumFontSize=function(i){this.textProperty.setMinimumFontSize(i)},ITextElement.prototype.applyTextPropertiesToMatrix=function(i,e,t,n,r){switch(i.ps&&e.translate(i.ps[0],i.ps[1]+i.ascent,0),e.translate(0,-i.ls,0),i.j){case 1:e.translate(i.justifyOffset+(i.boxWidth-i.lineWidths[t]),0,0);break;case 2:e.translate(i.justifyOffset+(i.boxWidth-i.lineWidths[t])/2,0,0);break}e.translate(n,r,0)},ITextElement.prototype.buildColor=function(i){return"rgb("+Math.round(i[0]*255)+","+Math.round(i[1]*255)+","+Math.round(i[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(i,e,t){this.textSpans=[],this.renderType="svg",this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(i){for(var e=0,t=i.length,n=[],r="";e<t;)i[e]==="\r"||i[e]===""?(n.push(r),r=""):r+=i[e],e+=1;return n.push(r),n},SVGTextLottieElement.prototype.buildShapeData=function(i,e){if(i.shapes&&i.shapes.length){var t=i.shapes[0];if(t.it){var n=t.it[t.it.length-1];n.s&&(n.s.k[0]=e,n.s.k[1]=e)}}return i},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var i,e,t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t?t.l.length:0),t.fc?this.layerElement.setAttribute("fill",this.buildColor(t.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),t.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(t.sc)),this.layerElement.setAttribute("stroke-width",t.sw)),this.layerElement.setAttribute("font-size",t.finalSize);var n=this.globalData.fontManager.getFontByName(t.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var r=t.fWeight,s=t.fStyle;this.layerElement.setAttribute("font-style",s),this.layerElement.setAttribute("font-weight",r)}this.layerElement.setAttribute("aria-label",t.t);var o=t.l||[],l=!!this.globalData.fontManager.chars;e=o.length;var u,d=this.mHelper,p="",g=this.data.singleShape,m=0,y=0,_=!0,E=t.tr*.001*t.finalSize;if(g&&!l&&!t.sz){var S=this.textContainer,b="start";switch(t.j){case 1:b="end";break;case 2:b="middle";break;default:b="start";break}S.setAttribute("text-anchor",b),S.setAttribute("letter-spacing",E);var C=this.buildTextContents(t.finalText);for(e=C.length,y=t.ps?t.ps[1]+t.ascent:0,i=0;i<e;i+=1)u=this.textSpans[i].span||createNS("tspan"),u.textContent=C[i],u.setAttribute("x",0),u.setAttribute("y",y),u.style.display="inherit",S.appendChild(u),this.textSpans[i]||(this.textSpans[i]={span:null,glyph:null}),this.textSpans[i].span=u,y+=t.finalLineHeight;this.layerElement.appendChild(S)}else{var T=this.textSpans.length,A;for(i=0;i<e;i+=1){if(this.textSpans[i]||(this.textSpans[i]={span:null,childSpan:null,glyph:null}),!l||!g||i===0){if(u=T>i?this.textSpans[i].span:createNS(l?"g":"text"),T<=i){if(u.setAttribute("stroke-linecap","butt"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit","4"),this.textSpans[i].span=u,l){var N=createNS("g");u.appendChild(N),this.textSpans[i].childSpan=N}this.textSpans[i].span=u,this.layerElement.appendChild(u)}u.style.display="inherit"}if(d.reset(),g&&(o[i].n&&(m=-E,y+=t.yOffset,y+=_?1:0,_=!1),this.applyTextPropertiesToMatrix(t,d,o[i].line,m,y),m+=o[i].l||0,m+=E),l){A=this.globalData.fontManager.getCharData(t.finalText[i],n.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);var L;if(A.t===1)L=new SVGCompElement(A.data,this.globalData,this);else{var k=emptyShapeData;A.data&&A.data.shapes&&(k=this.buildShapeData(A.data,t.finalSize)),L=new SVGShapeElement(k,this.globalData,this)}if(this.textSpans[i].glyph){var j=this.textSpans[i].glyph;this.textSpans[i].childSpan.removeChild(j.layerElement),j.destroy()}this.textSpans[i].glyph=L,L._debug=!0,L.prepareFrame(0),L.renderFrame(),this.textSpans[i].childSpan.appendChild(L.layerElement),A.t===1&&this.textSpans[i].childSpan.setAttribute("transform","scale("+t.finalSize/100+","+t.finalSize/100+")")}else g&&u.setAttribute("transform","translate("+d.props[12]+","+d.props[13]+")"),u.textContent=o[i].val,u.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}g&&u&&u.setAttribute("d",p)}for(;i<this.textSpans.length;)this.textSpans[i].span.style.display="none",i+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var i=this.layerElement.getBBox();this.bbox={top:i.y,left:i.x,width:i.width,height:i.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var i,e=this.textSpans.length,t;for(this.renderedFrame=this.comp.renderedFrame,i=0;i<e;i+=1)t=this.textSpans[i].glyph,t&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var i,e,t=this.textAnimator.renderedLetters,n=this.textProperty.currentData.l;e=n.length;var r,s,o;for(i=0;i<e;i+=1)n[i].n||(r=t[i],s=this.textSpans[i].span,o=this.textSpans[i].glyph,o&&o.renderFrame(),r._mdf.m&&s.setAttribute("transform",r.m),r._mdf.o&&s.setAttribute("opacity",r.o),r._mdf.sw&&s.setAttribute("stroke-width",r.sw),r._mdf.sc&&s.setAttribute("stroke",r.sc),r._mdf.fc&&s.setAttribute("fill",r.fc))}};function ISolidElement(i,e,t){this.initElement(i,e,t)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var i=createNS("rect");i.setAttribute("width",this.data.sw),i.setAttribute("height",this.data.sh),i.setAttribute("fill",this.data.sc),this.layerElement.appendChild(i)};function NullElement(i,e,t){this.initFrame(),this.initBaseData(i,e,t),this.initFrame(),this.initTransform(i,e,t),this.initHierarchy()}NullElement.prototype.prepareFrame=function(i){this.prepareProperties(i,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(i){return new NullElement(i,this.globalData,this)},SVGRendererBase.prototype.createShape=function(i){return new SVGShapeElement(i,this.globalData,this)},SVGRendererBase.prototype.createText=function(i){return new SVGTextLottieElement(i,this.globalData,this)},SVGRendererBase.prototype.createImage=function(i){return new IImageElement(i,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(i){return new ISolidElement(i,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(i){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+i.w+" "+i.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",i.w),this.svgElement.setAttribute("height",i.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(i,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=i;var t=createNS("clipPath"),n=createNS("rect");n.setAttribute("width",i.w),n.setAttribute("height",i.h),n.setAttribute("x",0),n.setAttribute("y",0);var r=createElementID();t.setAttribute("id",r),t.appendChild(n),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+r+")"),e.appendChild(t),this.layers=i.layers,this.elements=createSizedArray(i.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var i,e=this.layers?this.layers.length:0;for(i=0;i<e;i+=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(i){var e=0,t=this.layers.length;for(e=0;e<t;e+=1)if(this.layers[e].ind===i)return e;return-1},SVGRendererBase.prototype.buildItem=function(i){var e=this.elements;if(!(e[i]||this.layers[i].ty===99)){e[i]=!0;var t=this.createItem(this.layers[i]);if(e[i]=t,getExpressionsPlugin()&&(this.layers[i].ty===0&&this.globalData.projectInterface.registerComposition(t),t.initExpressions()),this.appendElementInPos(t,i),this.layers[i].tt){var n="tp"in this.layers[i]?this.findIndexByInd(this.layers[i].tp):i-1;if(n===-1)return;if(!this.elements[n]||this.elements[n]===!0)this.buildItem(n),this.addPendingElement(t);else{var r=e[n],s=r.getMatte(this.layers[i].tt);t.setMatte(s)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var i=this.pendingElements.pop();if(i.checkParenting(),i.data.tt)for(var e=0,t=this.elements.length;e<t;){if(this.elements[e]===i){var n="tp"in i.data?this.findIndexByInd(i.data.tp):e-1,r=this.elements[n],s=r.getMatte(this.layers[e].tt);i.setMatte(s);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(i){if(!(this.renderedFrame===i||this.destroyed)){i===null?i=this.renderedFrame:this.renderedFrame=i,this.globalData.frameNum=i,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=i,this.globalData._mdf=!1;var e,t=this.layers.length;for(this.completeLayers||this.checkLayers(i),e=t-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(i-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(i,e){var t=i.getBaseElement();if(t){for(var n=0,r;n<e;)this.elements[n]&&this.elements[n]!==!0&&this.elements[n].getBaseElement()&&(r=this.elements[n].getBaseElement()),n+=1;r?this.layerElement.insertBefore(t,r):this.layerElement.appendChild(t)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(i,e,t){this.initFrame(),this.initBaseData(i,e,t),this.initTransform(i,e,t),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!e.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(i){if(this._mdf=!1,this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=i/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var t,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&(this.elements[t].prepareFrame(this.renderedFrame-this.layers[t].st),this.elements[t]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var i,e=this.layers.length;for(i=0;i<e;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()},ICompElement.prototype.setElements=function(i){this.elements=i},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var i,e=this.layers.length;for(i=0;i<e;i+=1)this.elements[i]&&this.elements[i].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(i,e,t){this.layers=i.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(i,e,t),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(i){return new SVGCompElement(i,this.globalData,this)};function SVGRenderer(i,e){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var t="";if(e&&e.title){var n=createNS("title"),r=createElementID();n.setAttribute("id",r),n.textContent=e.title,this.svgElement.appendChild(n),t+=r}if(e&&e.description){var s=createNS("desc"),o=createElementID();s.setAttribute("id",o),s.textContent=e.description,this.svgElement.appendChild(s),t+=" "+o}t&&this.svgElement.setAttribute("aria-labelledby",t);var l=createNS("defs");this.svgElement.appendChild(l);var u=createNS("g");this.svgElement.appendChild(u),this.layerElement=u,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&e.hideOnTransparent===!1),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:l,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(i){return new SVGCompElement(i,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(e){var t,n=e.length,r="_";for(t=0;t<n;t+=1)r+=e[t].transform.key+"_";var s=this.sequences[r];return s||(s={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=s,this.sequenceList.push(s)),s},processSequence:function(e,t){for(var n=0,r=e.transforms.length,s=t;n<r&&!t;){if(e.transforms[n].transform.mProps._mdf){s=!0;break}n+=1}if(s)for(e.finalTransform.reset(),n=r-1;n>=0;n-=1)e.finalTransform.multiply(e.transforms[n].transform.mProps.v);e._mdf=s},processSequences:function(e){var t,n=this.sequenceList.length;for(t=0;t<n;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",t=null,n=null,r=null;function s(){var u=createNS("svg"),d=createNS("filter"),p=createNS("feColorMatrix");return d.setAttribute("id",e),p.setAttribute("type","matrix"),p.setAttribute("color-interpolation-filters","sRGB"),p.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),d.appendChild(p),u.appendChild(d),u.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(u.style.display="none"),u}function o(){t||(r=s(),document.body.appendChild(r),t=createTag("canvas"),n=t.getContext("2d"),n.filter="url(#"+e+")",n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1))}function l(u){return t||o(),t.width=u.width,t.height=u.height,n.filter="url(#"+e+")",t}return{load:o,get:l}};function createCanvas(i,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(i,e);var t=createTag("canvas");return t.width=i,t.height=e,t}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(i){var e,t=i.data.ef?i.data.ef.length:0;this.filters=[];var n;for(e=0;e<t;e+=1){n=null;var r=i.data.ef[e].ty;if(registeredEffects[r]){var s=registeredEffects[r].effect;n=new s(i.effectsManager.effectElements[e],i)}n&&this.filters.push(n)}this.filters.length&&i.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(i){var e,t=this.filters.length;for(e=0;e<t;e+=1)this.filters[e].renderFrame(i)},CVEffects.prototype.getEffects=function(i){var e,t=this.filters.length,n=[];for(e=0;e<t;e+=1)this.filters[e].type===i&&n.push(this.filters[e]);return n};function registerEffect(i,e){registeredEffects[i]={effect:e}}function CVMaskElement(i,e){this.data=i,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var t,n=this.masksProperties.length,r=!1;for(t=0;t<n;t+=1)this.masksProperties[t].mode!=="n"&&(r=!0),this.viewData[t]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[t],3);this.hasMasks=r,r&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var i=this.element.finalTransform.mat,e=this.element.canvasContext,t,n=this.masksProperties.length,r,s,o;for(e.beginPath(),t=0;t<n;t+=1)if(this.masksProperties[t].mode!=="n"){this.masksProperties[t].inv&&(e.moveTo(0,0),e.lineTo(this.element.globalData.compSize.w,0),e.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),e.lineTo(0,this.element.globalData.compSize.h),e.lineTo(0,0)),o=this.viewData[t].v,r=i.applyToPointArray(o.v[0][0],o.v[0][1],0),e.moveTo(r[0],r[1]);var l,u=o._length;for(l=1;l<u;l+=1)s=i.applyToTriplePoints(o.o[l-1],o.i[l],o.v[l]),e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);s=i.applyToTriplePoints(o.o[l-1],o.i[0],o.v[0]),e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}this.element.globalData.renderer.save(!0),e.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,t=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(t);var n=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(n),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0],t=e.getContext("2d");this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],t=e.getContext("2d");this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var n=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(n.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var r=assetLoader.getLumaCanvas(this.canvasContext.canvas),s=r.getContext("2d");s.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(r,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var t=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(i,e,t,n){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var r=4;e.ty==="rc"?r=5:e.ty==="el"?r=6:e.ty==="sr"&&(r=7),this.sh=ShapePropertyFactory.getShapeProp(i,e,r,i);var s,o=t.length,l;for(s=0;s<o;s+=1)t[s].closed||(l={transforms:n.addTransformSequence(t[s].transforms),trNodes:[]},this.styledShapes.push(l),t[s].elements.push(l))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(i,e,t){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(i,e){var t={data:i,type:i.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:i.hd===!0},n={};if(i.ty==="fl"||i.ty==="st"?(n.c=PropertyFactory.getProp(this,i.c,1,255,this),n.c.k||(t.co="rgb("+bmFloor(n.c.v[0])+","+bmFloor(n.c.v[1])+","+bmFloor(n.c.v[2])+")")):(i.ty==="gf"||i.ty==="gs")&&(n.s=PropertyFactory.getProp(this,i.s,1,null,this),n.e=PropertyFactory.getProp(this,i.e,1,null,this),n.h=PropertyFactory.getProp(this,i.h||{k:0},0,.01,this),n.a=PropertyFactory.getProp(this,i.a||{k:0},0,degToRads,this),n.g=new GradientProperty(this,i.g,this)),n.o=PropertyFactory.getProp(this,i.o,0,.01,this),i.ty==="st"||i.ty==="gs"){if(t.lc=lineCapEnum[i.lc||2],t.lj=lineJoinEnum[i.lj||2],i.lj==1&&(t.ml=i.ml),n.w=PropertyFactory.getProp(this,i.w,0,null,this),n.w.k||(t.wi=n.w.v),i.d){var r=new DashProperty(this,i.d,"canvas",this);n.d=r,n.d.k||(t.da=n.d.dashArray,t.do=n.d.dashoffset[0])}}else t.r=i.r===2?"evenodd":"nonzero";return this.stylesList.push(t),n.style=t,n},CVShapeElement.prototype.createGroupElement=function(){var i={it:[],prevViewData:[]};return i},CVShapeElement.prototype.createTransformElement=function(i){var e={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,i.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,i,this)}};return e},CVShapeElement.prototype.createShapeElement=function(i){var e=new CVShapeData(this,i,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var i,e=this.itemsData.length;for(i=0;i<e;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,i=0;i<e;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(i){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(i)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var i,e=this.stylesList.length;for(i=0;i<e;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.pop()},CVShapeElement.prototype.closeStyles=function(i){var e,t=i.length;for(e=0;e<t;e+=1)i[e].closed=!0},CVShapeElement.prototype.searchShapes=function(i,e,t,n,r){var s,o=i.length-1,l,u,d=[],p=[],g,m,y,_=[].concat(r);for(s=o;s>=0;s-=1){if(g=this.searchProcessedElement(i[s]),g?e[s]=t[g-1]:i[s]._shouldRender=n,i[s].ty==="fl"||i[s].ty==="st"||i[s].ty==="gf"||i[s].ty==="gs")g?e[s].style.closed=!1:e[s]=this.createStyleElement(i[s],_),d.push(e[s].style);else if(i[s].ty==="gr"){if(!g)e[s]=this.createGroupElement(i[s]);else for(u=e[s].it.length,l=0;l<u;l+=1)e[s].prevViewData[l]=e[s].it[l];this.searchShapes(i[s].it,e[s].it,e[s].prevViewData,n,_)}else i[s].ty==="tr"?(g||(y=this.createTransformElement(i[s]),e[s]=y),_.push(e[s]),this.addTransformToStyleList(e[s])):i[s].ty==="sh"||i[s].ty==="rc"||i[s].ty==="el"||i[s].ty==="sr"?g||(e[s]=this.createShapeElement(i[s])):i[s].ty==="tm"||i[s].ty==="rd"||i[s].ty==="pb"||i[s].ty==="zz"||i[s].ty==="op"?(g?(m=e[s],m.closed=!1):(m=ShapeModifiers.getModifier(i[s].ty),m.init(this,i[s]),e[s]=m,this.shapeModifiers.push(m)),p.push(m)):i[s].ty==="rp"&&(g?(m=e[s],m.closed=!0):(m=ShapeModifiers.getModifier(i[s].ty),e[s]=m,m.init(this,i,s,e),this.shapeModifiers.push(m),n=!1),p.push(m));this.addProcessedElement(i[s],s+1)}for(this.removeTransformFromStyleList(),this.closeStyles(d),o=p.length,s=0;s<o;s+=1)p[s].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(i,e){(i._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=i.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var i,e=this.stylesList.length,t,n,r,s,o,l,u=this.globalData.renderer,d=this.globalData.canvasContext,p,g;for(i=0;i<e;i+=1)if(g=this.stylesList[i],p=g.type,!((p==="st"||p==="gs")&&g.wi===0||!g.data._shouldRender||g.coOp===0||this.globalData.currentGlobalAlpha===0)){for(u.save(),o=g.elements,p==="st"||p==="gs"?(u.ctxStrokeStyle(p==="st"?g.co:g.grd),u.ctxLineWidth(g.wi),u.ctxLineCap(g.lc),u.ctxLineJoin(g.lj),u.ctxMiterLimit(g.ml||0)):u.ctxFillStyle(p==="fl"?g.co:g.grd),u.ctxOpacity(g.coOp),p!=="st"&&p!=="gs"&&d.beginPath(),u.ctxTransform(g.preTransforms.finalTransform.props),n=o.length,t=0;t<n;t+=1){for((p==="st"||p==="gs")&&(d.beginPath(),g.da&&(d.setLineDash(g.da),d.lineDashOffset=g.do)),l=o[t].trNodes,s=l.length,r=0;r<s;r+=1)l[r].t==="m"?d.moveTo(l[r].p[0],l[r].p[1]):l[r].t==="c"?d.bezierCurveTo(l[r].pts[0],l[r].pts[1],l[r].pts[2],l[r].pts[3],l[r].pts[4],l[r].pts[5]):d.closePath();(p==="st"||p==="gs")&&(u.ctxStroke(),g.da&&d.setLineDash(this.dashResetter))}p!=="st"&&p!=="gs"&&this.globalData.renderer.ctxFill(g.r),u.restore()}},CVShapeElement.prototype.renderShape=function(i,e,t,n){var r,s=e.length-1,o;for(o=i,r=s;r>=0;r-=1)e[r].ty==="tr"?(o=t[r].transform,this.renderShapeTransform(i,o)):e[r].ty==="sh"||e[r].ty==="el"||e[r].ty==="rc"||e[r].ty==="sr"?this.renderPath(e[r],t[r]):e[r].ty==="fl"?this.renderFill(e[r],t[r],o):e[r].ty==="st"?this.renderStroke(e[r],t[r],o):e[r].ty==="gf"||e[r].ty==="gs"?this.renderGradientFill(e[r],t[r],o):e[r].ty==="gr"?this.renderShape(o,e[r].it,t[r].it):e[r].ty;n&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(i,e){if(this._isFirstFrame||e._mdf||i.transforms._mdf){var t=i.trNodes,n=e.paths,r,s,o,l=n._length;t.length=0;var u=i.transforms.finalTransform;for(o=0;o<l;o+=1){var d=n.shapes[o];if(d&&d.v){for(s=d._length,r=1;r<s;r+=1)r===1&&t.push({t:"m",p:u.applyToPointArray(d.v[0][0],d.v[0][1],0)}),t.push({t:"c",pts:u.applyToTriplePoints(d.o[r-1],d.i[r],d.v[r])});s===1&&t.push({t:"m",p:u.applyToPointArray(d.v[0][0],d.v[0][1],0)}),d.c&&s&&(t.push({t:"c",pts:u.applyToTriplePoints(d.o[r-1],d.i[0],d.v[0])}),t.push({t:"z"}))}}i.trNodes=t}},CVShapeElement.prototype.renderPath=function(i,e){if(i.hd!==!0&&i._shouldRender){var t,n=e.styledShapes.length;for(t=0;t<n;t+=1)this.renderStyledShape(e.styledShapes[t],e.sh)}},CVShapeElement.prototype.renderFill=function(i,e,t){var n=e.style;(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||t._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*t.opacity)},CVShapeElement.prototype.renderGradientFill=function(i,e,t){var n=e.style,r;if(!n.grd||e.g._mdf||e.s._mdf||e.e._mdf||i.t!==1&&(e.h._mdf||e.a._mdf)){var s=this.globalData.canvasContext,o=e.s.v,l=e.e.v;if(i.t===1)r=s.createLinearGradient(o[0],o[1],l[0],l[1]);else{var u=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),d=Math.atan2(l[1]-o[1],l[0]-o[0]),p=e.h.v;p>=1?p=.99:p<=-1&&(p=-.99);var g=u*p,m=Math.cos(d+e.a.v)*g+o[0],y=Math.sin(d+e.a.v)*g+o[1];r=s.createRadialGradient(m,y,0,o[0],o[1],u)}var _,E=i.g.p,S=e.g.c,b=1;for(_=0;_<E;_+=1)e.g._hasOpacity&&e.g._collapsable&&(b=e.g.o[_*2+1]),r.addColorStop(S[_*4]/100,"rgba("+S[_*4+1]+","+S[_*4+2]+","+S[_*4+3]+","+b+")");n.grd=r}n.coOp=e.o.v*t.opacity},CVShapeElement.prototype.renderStroke=function(i,e,t){var n=e.style,r=e.d;r&&(r._mdf||this._isFirstFrame)&&(n.da=r.dashArray,n.do=r.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||t._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*t.opacity),(e.w._mdf||this._isFirstFrame)&&(n.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(i,e,t){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i.l?i.l.length:0);var e=!1;i.fc?(e=!0,this.values.fill=this.buildColor(i.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var t=!1;i.sc&&(t=!0,this.values.stroke=this.buildColor(i.sc),this.values.sWidth=i.sw);var n=this.globalData.fontManager.getFontByName(i.f),r,s,o=i.l,l=this.mHelper;this.stroke=t,this.values.fValue=i.finalSize+"px "+this.globalData.fontManager.getFontByName(i.f).fFamily,s=i.finalText.length;var u,d,p,g,m,y,_,E,S,b,C=this.data.singleShape,T=i.tr*.001*i.finalSize,A=0,N=0,L=!0,k=0;for(r=0;r<s;r+=1){u=this.globalData.fontManager.getCharData(i.finalText[r],n.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily),d=u&&u.data||{},l.reset(),C&&o[r].n&&(A=-T,N+=i.yOffset,N+=L?1:0,L=!1),m=d.shapes?d.shapes[0].it:[],_=m.length,l.scale(i.finalSize/100,i.finalSize/100),C&&this.applyTextPropertiesToMatrix(i,l,o[r].line,A,N),S=createSizedArray(_-1);var j=0;for(y=0;y<_;y+=1)if(m[y].ty==="sh"){for(g=m[y].ks.k.i.length,E=m[y].ks.k,b=[],p=1;p<g;p+=1)p===1&&b.push(l.applyToX(E.v[0][0],E.v[0][1],0),l.applyToY(E.v[0][0],E.v[0][1],0)),b.push(l.applyToX(E.o[p-1][0],E.o[p-1][1],0),l.applyToY(E.o[p-1][0],E.o[p-1][1],0),l.applyToX(E.i[p][0],E.i[p][1],0),l.applyToY(E.i[p][0],E.i[p][1],0),l.applyToX(E.v[p][0],E.v[p][1],0),l.applyToY(E.v[p][0],E.v[p][1],0));b.push(l.applyToX(E.o[p-1][0],E.o[p-1][1],0),l.applyToY(E.o[p-1][0],E.o[p-1][1],0),l.applyToX(E.i[0][0],E.i[0][1],0),l.applyToY(E.i[0][0],E.i[0][1],0),l.applyToX(E.v[0][0],E.v[0][1],0),l.applyToY(E.v[0][0],E.v[0][1],0)),S[j]=b,j+=1}C&&(A+=o[r].l,A+=T),this.textSpans[k]?this.textSpans[k].elem=S:this.textSpans[k]={elem:S},k+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var i=this.canvasContext;i.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var e,t,n,r,s,o,l=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l;t=u.length;var d,p=null,g=null,m=null,y,_,E=this.globalData.renderer;for(e=0;e<t;e+=1)if(!u[e].n){if(d=l[e],d&&(E.save(),E.ctxTransform(d.p),E.ctxOpacity(d.o)),this.fill){for(d&&d.fc?p!==d.fc&&(E.ctxFillStyle(d.fc),p=d.fc):p!==this.values.fill&&(p=this.values.fill,E.ctxFillStyle(this.values.fill)),y=this.textSpans[e].elem,r=y.length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(_=y[n],o=_.length,this.globalData.canvasContext.moveTo(_[0],_[1]),s=2;s<o;s+=6)this.globalData.canvasContext.bezierCurveTo(_[s],_[s+1],_[s+2],_[s+3],_[s+4],_[s+5]);this.globalData.canvasContext.closePath(),E.ctxFill()}if(this.stroke){for(d&&d.sw?m!==d.sw&&(m=d.sw,E.ctxLineWidth(d.sw)):m!==this.values.sWidth&&(m=this.values.sWidth,E.ctxLineWidth(this.values.sWidth)),d&&d.sc?g!==d.sc&&(g=d.sc,E.ctxStrokeStyle(d.sc)):g!==this.values.stroke&&(g=this.values.stroke,E.ctxStrokeStyle(this.values.stroke)),y=this.textSpans[e].elem,r=y.length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(_=y[n],o=_.length,this.globalData.canvasContext.moveTo(_[0],_[1]),s=2;s<o;s+=6)this.globalData.canvasContext.bezierCurveTo(_[s],_[s+1],_[s+2],_[s+3],_[s+4],_[s+5]);this.globalData.canvasContext.closePath(),E.ctxStroke()}d&&this.globalData.renderer.restore()}};function CVImageElement(i,e,t){this.assetData=e.getAssetData(i.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var i=createTag("canvas");i.width=this.assetData.w,i.height=this.assetData.h;var e=i.getContext("2d"),t=this.img.width,n=this.img.height,r=t/n,s=this.assetData.w/this.assetData.h,o,l,u=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;r>s&&u==="xMidYMid slice"||r<s&&u!=="xMidYMid slice"?(l=n,o=l*s):(o=t,l=o/s),e.drawImage(this.img,(t-o)/2,(n-l)/2,o,l,0,0,this.assetData.w,this.assetData.h),this.img=i}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(i,e,t){this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(i){return new CVShapeElement(i,this.globalData,this)},CanvasRendererBase.prototype.createText=function(i){return new CVTextElement(i,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(i){return new CVImageElement(i,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(i){return new CVSolidElement(i,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(i){i[0]===1&&i[1]===0&&i[4]===0&&i[5]===1&&i[12]===0&&i[13]===0||this.canvasContext.transform(i[0],i[1],i[4],i[5],i[12],i[13])},CanvasRendererBase.prototype.ctxOpacity=function(i){this.canvasContext.globalAlpha*=i<0?0:i},CanvasRendererBase.prototype.ctxFillStyle=function(i){this.canvasContext.fillStyle=i},CanvasRendererBase.prototype.ctxStrokeStyle=function(i){this.canvasContext.strokeStyle=i},CanvasRendererBase.prototype.ctxLineWidth=function(i){this.canvasContext.lineWidth=i},CanvasRendererBase.prototype.ctxLineCap=function(i){this.canvasContext.lineCap=i},CanvasRendererBase.prototype.ctxLineJoin=function(i){this.canvasContext.lineJoin=i},CanvasRendererBase.prototype.ctxMiterLimit=function(i){this.canvasContext.miterLimit=i},CanvasRendererBase.prototype.ctxFill=function(i){this.canvasContext.fill(i)},CanvasRendererBase.prototype.ctxFillRect=function(i,e,t,n){this.canvasContext.fillRect(i,e,t,n)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(i){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}i&&(this.globalData.blendMode="source-over"),this.contextData.restore(i)},CanvasRendererBase.prototype.configAnimation=function(i){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var t="0px 0px 0px";e.transformOrigin=t,e.mozTransformOrigin=t,e.webkitTransformOrigin=t,e["-webkit-transform"]=t,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=i,this.layers=i.layers,this.transformCanvas={w:i.w,h:i.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(i,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(i.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(i,e){this.reset();var t,n;i?(t=i,n=e,this.canvasContext.canvas.width=t,this.canvasContext.canvas.height=n):(this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,n=this.animationItem.wrapper.offsetHeight):(t=this.canvasContext.canvas.width,n=this.canvasContext.canvas.height),this.canvasContext.canvas.width=t*this.renderConfig.dpr,this.canvasContext.canvas.height=n*this.renderConfig.dpr);var r,s;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var o=this.renderConfig.preserveAspectRatio.split(" "),l=o[1]||"meet",u=o[0]||"xMidYMid",d=u.substr(0,4),p=u.substr(4);r=t/n,s=this.transformCanvas.w/this.transformCanvas.h,s>r&&l==="meet"||s<r&&l==="slice"?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=n/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.h/this.renderConfig.dpr)),d==="xMid"&&(s<r&&l==="meet"||s>r&&l==="slice")?this.transformCanvas.tx=(t-this.transformCanvas.w*(n/this.transformCanvas.h))/2*this.renderConfig.dpr:d==="xMax"&&(s<r&&l==="meet"||s>r&&l==="slice")?this.transformCanvas.tx=(t-this.transformCanvas.w*(n/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,p==="YMid"&&(s>r&&l==="meet"||s<r&&l==="slice")?this.transformCanvas.ty=(n-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:p==="YMax"&&(s>r&&l==="meet"||s<r&&l==="slice")?this.transformCanvas.ty=(n-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var i,e=this.layers?this.layers.length:0;for(i=e-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(i,e){if(!(this.renderedFrame===i&&this.renderConfig.clearCanvas===!0&&!e||this.destroyed||i===-1)){this.renderedFrame=i,this.globalData.frameNum=i-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=i;var t,n=this.layers.length;for(this.completeLayers||this.checkLayers(i),t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(i-this.layers[t].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(i){var e=this.elements;if(!(e[i]||this.layers[i].ty===99)){var t=this.createItem(this.layers[i],this,this.globalData);e[i]=t,t.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var i=this.pendingElements.pop();i.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var i,e=15;for(i=0;i<e;i+=1){var t=new CanvasContext;this.stack[i]=t}this._length=e,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var i=this._length*2,e=0;for(e=this._length;e<i;e+=1)this.stack[e]=new CanvasContext;this._length=i},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(i){this.cArrPos-=1;var e=this.stack[this.cArrPos],t=e.transform,n,r=this.cTr.props;for(n=0;n<16;n+=1)r[n]=t[n];if(i){this.nativeContext.restore();var s=this.stack[this.cArrPos+1];this.appliedFillStyle=s.fillStyle,this.appliedStrokeStyle=s.strokeStyle,this.appliedLineWidth=s.lineWidth,this.appliedLineCap=s.lineCap,this.appliedLineJoin=s.lineJoin,this.appliedMiterLimit=s.miterLimit}this.nativeContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13]),(i||e.opacity!==-1&&this.currentOpacity!==e.opacity)&&(this.nativeContext.globalAlpha=e.opacity,this.currentOpacity=e.opacity),this.currentFillStyle=e.fillStyle,this.currentStrokeStyle=e.strokeStyle,this.currentLineWidth=e.lineWidth,this.currentLineCap=e.lineCap,this.currentLineJoin=e.lineJoin,this.currentMiterLimit=e.miterLimit},CVContextData.prototype.save=function(i){i&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var t=this.stack[this.cArrPos],n;for(n=0;n<16;n+=1)t.transform[n]=e[n];this.cArrPos+=1;var r=this.stack[this.cArrPos];r.opacity=t.opacity,r.fillStyle=t.fillStyle,r.strokeStyle=t.strokeStyle,r.lineWidth=t.lineWidth,r.lineCap=t.lineCap,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit},CVContextData.prototype.setOpacity=function(i){this.stack[this.cArrPos].opacity=i},CVContextData.prototype.setContext=function(i){this.nativeContext=i},CVContextData.prototype.fillStyle=function(i){this.stack[this.cArrPos].fillStyle!==i&&(this.currentFillStyle=i,this.stack[this.cArrPos].fillStyle=i)},CVContextData.prototype.strokeStyle=function(i){this.stack[this.cArrPos].strokeStyle!==i&&(this.currentStrokeStyle=i,this.stack[this.cArrPos].strokeStyle=i)},CVContextData.prototype.lineWidth=function(i){this.stack[this.cArrPos].lineWidth!==i&&(this.currentLineWidth=i,this.stack[this.cArrPos].lineWidth=i)},CVContextData.prototype.lineCap=function(i){this.stack[this.cArrPos].lineCap!==i&&(this.currentLineCap=i,this.stack[this.cArrPos].lineCap=i)},CVContextData.prototype.lineJoin=function(i){this.stack[this.cArrPos].lineJoin!==i&&(this.currentLineJoin=i,this.stack[this.cArrPos].lineJoin=i)},CVContextData.prototype.miterLimit=function(i){this.stack[this.cArrPos].miterLimit!==i&&(this.currentMiterLimit=i,this.stack[this.cArrPos].miterLimit=i)},CVContextData.prototype.transform=function(i){this.transformMat.cloneFromProps(i);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var t=e.props;this.nativeContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13])},CVContextData.prototype.opacity=function(i){var e=this.stack[this.cArrPos].opacity;e*=i<0?0:i,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==i&&(this.nativeContext.globalAlpha=i,this.currentOpacity=i),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(i){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(i)},CVContextData.prototype.fillRect=function(i,e,t,n){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(i,e,t,n)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(i,e,t){this.completeLayers=!1,this.layers=i.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(i,e,t),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var i=this.canvasContext;i.beginPath(),i.moveTo(0,0),i.lineTo(this.data.w,0),i.lineTo(this.data.w,this.data.h),i.lineTo(0,this.data.h),i.lineTo(0,0),i.clip();var e,t=this.layers.length;for(e=t-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var i,e=this.layers.length;for(i=e-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(i){return new CVCompElement(i,this.globalData,this)};function CanvasRenderer(i,e){this.animationItem=i,this.renderConfig={clearCanvas:e&&e.clearCanvas!==void 0?e.clearCanvas:!0,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(i){return new CVCompElement(i,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();e.transform=t,e.webkitTransform=t}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(i,e,t){this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var i;this.data.hasMask?(i=createNS("rect"),i.setAttribute("width",this.data.sw),i.setAttribute("height",this.data.sh),i.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(i=createTag("div"),i.style.width=this.data.sw+"px",i.style.height=this.data.sh+"px",i.style.backgroundColor=this.data.sc),this.layerElement.appendChild(i)};function HShapeElement(i,e,t){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(i,e,t),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var i;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),i=this.svgElement;else{i=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;i.setAttribute("width",e.w),i.setAttribute("height",e.h),i.appendChild(this.shapesContainer),this.layerElement.appendChild(i)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=i},HShapeElement.prototype.getTransformedPoint=function(i,e){var t,n=i.length;for(t=0;t<n;t+=1)e=i[t].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(i,e){var t=i.sh.v,n=i.transformers,r,s=t._length,o,l,u,d;if(!(s<=1)){for(r=0;r<s-1;r+=1)o=this.getTransformedPoint(n,t.v[r]),l=this.getTransformedPoint(n,t.o[r]),u=this.getTransformedPoint(n,t.i[r+1]),d=this.getTransformedPoint(n,t.v[r+1]),this.checkBounds(o,l,u,d,e);t.c&&(o=this.getTransformedPoint(n,t.v[r]),l=this.getTransformedPoint(n,t.o[r]),u=this.getTransformedPoint(n,t.i[0]),d=this.getTransformedPoint(n,t.v[0]),this.checkBounds(o,l,u,d,e))}},HShapeElement.prototype.checkBounds=function(i,e,t,n,r){this.getBoundsOfCurve(i,e,t,n);var s=this.shapeBoundingBox;r.x=bmMin(s.left,r.x),r.xMax=bmMax(s.right,r.xMax),r.y=bmMin(s.top,r.y),r.yMax=bmMax(s.bottom,r.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(i,e,t,n){for(var r=[[i[0],n[0]],[i[1],n[1]]],s,o,l,u,d,p,g,m=0;m<2;++m)o=6*i[m]-12*e[m]+6*t[m],s=-3*i[m]+9*e[m]-9*t[m]+3*n[m],l=3*e[m]-3*i[m],o|=0,s|=0,l|=0,s===0&&o===0||(s===0?(u=-l/o,u>0&&u<1&&r[m].push(this.calculateF(u,i,e,t,n,m))):(d=o*o-4*l*s,d>=0&&(p=(-o+bmSqrt(d))/(2*s),p>0&&p<1&&r[m].push(this.calculateF(p,i,e,t,n,m)),g=(-o-bmSqrt(d))/(2*s),g>0&&g<1&&r[m].push(this.calculateF(g,i,e,t,n,m)))));this.shapeBoundingBox.left=bmMin.apply(null,r[0]),this.shapeBoundingBox.top=bmMin.apply(null,r[1]),this.shapeBoundingBox.right=bmMax.apply(null,r[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,r[1])},HShapeElement.prototype.calculateF=function(i,e,t,n,r,s){return bmPow(1-i,3)*e[s]+3*bmPow(1-i,2)*i*t[s]+3*(1-i)*bmPow(i,2)*n[s]+bmPow(i,3)*r[s]},HShapeElement.prototype.calculateBoundingBox=function(i,e){var t,n=i.length;for(t=0;t<n;t+=1)i[t]&&i[t].sh?this.calculateShapeBoundingBox(i[t],e):i[t]&&i[t].it?this.calculateBoundingBox(i[t].it,e):i[t]&&i[t].style&&i[t].w&&this.expandStrokeBoundingBox(i[t].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(i,e){var t=0;if(i.keyframes){for(var n=0;n<i.keyframes.length;n+=1){var r=i.keyframes[n].s;r>t&&(t=r)}t*=i.mult}else t=i.v*i.mult;e.x-=t,e.xMax+=t,e.y-=t,e.yMax+=t},HShapeElement.prototype.currentBoxContains=function(i){return this.currentBBox.x<=i.x&&this.currentBBox.y<=i.y&&this.currentBBox.width+this.currentBBox.x>=i.x+i.width&&this.currentBBox.height+this.currentBBox.y>=i.y+i.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var i=this.tempBoundingBox,e=999999;if(i.x=e,i.xMax=-e,i.y=e,i.yMax=-e,this.calculateBoundingBox(this.itemsData,i),i.width=i.xMax<i.x?0:i.xMax-i.x,i.height=i.yMax<i.y?0:i.yMax-i.y,this.currentBoxContains(i))return;var t=!1;if(this.currentBBox.w!==i.width&&(this.currentBBox.w=i.width,this.shapeCont.setAttribute("width",i.width),t=!0),this.currentBBox.h!==i.height&&(this.currentBBox.h=i.height,this.shapeCont.setAttribute("height",i.height),t=!0),t||this.currentBBox.x!==i.x||this.currentBBox.y!==i.y){this.currentBBox.w=i.width,this.currentBBox.h=i.height,this.currentBBox.x=i.x,this.currentBBox.y=i.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var n=this.shapeCont.style,r="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";n.transform=r,n.webkitTransform=r}}};function HTextElement(i,e,t){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var i=createNS("g");this.maskedElement.appendChild(i),this.innerElem=i}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i.l?i.l.length:0);var e=this.innerElem.style,t=i.fc?this.buildColor(i.fc):"rgba(0,0,0,0)";e.fill=t,e.color=t,i.sc&&(e.stroke=this.buildColor(i.sc),e.strokeWidth=i.sw+"px");var n=this.globalData.fontManager.getFontByName(i.f);if(!this.globalData.fontManager.chars)if(e.fontSize=i.finalSize+"px",e.lineHeight=i.finalSize+"px",n.fClass)this.innerElem.className=n.fClass;else{e.fontFamily=n.fFamily;var r=i.fWeight,s=i.fStyle;e.fontStyle=s,e.fontWeight=r}var o,l,u=i.l;l=u.length;var d,p,g,m=this.mHelper,y,_="",E=0;for(o=0;o<l;o+=1){if(this.globalData.fontManager.chars?(this.textPaths[E]?d=this.textPaths[E]:(d=createNS("path"),d.setAttribute("stroke-linecap",lineCapEnum[1]),d.setAttribute("stroke-linejoin",lineJoinEnum[2]),d.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[E]?(p=this.textSpans[E],g=p.children[0]):(p=createTag("div"),p.style.lineHeight=0,g=createNS("svg"),g.appendChild(d),styleDiv(p)))):this.isMasked?d=this.textPaths[E]?this.textPaths[E]:createNS("text"):this.textSpans[E]?(p=this.textSpans[E],d=this.textPaths[E]):(p=createTag("span"),styleDiv(p),d=createTag("span"),styleDiv(d),p.appendChild(d)),this.globalData.fontManager.chars){var S=this.globalData.fontManager.getCharData(i.finalText[o],n.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily),b;if(S?b=S.data:b=null,m.reset(),b&&b.shapes&&b.shapes.length&&(y=b.shapes[0].it,m.scale(i.finalSize/100,i.finalSize/100),_=this.createPathShape(m,y),d.setAttribute("d",_)),this.isMasked)this.innerElem.appendChild(d);else{if(this.innerElem.appendChild(p),b&&b.shapes){document.body.appendChild(g);var C=g.getBBox();g.setAttribute("width",C.width+2),g.setAttribute("height",C.height+2),g.setAttribute("viewBox",C.x-1+" "+(C.y-1)+" "+(C.width+2)+" "+(C.height+2));var T=g.style,A="translate("+(C.x-1)+"px,"+(C.y-1)+"px)";T.transform=A,T.webkitTransform=A,u[o].yOffset=C.y-1}else g.setAttribute("width",1),g.setAttribute("height",1);p.appendChild(g)}}else if(d.textContent=u[o].val,d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(d);else{this.innerElem.appendChild(p);var N=d.style,L="translate3d(0,"+-i.finalSize/1.2+"px,0)";N.transform=L,N.webkitTransform=L}this.isMasked?this.textSpans[E]=d:this.textSpans[E]=p,this.textSpans[E].style.display="block",this.textPaths[E]=d,E+=1}for(;E<this.textSpans.length;)this.textSpans[E].style.display="none",E+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var i;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),i=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";i.transform=e,i.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var t,n,r=0,s=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;n=o.length;var l,u,d;for(t=0;t<n;t+=1)o[t].n?r+=1:(u=this.textSpans[t],d=this.textPaths[t],l=s[r],r+=1,l._mdf.m&&(this.isMasked?u.setAttribute("transform",l.m):(u.style.webkitTransform=l.m,u.style.transform=l.m)),u.style.opacity=l.o,l.sw&&l._mdf.sw&&d.setAttribute("stroke-width",l.sw),l.sc&&l._mdf.sc&&d.setAttribute("stroke",l.sc),l.fc&&l._mdf.fc&&(d.setAttribute("fill",l.fc),d.style.color=l.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var p=this.innerElem.getBBox();this.currentBBox.w!==p.width&&(this.currentBBox.w=p.width,this.svgElement.setAttribute("width",p.width)),this.currentBBox.h!==p.height&&(this.currentBBox.h=p.height,this.svgElement.setAttribute("height",p.height));var g=1;if(this.currentBBox.w!==p.width+g*2||this.currentBBox.h!==p.height+g*2||this.currentBBox.x!==p.x-g||this.currentBBox.y!==p.y-g){this.currentBBox.w=p.width+g*2,this.currentBBox.h=p.height+g*2,this.currentBBox.x=p.x-g,this.currentBBox.y=p.y-g,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),i=this.svgElement.style;var m="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=m,i.webkitTransform=m}}}};function HCameraElement(i,e,t){this.initFrame(),this.initBaseData(i,e,t),this.initHierarchy();var n=PropertyFactory.getProp;if(this.pe=n(this,i.pe,0,0,this),i.ks.p.s?(this.px=n(this,i.ks.p.x,1,0,this),this.py=n(this,i.ks.p.y,1,0,this),this.pz=n(this,i.ks.p.z,1,0,this)):this.p=n(this,i.ks.p,1,0,this),i.ks.a&&(this.a=n(this,i.ks.a,1,0,this)),i.ks.or.k.length&&i.ks.or.k[0].to){var r,s=i.ks.or.k.length;for(r=0;r<s;r+=1)i.ks.or.k[r].to=null,i.ks.or.k[r].ti=null}this.or=n(this,i.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=n(this,i.ks.rx,0,degToRads,this),this.ry=n(this,i.ks.ry,0,degToRads,this),this.rz=n(this,i.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var i,e=this.comp.threeDElements.length,t,n,r;for(i=0;i<e;i+=1)if(t=this.comp.threeDElements[i],t.type==="3d"){n=t.perspectiveElem.style,r=t.container.style;var s=this.pe.v+"px",o="0px 0px 0px",l="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";n.perspective=s,n.webkitPerspective=s,r.transformOrigin=o,r.mozTransformOrigin=o,r.webkitTransformOrigin=o,n.transform=l,n.webkitTransform=l}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var i=this._isFirstFrame,e,t;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)i=this.hierarchy[e].finalTransform.mProp._mdf||i;if(i||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=this.hierarchy.length-1,e=t;e>=0;e-=1){var n=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-n.p.v[0],-n.p.v[1],n.p.v[2]),this.mat.rotateX(-n.or.v[0]).rotateY(-n.or.v[1]).rotateZ(n.or.v[2]),this.mat.rotateX(-n.rx.v).rotateY(-n.ry.v).rotateZ(n.rz.v),this.mat.scale(1/n.s.v[0],1/n.s.v[1],1/n.s.v[2]),this.mat.translate(n.a.v[0],n.a.v[1],n.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var r;this.p?r=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:r=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var s=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)),o=[r[0]/s,r[1]/s,r[2]/s],l=Math.sqrt(o[2]*o[2]+o[0]*o[0]),u=Math.atan2(o[1],l),d=Math.atan2(o[0],-o[2]);this.mat.rotateY(d).rotateX(-u)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var p=!this._prevMat.equals(this.mat);if((p||this.pe._mdf)&&this.comp.threeDElements){t=this.comp.threeDElements.length;var g,m,y;for(e=0;e<t;e+=1)if(g=this.comp.threeDElements[e],g.type==="3d"){if(p){var _=this.mat.toCSS();y=g.container.style,y.transform=_,y.webkitTransform=_}this.pe._mdf&&(m=g.perspectiveElem.style,m.perspective=this.pe.v+"px",m.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(i){this.prepareProperties(i,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(i,e,t){this.assetData=e.getAssetData(i.refId),this.initElement(i,e,t)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var i=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=i,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(i,e){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var i=this.pendingElements.pop();i.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(i,e){var t=i.getBaseElement();if(t){var n=this.layers[e];if(!n.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(t,e);else{for(var r=0,s,o,l;r<e;)this.elements[r]&&this.elements[r]!==!0&&this.elements[r].getBaseElement&&(o=this.elements[r],l=this.layers[r].ddd?this.getThreeDContainerByPos(r):o.getBaseElement(),s=l||s),r+=1;s?(!n.ddd||!this.supports3d)&&this.layerElement.insertBefore(t,s):(!n.ddd||!this.supports3d)&&this.layerElement.appendChild(t)}else this.addTo3dContainer(t,e)}},HybridRendererBase.prototype.createShape=function(i){return this.supports3d?new HShapeElement(i,this.globalData,this):new SVGShapeElement(i,this.globalData,this)},HybridRendererBase.prototype.createText=function(i){return this.supports3d?new HTextElement(i,this.globalData,this):new SVGTextLottieElement(i,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(i){return this.camera=new HCameraElement(i,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(i){return this.supports3d?new HImageElement(i,this.globalData,this):new IImageElement(i,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(i){return this.supports3d?new HSolidElement(i,this.globalData,this):new ISolidElement(i,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(i){for(var e=0,t=this.threeDElements.length;e<t;){if(this.threeDElements[e].startPos<=i&&this.threeDElements[e].endPos>=i)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(i,e){var t=createTag("div"),n,r;styleDiv(t);var s=createTag("div");if(styleDiv(s),e==="3d"){n=t.style,n.width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var o="50% 50%";n.webkitTransformOrigin=o,n.mozTransformOrigin=o,n.transformOrigin=o,r=s.style;var l="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";r.transform=l,r.webkitTransform=l}t.appendChild(s);var u={container:s,perspectiveElem:t,startPos:i,endPos:i,type:e};return this.threeDElements.push(u),u},HybridRendererBase.prototype.build3dContainers=function(){var i,e=this.layers.length,t,n="";for(i=0;i<e;i+=1)this.layers[i].ddd&&this.layers[i].ty!==3?(n!=="3d"&&(n="3d",t=this.createThreeDContainer(i,"3d")),t.endPos=Math.max(t.endPos,i)):(n!=="2d"&&(n="2d",t=this.createThreeDContainer(i,"2d")),t.endPos=Math.max(t.endPos,i));for(e=this.threeDElements.length,i=e-1;i>=0;i-=1)this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(i,e){for(var t=0,n=this.threeDElements.length;t<n;){if(e<=this.threeDElements[t].endPos){for(var r=this.threeDElements[t].startPos,s;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(s=this.elements[r].getBaseElement()),r+=1;s?this.threeDElements[t].container.insertBefore(i,s):this.threeDElements[t].container.appendChild(i);break}t+=1}},HybridRendererBase.prototype.configAnimation=function(i){var e=createTag("div"),t=this.animationItem.wrapper,n=e.style;n.width=i.w+"px",n.height=i.h+"px",this.resizerElem=e,styleDiv(e),n.transformStyle="flat",n.mozTransformStyle="flat",n.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),t.appendChild(e),n.overflow="hidden";var r=createNS("svg");r.setAttribute("width","1"),r.setAttribute("height","1"),styleDiv(r),this.resizerElem.appendChild(r);var s=createNS("defs");r.appendChild(s),this.data=i,this.setupGlobalData(i,r),this.globalData.defs=s,this.layers=i.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var i,e=this.layers?this.layers.length:0;for(i=0;i<e;i+=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var i=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,t=i/e,n=this.globalData.compSize.w/this.globalData.compSize.h,r,s,o,l;n>t?(r=i/this.globalData.compSize.w,s=i/this.globalData.compSize.w,o=0,l=(e-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(r=e/this.globalData.compSize.h,s=e/this.globalData.compSize.h,o=(i-this.globalData.compSize.w*(e/this.globalData.compSize.h))/2,l=0);var u=this.resizerElem.style;u.webkitTransform="matrix3d("+r+",0,0,0,0,"+s+",0,0,0,0,1,0,"+o+","+l+",0,1)",u.transform=u.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var i=this.globalData.compSize.w,e=this.globalData.compSize.h,t,n=this.threeDElements.length;for(t=0;t<n;t+=1){var r=this.threeDElements[t].perspectiveElem.style;r.webkitPerspective=Math.sqrt(Math.pow(i,2)+Math.pow(e,2))+"px",r.perspective=r.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(i){var e,t=i.length,n=createTag("div");for(e=0;e<t;e+=1)if(i[e].xt){var r=this.createComp(i[e],n,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}};function HCompElement(i,e,t){this.layers=i.layers,this.supports3d=!i.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(i,e,t),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(i,e){for(var t=0,n;t<e;)this.elements[t]&&this.elements[t].getBaseElement&&(n=this.elements[t].getBaseElement()),t+=1;n?this.layerElement.insertBefore(i,n):this.layerElement.appendChild(i)},HCompElement.prototype.createComp=function(i){return this.supports3d?new HCompElement(i,this.globalData,this):new SVGCompElement(i,this.globalData,this)};function HybridRenderer(i,e){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(i){return this.supports3d?new HCompElement(i,this.globalData,this):new SVGCompElement(i,this.globalData,this)};var CompExpressionInterface=function(){return function(i){function e(t){for(var n=0,r=i.layers.length;n<r;){if(i.layers[n].nm===t||i.layers[n].ind===t)return i.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(e,"_name",{value:i.data.nm}),e.layer=e,e.pixelAspect=1,e.height=i.data.h||i.globalData.compSize.h,e.width=i.data.w||i.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/i.globalData.frameRate,e.displayStartTime=0,e.numLayers=i.layers.length,e}}();function _typeof$2(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(t){return typeof t}:_typeof$2=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(i)}function seedRandom(i,e){var t=this,n=256,r=6,s=52,o="random",l=e.pow(n,r),u=e.pow(2,s),d=u*2,p=n-1,g;function m(T,A,N){var L=[];A=A===!0?{entropy:!0}:A||{};var k=S(E(A.entropy?[T,C(i)]:T===null?b():T,3),L),j=new y(L),F=function(){for(var q=j.g(r),J=l,ee=0;q<u;)q=(q+ee)*n,J*=n,ee=j.g(1);for(;q>=d;)q/=2,J/=2,ee>>>=1;return(q+ee)/J};return F.int32=function(){return j.g(4)|0},F.quick=function(){return j.g(4)/4294967296},F.double=F,S(C(j.S),i),(A.pass||N||function(U,q,J,ee){return ee&&(ee.S&&_(ee,j),U.state=function(){return _(j,{})}),J?(e[o]=U,q):U})(F,k,"global"in A?A.global:this==e,A.state)}e["seed"+o]=m;function y(T){var A,N=T.length,L=this,k=0,j=L.i=L.j=0,F=L.S=[];for(N||(T=[N++]);k<n;)F[k]=k++;for(k=0;k<n;k++)F[k]=F[j=p&j+T[k%N]+(A=F[k])],F[j]=A;L.g=function(U){for(var q,J=0,ee=L.i,Y=L.j,$=L.S;U--;)q=$[ee=p&ee+1],J=J*n+$[p&($[ee]=$[Y=p&Y+q])+($[Y]=q)];return L.i=ee,L.j=Y,J}}function _(T,A){return A.i=T.i,A.j=T.j,A.S=T.S.slice(),A}function E(T,A){var N=[],L=_typeof$2(T),k;if(A&&L=="object")for(k in T)try{N.push(E(T[k],A-1))}catch{}return N.length?N:L=="string"?T:T+"\0"}function S(T,A){for(var N=T+"",L,k=0;k<N.length;)A[p&k]=p&(L^=A[p&k]*19)+N.charCodeAt(k++);return C(A)}function b(){try{var T=new Uint8Array(n);return(t.crypto||t.msCrypto).getRandomValues(T),C(T)}catch{var A=t.navigator,N=A&&A.plugins;return[+new Date,t,N,t.screen,C(i)]}}function C(T){return String.fromCharCode.apply(0,T)}S(e.random(),i)}function initialize$2(i){seedRandom([],i)}var propTypes={SHAPE:"shape"};function _typeof$1(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(t){return typeof t}:_typeof$1=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(i)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(i){return i.constructor===Array||i.constructor===Float32Array}function isNumerable(i,e){return i==="number"||e instanceof Number||i==="boolean"||i==="string"}function $bm_neg(i){var e=_typeof$1(i);if(e==="number"||i instanceof Number||e==="boolean")return-i;if($bm_isInstanceOfArray(i)){var t,n=i.length,r=[];for(t=0;t<n;t+=1)r[t]=-i[t];return r}return i.propType?i.v:-i}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(i,e){var t=_typeof$1(i),n=_typeof$1(e);if(isNumerable(t,i)&&isNumerable(n,e)||t==="string"||n==="string")return i+e;if($bm_isInstanceOfArray(i)&&isNumerable(n,e))return i=i.slice(0),i[0]+=e,i;if(isNumerable(t,i)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=i+e[0],e;if($bm_isInstanceOfArray(i)&&$bm_isInstanceOfArray(e)){for(var r=0,s=i.length,o=e.length,l=[];r<s||r<o;)(typeof i[r]=="number"||i[r]instanceof Number)&&(typeof e[r]=="number"||e[r]instanceof Number)?l[r]=i[r]+e[r]:l[r]=e[r]===void 0?i[r]:i[r]||e[r],r+=1;return l}return 0}var add=sum;function sub(i,e){var t=_typeof$1(i),n=_typeof$1(e);if(isNumerable(t,i)&&isNumerable(n,e))return t==="string"&&(i=parseInt(i,10)),n==="string"&&(e=parseInt(e,10)),i-e;if($bm_isInstanceOfArray(i)&&isNumerable(n,e))return i=i.slice(0),i[0]-=e,i;if(isNumerable(t,i)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=i-e[0],e;if($bm_isInstanceOfArray(i)&&$bm_isInstanceOfArray(e)){for(var r=0,s=i.length,o=e.length,l=[];r<s||r<o;)(typeof i[r]=="number"||i[r]instanceof Number)&&(typeof e[r]=="number"||e[r]instanceof Number)?l[r]=i[r]-e[r]:l[r]=e[r]===void 0?i[r]:i[r]||e[r],r+=1;return l}return 0}function mul(i,e){var t=_typeof$1(i),n=_typeof$1(e),r;if(isNumerable(t,i)&&isNumerable(n,e))return i*e;var s,o;if($bm_isInstanceOfArray(i)&&isNumerable(n,e)){for(o=i.length,r=createTypedArray("float32",o),s=0;s<o;s+=1)r[s]=i[s]*e;return r}if(isNumerable(t,i)&&$bm_isInstanceOfArray(e)){for(o=e.length,r=createTypedArray("float32",o),s=0;s<o;s+=1)r[s]=i*e[s];return r}return 0}function div(i,e){var t=_typeof$1(i),n=_typeof$1(e),r;if(isNumerable(t,i)&&isNumerable(n,e))return i/e;var s,o;if($bm_isInstanceOfArray(i)&&isNumerable(n,e)){for(o=i.length,r=createTypedArray("float32",o),s=0;s<o;s+=1)r[s]=i[s]/e;return r}if(isNumerable(t,i)&&$bm_isInstanceOfArray(e)){for(o=e.length,r=createTypedArray("float32",o),s=0;s<o;s+=1)r[s]=i/e[s];return r}return 0}function mod(i,e){return typeof i=="string"&&(i=parseInt(i,10)),typeof e=="string"&&(e=parseInt(e,10)),i%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(i,e,t){if(e>t){var n=t;t=e,e=n}return Math.min(Math.max(i,e),t)}function radiansToDegrees(i){return i/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(i){return i*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(i,e){if(typeof i=="number"||i instanceof Number)return e=e||0,Math.abs(i-e);e||(e=helperLengthArray);var t,n=Math.min(i.length,e.length),r=0;for(t=0;t<n;t+=1)r+=Math.pow(e[t]-i[t],2);return Math.sqrt(r)}function normalize(i){return div(i,length(i))}function rgbToHsl(i){var e=i[0],t=i[1],n=i[2],r=Math.max(e,t,n),s=Math.min(e,t,n),o,l,u=(r+s)/2;if(r===s)o=0,l=0;else{var d=r-s;switch(l=u>.5?d/(2-r-s):d/(r+s),r){case e:o=(t-n)/d+(t<n?6:0);break;case t:o=(n-e)/d+2;break;case n:o=(e-t)/d+4;break}o/=6}return[o,l,u,i[3]]}function hue2rgb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function hslToRgb(i){var e=i[0],t=i[1],n=i[2],r,s,o;if(t===0)r=n,o=n,s=n;else{var l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;r=hue2rgb(u,l,e+1/3),s=hue2rgb(u,l,e),o=hue2rgb(u,l,e-1/3)}return[r,s,o,i[3]]}function linear(i,e,t,n,r){if((n===void 0||r===void 0)&&(n=e,r=t,e=0,t=1),t<e){var s=t;t=e,e=s}if(i<=e)return n;if(i>=t)return r;var o=t===e?0:(i-e)/(t-e);if(!n.length)return n+(r-n)*o;var l,u=n.length,d=createTypedArray("float32",u);for(l=0;l<u;l+=1)d[l]=n[l]+(r[l]-n[l])*o;return d}function random(i,e){if(e===void 0&&(i===void 0?(i=0,e=1):(e=i,i=void 0)),e.length){var t,n=e.length;i||(i=createTypedArray("float32",n));var r=createTypedArray("float32",n),s=BMMath.random();for(t=0;t<n;t+=1)r[t]=i[t]+s*(e[t]-i[t]);return r}i===void 0&&(i=0);var o=BMMath.random();return i+o*(e-i)}function createPath(i,e,t,n){var r,s=i.length,o=shapePool.newElement();o.setPathData(!!n,s);var l=[0,0],u,d;for(r=0;r<s;r+=1)u=e&&e[r]?e[r]:l,d=t&&t[r]?t[r]:l,o.setTripleAt(i[r][0],i[r][1],d[0]+i[r][0],d[1]+i[r][1],u[0]+i[r][0],u[1]+i[r][1],r,!0);return o}function initiateExpression(elem,data,property){function noOp(i){return i}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function i(e,t){var n,r,s=this.pv.length?this.pv.length:1,o=createTypedArray("float32",s);e=5;var l=Math.floor(time*e);for(n=0,r=0;n<l;){for(r=0;r<s;r+=1)o[r]+=-t+t*2*BMMath.random();n+=1}var u=time*e,d=u-Math.floor(u),p=createTypedArray("float32",s);if(s>1){for(r=0;r<s;r+=1)p[r]=this.pv[r]+o[r]+(-t+t*2*BMMath.random())*d;return p}return this.pv+o[0]+(-t+t*2*BMMath.random())*d}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(i,e){return loopIn(i,e,!0)}function loopOutDuration(i,e){return loopOut(i,e,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(i,e){var t=[e[0]-i[0],e[1]-i[1],e[2]-i[2]],n=Math.atan2(t[0],Math.sqrt(t[1]*t[1]+t[2]*t[2]))/degToRads,r=-Math.atan2(t[1],t[2])/degToRads;return[r,n,0]}function easeOut(i,e,t,n,r){return applyEase(easeOutBez,i,e,t,n,r)}function easeIn(i,e,t,n,r){return applyEase(easeInBez,i,e,t,n,r)}function ease(i,e,t,n,r){return applyEase(easeInOutBez,i,e,t,n,r)}function applyEase(i,e,t,n,r,s){r===void 0?(r=t,s=n):e=(e-t)/(n-t),e>1?e=1:e<0&&(e=0);var o=i(e);if($bm_isInstanceOfArray(r)){var l,u=r.length,d=createTypedArray("float32",u);for(l=0;l<u;l+=1)d[l]=(s[l]-r[l])*o+r[l];return d}return(s-r)*o+r}function nearestKey(i){var e,t=data.k.length,n,r;if(!data.k.length||typeof data.k[0]=="number")n=0,r=0;else if(n=-1,i*=elem.comp.globalData.frameRate,i<data.k[0].t)n=1,r=data.k[0].t;else{for(e=0;e<t-1;e+=1)if(i===data.k[e].t){n=e+1,r=data.k[e].t;break}else if(i>data.k[e].t&&i<data.k[e+1].t){i-data.k[e].t>data.k[e+1].t-i?(n=e+2,r=data.k[e+1].t):(n=e+1,r=data.k[e].t);break}n===-1&&(n=e+1,r=data.k[e].t)}var s={};return s.index=n,s.time=r/elem.comp.globalData.frameRate,s}function key(i){var e,t,n;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+i);i-=1,e={time:data.k[i].t/elem.comp.globalData.frameRate,value:[]};var r=Object.prototype.hasOwnProperty.call(data.k[i],"s")?data.k[i].s:data.k[i-1].e;for(n=r.length,t=0;t<n;t+=1)e[t]=r[t],e.value[t]=r[t];return e}function framesToTime(i,e){return e||(e=elem.comp.globalData.frameRate),i/e}function timeToFrames(i,e){return!i&&i!==0&&(i=time),e||(e=elem.comp.globalData.frameRate),i*e}function seedRandom(i){BMMath.seedrandom(randSeed+i)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(i,e){return typeof value=="string"?e===void 0?value.substring(i):value.substring(i,e):""}function substr(i,e){return typeof value=="string"?e===void 0?value.substr(i):value.substr(i,e):""}function posterizeTime(i){time=i===0?0:Math.floor(time*i)/i,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(i){return value=i,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var i={};i.initExpressions=e,i.resetFrame=ExpressionManager.resetFrame;function e(t){var n=0,r=[];function s(){n+=1}function o(){n-=1,n===0&&u()}function l(d){r.indexOf(d)===-1&&r.push(d)}function u(){var d,p=r.length;for(d=0;d<p;d+=1)r[d].release();r.length=0}t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=s,t.renderer.globalData.popExpression=o,t.renderer.globalData.registerExpressionProperty=l}return i}(),MaskManagerInterface=function(){function i(t,n){this._mask=t,this._data=n}Object.defineProperty(i.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(i.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var e=function(n){var r=createSizedArray(n.viewData.length),s,o=n.viewData.length;for(s=0;s<o;s+=1)r[s]=new i(n.viewData[s],n.masksProperties[s]);var l=function(d){for(s=0;s<o;){if(n.masksProperties[s].nm===d)return r[s];s+=1}return null};return l};return e}(),ExpressionPropertyInterface=function(){var i={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function t(o,l,u){Object.defineProperty(o,"velocity",{get:function(){return l.getVelocityAtTime(l.comp.currentFrame)}}),o.numKeys=l.keyframes?l.keyframes.length:0,o.key=function(d){if(!o.numKeys)return 0;var p="";"s"in l.keyframes[d-1]?p=l.keyframes[d-1].s:"e"in l.keyframes[d-2]?p=l.keyframes[d-2].e:p=l.keyframes[d-2].s;var g=u==="unidimensional"?new Number(p):Object.assign({},p);return g.time=l.keyframes[d-1].t/l.elem.comp.globalData.frameRate,g.value=u==="unidimensional"?p[0]:p,g},o.valueAtTime=l.getValueAtTime,o.speedAtTime=l.getSpeedAtTime,o.velocityAtTime=l.getVelocityAtTime,o.propertyGroup=l.propertyGroup}function n(o){(!o||!("pv"in o))&&(o=i);var l=1/o.mult,u=o.pv*l,d=new Number(u);return d.value=u,t(d,o,"unidimensional"),function(){return o.k&&o.getValue(),u=o.v*l,d.value!==u&&(d=new Number(u),d.value=u,t(d,o,"unidimensional")),d}}function r(o){(!o||!("pv"in o))&&(o=e);var l=1/o.mult,u=o.data&&o.data.l||o.pv.length,d=createTypedArray("float32",u),p=createTypedArray("float32",u);return d.value=p,t(d,o,"multidimensional"),function(){o.k&&o.getValue();for(var g=0;g<u;g+=1)p[g]=o.v[g]*l,d[g]=p[g];return d}}function s(){return i}return function(o){return o?o.propType==="unidimensional"?n(o):r(o):s}}(),TransformExpressionInterface=function(){return function(i){function e(o){switch(o){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(i.r||i.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(i.rz||i.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(i.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(i.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(i.s)});var t,n,r,s;return i.p?s=ExpressionPropertyInterface(i.p):(t=ExpressionPropertyInterface(i.px),n=ExpressionPropertyInterface(i.py),i.pz&&(r=ExpressionPropertyInterface(i.pz))),Object.defineProperty(e,"position",{get:function(){return i.p?s():[t(),n(),r?r():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(i.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(i.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(i.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(i.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(i.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(i.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(i.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(i.or)}),e}}(),LayerExpressionInterface=function(){function i(d){var p=new Matrix;if(d!==void 0){var g=this._elem.finalTransform.mProp.getValueAtTime(d);g.clone(p)}else{var m=this._elem.finalTransform.mProp;m.applyToMatrix(p)}return p}function e(d,p){var g=this.getMatrix(p);return g.props[12]=0,g.props[13]=0,g.props[14]=0,this.applyPoint(g,d)}function t(d,p){var g=this.getMatrix(p);return this.applyPoint(g,d)}function n(d,p){var g=this.getMatrix(p);return g.props[12]=0,g.props[13]=0,g.props[14]=0,this.invertPoint(g,d)}function r(d,p){var g=this.getMatrix(p);return this.invertPoint(g,d)}function s(d,p){if(this._elem.hierarchy&&this._elem.hierarchy.length){var g,m=this._elem.hierarchy.length;for(g=0;g<m;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(d)}return d.applyToPointArray(p[0],p[1],p[2]||0)}function o(d,p){if(this._elem.hierarchy&&this._elem.hierarchy.length){var g,m=this._elem.hierarchy.length;for(g=0;g<m;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(d)}return d.inversePoint(p)}function l(d){var p=new Matrix;if(p.reset(),this._elem.finalTransform.mProp.applyToMatrix(p),this._elem.hierarchy&&this._elem.hierarchy.length){var g,m=this._elem.hierarchy.length;for(g=0;g<m;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(p);return p.inversePoint(d)}return p.inversePoint(d)}function u(){return[1,1,1,1]}return function(d){var p;function g(E){y.mask=new MaskManagerInterface(E,d)}function m(E){y.effect=E}function y(E){switch(E){case"ADBE Root Vectors Group":case"Contents":case 2:return y.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return p;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return y.effect;case"ADBE Text Properties":return y.textInterface;default:return null}}y.getMatrix=i,y.invertPoint=o,y.applyPoint=s,y.toWorld=t,y.toWorldVec=e,y.fromWorld=r,y.fromWorldVec=n,y.toComp=t,y.fromComp=l,y.sampleImage=u,y.sourceRectAtTime=d.sourceRectAtTime.bind(d),y._elem=d,p=TransformExpressionInterface(d.finalTransform.mProp);var _=getDescriptor(p,"anchorPoint");return Object.defineProperties(y,{hasParent:{get:function(){return d.hierarchy.length}},parent:{get:function(){return d.hierarchy[0].layerInterface}},rotation:getDescriptor(p,"rotation"),scale:getDescriptor(p,"scale"),position:getDescriptor(p,"position"),opacity:getDescriptor(p,"opacity"),anchorPoint:_,anchor_point:_,transform:{get:function(){return p}},active:{get:function(){return d.isInRange}}}),y.startTime=d.data.st,y.index=d.data.ind,y.source=d.data.refId,y.height=d.data.ty===0?d.data.h:100,y.width=d.data.ty===0?d.data.w:100,y.inPoint=d.data.ip/d.comp.globalData.frameRate,y.outPoint=d.data.op/d.comp.globalData.frameRate,y._name=d.data.nm,y.registerMaskInterface=g,y.registerEffectsInterface=m,y}}(),propertyGroupFactory=function(){return function(i,e){return function(t){return t=t===void 0?1:t,t<=0?i:e(t-1)}}}(),PropertyInterface=function(){return function(i,e){var t={_name:i};function n(r){return r=r===void 0?1:r,r<=0?t:e(r-1)}return n}}(),EffectsExpressionInterface=function(){var i={createEffectsInterface:e};function e(r,s){if(r.effectsManager){var o=[],l=r.data.ef,u,d=r.effectsManager.effectElements.length;for(u=0;u<d;u+=1)o.push(t(l[u],r.effectsManager.effectElements[u],s,r));var p=r.data.ef||[],g=function(y){for(u=0,d=p.length;u<d;){if(y===p[u].nm||y===p[u].mn||y===p[u].ix)return o[u];u+=1}return null};return Object.defineProperty(g,"numProperties",{get:function(){return p.length}}),g}return null}function t(r,s,o,l){function u(y){for(var _=r.ef,E=0,S=_.length;E<S;){if(y===_[E].nm||y===_[E].mn||y===_[E].ix)return _[E].ty===5?p[E]:p[E]();E+=1}throw new Error}var d=propertyGroupFactory(u,o),p=[],g,m=r.ef.length;for(g=0;g<m;g+=1)r.ef[g].ty===5?p.push(t(r.ef[g],s.effectElements[g],s.effectElements[g].propertyGroup,l)):p.push(n(s.effectElements[g],r.ef[g].ty,l,d));return r.mn==="ADBE Color Control"&&Object.defineProperty(u,"color",{get:function(){return p[0]()}}),Object.defineProperties(u,{numProperties:{get:function(){return r.np}},_name:{value:r.nm},propertyGroup:{value:d}}),u.enabled=r.en!==0,u.active=u.enabled,u}function n(r,s,o,l){var u=ExpressionPropertyInterface(r.p);function d(){return s===10?o.comp.compInterface(r.p.v):u()}return r.p.setGroupProperty&&r.p.setGroupProperty(PropertyInterface("",l)),d}return i}(),ShapePathInterface=function(){return function(e,t,n){var r=t.sh;function s(l){return l==="Shape"||l==="shape"||l==="Path"||l==="path"||l==="ADBE Vector Shape"||l===2?s.path:null}var o=propertyGroupFactory(s,n);return r.setGroupProperty(PropertyInterface("Path",o)),Object.defineProperties(s,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:n}}),s}}(),ShapeExpressionInterface=function(){function i(_,E,S){var b=[],C,T=_?_.length:0;for(C=0;C<T;C+=1)_[C].ty==="gr"?b.push(t(_[C],E[C],S)):_[C].ty==="fl"?b.push(n(_[C],E[C],S)):_[C].ty==="st"?b.push(o(_[C],E[C],S)):_[C].ty==="tm"?b.push(l(_[C],E[C],S)):_[C].ty==="tr"||(_[C].ty==="el"?b.push(d(_[C],E[C],S)):_[C].ty==="sr"?b.push(p(_[C],E[C],S)):_[C].ty==="sh"?b.push(ShapePathInterface(_[C],E[C],S)):_[C].ty==="rc"?b.push(g(_[C],E[C],S)):_[C].ty==="rd"?b.push(m(_[C],E[C],S)):_[C].ty==="rp"?b.push(y(_[C],E[C],S)):_[C].ty==="gf"?b.push(r(_[C],E[C],S)):b.push(s(_[C],E[C])));return b}function e(_,E,S){var b,C=function(N){for(var L=0,k=b.length;L<k;){if(b[L]._name===N||b[L].mn===N||b[L].propertyIndex===N||b[L].ix===N||b[L].ind===N)return b[L];L+=1}return typeof N=="number"?b[N-1]:null};C.propertyGroup=propertyGroupFactory(C,S),b=i(_.it,E.it,C.propertyGroup),C.numProperties=b.length;var T=u(_.it[_.it.length-1],E.it[E.it.length-1],C.propertyGroup);return C.transform=T,C.propertyIndex=_.cix,C._name=_.nm,C}function t(_,E,S){var b=function(N){switch(N){case"ADBE Vectors Group":case"Contents":case 2:return b.content;default:return b.transform}};b.propertyGroup=propertyGroupFactory(b,S);var C=e(_,E,b.propertyGroup),T=u(_.it[_.it.length-1],E.it[E.it.length-1],b.propertyGroup);return b.content=C,b.transform=T,Object.defineProperty(b,"_name",{get:function(){return _.nm}}),b.numProperties=_.np,b.propertyIndex=_.ix,b.nm=_.nm,b.mn=_.mn,b}function n(_,E,S){function b(C){return C==="Color"||C==="color"?b.color:C==="Opacity"||C==="opacity"?b.opacity:null}return Object.defineProperties(b,{color:{get:ExpressionPropertyInterface(E.c)},opacity:{get:ExpressionPropertyInterface(E.o)},_name:{value:_.nm},mn:{value:_.mn}}),E.c.setGroupProperty(PropertyInterface("Color",S)),E.o.setGroupProperty(PropertyInterface("Opacity",S)),b}function r(_,E,S){function b(C){return C==="Start Point"||C==="start point"?b.startPoint:C==="End Point"||C==="end point"?b.endPoint:C==="Opacity"||C==="opacity"?b.opacity:null}return Object.defineProperties(b,{startPoint:{get:ExpressionPropertyInterface(E.s)},endPoint:{get:ExpressionPropertyInterface(E.e)},opacity:{get:ExpressionPropertyInterface(E.o)},type:{get:function(){return"a"}},_name:{value:_.nm},mn:{value:_.mn}}),E.s.setGroupProperty(PropertyInterface("Start Point",S)),E.e.setGroupProperty(PropertyInterface("End Point",S)),E.o.setGroupProperty(PropertyInterface("Opacity",S)),b}function s(){function _(){return null}return _}function o(_,E,S){var b=propertyGroupFactory(k,S),C=propertyGroupFactory(L,b);function T(j){Object.defineProperty(L,_.d[j].nm,{get:ExpressionPropertyInterface(E.d.dataProps[j].p)})}var A,N=_.d?_.d.length:0,L={};for(A=0;A<N;A+=1)T(A),E.d.dataProps[A].p.setGroupProperty(C);function k(j){return j==="Color"||j==="color"?k.color:j==="Opacity"||j==="opacity"?k.opacity:j==="Stroke Width"||j==="stroke width"?k.strokeWidth:null}return Object.defineProperties(k,{color:{get:ExpressionPropertyInterface(E.c)},opacity:{get:ExpressionPropertyInterface(E.o)},strokeWidth:{get:ExpressionPropertyInterface(E.w)},dash:{get:function(){return L}},_name:{value:_.nm},mn:{value:_.mn}}),E.c.setGroupProperty(PropertyInterface("Color",b)),E.o.setGroupProperty(PropertyInterface("Opacity",b)),E.w.setGroupProperty(PropertyInterface("Stroke Width",b)),k}function l(_,E,S){function b(T){return T===_.e.ix||T==="End"||T==="end"?b.end:T===_.s.ix?b.start:T===_.o.ix?b.offset:null}var C=propertyGroupFactory(b,S);return b.propertyIndex=_.ix,E.s.setGroupProperty(PropertyInterface("Start",C)),E.e.setGroupProperty(PropertyInterface("End",C)),E.o.setGroupProperty(PropertyInterface("Offset",C)),b.propertyIndex=_.ix,b.propertyGroup=S,Object.defineProperties(b,{start:{get:ExpressionPropertyInterface(E.s)},end:{get:ExpressionPropertyInterface(E.e)},offset:{get:ExpressionPropertyInterface(E.o)},_name:{value:_.nm}}),b.mn=_.mn,b}function u(_,E,S){function b(T){return _.a.ix===T||T==="Anchor Point"?b.anchorPoint:_.o.ix===T||T==="Opacity"?b.opacity:_.p.ix===T||T==="Position"?b.position:_.r.ix===T||T==="Rotation"||T==="ADBE Vector Rotation"?b.rotation:_.s.ix===T||T==="Scale"?b.scale:_.sk&&_.sk.ix===T||T==="Skew"?b.skew:_.sa&&_.sa.ix===T||T==="Skew Axis"?b.skewAxis:null}var C=propertyGroupFactory(b,S);return E.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",C)),E.transform.mProps.p.setGroupProperty(PropertyInterface("Position",C)),E.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",C)),E.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",C)),E.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",C)),E.transform.mProps.sk&&(E.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",C)),E.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",C))),E.transform.op.setGroupProperty(PropertyInterface("Opacity",C)),Object.defineProperties(b,{opacity:{get:ExpressionPropertyInterface(E.transform.mProps.o)},position:{get:ExpressionPropertyInterface(E.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(E.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(E.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(E.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(E.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(E.transform.mProps.sa)},_name:{value:_.nm}}),b.ty="tr",b.mn=_.mn,b.propertyGroup=S,b}function d(_,E,S){function b(A){return _.p.ix===A?b.position:_.s.ix===A?b.size:null}var C=propertyGroupFactory(b,S);b.propertyIndex=_.ix;var T=E.sh.ty==="tm"?E.sh.prop:E.sh;return T.s.setGroupProperty(PropertyInterface("Size",C)),T.p.setGroupProperty(PropertyInterface("Position",C)),Object.defineProperties(b,{size:{get:ExpressionPropertyInterface(T.s)},position:{get:ExpressionPropertyInterface(T.p)},_name:{value:_.nm}}),b.mn=_.mn,b}function p(_,E,S){function b(A){return _.p.ix===A?b.position:_.r.ix===A?b.rotation:_.pt.ix===A?b.points:_.or.ix===A||A==="ADBE Vector Star Outer Radius"?b.outerRadius:_.os.ix===A?b.outerRoundness:_.ir&&(_.ir.ix===A||A==="ADBE Vector Star Inner Radius")?b.innerRadius:_.is&&_.is.ix===A?b.innerRoundness:null}var C=propertyGroupFactory(b,S),T=E.sh.ty==="tm"?E.sh.prop:E.sh;return b.propertyIndex=_.ix,T.or.setGroupProperty(PropertyInterface("Outer Radius",C)),T.os.setGroupProperty(PropertyInterface("Outer Roundness",C)),T.pt.setGroupProperty(PropertyInterface("Points",C)),T.p.setGroupProperty(PropertyInterface("Position",C)),T.r.setGroupProperty(PropertyInterface("Rotation",C)),_.ir&&(T.ir.setGroupProperty(PropertyInterface("Inner Radius",C)),T.is.setGroupProperty(PropertyInterface("Inner Roundness",C))),Object.defineProperties(b,{position:{get:ExpressionPropertyInterface(T.p)},rotation:{get:ExpressionPropertyInterface(T.r)},points:{get:ExpressionPropertyInterface(T.pt)},outerRadius:{get:ExpressionPropertyInterface(T.or)},outerRoundness:{get:ExpressionPropertyInterface(T.os)},innerRadius:{get:ExpressionPropertyInterface(T.ir)},innerRoundness:{get:ExpressionPropertyInterface(T.is)},_name:{value:_.nm}}),b.mn=_.mn,b}function g(_,E,S){function b(A){return _.p.ix===A?b.position:_.r.ix===A?b.roundness:_.s.ix===A||A==="Size"||A==="ADBE Vector Rect Size"?b.size:null}var C=propertyGroupFactory(b,S),T=E.sh.ty==="tm"?E.sh.prop:E.sh;return b.propertyIndex=_.ix,T.p.setGroupProperty(PropertyInterface("Position",C)),T.s.setGroupProperty(PropertyInterface("Size",C)),T.r.setGroupProperty(PropertyInterface("Rotation",C)),Object.defineProperties(b,{position:{get:ExpressionPropertyInterface(T.p)},roundness:{get:ExpressionPropertyInterface(T.r)},size:{get:ExpressionPropertyInterface(T.s)},_name:{value:_.nm}}),b.mn=_.mn,b}function m(_,E,S){function b(A){return _.r.ix===A||A==="Round Corners 1"?b.radius:null}var C=propertyGroupFactory(b,S),T=E;return b.propertyIndex=_.ix,T.rd.setGroupProperty(PropertyInterface("Radius",C)),Object.defineProperties(b,{radius:{get:ExpressionPropertyInterface(T.rd)},_name:{value:_.nm}}),b.mn=_.mn,b}function y(_,E,S){function b(A){return _.c.ix===A||A==="Copies"?b.copies:_.o.ix===A||A==="Offset"?b.offset:null}var C=propertyGroupFactory(b,S),T=E;return b.propertyIndex=_.ix,T.c.setGroupProperty(PropertyInterface("Copies",C)),T.o.setGroupProperty(PropertyInterface("Offset",C)),Object.defineProperties(b,{copies:{get:ExpressionPropertyInterface(T.c)},offset:{get:ExpressionPropertyInterface(T.o)},_name:{value:_.nm}}),b.mn=_.mn,b}return function(_,E,S){var b;function C(A){if(typeof A=="number")return A=A===void 0?1:A,A===0?S:b[A-1];for(var N=0,L=b.length;N<L;){if(b[N]._name===A)return b[N];N+=1}return null}function T(){return S}return C.propertyGroup=propertyGroupFactory(C,T),b=i(_,E,C.propertyGroup),C.numProperties=b.length,C._name="Contents",C}}(),TextExpressionInterface=function(){return function(i){var e;function t(n){switch(n){case"ADBE Text Document":return t.sourceText;default:return null}}return Object.defineProperty(t,"sourceText",{get:function(){i.textProperty.getValue();var r=i.textProperty.currentData.t;return(!e||r!==e.value)&&(e=new String(r),e.value=r||new String(r),Object.defineProperty(e,"style",{get:function(){return{fillColor:i.textProperty.currentData.fc}}})),e}}),t}}();function _typeof(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(t){return typeof t}:_typeof=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(i)}var FootageInterface=function(){var i=function(n){var r="",s=n.getFootageData();function o(){return r="",s=n.getFootageData(),l}function l(u){if(s[u])return r=u,s=s[u],_typeof(s)==="object"?l:s;var d=u.indexOf(r);if(d!==-1){var p=parseInt(u.substr(d+r.length),10);return s=s[p],_typeof(s)==="object"?l:s}return""}return o},e=function(n){function r(s){return s==="Outline"?r.outlineInterface():null}return r._name="Outline",r.outlineInterface=i(n),r};return function(t){function n(r){return r==="Data"?n.dataInterface:null}return n._name="Data",n.dataInterface=e(t),n}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(i){return interfaces[i]||null}var expressionHelpers=function(){function i(o,l,u){l.x&&(u.k=!0,u.x=!0,u.initiateExpression=ExpressionManager.initiateExpression,u.effectsSequence.push(u.initiateExpression(o,l,u).bind(u)))}function e(o){return o*=this.elem.globalData.frameRate,o-=this.offsetTime,o!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<o?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(o,this._cachingAtTime),this._cachingAtTime.lastFrame=o),this._cachingAtTime.value}function t(o){var l=-.01,u=this.getValueAtTime(o),d=this.getValueAtTime(o+l),p=0;if(u.length){var g;for(g=0;g<u.length;g+=1)p+=Math.pow(d[g]-u[g],2);p=Math.sqrt(p)*100}else p=0;return p}function n(o){if(this.vel!==void 0)return this.vel;var l=-.001,u=this.getValueAtTime(o),d=this.getValueAtTime(o+l),p;if(u.length){p=createTypedArray("float32",u.length);var g;for(g=0;g<u.length;g+=1)p[g]=(d[g]-u[g])/l}else p=(d-u)/l;return p}function r(){return this.pv}function s(o){this.propertyGroup=o}return{searchExpressions:i,getSpeedAtTime:t,getVelocityAtTime:n,getValueAtTime:e,getStaticValueAtTime:r,setGroupProperty:s}}();function addPropertyDecorator(){function i(m,y,_){if(!this.k||!this.keyframes)return this.pv;m=m?m.toLowerCase():"";var E=this.comp.renderedFrame,S=this.keyframes,b=S[S.length-1].t;if(E<=b)return this.pv;var C,T;_?(y?C=Math.abs(b-this.elem.comp.globalData.frameRate*y):C=Math.max(0,b-this.elem.data.ip),T=b-C):((!y||y>S.length-1)&&(y=S.length-1),T=S[S.length-1-y].t,C=b-T);var A,N,L;if(m==="pingpong"){var k=Math.floor((E-T)/C);if(k%2!==0)return this.getValueAtTime((C-(E-T)%C+T)/this.comp.globalData.frameRate,0)}else if(m==="offset"){var j=this.getValueAtTime(T/this.comp.globalData.frameRate,0),F=this.getValueAtTime(b/this.comp.globalData.frameRate,0),U=this.getValueAtTime(((E-T)%C+T)/this.comp.globalData.frameRate,0),q=Math.floor((E-T)/C);if(this.pv.length){for(L=new Array(j.length),N=L.length,A=0;A<N;A+=1)L[A]=(F[A]-j[A])*q+U[A];return L}return(F-j)*q+U}else if(m==="continue"){var J=this.getValueAtTime(b/this.comp.globalData.frameRate,0),ee=this.getValueAtTime((b-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(L=new Array(J.length),N=L.length,A=0;A<N;A+=1)L[A]=J[A]+(J[A]-ee[A])*((E-b)/this.comp.globalData.frameRate)/5e-4;return L}return J+(J-ee)*((E-b)/.001)}return this.getValueAtTime(((E-T)%C+T)/this.comp.globalData.frameRate,0)}function e(m,y,_){if(!this.k)return this.pv;m=m?m.toLowerCase():"";var E=this.comp.renderedFrame,S=this.keyframes,b=S[0].t;if(E>=b)return this.pv;var C,T;_?(y?C=Math.abs(this.elem.comp.globalData.frameRate*y):C=Math.max(0,this.elem.data.op-b),T=b+C):((!y||y>S.length-1)&&(y=S.length-1),T=S[y].t,C=T-b);var A,N,L;if(m==="pingpong"){var k=Math.floor((b-E)/C);if(k%2===0)return this.getValueAtTime(((b-E)%C+b)/this.comp.globalData.frameRate,0)}else if(m==="offset"){var j=this.getValueAtTime(b/this.comp.globalData.frameRate,0),F=this.getValueAtTime(T/this.comp.globalData.frameRate,0),U=this.getValueAtTime((C-(b-E)%C+b)/this.comp.globalData.frameRate,0),q=Math.floor((b-E)/C)+1;if(this.pv.length){for(L=new Array(j.length),N=L.length,A=0;A<N;A+=1)L[A]=U[A]-(F[A]-j[A])*q;return L}return U-(F-j)*q}else if(m==="continue"){var J=this.getValueAtTime(b/this.comp.globalData.frameRate,0),ee=this.getValueAtTime((b+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(L=new Array(J.length),N=L.length,A=0;A<N;A+=1)L[A]=J[A]+(J[A]-ee[A])*(b-E)/.001;return L}return J+(J-ee)*(b-E)/.001}return this.getValueAtTime((C-((b-E)%C+b))/this.comp.globalData.frameRate,0)}function t(m,y){if(!this.k)return this.pv;if(m=(m||.4)*.5,y=Math.floor(y||5),y<=1)return this.pv;var _=this.comp.renderedFrame/this.comp.globalData.frameRate,E=_-m,S=_+m,b=y>1?(S-E)/(y-1):1,C=0,T=0,A;this.pv.length?A=createTypedArray("float32",this.pv.length):A=0;for(var N;C<y;){if(N=this.getValueAtTime(E+C*b),this.pv.length)for(T=0;T<this.pv.length;T+=1)A[T]+=N[T];else A+=N;C+=1}if(this.pv.length)for(T=0;T<this.pv.length;T+=1)A[T]/=y;else A/=y;return A}function n(m){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var y=this._transformCachingAtTime.v;if(y.cloneFromProps(this.pre.props),this.appliedTransformations<1){var _=this.a.getValueAtTime(m);y.translate(-_[0]*this.a.mult,-_[1]*this.a.mult,_[2]*this.a.mult)}if(this.appliedTransformations<2){var E=this.s.getValueAtTime(m);y.scale(E[0]*this.s.mult,E[1]*this.s.mult,E[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var S=this.sk.getValueAtTime(m),b=this.sa.getValueAtTime(m);y.skewFromAxis(-S*this.sk.mult,b*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var C=this.r.getValueAtTime(m);y.rotate(-C*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var T=this.rz.getValueAtTime(m),A=this.ry.getValueAtTime(m),N=this.rx.getValueAtTime(m),L=this.or.getValueAtTime(m);y.rotateZ(-T*this.rz.mult).rotateY(A*this.ry.mult).rotateX(N*this.rx.mult).rotateZ(-L[2]*this.or.mult).rotateY(L[1]*this.or.mult).rotateX(L[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var k=this.px.getValueAtTime(m),j=this.py.getValueAtTime(m);if(this.data.p.z){var F=this.pz.getValueAtTime(m);y.translate(k*this.px.mult,j*this.py.mult,-F*this.pz.mult)}else y.translate(k*this.px.mult,j*this.py.mult,0)}else{var U=this.p.getValueAtTime(m);y.translate(U[0]*this.p.mult,U[1]*this.p.mult,-U[2]*this.p.mult)}return y}function r(){return this.v.clone(new Matrix)}var s=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(m,y,_){var E=s(m,y,_);return E.dynamicProperties.length?E.getValueAtTime=n.bind(E):E.getValueAtTime=r.bind(E),E.setGroupProperty=expressionHelpers.setGroupProperty,E};var o=PropertyFactory.getProp;PropertyFactory.getProp=function(m,y,_,E,S){var b=o(m,y,_,E,S);b.kf?b.getValueAtTime=expressionHelpers.getValueAtTime.bind(b):b.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(b),b.setGroupProperty=expressionHelpers.setGroupProperty,b.loopOut=i,b.loopIn=e,b.smooth=t,b.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(b),b.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(b),b.numKeys=y.a===1?y.k.length:0,b.propertyIndex=y.ix;var C=0;return _!==0&&(C=createTypedArray("float32",y.a===1?y.k[0].s.length:y.k.length)),b._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:C},expressionHelpers.searchExpressions(m,y,b),b.k&&S.addDynamicProperty(b),b};function l(m){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),m*=this.elem.globalData.frameRate,m-=this.offsetTime,m!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<m?this._caching.lastIndex:0,this._cachingAtTime.lastTime=m,this.interpolateShape(m,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var u=ShapePropertyFactory.getConstructorFunction(),d=ShapePropertyFactory.getKeyframedConstructorFunction();function p(){}p.prototype={vertices:function(y,_){this.k&&this.getValue();var E=this.v;_!==void 0&&(E=this.getValueAtTime(_,0));var S,b=E._length,C=E[y],T=E.v,A=createSizedArray(b);for(S=0;S<b;S+=1)y==="i"||y==="o"?A[S]=[C[S][0]-T[S][0],C[S][1]-T[S][1]]:A[S]=[C[S][0],C[S][1]];return A},points:function(y){return this.vertices("v",y)},inTangents:function(y){return this.vertices("i",y)},outTangents:function(y){return this.vertices("o",y)},isClosed:function(){return this.v.c},pointOnPath:function(y,_){var E=this.v;_!==void 0&&(E=this.getValueAtTime(_,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(E));for(var S=this._segmentsLength,b=S.lengths,C=S.totalLength*y,T=0,A=b.length,N=0,L;T<A;){if(N+b[T].addedLength>C){var k=T,j=E.c&&T===A-1?0:T+1,F=(C-N)/b[T].addedLength;L=bez.getPointInSegment(E.v[k],E.v[j],E.o[k],E.i[j],F,b[T]);break}else N+=b[T].addedLength;T+=1}return L||(L=E.c?[E.v[0][0],E.v[0][1]]:[E.v[E._length-1][0],E.v[E._length-1][1]]),L},vectorOnPath:function(y,_,E){y==1?y=this.v.c:y==0&&(y=.999);var S=this.pointOnPath(y,_),b=this.pointOnPath(y+.001,_),C=b[0]-S[0],T=b[1]-S[1],A=Math.sqrt(Math.pow(C,2)+Math.pow(T,2));if(A===0)return[0,0];var N=E==="tangent"?[C/A,T/A]:[-T/A,C/A];return N},tangentOnPath:function(y,_){return this.vectorOnPath(y,_,"tangent")},normalOnPath:function(y,_){return this.vectorOnPath(y,_,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([p],u),extendPrototype([p],d),d.prototype.getValueAtTime=l,d.prototype.initiateExpression=ExpressionManager.initiateExpression;var g=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(m,y,_,E,S){var b=g(m,y,_,E,S);return b.propertyIndex=y.ix,b.lock=!1,_===3?expressionHelpers.searchExpressions(m,y.pt,b):_===4&&expressionHelpers.searchExpressions(m,y.ks,b),b.k&&m.addDynamicProperty(b),b}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function i(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(e,t){var n=this.calculateExpression(t);if(e.t!==n){var r={};return this.copyData(r,e),r.t=n.toString(),r.__complete=!1,r}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=i}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function i(e,t){var n=createNS("feMerge");n.setAttribute("result",e);var r,s;for(s=0;s<t.length;s+=1)r=createNS("feMergeNode"),r.setAttribute("in",t[s]),n.appendChild(r),n.appendChild(r);return n}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(i,e,t,n,r){this.filterManager=e;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","linearRGB"),s.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=s,s.setAttribute("result",n+"_tint_1"),i.appendChild(s),s=createNS("feColorMatrix"),s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),s.setAttribute("result",n+"_tint_2"),i.appendChild(s),this.matrixFilter=s;var o=this.createMergeNode(n,[r,n+"_tint_1",n+"_tint_2"]);i.appendChild(o)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,t=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+n+" 0"),this.matrixFilter.setAttribute("values",t[0]-e[0]+" 0 0 0 "+e[0]+" "+(t[1]-e[1])+" 0 0 0 "+e[1]+" "+(t[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}};function SVGFillFilter(i,e,t,n){this.filterManager=e;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),r.setAttribute("result",n),i.appendChild(r),this.matrixFilter=r}SVGFillFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,t=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+t+" 0")}};function SVGStrokeEffect(i,e,t){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var i=this.elem.layerElement.children||this.elem.layerElement.childNodes,e,t,n,r;for(this.filterManager.effectElements[1].p.v===1?(r=this.elem.maskManager.masksProperties.length,n=0):(n=this.filterManager.effectElements[0].p.v-1,r=n+1),t=createNS("g"),t.setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1),n;n<r;n+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:n});if(this.filterManager.effectElements[10].p.v===3){var s=createNS("mask"),o=createElementID();s.setAttribute("id",o),s.setAttribute("mask-type","alpha"),s.appendChild(t),this.elem.globalData.defs.appendChild(s);var l=createNS("g");for(l.setAttribute("mask","url("+getLocationHref()+"#"+o+")");i[0];)l.appendChild(i[0]);this.elem.layerElement.appendChild(l),this.masker=s,t.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(i){this.initialized||this.initialize();var e,t=this.paths.length,n,r;for(e=0;e<t;e+=1)if(this.paths[e].m!==-1&&(n=this.elem.maskManager.viewData[this.paths[e].m],r=this.paths[e].p,(i||this.filterManager._mdf||n.prop._mdf)&&r.setAttribute("d",n.lastPath),i||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var s;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,l=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,u=r.getTotalLength();s="0 0 0 "+u*o+" ";var d=u*(l-o),p=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,g=Math.floor(d/p),m;for(m=0;m<g;m+=1)s+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";s+="0 "+u*10+" 0 0"}else s="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;r.setAttribute("stroke-dasharray",s)}if((i||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(i||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(i||this.filterManager.effectElements[3].p._mdf)){var y=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(y[0]*255)+","+bmFloor(y[1]*255)+","+bmFloor(y[2]*255)+")")}};function SVGTritoneFilter(i,e,t,n){this.filterManager=e;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.appendChild(r);var s=createNS("feComponentTransfer");s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",n),this.matrixFilter=s;var o=createNS("feFuncR");o.setAttribute("type","table"),s.appendChild(o),this.feFuncR=o;var l=createNS("feFuncG");l.setAttribute("type","table"),s.appendChild(l),this.feFuncG=l;var u=createNS("feFuncB");u.setAttribute("type","table"),s.appendChild(u),this.feFuncB=u,i.appendChild(s)}SVGTritoneFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,t=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,r=n[0]+" "+t[0]+" "+e[0],s=n[1]+" "+t[1]+" "+e[1],o=n[2]+" "+t[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",r),this.feFuncG.setAttribute("tableValues",s),this.feFuncB.setAttribute("tableValues",o)}};function SVGProLevelsFilter(i,e,t,n){this.filterManager=e;var r=this.filterManager.effectElements,s=createNS("feComponentTransfer");(r[10].p.k||r[10].p.v!==0||r[11].p.k||r[11].p.v!==1||r[12].p.k||r[12].p.v!==1||r[13].p.k||r[13].p.v!==0||r[14].p.k||r[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",s)),(r[17].p.k||r[17].p.v!==0||r[18].p.k||r[18].p.v!==1||r[19].p.k||r[19].p.v!==1||r[20].p.k||r[20].p.v!==0||r[21].p.k||r[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",s)),(r[24].p.k||r[24].p.v!==0||r[25].p.k||r[25].p.v!==1||r[26].p.k||r[26].p.v!==1||r[27].p.k||r[27].p.v!==0||r[28].p.k||r[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",s)),(r[31].p.k||r[31].p.v!==0||r[32].p.k||r[32].p.v!==1||r[33].p.k||r[33].p.v!==1||r[34].p.k||r[34].p.v!==0||r[35].p.k||r[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",s)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(s.setAttribute("color-interpolation-filters","sRGB"),i.appendChild(s)),(r[3].p.k||r[3].p.v!==0||r[4].p.k||r[4].p.v!==1||r[5].p.k||r[5].p.v!==1||r[6].p.k||r[6].p.v!==0||r[7].p.k||r[7].p.v!==1)&&(s=createNS("feComponentTransfer"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",n),i.appendChild(s),this.feFuncRComposed=this.createFeFunc("feFuncR",s),this.feFuncGComposed=this.createFeFunc("feFuncG",s),this.feFuncBComposed=this.createFeFunc("feFuncB",s))}SVGProLevelsFilter.prototype.createFeFunc=function(i,e){var t=createNS(i);return t.setAttribute("type","table"),e.appendChild(t),t},SVGProLevelsFilter.prototype.getTableValue=function(i,e,t,n,r){for(var s=0,o=256,l,u=Math.min(i,e),d=Math.max(i,e),p=Array.call(null,{length:o}),g,m=0,y=r-n,_=e-i;s<=256;)l=s/256,l<=u?g=_<0?r:n:l>=d?g=_<0?n:r:g=n+y*Math.pow((l-i)/_,1/t),p[m]=g,m+=1,s+=256/(o-1);return p.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var e,t=this.filterManager.effectElements;this.feFuncRComposed&&(i||t[3].p._mdf||t[4].p._mdf||t[5].p._mdf||t[6].p._mdf||t[7].p._mdf)&&(e=this.getTableValue(t[3].p.v,t[4].p.v,t[5].p.v,t[6].p.v,t[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(i||t[10].p._mdf||t[11].p._mdf||t[12].p._mdf||t[13].p._mdf||t[14].p._mdf)&&(e=this.getTableValue(t[10].p.v,t[11].p.v,t[12].p.v,t[13].p.v,t[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(i||t[17].p._mdf||t[18].p._mdf||t[19].p._mdf||t[20].p._mdf||t[21].p._mdf)&&(e=this.getTableValue(t[17].p.v,t[18].p.v,t[19].p.v,t[20].p.v,t[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(i||t[24].p._mdf||t[25].p._mdf||t[26].p._mdf||t[27].p._mdf||t[28].p._mdf)&&(e=this.getTableValue(t[24].p.v,t[25].p.v,t[26].p.v,t[27].p.v,t[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(i||t[31].p._mdf||t[32].p._mdf||t[33].p._mdf||t[34].p._mdf||t[35].p._mdf)&&(e=this.getTableValue(t[31].p.v,t[32].p.v,t[33].p.v,t[34].p.v,t[35].p.v),this.feFuncA.setAttribute("tableValues",e))}};function SVGDropShadowEffect(i,e,t,n,r){var s=e.container.globalData.renderConfig.filterSize,o=e.data.fs||s;i.setAttribute("x",o.x||s.x),i.setAttribute("y",o.y||s.y),i.setAttribute("width",o.width||s.width),i.setAttribute("height",o.height||s.height),this.filterManager=e;var l=createNS("feGaussianBlur");l.setAttribute("in","SourceAlpha"),l.setAttribute("result",n+"_drop_shadow_1"),l.setAttribute("stdDeviation","0"),this.feGaussianBlur=l,i.appendChild(l);var u=createNS("feOffset");u.setAttribute("dx","25"),u.setAttribute("dy","0"),u.setAttribute("in",n+"_drop_shadow_1"),u.setAttribute("result",n+"_drop_shadow_2"),this.feOffset=u,i.appendChild(u);var d=createNS("feFlood");d.setAttribute("flood-color","#00ff00"),d.setAttribute("flood-opacity","1"),d.setAttribute("result",n+"_drop_shadow_3"),this.feFlood=d,i.appendChild(d);var p=createNS("feComposite");p.setAttribute("in",n+"_drop_shadow_3"),p.setAttribute("in2",n+"_drop_shadow_2"),p.setAttribute("operator","in"),p.setAttribute("result",n+"_drop_shadow_4"),i.appendChild(p);var g=this.createMergeNode(n,[n+"_drop_shadow_4",r]);i.appendChild(g)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){if((i||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),i||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(e[0]*255),Math.round(e[1]*255),Math.round(e[2]*255)))}if((i||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),i||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var t=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,r=t*Math.cos(n),s=t*Math.sin(n);this.feOffset.setAttribute("dx",r),this.feOffset.setAttribute("dy",s)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(i,e,t){this.initialized=!1,this.filterManager=e,this.filterElem=i,this.elem=t,t.matteElement=createNS("g"),t.matteElement.appendChild(t.layerElement),t.matteElement.appendChild(t.transformedElement),t.baseElement=t.matteElement}SVGMatte3Effect.prototype.findSymbol=function(i){for(var e=0,t=_svgMatteSymbols.length;e<t;){if(_svgMatteSymbols[e]===i)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(i,e){var t=i.layerElement.parentNode;if(t){for(var n=t.children,r=0,s=n.length;r<s&&n[r]!==i.layerElement;)r+=1;var o;r<=s-2&&(o=n[r+1]);var l=createNS("use");l.setAttribute("href","#"+e),o?t.insertBefore(l,o):t.appendChild(l)}},SVGMatte3Effect.prototype.setElementAsMask=function(i,e){if(!this.findSymbol(e)){var t=createElementID(),n=createNS("mask");n.setAttribute("id",e.layerId),n.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var r=i.globalData.defs;r.appendChild(n);var s=createNS("symbol");s.setAttribute("id",t),this.replaceInParent(e,t),s.appendChild(e.layerElement),r.appendChild(s);var o=createNS("use");o.setAttribute("href","#"+t),n.appendChild(o),e.data.hd=!1,e.show()}i.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var i=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,t=0,n=e.length;t<n;)e[t]&&e[t].data.ind===i&&this.setElementAsMask(this.elem,e[t]),t+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(i,e,t,n){i.setAttribute("x","-100%"),i.setAttribute("y","-100%"),i.setAttribute("width","300%"),i.setAttribute("height","300%"),this.filterManager=e;var r=createNS("feGaussianBlur");r.setAttribute("result",n),i.appendChild(r),this.feGaussianBlur=r}SVGGaussianBlurEffect.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var e=.3,t=this.filterManager.effectElements[0].p.v*e,n=this.filterManager.effectElements[1].p.v,r=n==3?0:t,s=n==2?0:t;this.feGaussianBlur.setAttribute("stdDeviation",r+" "+s);var o=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",o)}};function TransformEffect(){}TransformEffect.prototype.init=function(i){this.effectsManager=i,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(i){if(this._opMdf=!1,this._mdf=!1,i||this.effectsManager._mdf){var e=this.effectsManager.effectElements,t=e[0].p.v,n=e[1].p.v,r=e[2].p.v===1,s=e[3].p.v,o=r?s:e[4].p.v,l=e[5].p.v,u=e[6].p.v,d=e[7].p.v;this.matrix.reset(),this.matrix.translate(-t[0],-t[1],t[2]),this.matrix.scale(o*.01,s*.01,1),this.matrix.rotate(-d*degToRads),this.matrix.skewFromAxis(-l*degToRads,(u+90)*degToRads),this.matrix.translate(n[0],n[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(i,e){this.init(e)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(i){this.init(i)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})}(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs(lottieExports);function _arrayLikeToArray(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _defineProperty$1(i,e,t){return(e=_toPropertyKey$1(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function _iterableToArrayLimit(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,l=[],u=!0,d=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(u=(n=s.call(t)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(p){d=!0,r=p}finally{try{if(!u&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(d)throw r}}return l}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys$1(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function _objectSpread2(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(t),!0).forEach(function(n){_defineProperty$1(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):ownKeys$1(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function _objectWithoutProperties$1(i,e){if(i==null)return{};var t,n,r=_objectWithoutPropertiesLoose$1(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function _objectWithoutPropertiesLoose$1(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function _slicedToArray(i,e){return _arrayWithHoles(i)||_iterableToArrayLimit(i,e)||_unsupportedIterableToArray(i,e)||_nonIterableRest()}function _toPrimitive$1(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function _toPropertyKey$1(i){var e=_toPrimitive$1(i,"string");return typeof e=="symbol"?e:e+""}function _unsupportedIterableToArray(i,e){if(i){if(typeof i=="string")return _arrayLikeToArray(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(i,e):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function i(e,t){var n=e.animationData,r=e.loop,s=e.autoplay,o=e.initialSegment,l=e.onComplete,u=e.onLoopComplete,d=e.onEnterFrame,p=e.onSegmentStart,g=e.onConfigReady,m=e.onDataReady,y=e.onDataFailed,_=e.onLoadedImages,E=e.onDOMLoaded,S=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var b=_objectWithoutProperties$1(e,_excluded$1),C=reactExports.useState(!1),T=_slicedToArray(C,2),A=T[0],N=T[1],L=reactExports.useRef(),k=reactExports.useRef(null),j=function(){var te;(te=L.current)===null||te===void 0||te.play()},F=function(){var te;(te=L.current)===null||te===void 0||te.stop()},U=function(){var te;(te=L.current)===null||te===void 0||te.pause()},q=function(te){var ne;(ne=L.current)===null||ne===void 0||ne.setSpeed(te)},J=function(te,ne){var Q;(Q=L.current)===null||Q===void 0||Q.goToAndPlay(te,ne)},ee=function(te,ne){var Q;(Q=L.current)===null||Q===void 0||Q.goToAndStop(te,ne)},Y=function(te){var ne;(ne=L.current)===null||ne===void 0||ne.setDirection(te)},$=function(te,ne){var Q;(Q=L.current)===null||Q===void 0||Q.playSegments(te,ne)},D=function(te){var ne;(ne=L.current)===null||ne===void 0||ne.setSubframe(te)},V=function(te){var ne;return(ne=L.current)===null||ne===void 0?void 0:ne.getDuration(te)},P=function(){var te;(te=L.current)===null||te===void 0||te.destroy(),L.current=void 0},I=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne;if(k.current){(ne=L.current)===null||ne===void 0||ne.destroy();var Q=_objectSpread2(_objectSpread2(_objectSpread2({},e),te),{},{container:k.current});return L.current=lottie.loadAnimation(Q),N(!!L.current),function(){var ue;(ue=L.current)===null||ue===void 0||ue.destroy(),L.current=void 0}}};reactExports.useEffect(function(){var z=I();return function(){return z==null?void 0:z()}},[n,r]),reactExports.useEffect(function(){L.current&&(L.current.autoplay=!!s)},[s]),reactExports.useEffect(function(){if(L.current){if(!o){L.current.resetSegments(!0);return}!Array.isArray(o)||!o.length||((L.current.currentRawFrame<o[0]||L.current.currentRawFrame>o[1])&&(L.current.currentRawFrame=o[0]),L.current.setSegment(o[0],o[1]))}},[o]),reactExports.useEffect(function(){var z=[{name:"complete",handler:l},{name:"loopComplete",handler:u},{name:"enterFrame",handler:d},{name:"segmentStart",handler:p},{name:"config_ready",handler:g},{name:"data_ready",handler:m},{name:"data_failed",handler:y},{name:"loaded_images",handler:_},{name:"DOMLoaded",handler:E},{name:"destroy",handler:S}],te=z.filter(function(Q){return Q.handler!=null});if(te.length){var ne=te.map(function(Q){var ue;return(ue=L.current)===null||ue===void 0||ue.addEventListener(Q.name,Q.handler),function(){var me;(me=L.current)===null||me===void 0||me.removeEventListener(Q.name,Q.handler)}});return function(){ne.forEach(function(Q){return Q()})}}},[l,u,d,p,g,m,y,_,E,S]);var B=React.createElement("div",_objectSpread2({style:t,ref:k},b));return{View:B,play:j,stop:F,pause:U,setSpeed:q,goToAndStop:ee,goToAndPlay:J,setDirection:Y,playSegments:$,setSubframe:D,getDuration:V,destroy:P,animationContainerRef:k,animationLoaded:A,animationItem:L.current}};function getContainerVisibility(i){var e=i.getBoundingClientRect(),t=e.top,n=e.height,r=window.innerHeight-t,s=window.innerHeight+n;return r/s}function getContainerCursorPosition(i,e,t){var n=i.getBoundingClientRect(),r=n.top,s=n.left,o=n.width,l=n.height,u=(e-s)/o,d=(t-r)/l;return{x:u,y:d}}var useInitInteractivity=function i(e){var t=e.wrapperRef,n=e.animationItem,r=e.mode,s=e.actions;reactExports.useEffect(function(){var o=t.current;if(!(!o||!n||!s.length)){n.stop();var l=function(){var p=null,g=function(){var y=getContainerVisibility(o),_=s.find(function(S){var b=S.visibility;return b&&y>=b[0]&&y<=b[1]});if(_){if(_.type==="seek"&&_.visibility&&_.frames.length===2){var E=_.frames[0]+Math.ceil((y-_.visibility[0])/(_.visibility[1]-_.visibility[0])*_.frames[1]);//! goToAndStop must be relative to the start of the current segment
n.goToAndStop(E-n.firstFrame-1,!0)}_.type==="loop"&&(p===null||p!==_.frames||n.isPaused)&&(n.playSegments(_.frames,!0),p=_.frames),_.type==="play"&&n.isPaused&&(n.resetSegments(!0),n.play()),_.type==="stop"&&n.goToAndStop(_.frames[0]-n.firstFrame-1,!0)}};return document.addEventListener("scroll",g),function(){document.removeEventListener("scroll",g)}},u=function(){var p=function(_,E){var S=_,b=E;if(S!==-1&&b!==-1){var C=getContainerCursorPosition(o,S,b);S=C.x,b=C.y}var T=s.find(function(L){var k=L.position;return k&&Array.isArray(k.x)&&Array.isArray(k.y)?S>=k.x[0]&&S<=k.x[1]&&b>=k.y[0]&&b<=k.y[1]:k&&!Number.isNaN(k.x)&&!Number.isNaN(k.y)?S===k.x&&b===k.y:!1});if(T){if(T.type==="seek"&&T.position&&Array.isArray(T.position.x)&&Array.isArray(T.position.y)&&T.frames.length===2){var A=(S-T.position.x[0])/(T.position.x[1]-T.position.x[0]),N=(b-T.position.y[0])/(T.position.y[1]-T.position.y[0]);n.playSegments(T.frames,!0),n.goToAndStop(Math.ceil((A+N)/2*(T.frames[1]-T.frames[0])),!0)}T.type==="loop"&&n.playSegments(T.frames,!0),T.type==="play"&&(n.isPaused&&n.resetSegments(!1),n.playSegments(T.frames)),T.type==="stop"&&n.goToAndStop(T.frames[0],!0)}},g=function(_){p(_.clientX,_.clientY)},m=function(){p(-1,-1)};return o.addEventListener("mousemove",g),o.addEventListener("mouseout",m),function(){o.removeEventListener("mousemove",g),o.removeEventListener("mouseout",m)}};switch(r){case"scroll":return l();case"cursor":return u()}}},[r,n])},useLottieInteractivity=function i(e){var t=e.actions,n=e.mode,r=e.lottieObj,s=r.animationItem,o=r.View,l=r.animationContainerRef;return useInitInteractivity({actions:t,animationItem:s,mode:n,wrapperRef:l}),o},_excluded$2=["style","interactivity"],Lottie=function i(e){var t,n,r,s=e.style,o=e.interactivity,l=_objectWithoutProperties$1(e,_excluded$2),u=useLottie(l,s),d=u.View,p=u.play,g=u.stop,m=u.pause,y=u.setSpeed,_=u.goToAndStop,E=u.goToAndPlay,S=u.setDirection,b=u.playSegments,C=u.setSubframe,T=u.getDuration,A=u.destroy,N=u.animationContainerRef,L=u.animationLoaded,k=u.animationItem;return reactExports.useEffect(function(){e.lottieRef&&(e.lottieRef.current={play:p,stop:g,pause:m,setSpeed:y,goToAndPlay:E,goToAndStop:_,setDirection:S,playSegments:b,setSubframe:C,getDuration:T,destroy:A,animationContainerRef:N,animationLoaded:L,animationItem:k})},[(t=e.lottieRef)===null||t===void 0?void 0:t.current]),useLottieInteractivity({lottieObj:{View:d,play:p,stop:g,pause:m,setSpeed:y,goToAndStop:_,goToAndPlay:E,setDirection:S,playSegments:b,setSubframe:C,getDuration:T,destroy:A,animationContainerRef:N,animationLoaded:L,animationItem:k},actions:(n=o==null?void 0:o.actions)!==null&&n!==void 0?n:[],mode:(r=o==null?void 0:o.mode)!==null&&r!==void 0?r:"scroll"})};const ModernLottieComponent=()=>jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-42 h-42 overflow-hidden opacity-70 pointer-events-none",children:jsxRuntimeExports.jsx(Lottie,{animationData:image,loop:!0,autoplay:!0,style:{width:"100%",height:"100%"},rendererSettings:{preserveAspectRatio:"xMidYMid slice"}})}),Load=()=>{const[i,e]=reactExports.useState(null);return reactExports.useEffect(()=>{(async()=>{try{const r=await(await fetch("https://cdn.prod.website-files.com/67dc33e6ae7829543569cd55/67dc33e6ae7829543569d147_mode%20ponteiro-04.json")).json();e(r)}catch(n){console.error("Error fetching Lottie data:",n)}})()},[]),jsxRuntimeExports.jsx("div",{className:"absolute top-10 right-5 w-[28%] overflow-hidden opacity-70 pointer-events-none",children:jsxRuntimeExports.jsx(Lottie,{animationData:i,loop:!0,autoplay:!0,style:{width:"100%",height:"100%"},rendererSettings:{preserveAspectRatio:"xMidYMid slice"}})})},BlockchainFeatures=()=>{const i={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.7,ease:[.25,.1,.25,1]}}},e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.12,delayChildren:.2}}},t={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.5}},hover:{scale:1.03,boxShadow:"0 10px 30px -10px rgba(223, 254, 0, 0.3)",transition:{duration:.3}}},n=({from:o,to:l,suffix:u,duration:d})=>{const[p,g]=reactExports.useState(o);return reactExports.useEffect(()=>{let m,y;const _=E=>{m||(m=E);const S=Math.min((E-m)/d,1);g(Math.floor(o+S*(l-o))),S<1&&(y=requestAnimationFrame(_))};return y=requestAnimationFrame(_),()=>cancelAnimationFrame(y)},[o,l,d]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[p,u]})},r=({from:o,to:l,suffix:u,duration:d})=>jsxRuntimeExports.jsx(n,{from:o,to:l,suffix:u,duration:d}),s=({text:o,duration:l})=>{const[u,d]=reactExports.useState("");return reactExports.useEffect(()=>{let p,g;const m=y=>{p||(p=y);const _=Math.min((y-p)/l,1);if(_<1){const E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let S="";const b=Math.ceil(_*o.length);for(let C=0;C<o.length;C++)C<b?S+=o[C]:C===b&&(S+=E.charAt(Math.floor(Math.random()*E.length)));d(S),g=requestAnimationFrame(m)}else d(o)};return g=requestAnimationFrame(m),()=>cancelAnimationFrame(g)},[o,l]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:u})};return jsxRuntimeExports.jsxs("section",{className:"w-full py-20 bg-black text-zinc-200 overflow-hidden relative",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-30 overflow-hidden",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute -top-20 right-20 w-96 h-96 rounded-full blur-3xl",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},animate:{x:[0,-40,0],y:[0,20,0]},transition:{duration:20,repeat:1/0,repeatType:"mirror"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute bottom-0 left-0 w-96 h-96 rounded-full blur-3xl",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},animate:{x:[0,30,0],y:[0,-40,0]},transition:{duration:22,repeat:1/0,repeatType:"mirror"}})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-5",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 5L15 15v20l15 10 15-10V15L30 5zm0 40L15 35v-20l15-10 15 10v20L30 45z' fill='%23ffffff' fill-opacity='0.1'/%3E%3C/svg%3E")`,backgroundSize:"60px 60px"}})}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-6 relative z-10",children:[jsxRuntimeExports.jsx(EnhancedTitles$1,{category:"Features",title:"The AI-Native Blockchain Infrastructure",titleBreak:!0}),jsxRuntimeExports.jsxs(motion.div,{variants:e,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[jsxRuntimeExports.jsxs(motion.div,{variants:t,whileHover:"hover",className:"relative group overflow-hidden rounded-xl backdrop-blur-sm border border-zinc-800/50 shadow-xl transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-50 z-0",style:{background:"linear-gradient(to bottom right, rgba(223, 254, 0, 0.1), rgba(200, 229, 0, 0.05))"}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.03)"}}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsx("div",{className:"mb-6 p-3 rounded-lg w-14 h-14 flex items-center justify-center group-hover:bg-[#dffe00]/20 transition-all duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},children:jsxRuntimeExports.jsx(Clock$2,{className:"h-6 w-6",style:{color:"#dffe00"}})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end",children:[jsxRuntimeExports.jsx("h3",{className:"text-6xl font-bold text-white mb-0 flex items-center",children:jsxRuntimeExports.jsx(r,{from:20,to:3,suffix:"s",duration:2e3})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",style:{color:"#dffe00"},children:"Block time"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-zinc-300 text-base",children:"Lightning-fast confirmation time for real-time AI execution and dApps."})]})]}),jsxRuntimeExports.jsxs(motion.div,{variants:t,whileHover:"hover",className:"relative group overflow-hidden rounded-xl backdrop-blur-sm border border-zinc-800/50 shadow-xl transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-50 z-0",style:{background:"linear-gradient(to bottom left, rgba(223, 254, 0, 0.1), rgba(200, 229, 0, 0.05))"}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.03)"}}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsx("div",{className:"mb-6 p-3 rounded-lg w-14 h-14 flex items-center justify-center group-hover:bg-[#dffe00]/20 transition-all duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},children:jsxRuntimeExports.jsx(Code,{className:"h-6 w-6",style:{color:"#dffe00"}})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl font-bold text-white mb-0 flex items-center",children:jsxRuntimeExports.jsx(n,{from:0,to:100,suffix:"% EVM",duration:2e3})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",style:{color:"#dffe00"},children:"Compatible"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-zinc-300 text-base",children:"Build with your favorite Solidity tools  no need to rewrite your contracts."})]})]})]}),jsxRuntimeExports.jsxs(motion.div,{variants:e,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[jsxRuntimeExports.jsxs(motion.div,{variants:t,whileHover:"hover",className:"relative group overflow-hidden rounded-xl backdrop-blur-sm border border-zinc-800/50 shadow-xl transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-50 z-0",style:{background:"linear-gradient(to bottom right, rgba(223, 254, 0, 0.1), rgba(200, 229, 0, 0.05))"}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.03)"}}),jsxRuntimeExports.jsx(ModernLottieComponent,{}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8",children:[jsxRuntimeExports.jsx("div",{className:"p-3 rounded-lg w-14 h-14 flex items-center justify-center group-hover:bg-[#dffe00]/20 transition-all duration-300 mb-6",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},children:jsxRuntimeExports.jsx(Shield,{className:"h-6 w-6",style:{color:"#dffe00"}})}),jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-white mb-3",children:jsxRuntimeExports.jsx(s,{text:"OPoC",duration:1200})}),jsxRuntimeExports.jsx("div",{className:"h-px w-16 mb-4",style:{backgroundColor:"rgba(223, 254, 0, 0.3)"}}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 text-sm font-medium mb-1",children:"OPoC - Optimistic Proof of Computation"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-300 text-base mb-4",children:"Efficient AI verification algorithm for non-deterministic Computation."})]})]}),jsxRuntimeExports.jsxs(motion.div,{variants:t,whileHover:"hover",className:"relative group overflow-hidden rounded-xl backdrop-blur-sm border border-zinc-800/50 shadow-xl transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-50 z-0",style:{background:"linear-gradient(to bottom right, rgba(223, 254, 0, 0.1), rgba(200, 229, 0, 0.05))"}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.03)"}}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8",children:[jsxRuntimeExports.jsx("div",{className:"p-3 rounded-lg w-14 h-14 flex items-center justify-center group-hover:bg-[#dffe00]/20 transition-all duration-300 mb-6",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},children:jsxRuntimeExports.jsx(Database,{className:"h-6 w-6",style:{color:"#dffe00"}})}),jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-white mb-3",children:"TSS"}),jsxRuntimeExports.jsx("div",{className:"h-px w-16 mb-4",style:{backgroundColor:"rgba(223, 254, 0, 0.3)"}}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 text-sm font-medium mb-1",children:"TSS - Trustless Multi-Chain Transaction Signing"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-300 text-base",children:"Threshold Signatures Schemes enable AI Agents to sign transactions on any chain with no intermediaries."})]})]}),jsxRuntimeExports.jsxs(motion.div,{variants:t,whileHover:"hover",className:"relative group overflow-hidden rounded-xl backdrop-blur-sm border border-zinc-800/50 shadow-xl transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-50 z-0",style:{background:"linear-gradient(to bottom right, rgba(223, 254, 0, 0.1), rgba(200, 229, 0, 0.05))"}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.03)"}}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8",children:[jsxRuntimeExports.jsx("div",{className:"p-3 rounded-lg w-14 h-14 flex items-center justify-center group-hover:bg-[#dffe00]/20 transition-all duration-300 mb-6",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},children:jsxRuntimeExports.jsx(Globe,{className:"h-6 w-6",style:{color:"#dffe00"}})}),jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-white mb-3",children:"TEE Oracles"}),jsxRuntimeExports.jsx("div",{className:"h-px w-16 mb-4",style:{backgroundColor:"rgba(223, 254, 0, 0.3)"}}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 text-sm font-medium mb-1",children:"TEE Web2 Oracles"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-300 text-base",children:"Access Web2 data and subscriptions with minimized trust assumptions leveraging Trusted Execution Environments."})]})]})]}),jsxRuntimeExports.jsx(motion.div,{variants:i,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"mb-12",children:jsxRuntimeExports.jsxs(motion.div,{whileHover:{boxShadow:"0 15px 30px -10px rgba(223, 254, 0, 0.3)",scale:1.01,transition:{duration:.3}},className:"relative overflow-hidden rounded-xl backdrop-blur-sm border border-zinc-800/50 shadow-xl transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-50 z-0",style:{background:"linear-gradient(to right, rgba(223, 254, 0, 0.1), rgba(200, 229, 0, 0.05), rgba(223, 254, 0, 0.1))"}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-0 hover:opacity-100 transition-opacity duration-300",style:{background:"linear-gradient(to right, rgba(223, 254, 0, 0.03), rgba(200, 229, 0, 0.02), rgba(223, 254, 0, 0.03))"}}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 rounded-lg w-12 h-12 flex items-center justify-center",style:{background:"linear-gradient(to right, rgba(223, 254, 0, 0.15), rgba(200, 229, 0, 0.1))"},children:jsxRuntimeExports.jsx(Zap,{className:"h-5 w-5",style:{color:"#dffe00"}})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white",children:jsxRuntimeExports.jsx(s,{text:"AI-Native Infrastructure",duration:1200})})]}),jsxRuntimeExports.jsx("p",{className:"text-zinc-300 text-base max-w-3xl",children:"UOMI is purpose-built to support decentralized artificial intelligence, empowering agents to operate independently with smart contract logic and access to off-chain computation through verifiable proofs."}),jsxRuntimeExports.jsx(Load,{})]})]})})]})]})},BenefitsSection=()=>{const i={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.7,ease:[.25,.1,.25,1]}}},e=reactExports.useRef(null),t=50,n=100,r="rgba(223, 254, 0, 0.8)",s="rgba(200, 229, 0, 0.8)";return reactExports.useEffect(()=>{const o=Array(t).fill().map(()=>({x:Math.random()*100,y:Math.random()*100,size:3+Math.random()*6,speedX:(Math.random()-.5)*.5,speedY:(Math.random()-.5)*.5,pulseSpeed:.5+Math.random()*2,pulsePhase:Math.random()*Math.PI*2})),l=e.current,u=l.getContext("2d");let d,p=0;const g=()=>{l.width=l.offsetWidth,l.height=l.offsetHeight};g(),window.addEventListener("resize",g);const m=()=>{u.clearRect(0,0,l.width,l.height),p+=.01,o.forEach((E,S)=>{E.x+=E.speedX,E.y+=E.speedY,(E.x<0||E.x>100)&&(E.speedX*=-1),(E.y<0||E.y>100)&&(E.speedY*=-1);const b=E.x/100*l.width,C=E.y/100*l.height,T=Math.sin(p*E.pulseSpeed+E.pulsePhase)*.5+1,A=E.size*T;u.beginPath(),u.arc(b,C,A,0,Math.PI*2),u.fillStyle=S%4===0?r:s,u.fill(),o.forEach((N,L)=>{if(S!==L){const k=(E.x-N.x)/100*l.width,j=(E.y-N.y)/100*l.height,F=Math.sqrt(k*k+j*j);if(F<n){const U=N.x/100*l.width,q=N.y/100*l.height,J=1-F/n;u.beginPath(),u.moveTo(b,C),u.lineTo(U,q),u.strokeStyle=`rgba(223, 254, 0, ${J*.3})`,u.lineWidth=Math.max(.5,2*J),u.stroke()}}})});const y=20,_=5;for(let E=0;E<_;E++){u.beginPath();for(let S=0;S<l.width;S+=5){const b=l.height*(.3+E*.15)+Math.sin(S*.01+p+E)*y;S===0?u.moveTo(S,b):u.lineTo(S,b)}u.strokeStyle=`rgba(223, 254, 0, ${.1-E*.02})`,u.lineWidth=2,u.stroke()}d=window.requestAnimationFrame(m)};return m(),()=>{window.cancelAnimationFrame(d),window.removeEventListener("resize",g)}},[]),jsxRuntimeExports.jsxs("section",{className:"w-full py-24 bg-black text-zinc-200 overflow-hidden relative",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-30 overflow-hidden",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute -bottom-40 -left-40 w-96 h-96 rounded-full blur-3xl",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},animate:{x:[0,30,0],y:[0,-20,0]},transition:{duration:18,repeat:1/0,repeatType:"mirror"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute top-20 right-0 w-96 h-96 rounded-full blur-3xl",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},animate:{x:[0,-40,0],y:[0,30,0]},transition:{duration:24,repeat:1/0,repeatType:"mirror"}})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-5",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle, #ffffff08 1px, transparent 1px)",backgroundSize:"30px 30px"}})}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-6 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"mb-20",children:[jsxRuntimeExports.jsx(EnhancedTitles$1,{category:"Benefits",title:"Built for Intelligent Autonomy",titleBreak:!1}),jsxRuntimeExports.jsx(motion.p,{variants:i,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"max-w-2xl mx-auto text-center text-zinc-400 mb-16 text-lg leading-relaxed",children:"UOMI enables you to build AI agents that own assets, execute logic on-chain, interact across ecosystems, and evolve over time, trustlessly, autonomously, and verifiably."})]}),jsxRuntimeExports.jsxs(motion.div,{variants:i,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"mb-24 rounded-2xl overflow-hidden relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 border border-zinc-800/50 rounded-2xl backdrop-blur-sm",style:{background:"linear-gradient(to bottom right, rgba(223, 254, 0, 0.1), rgba(200, 229, 0, 0.05))"}}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 relative z-10",children:[jsxRuntimeExports.jsx("div",{className:"p-10 md:p-12 flex flex-col justify-center",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-6 text-white",children:"Smart, Scalable, Autonomous."}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 mb-8 leading-relaxed",children:"UOMI agents are autonomous NFTs powered by on-chain AI. They can trade, vote, own assets and evolve across time  fully verifiable, unstoppable, and decentralized."}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02,backgroundColor:"#c8e500"},whileTap:{scale:.98},className:"text-black rounded-lg px-6 py-3 inline-flex items-center space-x-2 font-medium shadow-md border",style:{backgroundColor:"#dffe00",boxShadow:"0 4px 6px -1px rgba(223, 254, 0, 0.2)",borderColor:"rgba(223, 254, 0, 0.3)"},onClick:()=>window.open("/wasp","_blank"),children:[jsxRuntimeExports.jsx("span",{children:"BUILD YOUR AI AGENT ON UOMI"}),jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"ml-2"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"relative min-h-[350px] flex items-center justify-center p-10 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-10",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle, rgba(223, 254, 0, 0.1) 1px, transparent 1px)",backgroundSize:"30px 30px"}})}),jsxRuntimeExports.jsx("canvas",{ref:e,className:"absolute inset-0 w-full h-full"}),jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20",style:{width:"100px",height:"100px",background:"transparent",perspective:"800px"},initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:jsxRuntimeExports.jsx(motion.div,{className:"relative w-full h-full",style:{transformStyle:"preserve-3d"},animate:{rotateX:[0,360],rotateY:[0,360]},transition:{duration:20,ease:"linear",repeat:1/0,repeatType:"loop",times:[0,1]},children:[...Array(6)].map((o,l)=>{const u=l%2===0,d=["translateZ(50px)","rotateY(180deg) translateZ(50px)","rotateY(90deg) translateZ(50px)","rotateY(-90deg) translateZ(50px)","rotateX(90deg) translateZ(50px)","rotateX(-90deg) translateZ(50px)"];return jsxRuntimeExports.jsx(motion.div,{className:"absolute w-full h-full",style:{transform:d[l],backgroundColor:u?"rgba(223, 254, 0, 0.3)":"rgba(200, 229, 0, 0.3)",border:`1px solid ${u?"rgba(223, 254, 0, 0.6)":"rgba(200, 229, 0, 0.6)"}`,backfaceVisibility:"visible"},animate:{boxShadow:["0 0 10px rgba(223, 254, 0, 0.2)","0 0 20px rgba(223, 254, 0, 0.4)","0 0 10px rgba(223, 254, 0, 0.2)"]},transition:{duration:3,ease:"easeInOut",repeat:1/0,repeatType:"reverse",delay:l*.5}},l)})})}),[...Array(3)].map((o,l)=>jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/2 left-1/2 rounded-full border",style:{width:`${150+l*100}px`,height:`${150+l*100}px`,x:"-50%",y:"-50%",borderColor:`rgba(223, 254, 0, ${.3-l*.1})`,borderWidth:`${2-l*.5}px`},animate:{scale:[1,1.2,1],opacity:[.7,.3,.7]},transition:{duration:4+l*2,ease:"easeInOut",repeat:1/0,repeatType:"reverse",delay:l*1.5}},`ring-${l}`))]})]})]})]})]})},AIVisualization=()=>{const i=reactExports.useRef(null),e=s=>({initial:{opacity:.3,scale:.7},animate:{opacity:[.3,.7,.3],scale:[.7,1,.7],transition:{duration:3+s*.5,repeat:1/0,repeatType:"loop",ease:"easeInOut",delay:s*.7}}});reactExports.useEffect(()=>{if(!i.current)return;const s=i.current,o=s.getContext("2d"),l=()=>{s.width=s.offsetWidth,s.height=s.offsetHeight};window.addEventListener("resize",l),l();const u=[],d=50;class p{constructor(){this.x=Math.random()*s.width,this.y=Math.random()*s.height,this.size=Math.random()*2+.5,this.speedX=Math.random()*.5-.25,this.speedY=Math.random()*.5-.25,this.color=`rgba(223, 254, 0, ${Math.random()*.3+.1})`}update(){this.x+=this.speedX,this.y+=this.speedY,this.x>s.width?this.x=0:this.x<0&&(this.x=s.width),this.y>s.height?this.y=0:this.y<0&&(this.y=s.height)}draw(){o.fillStyle=this.color,o.beginPath(),o.arc(this.x,this.y,this.size,0,Math.PI*2),o.fill()}}(()=>{for(let y=0;y<d;y++)u.push(new p)})();const m=()=>{o.clearRect(0,0,s.width,s.height);for(let y=0;y<u.length;y++)u[y].update(),u[y].draw();requestAnimationFrame(m)};return m(),()=>{window.removeEventListener("resize",l)}},[]);const t=[{x:0,y:-130},{x:112,y:-65},{x:112,y:65},{x:0,y:130},{x:-112,y:65},{x:-112,y:-65}],n=[[0,1],[0,5],[1,2],[2,3],[3,4],[4,5]],r=[0,1,2,3,4,5];return jsxRuntimeExports.jsxs("div",{className:"w-full relative h-[300px] md:h-[400px] overflow-hidden",children:[jsxRuntimeExports.jsx("canvas",{ref:i,className:"absolute inset-0 w-full h-full z-0"}),jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-10 h-10 rounded-full blur-md z-10",style:{backgroundColor:"#dffe00"},animate:{opacity:[.5,.8,.5],scale:[1,1.2,1]},transition:{duration:3,repeat:1/0,repeatType:"mirror"}}),[...Array(5)].map((s,o)=>{const l=e(o);return jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 rounded-full z-20",style:{width:`${(o+1)*60}px`,height:`${(o+1)*60}px`,border:"1px solid rgba(223, 254, 0, 0.3)"},initial:l.initial,animate:l.animate},`pulse-${o}`)}),jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/2 left-1/2 w-10 h-10 bg-black rounded-full z-20",style:{transform:"translate(-50%, -50%)",boxShadow:"0 0 10px rgba(223, 254, 0, 0.5)"},initial:{opacity:0,scale:0,x:"-50%",y:"-50%"},animate:{opacity:1,scale:1,x:"-50%",y:"-50%"},transition:{duration:.5,ease:"easeOut",delay:.5},children:jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/2 left-1/2 w-6 h-6 rounded-full blur-md z-10",style:{backgroundColor:"#dffe00",opacity:.5,transform:"translate(-50%, -50%)"},initial:{opacity:0,scale:0,x:"-50%",y:"-50%"},animate:{scale:[1,1.2,1]},transition:{duration:3,repeat:1/0,repeatType:"mirror"}})}),r.map((s,o)=>{const l=t[s],u=Math.sqrt(l.x*l.x+l.y*l.y),d=Math.atan2(l.y,l.x)*(180/Math.PI);return jsxRuntimeExports.jsx(motion.div,{className:"absolute z-15",style:{width:`${u}px`,height:"2px",top:"50%",left:"50%",transformOrigin:"0 0",background:"linear-gradient(90deg, rgba(223, 254, 0, 0.6), rgba(223, 254, 0, 0.2))"},initial:{scaleX:0,opacity:0,rotate:d},animate:{scaleX:1,opacity:1,rotate:d},transition:{delay:1+o*.15,duration:.8,ease:"easeOut"}},`center-connection-${o}`)}),n.map(([s,o],l)=>{const u=t[s],d=t[o],p=d.x-u.x,g=d.y-u.y,m=Math.sqrt(p*p+g*g),y=Math.atan2(g,p)*(180/Math.PI);return jsxRuntimeExports.jsx(motion.div,{className:"absolute z-15",style:{width:`${m}px`,height:"2px",top:`calc(50% + ${u.y}px)`,left:`calc(50% + ${u.x}px)`,transformOrigin:"0 0",background:"linear-gradient(90deg, rgba(223, 254, 0, 0.5), rgba(223, 254, 0, 0.3))"},initial:{scaleX:0,opacity:0,rotate:y},animate:{scaleX:1,opacity:1,rotate:y},transition:{delay:1.5+l*.15,duration:.8,ease:"easeOut"}},`connection-${l}`)}),t.map((s,o)=>jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/2 left-1/2 w-6 h-6 bg-black rounded-md flex items-center justify-center shadow-lg z-30",style:{left:`calc(50% + ${s.x}px)`,top:`calc(50% + ${s.y}px)`,border:"1px solid rgba(223, 254, 0, 0.5)",boxShadow:"0 4px 6px -1px rgba(223, 254, 0, 0.2)"},initial:{opacity:0,scale:0,x:"-50%",y:"-50%"},animate:{opacity:1,scale:1,x:"-50%",y:"-50%"},transition:{delay:.5+o*.2,duration:.5,type:"spring"},whileHover:{scale:1.2,boxShadow:"0 8px 16px -2px rgba(223, 254, 0, 0.3)",borderColor:"rgba(223, 254, 0, 0.8)"},children:jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:"#dffe00"}})},`node-${o}`)),n.map(([s,o],l)=>{const u=t[s],d=t[o];return jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/2 left-1/2 w-1.5 h-1.5 rounded-full z-30",style:{backgroundColor:"#dffe00",boxShadow:"0 0 3px rgba(223, 254, 0, 0.8)",transformOrigin:"center"},initial:{x:u.x-3,y:u.y-3,opacity:0},animate:{x:[u.x-3,d.x-3],y:[u.y-3,d.y-3],opacity:[0,1,0]},transition:{duration:1.5,delay:2+l*.4,repeat:1/0,repeatDelay:3+l%3}},`data-flow-${l}`)}),r.map((s,o)=>{const l=t[s];return jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/2 left-1/2 w-1.5 h-1.5 rounded-full z-30",style:{backgroundColor:"#dffe00",boxShadow:"0 0 3px rgba(223, 254, 0, 0.8)",transformOrigin:"center"},initial:{x:-3,y:-3,opacity:0},animate:{x:[-3,l.x-3],y:[-3,l.y-3],opacity:[0,1,0]},transition:{duration:1.2,delay:3+o*.7,repeat:1/0,repeatDelay:4+o%4}},`center-flow-${o}`)})]})},HowItWorksSection=()=>{const i={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.7,ease:[.25,.1,.25,1]}}},e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15,delayChildren:.3}}},t={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.5}}};return jsxRuntimeExports.jsxs("section",{className:"w-full py-24 bg-black text-zinc-200 overflow-hidden relative",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-40 overflow-hidden",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute top-0 left-0 w-96 h-96 rounded-full blur-3xl",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},animate:{x:[0,50,0],y:[0,30,0]},transition:{duration:20,repeat:1/0,repeatType:"mirror"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute bottom-0 right-0 w-96 h-96 rounded-full blur-3xl",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},animate:{x:[0,-30,0],y:[0,-50,0]},transition:{duration:15,repeat:1/0,repeatType:"mirror"}})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-10",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(to right, #ffffff08 1px, transparent 1px), linear-gradient(to bottom, #ffffff08 1px, transparent 1px)",backgroundSize:"40px 40px"}})}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-6 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"mb-20",children:[jsxRuntimeExports.jsx(EnhancedTitles$1,{category:"How It Works",title:"Powering Autonomous Intelligence",titleBreak:!1}),jsxRuntimeExports.jsx(motion.p,{variants:i,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"max-w-2xl mx-auto text-center text-zinc-400 mb-16 text-lg",children:"UOMI uses Optimistic Proof of Computation to run AI models verifiably on-chain. Agents operate autonomously with built-in wallets, logic and multichain interoperability."})]}),jsxRuntimeExports.jsxs(motion.div,{variants:i,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"mb-20 rounded-2xl relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 border border-zinc-800/50 rounded-2xl backdrop-blur-sm z-0",style:{background:"linear-gradient(to bottom right, rgba(223, 254, 0, 0.1), rgba(200, 229, 0, 0.05))"}}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 relative z-10",children:[jsxRuntimeExports.jsx(AIVisualization,{}),jsxRuntimeExports.jsx("div",{className:"p-10 md:p-12 flex flex-col justify-center",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!0},children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-6 text-white",children:"Verifiable AI on-chain"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 mb-8 leading-relaxed",children:"Agents execute complex models using OPoC (Optimistic Proof of Computation). Validators challenge or confirm results for trustless inference and logic  a core primitive for AI-native dApps."}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02,backgroundColor:"#c8e500"},whileTap:{scale:.98},className:"text-black rounded-lg px-6 py-3 inline-flex items-center space-x-2 font-medium shadow-md border hover:cursor-pointer",style:{backgroundColor:"#dffe00",boxShadow:"0 4px 6px -1px rgba(223, 254, 0, 0.2)",borderColor:"rgba(223, 254, 0, 0.3)"},onClick:()=>window.open("/opoc"),children:[jsxRuntimeExports.jsx("span",{children:"Read about OPoC"}),jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"ml-2"})]})]})})]})]}),jsxRuntimeExports.jsxs(motion.div,{variants:e,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"grid md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs(motion.div,{variants:t,className:"rounded-xl p-8 bg-zinc-900/50 backdrop-blur-sm border border-zinc-800/50 shadow-xl group hover:bg-zinc-900 transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"mb-6 p-3 rounded-lg w-14 h-14 flex items-center justify-center transition-all duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},children:jsxRuntimeExports.jsx(Database,{className:"h-6 w-6",style:{color:"#dffe00"}})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"TSS"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 leading-relaxed",children:"Every agent is an NFT with its own wallet and logic  capable of storing assets, voting, trading, and evolving."})]}),jsxRuntimeExports.jsxs(motion.div,{variants:t,className:"rounded-xl p-8 bg-zinc-900/50 backdrop-blur-sm border border-zinc-800/50 shadow-xl group hover:bg-zinc-900 transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"mb-6 p-3 rounded-lg w-14 h-14 flex items-center justify-center transition-all duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},children:jsxRuntimeExports.jsx(Clock$2,{className:"h-6 w-6",style:{color:"#dffe00"}})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Cross-Chain Execution"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 leading-relaxed",children:"UOMI agents can act on multiple chains via trustless bridges  enabling multichain arbitrage, governance, and orchestration."})]}),jsxRuntimeExports.jsxs(motion.div,{variants:t,className:"rounded-xl p-8 bg-zinc-900/50 backdrop-blur-sm border border-zinc-800/50 shadow-xl group hover:bg-zinc-900 transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"mb-6 p-3 rounded-lg w-14 h-14 flex items-center justify-center transition-all duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},children:jsxRuntimeExports.jsx(Layers$2,{className:"h-6 w-6",style:{color:"#dffe00"}})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Scalable AI Runtime"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 leading-relaxed",children:"The infrastructure is designed to run models with low latency and verifiable proofs, without overloading nodes  scaling AI on-chain without compromises."})]})]})]})]})},LogoTrack=({isDarkMode:i,direction:e="left",speed:t=35,alternate:n=!1})=>{const r=n?[{imageUrl:"https://uomi.ai/assets/sweat-wallet.png",alt:"Alchemy",key:"alchemy"},{imageUrl:"https://uomi.ai/assets/seedify.png",alt:"Infura",key:"infura"},{imageUrl:"https://uomi.ai/assets/cookie3.png",alt:"Consensys",key:"consensys"},{imageUrl:"https://uomi.ai/assets/aethir.png",alt:"OpenAI",key:"openai"},{imageUrl:"https://uomi.ai/assets/eesee.png",alt:"Anthropic",key:"anthropic"},{imageUrl:"https://uomi.ai/assets/ethermail.png",alt:"Paradigm",key:"paradigm"},{imageUrl:"https://uomi.ai/assets/impossible-cloud-network.svg",alt:"a16z",key:"a16z"}]:[{imageUrl:"https://uomi.ai/assets/aitech-pad.png",alt:"Ethereum",key:"ethereum"},{imageUrl:"https://uomi.ai/assets/ankr.png",alt:"Polygon",key:"polygon"},{imageUrl:"https://uomi.ai/assets/heurist.png",alt:"Arbitrum",key:"arbitrum"},{imageUrl:"https://uomi.ai/assets/io-net.png",alt:"Binance",key:"binance"},{imageUrl:"https://uomi.ai/assets/inferix.png",alt:"Avalanche",key:"avalanche"},{imageUrl:"https://uomi.ai/assets/paid.png",alt:"Solana",key:"solana"},{imageUrl:"https://uomi.ai/assets/poolz.png",alt:"Near",key:"near"},{imageUrl:"https://uomi.ai/assets/sentient-labs.png",alt:"Optimism",key:"optimism"}];return jsxRuntimeExports.jsx("div",{className:"flex overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{className:"flex items-center gap-10 whitespace-nowrap",animate:{x:e==="left"?[0,-2e3]:[-2e3,0]},transition:{x:{repeat:1/0,repeatType:"loop",duration:t,ease:"linear"}},children:[...r,...r,...r].map((s,o)=>jsxRuntimeExports.jsx("div",{className:"bg-zinc-900 border border-zinc-800 flex items-center justify-center h-16 w-40 p-3 rounded-lg shrink-0",children:jsxRuntimeExports.jsx("img",{src:s.imageUrl,alt:s.alt,className:"h-full max-w-full object-contain brightness-0 invert"})},`${s.key}-${o}`))})})},Partners=({isDarkMode:i=!0})=>jsxRuntimeExports.jsx("section",{className:"w-full py-20 bg-black text-white overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[jsxRuntimeExports.jsx(EnhancedTitles$1,{category:"Ecosystem",title:"Partners",titleBreak:!1}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"max-w-2xl mx-auto text-center text-gray-300 mb-16 text-lg",children:"UOMI Network collaborates with leading blockchain protocols, AI labs, and financial institutions to expand the frontiers of autonomous intelligence."}),jsxRuntimeExports.jsxs("div",{className:"mb-12 relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-20 z-10 bg-gradient-to-r from-black to-transparent pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-20 z-10 bg-gradient-to-l from-black to-transparent pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"overflow-hidden",children:jsxRuntimeExports.jsx(LogoTrack,{isDarkMode:i,direction:"left",speed:35})})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-20 z-10 bg-gradient-to-r from-black to-transparent pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-20 z-10 bg-gradient-to-l from-black to-transparent pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"overflow-hidden",children:jsxRuntimeExports.jsx(LogoTrack,{isDarkMode:i,direction:"right",speed:45,alternate:!0})})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mt-16 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6",children:"Interested in becoming a partner? Join the UOMI ecosystem today."}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.05,backgroundColor:"#c8e500"},whileTap:{scale:.95},className:"text-black rounded-full px-6 py-3 inline-flex items-center space-x-2 font-medium",style:{backgroundColor:"#dffe00",boxShadow:"0 4px 6px -1px rgba(223, 254, 0, 0.2)"},children:[jsxRuntimeExports.jsx("span",{children:"Partner With Us"}),jsxRuntimeExports.jsx(ArrowRight,{size:16})]})]})]})}),HomePage=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Hero3,{}),jsxRuntimeExports.jsx(BlockchainFeatures,{}),jsxRuntimeExports.jsx(BenefitsSection,{}),jsxRuntimeExports.jsx(HowItWorksSection,{}),jsxRuntimeExports.jsx(Partners,{})]}),EcosystemSection=()=>{const[i,e]=reactExports.useState(""),[t,n]=reactExports.useState("all"),[r,s]=reactExports.useState("all"),[o,l]=reactExports.useState([]),[u,d]=reactExports.useState(!0),[p,g]=reactExports.useState(null),[m,y]=reactExports.useState(null),[_,E]=reactExports.useState(null),[S,b]=reactExports.useState(!1),C="https://raw.githubusercontent.com/Uomi-network/uomi-website-ecosystem/refs/heads/main/projects.json",T="https://github.com/Uomi-network/uomi-website-ecosystem",A=D=>{E(D),b(!0),document.body.style.overflow="hidden"},N=()=>{b(!1),E(null),document.body.style.overflow="unset"};reactExports.useEffect(()=>{const D=V=>{V.key==="Escape"&&N()};if(S)return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[S]);const L={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.7,ease:[.25,.1,.25,1]}}},k={rest:{scale:1,y:0,boxShadow:"0 0 0 rgba(223, 254, 0, 0)"},hover:{scale:1.02,y:-5,boxShadow:"0 8px 20px rgba(223, 254, 0, 0.15)",transition:{duration:.2}}},j={hidden:{opacity:0,scale:.8,y:50},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:300}},exit:{opacity:0,scale:.8,y:50,transition:{duration:.2}}},F={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},U={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},q={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};reactExports.useEffect(()=>{(async()=>{try{d(!0),g(null);const V=await fetch(C);if(!V.ok)throw new Error(`HTTP error! status: ${V.status}`);const P=await V.json();l(P.projects||[]),y(P.lastUpdated)}catch(V){console.error("Error fetching projects:",V),g("Failed to load projects. Please try again later."),l([{id:"0x",name:"0x",description:"0x allows you to embed swaps in any onchain app. Tap into aggregated liquidity from 130+ sources, best prices & optimal trade execution.",fullDescription:"0x Protocol is a comprehensive infrastructure layer that enables developers to easily embed cryptocurrency swaps into their applications. With access to aggregated liquidity from over 130 different sources, 0x ensures users get the best possible prices and optimal trade execution for their cryptocurrency transactions. The protocol abstracts away the complexity of interacting with multiple DEXs and liquidity sources, making it simple for developers to integrate sophisticated trading functionality into their dApps.",primaryImage:"https://cdn.prod.website-files.com/669ade140a683001b9f7fd78/67b9106b6ca74a7001624998_0x_logo.webp",coverImage:"https://cdn.prod.website-files.com/669ade140a683001b9f7fd78/67b910681d1e917a4b1a10d9_0x_banner.webp",category:"Infra",primaryTag:"Infra",tags:["Dev Tooling","Other Infra","DeFi"],xLink:"https://twitter.com/0xProject",websiteLink:"https://0x.org",launchedDate:"2024-01-15",status:"Live"}])}finally{d(!1)}})()},[]);const J=["all",...new Set(o.map(D=>D.category))],ee=["all",...new Set(o.flatMap(D=>D.tags||[]))],Y=o.filter(D=>{const V=!i||D.name.toLowerCase().includes(i.toLowerCase())||D.description.toLowerCase().includes(i.toLowerCase())||(D.tags||[]).some(B=>B.toLowerCase().includes(i.toLowerCase())),P=t==="all"||D.category===t,I=r==="all"||(D.tags||[]).includes(r);return V&&P&&I}),$=()=>{e(""),n("all"),s("all")};return u?jsxRuntimeExports.jsx("section",{className:"w-full py-16 bg-black text-zinc-200 overflow-hidden relative",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto px-6 relative z-10",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-20",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-8 h-8 animate-spin text-[#dffe00] mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400",children:"Loading ecosystem projects..."})]})})})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"w-full py-16 bg-black text-zinc-200 overflow-hidden relative",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-30 overflow-hidden",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute -bottom-40 -left-40 w-96 h-96 rounded-full blur-3xl",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},animate:{x:[0,30,0],y:[0,-20,0]},transition:{duration:18,repeat:1/0,repeatType:"mirror"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute top-20 right-0 w-96 h-96 rounded-full blur-3xl",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},animate:{x:[0,-40,0],y:[0,30,0]},transition:{duration:24,repeat:1/0,repeatType:"mirror"}})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-5",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle, #ffffff08 1px, transparent 1px)",backgroundSize:"30px 30px"}})}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-6 relative z-10",children:[jsxRuntimeExports.jsx("div",{className:"mb-12",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-center relative",children:[jsxRuntimeExports.jsx(motion.h2,{variants:L,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"text-5xl md:text-6xl font-bold mb-4",children:"Ecosystem"}),jsxRuntimeExports.jsxs(motion.p,{variants:L,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"text-xl text-zinc-400 mb-2",children:["Apps & Infrastructure ",jsxRuntimeExports.jsx("span",{className:"text-[#dffe00] font-medium",children:"Live on Testnet"})]}),m&&jsxRuntimeExports.jsxs(motion.p,{variants:L,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"text-sm text-zinc-500 mb-6",children:["Last updated: ",new Date(m).toLocaleDateString()]}),jsxRuntimeExports.jsx(motion.div,{variants:L,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"mt-4",children:jsxRuntimeExports.jsxs("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-zinc-900/50 border border-zinc-700/50 text-zinc-300 text-sm rounded-lg hover:border-[#dffe00]/50 hover:text-[#dffe00] hover:bg-zinc-800/50 transition-all duration-300 backdrop-blur-sm",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Get Listed"]})})]})}),p&&jsxRuntimeExports.jsxs(motion.div,{variants:L,initial:"hidden",whileInView:"visible",className:"mb-8 p-4 bg-red-900/20 border border-red-700/50 rounded-lg flex items-center gap-3",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-red-400"}),jsxRuntimeExports.jsx("p",{className:"text-red-300",children:p})]}),jsxRuntimeExports.jsxs(motion.div,{variants:L,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"flex flex-wrap items-center justify-between mb-8 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 flex-wrap gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-zinc-400 mr-2 font-medium",children:"Filters:"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("select",{value:t,onChange:D=>n(D.target.value),className:"bg-zinc-900 text-white rounded-lg border border-zinc-800 py-2 px-4 pr-10 appearance-none cursor-pointer hover:border-[#dffe00] transition-all focus:border-[#dffe00] focus:ring-1 focus:ring-[#dffe00]",children:J.map(D=>jsxRuntimeExports.jsx("option",{value:D,children:D==="all"?"All Categories":D},D))}),jsxRuntimeExports.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("select",{value:r,onChange:D=>s(D.target.value),className:"bg-zinc-900 text-white rounded-lg border border-zinc-800 py-2 px-4 pr-10 appearance-none cursor-pointer hover:border-[#dffe00] transition-all focus:border-[#dffe00] focus:ring-1 focus:ring-[#dffe00]",children:ee.map(D=>jsxRuntimeExports.jsx("option",{value:D,children:D==="all"?"All Tags":D},D))}),jsxRuntimeExports.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),jsxRuntimeExports.jsx("button",{onClick:$,className:"bg-zinc-900 text-white rounded-lg border border-zinc-800 py-2 px-4 hover:border-[#dffe00] hover:text-[#dffe00] transition-all",children:"Reset"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search Ecosystem",className:"bg-zinc-900 text-white rounded-lg border border-zinc-800 py-2 px-4 pl-10 w-64 focus:outline-none focus:border-[#dffe00] focus:ring-1 focus:ring-[#dffe00] transition-all",value:i,onChange:D=>e(D.target.value)}),jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-400 w-4 h-4"})]})]}),jsxRuntimeExports.jsx(motion.div,{variants:L,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"mb-8",children:jsxRuntimeExports.jsxs("p",{className:"text-zinc-400",children:["Showing ",jsxRuntimeExports.jsx("span",{className:"font-medium text-white",children:Y.length})," matching results",o.length>0&&` out of ${o.length} total projects`,"."]})}),Y.length===0?jsxRuntimeExports.jsx(motion.div,{variants:L,initial:"hidden",whileInView:"visible",className:"text-center py-20",children:jsxRuntimeExports.jsxs("div",{className:"text-zinc-400 mb-4",children:[jsxRuntimeExports.jsx(Search,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),jsxRuntimeExports.jsx("p",{className:"text-lg",children:"No projects found matching your criteria."}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your filters or search terms."})]})}):jsxRuntimeExports.jsx(motion.div,{variants:U,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Y.map((D,V)=>jsxRuntimeExports.jsx(motion.div,{variants:q,whileHover:"hover",initial:"rest",className:"rounded-2xl overflow-hidden relative border border-zinc-800/50 backdrop-blur-sm cursor-pointer",style:{background:"linear-gradient(to bottom right, rgba(30, 30, 30, 0.8), rgba(20, 20, 20, 0.9))"},onClick:()=>A(D),children:jsxRuntimeExports.jsxs(motion.div,{variants:k,className:"h-full",children:[jsxRuntimeExports.jsxs("div",{className:"relative h-32 overflow-hidden",children:[D.coverImage?jsxRuntimeExports.jsx("img",{src:D.coverImage,alt:`${D.name} cover`,className:"absolute inset-0 w-full h-full object-cover",onError:P=>{P.target.style.display="none"}}):jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-800 to-zinc-900"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-zinc-900 to-black opacity-20"}),jsxRuntimeExports.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2",children:[D.primaryTag&&jsxRuntimeExports.jsx("span",{className:"bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-md",children:D.primaryTag}),D.xLink&&D.xLink.trim()&&jsxRuntimeExports.jsx("a",{href:D.xLink,target:"_blank",rel:"noopener noreferrer",className:"bg-black bg-opacity-70 text-white p-1 rounded-md hover:bg-[#dffe00] hover:text-black transition-all",onClick:P=>P.stopPropagation(),children:jsxRuntimeExports.jsx(XIcon,{className:"w-4 h-4"})}),D.websiteLink&&D.websiteLink.trim()&&D.websiteLink!="#"&&D.websiteLink!=""&&jsxRuntimeExports.jsx("a",{href:D.websiteLink,target:"_blank",rel:"noopener noreferrer",className:"bg-black bg-opacity-70 text-white p-1 rounded-md hover:bg-[#dffe00] hover:text-black transition-all",onClick:P=>P.stopPropagation(),children:jsxRuntimeExports.jsx(Globe,{className:"w-4 h-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative p-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-10 left-6 w-16 h-16 rounded-full bg-zinc-900 border-4 border-black flex items-center justify-center overflow-hidden shadow-lg",style:{boxShadow:"0 0 15px rgba(223, 254, 0, 0.15)"},children:D.primaryImage?jsxRuntimeExports.jsx("img",{src:D.primaryImage,alt:`${D.name} logo`,className:"w-full h-full object-cover",onError:P=>{P.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjMzIzMjMyIi8+CjxwYXRoIGQ9Ik0zMiAyMEMzNS4zMTM3IDIwIDM4IDIyLjY4NjMgMzggMjZDMzggMjkuMzEzNyAzNS4zMTM3IDMyIDMyIDMyQzI4LjY4NjMgMzIgMjYgMjkuMzEzNyAyNiAyNkMyNiAyMi42ODYzIDI4LjY4NjMgMjAgMzIgMjBaIiBmaWxsPSIjNjY2NjY2Ii8+Cjwvc3ZnPgo="}}):jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-zinc-700 flex items-center justify-center text-zinc-400 text-xs font-bold",children:D.name.substring(0,2).toUpperCase()})}),jsxRuntimeExports.jsxs("div",{className:"pt-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:D.name}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 mb-4 text-sm leading-relaxed line-clamp-3",children:D.description}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:(D.tags||[]).map((P,I)=>jsxRuntimeExports.jsx("span",{className:"text-xs text-zinc-400 bg-zinc-800/80 rounded-md px-2 py-1 hover:bg-zinc-700/80 transition-all cursor-pointer",onClick:B=>{B.stopPropagation(),s(P)},children:P},I))})]})]})]})},D.id||V))})]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:S&&_&&jsxRuntimeExports.jsx(motion.div,{variants:F,initial:"hidden",animate:"visible",exit:"exit",className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:N,children:jsxRuntimeExports.jsxs(motion.div,{variants:j,initial:"hidden",animate:"visible",exit:"exit",className:"bg-zinc-900 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl border border-zinc-800",onClick:D=>D.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"relative h-48 overflow-hidden",children:[_.coverImage?jsxRuntimeExports.jsx("img",{src:_.coverImage,alt:`${_.name} cover`,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-gradient-to-br from-zinc-800 to-zinc-700"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-900 via-transparent to-transparent"}),jsxRuntimeExports.jsx("button",{onClick:N,className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all backdrop-blur-sm",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-4 left-6 w-20 h-20 rounded-full bg-zinc-900 border-4 border-zinc-800 flex items-center justify-center overflow-hidden shadow-xl",children:_.primaryImage?jsxRuntimeExports.jsx("img",{src:_.primaryImage,alt:`${_.name} logo`,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-zinc-700 flex items-center justify-center text-zinc-400 font-bold",children:_.name.substring(0,2).toUpperCase()})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:_.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-zinc-400",children:[_.primaryTag&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Tag,{className:"w-4 h-4"}),_.primaryTag]}),_.launchedDate&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4"}),"Launched ",new Date(_.launchedDate).toLocaleDateString()]}),_.status&&jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_.status==="Live"?"bg-green-900/30 text-green-400 border border-green-700/50":"bg-yellow-900/30 text-yellow-400 border border-yellow-700/50"}`,children:_.status})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[_.websiteLink&&_.websiteLink.trim()&&_.websiteLink!=="#"&&jsxRuntimeExports.jsxs("a",{href:_.websiteLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-[#dffe00] text-black rounded-lg font-medium hover:bg-[#dffe00]/90 transition-all",children:[jsxRuntimeExports.jsx(Globe,{className:"w-4 h-4"}),"Visit Website"]}),_.xLink&&_.xLink.trim()&&jsxRuntimeExports.jsxs("a",{href:_.xLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-zinc-800 text-white rounded-lg hover:bg-zinc-700 transition-all",children:[jsxRuntimeExports.jsx(XIcon,{className:"w-4 h-4"}),"Follow"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"About"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-300 leading-relaxed",children:_.fullDescription||_.description})]}),_.tags&&_.tags.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Tags"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:_.tags.map((D,V)=>jsxRuntimeExports.jsx("span",{className:"text-sm text-zinc-300 bg-zinc-800 rounded-lg px-3 py-1 hover:bg-zinc-700 transition-all cursor-pointer",onClick:P=>{P.stopPropagation(),s(D),N()},children:D},V))})]}),_.launchedDate&&jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Launch Information"}),jsxRuntimeExports.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-zinc-300",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("span",{children:["Launched: ",new Date(_.launchedDate).toLocaleDateString()]})]}),_.status&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-zinc-300 mt-2",children:[jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full ${_.status==="Live"?"bg-green-400":"bg-yellow-400"}`}),jsxRuntimeExports.jsxs("span",{children:["Status: ",_.status]})]})]})]})]})]})})})]})},EcosystemPage=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(EcosystemSection,{})}),NotFoundPage=()=>{const i={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.7,ease:[.25,.1,.25,1]}}},e={rest:{scale:1,y:0},hover:{scale:1.05,y:-2,transition:{duration:.2}}};return jsxRuntimeExports.jsxs("section",{className:"w-full min-h-screen flex items-center justify-center bg-black text-zinc-200 overflow-hidden relative",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-30 overflow-hidden",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute -bottom-40 -left-40 w-96 h-96 rounded-full blur-3xl",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},animate:{x:[0,30,0],y:[0,-20,0]},transition:{duration:18,repeat:1/0,repeatType:"mirror"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute top-20 right-0 w-96 h-96 rounded-full blur-3xl",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},animate:{x:[0,-40,0],y:[0,30,0]},transition:{duration:24,repeat:1/0,repeatType:"mirror"}})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-5",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle, #ffffff08 1px, transparent 1px)",backgroundSize:"30px 30px"}})}),jsxRuntimeExports.jsx("div",{className:"max-w-2xl mx-auto px-6 relative z-10 text-center",children:jsxRuntimeExports.jsxs(motion.div,{initial:"hidden",animate:"visible",className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(motion.h1,{variants:i,className:"text-[#dffe00] text-9xl font-bold mb-2",style:{textShadow:"0 0 30px rgba(223, 254, 0, 0.3)"},children:"404"}),jsxRuntimeExports.jsx(motion.h2,{variants:i,className:"text-4xl md:text-5xl font-bold mb-6",children:"Page Not Found"}),jsxRuntimeExports.jsx(motion.p,{variants:i,className:"text-xl text-zinc-400 mb-10",children:"The page you're looking for doesn't exist or has been moved."}),jsxRuntimeExports.jsxs(motion.div,{variants:i,className:"flex flex-col sm:flex-row gap-4 w-full max-w-md mx-auto",children:[jsxRuntimeExports.jsxs(motion.button,{variants:e,initial:"rest",whileHover:"hover",className:"flex-1 cursor-pointer flex items-center justify-center gap-2 bg-[#dffe00] text-black rounded-lg py-3 px-6 font-medium transition-all",onClick:()=>window.location.href="/",children:[jsxRuntimeExports.jsx(House,{className:"w-5 h-5"}),"Go Home"]}),jsxRuntimeExports.jsxs(motion.button,{variants:e,initial:"rest",whileHover:"hover",className:"flex-1 cursor-pointer flex items-center justify-center gap-2 bg-zinc-900 border border-zinc-800 text-white rounded-lg py-3 px-6 font-medium hover:border-[#dffe00] transition-all",onClick:()=>window.history.back(),children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5"}),"Go Back"]})]})]})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden opacity-20",children:jsxRuntimeExports.jsx(motion.div,{className:"absolute",initial:{left:"-10%",top:"30%"},animate:{left:["0%","100%","0%"],top:["30%","60%","30%"]},transition:{duration:15,repeat:1/0,repeatType:"mirror"},children:jsxRuntimeExports.jsx("div",{className:"text-[#dffe00] text-[400px] font-bold opacity-5",children:"404"})})})]})},WaspPresentation=()=>{const{scrollY:i}=useScroll(),[e,t]=reactExports.useState("hero"),n={hero:reactExports.useRef(null),features:reactExports.useRef(null),code:reactExports.useRef(null),workflow:reactExports.useRef(null)},[r,s]=reactExports.useState(!1);useTransform(i,[0,100],[0,1]);const o=useTransform(i,[0,500],[0,150]),l=useTransform(i,[0,300],[1,.3]),u=()=>{navigator.clipboard.writeText("npx wasp create"),s(!0),setTimeout(()=>s(!1),2e3)};return reactExports.useEffect(()=>{const d=()=>{const p=window.scrollY+200;Object.entries(n).forEach(([g,m])=>{if(m.current){const{offsetTop:y,offsetHeight:_}=m.current;p>=y&&p<y+_&&t(g)}})};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-zinc-950 text-zinc-100 overflow-hidden",children:[jsxRuntimeExports.jsxs("section",{id:"hero",ref:n.hero,className:"pt-32 pb-24 relative overflow-hidden min-h-screen flex items-center",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[jsxRuntimeExports.jsx(motion.div,{style:{y:o,opacity:l},className:"absolute top-0 right-0 w-full h-px bg-gradient-to-l from-[#c8e500]/50 via-[#c8e500]/10 to-transparent"}),jsxRuntimeExports.jsx(motion.div,{style:{y:o,opacity:l},className:"absolute top-0 right-0 w-px h-full bg-gradient-to-b from-[#c8e500]/50 via-[#c8e500]/10 to-transparent"}),jsxRuntimeExports.jsx(motion.div,{className:"absolute top-40 right-40 w-80 h-80 rounded-full opacity-10 bg-[#c8e500] blur-[100px]",animate:{scale:[1,1.2,1],opacity:[.1,.15,.1]},transition:{duration:8,repeat:1/0,repeatType:"reverse"}})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-6 max-w-6xl relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[jsxRuntimeExports.jsxs("div",{className:"inline-block px-3 py-1 bg-zinc-900 rounded-full text-xs border border-zinc-800 text-[#c8e500] mb-6",children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:""}),"UOMI NETWORK"]}),jsxRuntimeExports.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold mb-6 tracking-tight leading-tight",children:["Build autonomous ",jsxRuntimeExports.jsx("br",{}),"agents with ",jsxRuntimeExports.jsx("span",{className:"text-[#c8e500]",children:"WASP"})]}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 text-lg mb-8 max-w-md leading-relaxed",children:"A powerful, minimal framework for creating autonomous agents using WebAssembly and Rust."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-6 mb-10",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-[#c8e500] text-black rounded-md px-5 py-2.5 text-sm font-medium hover:bg-[#daff00] transition-colors duration-200",onClick:()=>window.open("https://docs.uomi.ai/build/build-an-agent/installing-wasp","_blank"),children:"Start Building"}),jsxRuntimeExports.jsx(motion.button,{whileHover:{borderColor:"#c8e500"},className:"bg-zinc-900 border border-zinc-800 text-zinc-200 rounded-md px-5 py-2.5 text-sm font-medium transition-colors duration-200",onClick:()=>window.open("https://docs.uomi.ai/build/build-an-agent","_blank"),children:"Read Documentation"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-zinc-500 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:"Powered by"}),jsxRuntimeExports.jsx("div",{className:"h-px w-2 bg-zinc-800 mr-2"}),jsxRuntimeExports.jsx("span",{className:"mr-4",children:"Rust"}),jsxRuntimeExports.jsx("div",{className:"h-px w-2 bg-zinc-800 mr-2"}),jsxRuntimeExports.jsx("span",{className:"mr-4",children:"WebAssembly"}),jsxRuntimeExports.jsx("div",{className:"h-px w-2 bg-zinc-800 mr-2"}),jsxRuntimeExports.jsx("span",{children:"Node.js"})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5 shadow-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})]})}),jsxRuntimeExports.jsxs("div",{className:"font-mono text-sm mb-3 text-zinc-300",children:[jsxRuntimeExports.jsx("span",{className:"text-[#c8e500]",children:"$"})," npx wasp create"]}),jsxRuntimeExports.jsx(motion.button,{onClick:u,className:"absolute top-5 right-5 text-zinc-500 hover:text-zinc-300 transition-colors duration-200",whileHover:{scale:1.1},whileTap:{scale:.95},children:jsxRuntimeExports.jsx(Copy,{size:16})}),jsxRuntimeExports.jsx(AnimatePresence,{children:r&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"absolute -bottom-8 right-0 text-xs bg-zinc-900 px-2 py-1 rounded text-[#c8e500]",children:"Copied!"})}),jsxRuntimeExports.jsxs("div",{className:"border-t border-zinc-800 mt-2 pt-2 text-xs text-zinc-500",children:[jsxRuntimeExports.jsx("div",{className:"mb-1",children:"Creating a new WASP agent in my-agent..."}),jsxRuntimeExports.jsx("div",{className:"mb-1 text-green-500",children:" Project structure initialized"}),jsxRuntimeExports.jsx("div",{className:"mb-1 text-green-500",children:" Dependencies installed"}),jsxRuntimeExports.jsxs("div",{className:"text-zinc-300",children:["Success! ",jsxRuntimeExports.jsx("span",{className:"text-[#c8e500]",children:"cd my-agent"})," and ",jsxRuntimeExports.jsx("span",{className:"text-[#c8e500]",children:"npm start"})," to begin"]})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute -top-5 -right-5 w-10 h-10 border-t border-r border-[#c8e500]/30"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-5 -left-5 w-10 h-10 border-b border-l border-[#c8e500]/30"}),jsxRuntimeExports.jsx(motion.div,{className:"absolute -z-10 -top-2 -left-2 -bottom-2 -right-2 border border-zinc-800 rounded-xl",animate:{opacity:[.5,1,.5]},transition:{duration:3,repeat:1/0}})]})]})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.5},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:jsxRuntimeExports.jsxs(motion.div,{animate:{y:[0,8,0]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-zinc-500 mb-2",children:"Scroll to explore"}),jsxRuntimeExports.jsx("div",{className:"w-5 h-10 rounded-full border border-zinc-700 flex items-center justify-center",children:jsxRuntimeExports.jsx(motion.div,{animate:{y:[0,4,0]},transition:{duration:1.5,repeat:1/0,repeatType:"loop"},className:"w-1.5 h-1.5 bg-[#c8e500] rounded-full"})})]})})]}),jsxRuntimeExports.jsxs("section",{id:"features",ref:n.features,className:"py-24 bg-black relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-px bg-zinc-900 hidden lg:block"}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-6 max-w-6xl",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"inline-block px-4 py-1.5 bg-zinc-900 rounded-full text-xs border border-zinc-800 text-[#c8e500] mb-4 group",children:[jsxRuntimeExports.jsx("span",{className:"mr-2 group-hover:text-white transition-colors duration-200",children:""}),"FEATURES"]}),jsxRuntimeExports.jsx(motion.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.1},className:"text-3xl sm:text-4xl font-bold mb-4",children:"Everything you need"}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.2},className:"text-zinc-400 max-w-md mx-auto",children:"Powerful tools designed to make agent development intuitive and efficient"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{icon:Zap,title:"Hot Reloading",description:"Instant feedback with our hot-reloading development environment for rapid iteration"},{icon:Cpu,title:"WASM Performance",description:"High-performance execution powered by WebAssembly and Rust's zero-cost abstractions"},{icon:Terminal,title:"Interactive Console",description:"Test your agents with rich commands, conversation history, and detailed metrics"},{icon:Globe,title:"Multiple LLM Support",description:"Seamless integration with UOMI and third-party language models via a unified API"},{icon:Code,title:"Debugging Tools",description:"Comprehensive tools for debugging, performance monitoring, and error tracing"},{icon:GitBranch,title:"Version Control",description:"Track agent evolution and development with built-in versioning and lifecycle management"}].map((d,p)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5,delay:p*.2},className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6 h-full flex flex-col relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-[#c8e500] font-medium text-sm",children:React.createElement(d.icon,{size:24})}),jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full border border-[#c8e500]/20"})]}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-medium mb-2",children:d.title}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 text-sm flex-grow",children:d.description})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 w-4 h-4 rounded-full bg-[#c8e500] z-20 md:hidden"})]},p))})]})]}),jsxRuntimeExports.jsx("section",{id:"code",ref:n.code,className:"sticky top-0 z-30 bg-zinc-950 py-20 border-y border-zinc-900 min-h-screen flex items-center",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-6 max-w-5xl",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-12",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-2",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},children:[jsxRuntimeExports.jsxs("div",{className:"inline-block px-3 py-1 bg-zinc-900 rounded-full text-xs border border-zinc-800 text-[#c8e500] mb-4",children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:""}),"CODE"]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6",children:"Elegant by design"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 mb-10 leading-relaxed max-w-md",children:"Write clean, concise code that's both powerful and easy to understand. WASP abstracts the complexity while giving you full control."}),jsxRuntimeExports.jsx("div",{className:"space-y-5 mb-10",children:[{title:"Type-safe Development",desc:"Leverage Rust's powerful type system"},{title:"WebAssembly Optimization",desc:"Compiled to efficient, portable WASM"},{title:"Intuitive Developer API",desc:"Clean, ergonomic interface for developers"}].map((d,p)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.2+p*.1},className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"mt-1 w-5 h-5 rounded-full border border-[#c8e500]/30 flex items-center justify-center flex-shrink-0 mr-3",children:jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#c8e500]"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-white",children:d.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-zinc-400",children:d.desc})]})]},p))})]})}),jsxRuntimeExports.jsx("div",{className:"lg:col-span-3",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-6 -right-6 w-12 h-12 border-t border-r border-[#c8e500]/20 rounded-tr-lg"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-6 -left-6 w-12 h-12 border-b border-l border-[#c8e500]/20 rounded-bl-lg"}),jsxRuntimeExports.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg overflow-hidden shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-black border-b border-zinc-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400"}),jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400"}),jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-zinc-400",children:"agent.rs"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-zinc-500",children:"Rust"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("pre",{className:"p-4 overflow-x-auto text-xs font-mono leading-relaxed text-zinc-300",children:jsxRuntimeExports.jsx("code",{children:`use serde::{Deserialize, Serialize};
use utils::log;
mod utils;

#[derive(Serialize, Deserialize, Debug)]
struct Message {
    role: String,
    content: String,
}

fn parse_input(input: &str) -> Vec<Message> {
    // Parse the input string into a JSON Value
    let parsed: Vec<Message> = serde_json::from_str(input)
        .expect("Failed to parse input JSON");
    parsed
}

fn system_message(content: String) -> Message {
    Message {
        role: "system".to_string(),
        content,
    }
}

fn process_messages(
      system_message: Message, 
      mut messages: Vec<Message>) -> Vec<Message> {
    messages.insert(0, system_message);
    messages
}

#[no_mangle]
pub extern "C" fn run() {
    log("Start agent execution!");
    
    //get the input
    let input = utils::read_input();
    
    let input = String::from_utf8_lossy(&input);

    let input = parse_input(&input);
    
    //create a system message
    let system_message = system_message("You are a UOMI Agent!".to_string());

    let modified_messages = process_messages(system_message, input);
    
    let ai_input= serde_json::json!({
        "messages": modified_messages,
    }).to_string();

    let ai_input_bytes = ai_input.as_bytes().to_vec();

    let ai_response = utils::call_ai_service(1, ai_input_bytes);

    let ai_response_str = String::from_utf8(ai_response.clone()).unwrap();

    let ai_response_content = extract_ai_response_content(ai_response_str);

    let ai_response_content_bytes = ai_response_content.as_bytes().to_vec();

    // save output
    utils::save_output(&ai_response_content_bytes);
}`})}),jsxRuntimeExports.jsx(motion.div,{className:"absolute left-0 h-5 w-full bg-[#c8e500]/10 border-l-2 border-[#c8e500]",style:{top:"50%"},animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0}})]})]})]})})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.5,delay:.5},className:"mt-20 relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-px bg-zinc-800 -translate-y-1/2"}),jsxRuntimeExports.jsx("div",{className:"flex justify-between relative overflow-x-auto",children:[{label:"Write Rust Code",color:"border-blue-500"},{label:"Compile to WASM",color:"border-purple-500"},{label:"Deploy to UOMI",color:"border-[#c8e500]"},{label:"Execute On-Chain",color:"border-green-500"}].map((d,p)=>jsxRuntimeExports.jsxs(motion.div,{initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},transition:{delay:.2+p*.1,duration:.5},className:"flex flex-col items-center relative bg-zinc-950 px-2",children:[jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full bg-zinc-900 ${d.color} border-2 mb-2`}),jsxRuntimeExports.jsx("div",{className:"text-xs text-zinc-400",children:d.label})]},p))})]})]})})]})},WaspPage=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(WaspPresentation,{})}),CLASS_PART_SEPARATOR="-",createClassGroupUtils=i=>{const e=createClassMap(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:o=>{const l=o.split(CLASS_PART_SEPARATOR);return l[0]===""&&l.length!==1&&l.shift(),getGroupRecursive(l,e)||getGroupIdForArbitraryProperty(o)},getConflictingClassGroupIds:(o,l)=>{const u=t[o]||[];return l&&n[o]?[...u,...n[o]]:u}}},getGroupRecursive=(i,e)=>{var o;if(i.length===0)return e.classGroupId;const t=i[0],n=e.nextPart.get(t),r=n?getGroupRecursive(i.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const s=i.join(CLASS_PART_SEPARATOR);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=i=>{if(arbitraryPropertyRegex.test(i)){const e=arbitraryPropertyRegex.exec(i)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},createClassMap=i=>{const{theme:e,classGroups:t}=i,n={nextPart:new Map,validators:[]};for(const r in t)processClassesRecursively(t[r],n,r,e);return n},processClassesRecursively=(i,e,t,n)=>{i.forEach(r=>{if(typeof r=="string"){const s=r===""?e:getPart(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(isThemeGetter(r)){processClassesRecursively(r(n),e,t,n);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{processClassesRecursively(o,getPart(e,s),t,n)})})},getPart=(i,e)=>{let t=i;return e.split(CLASS_PART_SEPARATOR).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},isThemeGetter=i=>i.isThemeGetter,createLruCache=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const r=(s,o)=>{t.set(s,o),e++,e>i&&(e=0,n=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",MODIFIER_SEPARATOR_LENGTH=MODIFIER_SEPARATOR.length,createParseClassName=i=>{const{prefix:e,experimentalParseClassName:t}=i;let n=r=>{const s=[];let o=0,l=0,u=0,d;for(let _=0;_<r.length;_++){let E=r[_];if(o===0&&l===0){if(E===MODIFIER_SEPARATOR){s.push(r.slice(u,_)),u=_+MODIFIER_SEPARATOR_LENGTH;continue}if(E==="/"){d=_;continue}}E==="["?o++:E==="]"?o--:E==="("?l++:E===")"&&l--}const p=s.length===0?r:r.substring(u),g=stripImportantModifier(p),m=g!==p,y=d&&d>u?d-u:void 0;return{modifiers:s,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:y}};if(e){const r=e+MODIFIER_SEPARATOR,s=n;n=o=>o.startsWith(r)?s(o.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const r=n;n=s=>t({className:s,parseClassName:r})}return n},stripImportantModifier=i=>i.endsWith(IMPORTANT_MODIFIER)?i.substring(0,i.length-1):i.startsWith(IMPORTANT_MODIFIER)?i.substring(1):i,createSortModifiers=i=>{const e=Object.fromEntries(i.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const r=[];let s=[];return n.forEach(o=>{o[0]==="["||e[o]?(r.push(...s.sort(),o),s=[]):s.push(o)}),r.push(...s.sort()),r}},createConfigUtils=i=>({cache:createLruCache(i.cacheSize),parseClassName:createParseClassName(i),sortModifiers:createSortModifiers(i),...createClassGroupUtils(i)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(i,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:s}=e,o=[],l=i.trim().split(SPLIT_CLASSES_REGEX);let u="";for(let d=l.length-1;d>=0;d-=1){const p=l[d],{isExternal:g,modifiers:m,hasImportantModifier:y,baseClassName:_,maybePostfixModifierPosition:E}=t(p);if(g){u=p+(u.length>0?" "+u:u);continue}let S=!!E,b=n(S?_.substring(0,E):_);if(!b){if(!S){u=p+(u.length>0?" "+u:u);continue}if(b=n(_),!b){u=p+(u.length>0?" "+u:u);continue}S=!1}const C=s(m).join(":"),T=y?C+IMPORTANT_MODIFIER:C,A=T+b;if(o.includes(A))continue;o.push(A);const N=r(b,S);for(let L=0;L<N.length;++L){const k=N[L];o.push(T+k)}u=p+(u.length>0?" "+u:u)}return u};function twJoin(){let i=0,e,t,n="";for(;i<arguments.length;)(e=arguments[i++])&&(t=toValue(e))&&(n&&(n+=" "),n+=t);return n}const toValue=i=>{if(typeof i=="string")return i;let e,t="";for(let n=0;n<i.length;n++)i[n]&&(e=toValue(i[n]))&&(t&&(t+=" "),t+=e);return t};function createTailwindMerge(i,...e){let t,n,r,s=o;function o(u){const d=e.reduce((p,g)=>g(p),i());return t=createConfigUtils(d),n=t.cache.get,r=t.cache.set,s=l,l(u)}function l(u){const d=n(u);if(d)return d;const p=mergeClassList(u,t);return r(u,p),p}return function(){return s(twJoin.apply(null,arguments))}}const fromTheme=i=>{const e=t=>t[i]||[];return e.isThemeGetter=!0,e},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=i=>fractionRegex.test(i),isNumber=i=>!!i&&!Number.isNaN(Number(i)),isInteger=i=>!!i&&Number.isInteger(Number(i)),isPercent=i=>i.endsWith("%")&&isNumber(i.slice(0,-1)),isTshirtSize=i=>tshirtUnitRegex.test(i),isAny=()=>!0,isLengthOnly=i=>lengthUnitRegex.test(i)&&!colorFunctionRegex.test(i),isNever=()=>!1,isShadow=i=>shadowRegex.test(i),isImage=i=>imageRegex.test(i),isAnyNonArbitrary=i=>!isArbitraryValue(i)&&!isArbitraryVariable(i),isArbitrarySize=i=>getIsArbitraryValue(i,isLabelSize,isNever),isArbitraryValue=i=>arbitraryValueRegex.test(i),isArbitraryLength=i=>getIsArbitraryValue(i,isLabelLength,isLengthOnly),isArbitraryNumber=i=>getIsArbitraryValue(i,isLabelNumber,isNumber),isArbitraryPosition=i=>getIsArbitraryValue(i,isLabelPosition,isNever),isArbitraryImage=i=>getIsArbitraryValue(i,isLabelImage,isImage),isArbitraryShadow=i=>getIsArbitraryValue(i,isLabelShadow,isShadow),isArbitraryVariable=i=>arbitraryVariableRegex.test(i),isArbitraryVariableLength=i=>getIsArbitraryVariable(i,isLabelLength),isArbitraryVariableFamilyName=i=>getIsArbitraryVariable(i,isLabelFamilyName),isArbitraryVariablePosition=i=>getIsArbitraryVariable(i,isLabelPosition),isArbitraryVariableSize=i=>getIsArbitraryVariable(i,isLabelSize),isArbitraryVariableImage=i=>getIsArbitraryVariable(i,isLabelImage),isArbitraryVariableShadow=i=>getIsArbitraryVariable(i,isLabelShadow,!0),getIsArbitraryValue=(i,e,t)=>{const n=arbitraryValueRegex.exec(i);return n?n[1]?e(n[1]):t(n[2]):!1},getIsArbitraryVariable=(i,e,t=!1)=>{const n=arbitraryVariableRegex.exec(i);return n?n[1]?e(n[1]):t:!1},isLabelPosition=i=>i==="position"||i==="percentage",isLabelImage=i=>i==="image"||i==="url",isLabelSize=i=>i==="length"||i==="size"||i==="bg-size",isLabelLength=i=>i==="length",isLabelNumber=i=>i==="number",isLabelFamilyName=i=>i==="family-name",isLabelShadow=i=>i==="shadow",getDefaultConfig=()=>{const i=fromTheme("color"),e=fromTheme("font"),t=fromTheme("text"),n=fromTheme("font-weight"),r=fromTheme("tracking"),s=fromTheme("leading"),o=fromTheme("breakpoint"),l=fromTheme("container"),u=fromTheme("spacing"),d=fromTheme("radius"),p=fromTheme("shadow"),g=fromTheme("inset-shadow"),m=fromTheme("text-shadow"),y=fromTheme("drop-shadow"),_=fromTheme("blur"),E=fromTheme("perspective"),S=fromTheme("aspect"),b=fromTheme("ease"),C=fromTheme("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...A(),isArbitraryVariable,isArbitraryValue],L=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],j=()=>[isArbitraryVariable,isArbitraryValue,u],F=()=>[isFraction,"full","auto",...j()],U=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],q=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],J=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],ee=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],Y=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],$=()=>["start","end","center","stretch","center-safe","end-safe"],D=()=>["auto",...j()],V=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],P=()=>[i,isArbitraryVariable,isArbitraryValue],I=()=>[...A(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],te=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],ne=()=>["","none","full",d,isArbitraryVariable,isArbitraryValue],Q=()=>["",isNumber,isArbitraryVariableLength,isArbitraryLength],ue=()=>["solid","dashed","dotted","double"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>[isNumber,isPercent,isArbitraryVariablePosition,isArbitraryPosition],Ae=()=>["","none",_,isArbitraryVariable,isArbitraryValue],qe=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],Be=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],it=()=>[isNumber,isArbitraryVariable,isArbitraryValue],st=()=>[isFraction,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,S]}],container:["container"],columns:[{columns:[isNumber,isArbitraryValue,isArbitraryVariable,l]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",l,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ee()}],"auto-rows":[{"auto-rows":ee()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...Y(),"normal"]}],"justify-items":[{"justify-items":[...$(),"normal"]}],"justify-self":[{"justify-self":["auto",...$()]}],"align-content":[{content:["normal",...Y()]}],"align-items":[{items:[...$(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...$(),{baseline:["","last"]}]}],"place-content":[{"place-content":Y()}],"place-items":[{"place-items":[...$(),"baseline"]}],"place-self":[{"place-self":["auto",...$()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:D()}],mx:[{mx:D()}],my:[{my:D()}],ms:[{ms:D()}],me:[{me:D()}],mt:[{mt:D()}],mr:[{mr:D()}],mb:[{mb:D()}],ml:[{ml:D()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[l,"screen",...V()]}],"min-w":[{"min-w":[l,"screen","none",...V()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...V()]}],h:[{h:["screen",...V()]}],"min-h":[{"min-h":["screen","none",...V()]}],"max-h":[{"max-h":["screen",...V()]}],"font-size":[{text:["base",t,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[s,...j()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:P()}],"text-color":[{text:P()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ue(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:P()}],"underline-offset":[{"underline-offset":[isNumber,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:P()}],"gradient-from-pos":[{from:te()}],"gradient-via-pos":[{via:te()}],"gradient-to-pos":[{to:te()}],"gradient-from":[{from:P()}],"gradient-via":[{via:P()}],"gradient-to":[{to:P()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:Q()}],"border-w-x":[{"border-x":Q()}],"border-w-y":[{"border-y":Q()}],"border-w-s":[{"border-s":Q()}],"border-w-e":[{"border-e":Q()}],"border-w-t":[{"border-t":Q()}],"border-w-r":[{"border-r":Q()}],"border-w-b":[{"border-b":Q()}],"border-w-l":[{"border-l":Q()}],"divide-x":[{"divide-x":Q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ue(),"hidden","none"]}],"divide-style":[{divide:[...ue(),"hidden","none"]}],"border-color":[{border:P()}],"border-color-x":[{"border-x":P()}],"border-color-y":[{"border-y":P()}],"border-color-s":[{"border-s":P()}],"border-color-e":[{"border-e":P()}],"border-color-t":[{"border-t":P()}],"border-color-r":[{"border-r":P()}],"border-color-b":[{"border-b":P()}],"border-color-l":[{"border-l":P()}],"divide-color":[{divide:P()}],"outline-style":[{outline:[...ue(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:P()}],shadow:[{shadow:["","none",p,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:P()}],"inset-shadow":[{"inset-shadow":["none",g,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":P()}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:P()}],"ring-offset-w":[{"ring-offset":[isNumber,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":P()}],"inset-ring-w":[{"inset-ring":Q()}],"inset-ring-color":[{"inset-ring":P()}],"text-shadow":[{"text-shadow":["none",m,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":P()}],opacity:[{opacity:[isNumber,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber]}],"mask-image-linear-from-pos":[{"mask-linear-from":be()}],"mask-image-linear-to-pos":[{"mask-linear-to":be()}],"mask-image-linear-from-color":[{"mask-linear-from":P()}],"mask-image-linear-to-color":[{"mask-linear-to":P()}],"mask-image-t-from-pos":[{"mask-t-from":be()}],"mask-image-t-to-pos":[{"mask-t-to":be()}],"mask-image-t-from-color":[{"mask-t-from":P()}],"mask-image-t-to-color":[{"mask-t-to":P()}],"mask-image-r-from-pos":[{"mask-r-from":be()}],"mask-image-r-to-pos":[{"mask-r-to":be()}],"mask-image-r-from-color":[{"mask-r-from":P()}],"mask-image-r-to-color":[{"mask-r-to":P()}],"mask-image-b-from-pos":[{"mask-b-from":be()}],"mask-image-b-to-pos":[{"mask-b-to":be()}],"mask-image-b-from-color":[{"mask-b-from":P()}],"mask-image-b-to-color":[{"mask-b-to":P()}],"mask-image-l-from-pos":[{"mask-l-from":be()}],"mask-image-l-to-pos":[{"mask-l-to":be()}],"mask-image-l-from-color":[{"mask-l-from":P()}],"mask-image-l-to-color":[{"mask-l-to":P()}],"mask-image-x-from-pos":[{"mask-x-from":be()}],"mask-image-x-to-pos":[{"mask-x-to":be()}],"mask-image-x-from-color":[{"mask-x-from":P()}],"mask-image-x-to-color":[{"mask-x-to":P()}],"mask-image-y-from-pos":[{"mask-y-from":be()}],"mask-image-y-to-pos":[{"mask-y-to":be()}],"mask-image-y-from-color":[{"mask-y-from":P()}],"mask-image-y-to-color":[{"mask-y-to":P()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":be()}],"mask-image-radial-to-pos":[{"mask-radial-to":be()}],"mask-image-radial-from-color":[{"mask-radial-from":P()}],"mask-image-radial-to-color":[{"mask-radial-to":P()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[isNumber]}],"mask-image-conic-from-pos":[{"mask-conic-from":be()}],"mask-image-conic-to-pos":[{"mask-conic-to":be()}],"mask-image-conic-from-color":[{"mask-conic-from":P()}],"mask-image-conic-to-color":[{"mask-conic-to":P()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:Ae()}],brightness:[{brightness:[isNumber,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",y,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":P()}],grayscale:[{grayscale:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":Ae()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",b,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",C,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:qe()}],"rotate-x":[{"rotate-x":qe()}],"rotate-y":[{"rotate-y":qe()}],"rotate-z":[{"rotate-z":qe()}],scale:[{scale:Be()}],"scale-x":[{"scale-x":Be()}],"scale-y":[{"scale-y":Be()}],"scale-z":[{"scale-z":Be()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:st()}],"translate-x":[{"translate-x":st()}],"translate-y":[{"translate-y":st()}],"translate-z":[{"translate-z":st()}],"translate-none":["translate-none"],accent:[{accent:P()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:P()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...P()]}],"stroke-w":[{stroke:[isNumber,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...P()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function Container({children:i,className:e}){return jsxRuntimeExports.jsx("div",{className:twMerge("w-full px-6 md:px-20",e),children:i})}function PageContainer({children:i,className:e}){return jsxRuntimeExports.jsx(Container,{className:twMerge("PageContainer py-16 md:py-32 flex flex-col items-center",e),children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-5xl",children:i})})}function PageLatex({latex:i,className:e}){const[t,n]=reactExports.useState(""),[r,s]=reactExports.useState(0),o=reactExports.useRef();return reactExports.useEffect(()=>{const l=o.current;if(!l)return;const u=d=>{d.source===l.contentWindow&&d.data.type==="height"&&s(d.data.height)};return window.addEventListener("message",u),()=>window.removeEventListener("message",u)},[]),reactExports.useEffect(()=>{const l=window.location.href.replace(window.location.hash,""),u=l.substring(0,l.lastIndexOf("/")),d=`${u}${i}`,p=`
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <meta charset="UTF-8">
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <meta http-equiv="content-language" content="en">
      <script src="https://cdn.jsdelivr.net/npm/latex.js/dist/latex.js"><\/script>
    </head>
    <body>
      <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');

        * {
          box-sizing: border-box;
        }

        body {
          color: white;

          width: 100%;
          margin: 0;
          padding: 0;
          font-family: 'Montserrat', sans-serif;
        }

        body, html {
          overflow-x: hidden;
          -webkit-overflow-scrolling: touch;
        }

        body, .page {
          max-width: 100% !important;
          min-width: 100% !important;
        }

        img {
          max-width: 100%;
          height: auto;
        }
        figcaption {
          text-align: center;
          font-size: 0.8em;
        }

        table {
          border-collapse: collapse;
          width: 100%;
        }
        th, td {
          border: 1px solid white;
          padding: 8px;
          text-align: left;
        }

        @media (max-width: 600px) {
          table {
            font-size: 0.8em;
          }
          .katex-display {
            font-size: 0.8em;
          }
        }

        @media (max-width: 400px) {
          table {
            font-size: 0.7em;
          }
          .katex-display {
            font-size: 0.7em;
          }
        }

        h1, h2, h3, h4, h5, h6, .title {
          font-family: 'Fira Code', monospace;
          font-weight: lighter;
          text-align: center;
        }

        p, .small {
          line-height: 1.5;
          font-size: 14px;
        }

        .title {
          margin-bottom: 75px;
        }
      </style>
      <script>
        const replaceCustomComponents = (element) => {
          // Regex to find all texts between ***
          const re = /\\*\\*\\*[^*]+\\*\\*\\*/g;
          const matches = element.innerHTML.match(re);

          if (matches) {
            for (const match of matches) {
              // Remove the *** markers with { and } for JSON.parse
              const json = match.replace('***', '{').replace('***', '}');
              let obj;

              try {
                obj = JSON.parse(json);
              } catch (e) {
                console.error("Invalid JSON:", json);
                continue;
              }

              const type = obj.type;
              

              if (type === "picture") {
                const src = obj.src;
                const caption = obj.caption;
                const img = document.createElement("img");
                img.src = "${u}" + src;
                img.alt = caption;
                // Optionally, set a caption below the image
                const figure = document.createElement("figure");
                const figcaption = document.createElement("figcaption");
                figcaption.innerText = caption;
                figure.appendChild(img);
                figure.appendChild(figcaption);
                
                // Replace the match in innerHTML with the new element
                element.innerHTML = element.innerHTML.replace(match, figure.outerHTML);
              }

              if (type === "table") {
                const headers = obj.headers;
                const rows = obj.rows;

                const table = document.createElement("table");
                const thead = document.createElement("thead");
                const tbody = document.createElement("tbody");

                const theadRow = document.createElement("tr");
                for (const header of headers) {
                  const th = document.createElement("th");
                  th.innerText = header;
                  theadRow.appendChild(th);
                }
                thead.appendChild(theadRow);

                for (const row of rows) {
                  const tr = document.createElement("tr");
                  for (const cell of row) {
                    const td = document.createElement("td");
                    td.innerText = cell;
                    tr.appendChild(td);
                  }
                  tbody.appendChild(tr);
                }

                table.appendChild(thead);
                table.appendChild(tbody);

                // Replace the match in innerHTML with the new element
                element.innerHTML = element.innerHTML.replace(match, table.outerHTML);
              }
            }
          }

          const date = document.querySelector(".date");
          if (date) {
            date.innerText = (new Date(2024, 5, 11)).toLocaleDateString("en-US", { weekday: "long", year: "numeric", month: "long", day: "numeric" });
          }
        };

        const onResize = () => {
          window.parent.postMessage({ type: "height", height: document.body.scrollHeight + 150 }, "*")
        }
        window.addEventListener("resize", onResize)

        const _ = async () => {
          var url = "${d}"
          var response = await fetch(url)
          var text = await response.text()
          var generator = new latexjs.HtmlGenerator({ hyphenate: false })
          generator = latexjs.parse(text, { generator: generator })
          document.head.appendChild(generator.stylesAndScripts("https://cdn.jsdelivr.net/npm/latex.js@0.12.4/dist/"))

          var viewer = document.getElementById("viewer")
          viewer.appendChild(generator.domFragment())
          replaceCustomComponents(viewer)
          setInterval(onResize, 500)
        }
        _()
      <\/script>
      <div id="viewer"></div>
    </body>
    </html>
    `,g=new Blob([p],{type:"text/html"}),m=URL.createObjectURL(g);n(m)},[i]),jsxRuntimeExports.jsx("iframe",{className:`PageLatex w-full ${e}`,style:{height:r,opacity:r>100?1:0,transition:"opacity 0.5s"},ref:o,src:t})}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(i,e){if(i==null)return{};var t=_objectWithoutPropertiesLoose(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function _objectWithoutPropertiesLoose(i,e){if(i==null)return{};var t={};for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(e.indexOf(n)>=0)continue;t[n]=i[n]}return t}function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},_extends.apply(this,arguments)}function ownKeys(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(n){_defineProperty(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function _defineProperty(i,e,t){return e=_toPropertyKey(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function _toPropertyKey(i){var e=_toPrimitive(i,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Tree2Element(i){return i&&i.map((e,t)=>React.createElement(e.tag,_objectSpread({key:t},e.attr),Tree2Element(e.child)))}function GenIcon(i){return e=>React.createElement(IconBase,_extends({attr:_objectSpread({},i.attr)},e),Tree2Element(i.child))}function IconBase(i){var e=t=>{var{attr:n,size:r,title:s}=i,o=_objectWithoutProperties(i,_excluded),l=r||t.size||"1em",u;return t.className&&(u=t.className),i.className&&(u=(u?u+" ":"")+i.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,o,{className:u,style:_objectSpread(_objectSpread({color:i.color||t.color},t.style),i.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&React.createElement("title",null,s),i.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,t=>e(t)):e(DefaultContext)}function MdDownload(i){return GenIcon({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(i)}function PageDownload({url:i,label:e,className:t}){return jsxRuntimeExports.jsx("div",{className:twMerge("flex justify-center items-center",t),children:jsxRuntimeExports.jsxs("a",{href:i,download:!0,target:"_blank",className:"flex items-center gap-2 text-white hover:underline",children:[jsxRuntimeExports.jsx(MdDownload,{}),e]})})}function Index$2(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(PageContainer,{children:[jsxRuntimeExports.jsx(PageLatex,{latex:"/latex/whitepaper.tex"}),jsxRuntimeExports.jsx(PageDownload,{url:"https://github.com/Uomi-network/uomi-whitepaper/blob/main/whitepaper.pdf",label:"Download PDF"})]})})}const WhitepaperPage=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Index$2,{})});function Consensus(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(PageContainer,{children:[jsxRuntimeExports.jsx(PageLatex,{latex:"/latex/consensus.tex"}),jsxRuntimeExports.jsx(PageDownload,{url:"https://github.com/Uomi-network/uomi-whitepaper/blob/main/consensus.pdf",label:"Download PDF"})]})})}const ConsensusPage=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Consensus,{})}),OPoCCalculator=()=>{const[i,e]=reactExports.useState(1e4),[t,n]=reactExports.useState(100),[r,s]=reactExports.useState(10),[o,l]=reactExports.useState(""),[u,d]=reactExports.useState(!1),p=(_,E)=>{let S;return function(...C){const T=()=>{clearTimeout(S),_(...C)};clearTimeout(S),S=setTimeout(T,E)}},g=_=>{if(_<1)return _;const E=Math.floor(Math.log10(_)),S=_/Math.pow(10,E),b=["","","","","","","","","",""];let C="";return E<0?C="":C=E.toString().split("").map(T=>b[parseInt(T)]).join(""),`${S.toFixed(2)}  10${C}`},m=async(_,E,S)=>{if(!_||!E||!S)return l("");d(!0);const b=parseInt(E),C=parseInt(S),T=Math.floor(b*.66),A=parseInt(_);if(C<1){l("0"),d(!1);return}if(C>b-T){l(""),d(!1);return}try{const L=await fetch("https://backend.uomi.ai/opoccalc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({V:b,v:C,H:T,stake:A})});if(L.ok){const k=await L.json();k.output?l(g(parseFloat(k.output))):l("")}else{const k=Math.pow((b-T)/b,C),j=A/k;l(g(j))}}catch{const L=Math.pow((b-T)/b,C),k=A/L;l(g(k))}d(!1)},y=reactExports.useRef(p(m,500));return reactExports.useEffect(()=>{y.current(i,t,r)},[i,t,r]),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"w-full max-w-4xl mx-auto bg-white/5 border border-white/10 p-8 md:p-12 rounded-2xl",children:jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[jsxRuntimeExports.jsx("label",{className:"text-white text-lg md:text-xl font-medium",children:"Stake per Node"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-white/70 text-lg",children:"$"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",step:"1000",value:i,onChange:_=>e(_.target.value),className:`px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white text-lg 
                         focus:outline-none focus:ring-2 focus:ring-[#c8e500] focus:border-transparent
                         min-w-[150px] transition-all duration-200`})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[jsxRuntimeExports.jsx("label",{className:"text-white text-lg md:text-xl font-medium",children:"Total Validators (V)"}),jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"1000",step:"1",value:t,onChange:_=>n(_.target.value),className:`px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white text-lg 
                         focus:outline-none focus:ring-2 focus:ring-[#c8e500] focus:border-transparent
                         min-w-[150px] transition-all duration-200`})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[jsxRuntimeExports.jsx("label",{className:"text-white text-lg md:text-xl font-medium",children:"OPoC Validation Subnet (v)"}),jsxRuntimeExports.jsx("span",{className:"text-[#c8e500] text-xl font-bold",children:r})]}),jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx("input",{type:"range",min:"1",max:Math.min(t,50),step:"1",value:r,onChange:_=>s(_.target.value),className:`w-full h-3 bg-white/10 rounded-lg appearance-none cursor-pointer
                         [&::-webkit-slider-thumb]:appearance-none 
                         [&::-webkit-slider-thumb]:h-6 
                         [&::-webkit-slider-thumb]:w-6 
                         [&::-webkit-slider-thumb]:bg-[#c8e500] 
                         [&::-webkit-slider-thumb]:rounded-full 
                         [&::-webkit-slider-thumb]:cursor-pointer
                         [&::-webkit-slider-thumb]:shadow-lg
                         [&::-moz-range-thumb]:appearance-none 
                         [&::-moz-range-thumb]:h-6 
                         [&::-moz-range-thumb]:w-6 
                         [&::-moz-range-thumb]:bg-[#c8e500] 
                         [&::-moz-range-thumb]:rounded-full
                         [&::-moz-range-thumb]:border-none
                         [&::-moz-range-thumb]:cursor-pointer`})})]}),jsxRuntimeExports.jsxs(motion.div,{className:"bg-gradient-to-r from-white/5 to-white/10 border border-white/20 rounded-xl p-6 mt-8",animate:u?{opacity:.7}:{opacity:1},transition:{duration:.3},children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-lg md:text-xl font-medium",children:"Economic Security per Inference"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[u&&jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-[#c8e500]"}),jsxRuntimeExports.jsx("span",{className:"text-[#c8e500] text-2xl md:text-3xl font-bold",children:o?`${o} $`:""})]})]}),o&&o!==""&&o!=="0"&&jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-white/60 text-sm mt-4",children:"This represents the minimum reward an attacker would need to make cheating financially worthwhile, given the probability of successfully compromising all selected validators."})]})]})})},TypingText=({text:i,className:e})=>{const[t,n]=reactExports.useState(""),[r,s]=reactExports.useState(0),o=reactExports.useRef(null),l=useInView(o,{once:!0,margin:"-100px 0px"});return reactExports.useEffect(()=>{if(l&&r<i.length){const u=setTimeout(()=>{n(d=>d+i[r]),s(d=>d+1)},40);return()=>clearTimeout(u)}},[r,l,i]),jsxRuntimeExports.jsxs("p",{ref:o,className:e,children:[t,jsxRuntimeExports.jsx("span",{className:"animate-pulse",children:"|"})]})},sections=[{title:"The Challenge",subtitle:"Bringing AI to Blockchain",text:"Traditional consensus algorithms like Proof of Work (PoW) and Proof of Stake (PoS) were never designed to verify heavy AI computations. Having every node verify each step of a large model execution would be prohibitively expensive and impossibly slow.",detail:"Running a state-of-the-art AI model can require trillions of operations. If every validator had to verify these operations, network costs would be astronomical.",color:"#c8e500"},{title:"The OPoC Solution",subtitle:"Optimistic Validation",text:"OPoC (Optimistic Proof of Computation) leverages economic security and probabilistic guarantees instead of full network verification. A small subset of validators is randomly selected for each computation, creating a system that's both secure and efficient.",detail:"This approach transforms an exponential verification problem into a linear one, making decentralized AI computation practical for the first time.",color:"#c8e500"},{title:"How It Works",subtitle:"Selective Verification",text:"Only a small, randomly selected subset of validators from the network performs each AI inference. If all selected validators agree on the result, it's accepted. If there's disagreement, the verification escalates to more validators.",detail:"Byzantine (dishonest) validators are identified and penalized through token slashing, creating strong economic incentives for honest participation.",color:"#c8e500"},{title:"Security Guarantees",subtitle:"Mathematical Assurance",text:"The Probability that all selected validators are dishonest drops exponentially as the number of participating validators grows. With even modest validator pools, the probability of successful fraud becomes vanishingly small.",detail:"For a network with 100 validators where 10 validate each computation, the probability of selecting all dishonest validators (assuming 1/3 are dishonest) is approximately 0.0000076.",color:"#c8e500"},{title:"Economic Security",subtitle:"Financial Incentives",text:"Each validator stakes tokens to participate. Attempting to cheat carries a slashing risk where these tokens are lost. The cost of successful fraud increases exponentially with network size.",detail:"With a $10,000 stake per validator, the economic security of each computation can reach billions of dollars, making attacks financially irrational.",color:"#c8e500"},{title:"Scaling Capability",subtitle:"Linear Growth",text:"As more nodes join the network, OPoC enables more parallel inferences by assigning each validator subset independently. This allows throughput to increase linearly with network size.",detail:"Unlike traditional consensus where adding nodes increases redundant computation, OPoC leverages new validators to increase the network's parallel processing capacity.",color:"#c8e500"},{title:"Verifying Non Deterministic Output",subtitle:"Deterministic Undeterminism",text:"LLMs leverages random sampling to explore a wider latent space in their tokens production. This introduces formidable challenges for AI inference verification, making computations not fully reproducible. UOMI solves this hard problem with a groundbreaking approach.",detail:"Instead of verifying simple token match, UOMI verifies token probability distributions, requiring that each token produced fits inside a pre-defined boundary of the model's token probability distribution. This approach allows for secure inference verification with random token sampling, maintaining AI models full capabilities.",color:"#c8e500"}],StatCounter=({value:i,label:e,duration:t=2e3,symbol:n=""})=>{const[r,s]=reactExports.useState(0),o=reactExports.useRef(null),l=useInView(o);return reactExports.useEffect(()=>{if(l){let u=0;const d=i/(t/50),p=setInterval(()=>{u+=d,u>i?(s(i),clearInterval(p)):s(Math.floor(u))},50);return()=>clearInterval(p)}},[l,i,t]),jsxRuntimeExports.jsxs("div",{ref:o,className:"flex flex-col items-center",children:[jsxRuntimeExports.jsxs("span",{className:"text-4xl md:text-6xl font-bold text-white mb-2",children:[r,n]}),jsxRuntimeExports.jsx("span",{className:"text-white/60 text-lg text-center",children:e})]})},ComparisonTable=()=>{const i=reactExports.useRef(null),e=useInView(i,{once:!0,margin:"-100px 0px"}),t={hidden:{opacity:0,x:-20},visible:r=>({opacity:1,x:0,transition:{delay:r*.1,duration:.5}})},n=[{approach:"Traditional PoW/PoS",verification:"Full network verification",scaling:"Cost increases linearly with Nodes count",security:"Consensus-based",verificationColor:"text-red-400",scalingColor:"text-red-400"},{approach:"ZK Proofs",verification:"Low verification, high proving",scaling:"Limited by prover capacity, 1000x Overhead",security:"Cryptographic guarantees",verificationColor:"text-yellow-400",scalingColor:"text-yellow-400"},{approach:"OPoC",verification:"Subset verification",scaling:"Linear with validators",security:"Economic + Probabilistic",verificationColor:"text-green-400",scalingColor:"text-green-400",highlight:!0}];return jsxRuntimeExports.jsxs("div",{ref:i,className:"w-full mt-12 mb-16",children:[jsxRuntimeExports.jsx("div",{className:"hidden lg:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full border-collapse",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b border-white/10",children:[jsxRuntimeExports.jsx("th",{className:"text-left p-4 text-white/60",children:"Approach"}),jsxRuntimeExports.jsx("th",{className:"text-left p-4 text-white/60",children:"Verification Cost"}),jsxRuntimeExports.jsx("th",{className:"text-left p-4 text-white/60",children:"Scaling"}),jsxRuntimeExports.jsx("th",{className:"text-left p-4 text-white/60",children:"Security"})]})}),jsxRuntimeExports.jsx("tbody",{children:n.map((r,s)=>jsxRuntimeExports.jsxs(motion.tr,{custom:s,variants:t,initial:"hidden",animate:e?"visible":"hidden",className:"border-b border-white/10",children:[jsxRuntimeExports.jsx("td",{className:`p-4 ${r.highlight?"text-[#c8e500] font-bold":""}`,children:r.approach}),jsxRuntimeExports.jsx("td",{className:`p-4 ${r.verificationColor}`,children:r.verification}),jsxRuntimeExports.jsx("td",{className:`p-4 ${r.scalingColor}`,children:r.scaling}),jsxRuntimeExports.jsx("td",{className:"p-4",children:r.security})]},s))})]})}),jsxRuntimeExports.jsx("div",{className:"lg:hidden space-y-4",children:n.map((r,s)=>jsxRuntimeExports.jsxs(motion.div,{custom:s,variants:t,initial:"hidden",animate:e?"visible":"hidden",className:`p-4 rounded-lg border ${r.highlight?"border-[#c8e500]/20 bg-[#c8e500]/5":"border-white/10 bg-white/5"}`,children:[jsxRuntimeExports.jsx("div",{className:`font-bold mb-3 text-lg ${r.highlight?"text-[#c8e500]":"text-white"}`,children:r.approach}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-white/60",children:"Verification: "}),jsxRuntimeExports.jsx("span",{className:r.verificationColor,children:r.verification})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-white/60",children:"Scaling: "}),jsxRuntimeExports.jsx("span",{className:r.scalingColor,children:r.scaling})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-white/60",children:"Security: "}),jsxRuntimeExports.jsx("span",{className:"text-white",children:r.security})]})]})]},s))})]})},NetworkDiagram=()=>jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx(motion.img,{src:"/assets/img3.png",alt:"OPoC Network Diagram",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0,margin:"-100px 0px"},transition:{duration:.8,ease:"easeOut"},className:"w-full rounded-2xl shadow-lg"})});function OpocExplainer(){const{scrollY:i}=useScroll(),[e,t]=reactExports.useState(0),n=reactExports.useRef(null),r=reactExports.useRef(null),s=reactExports.useRef(null),o=reactExports.useRef(null),l=useTransform(i,[0,600],[0,100]),u=useTransform(i,[0,600],[0,50]),d=useTransform(i,[0,600],[1,0]),p=useTransform(i,[0,100],[0,20]),g=useTransform(i,[0,1e3],[0,-100]);reactExports.useEffect(()=>{const S=()=>{if(!s.current||!o.current)return;const b=window.innerHeight,C=s.current.getBoundingClientRect();if(o.current.getBoundingClientRect().top<=0){const A=C.top,N=Math.abs(A),L=b*.6,k=Math.min(Math.floor(N/L),sections.length-1);k>=0&&t(k)}};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[]);const m={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},_={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},E=({text:S,className:b})=>{const C=S.split(" ");return jsxRuntimeExports.jsx("h3",{className:b,children:C.map((T,A)=>jsxRuntimeExports.jsxs("span",{className:"inline-block",children:[T.split("").map((N,L)=>jsxRuntimeExports.jsx(motion.span,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:Math.random()*.8+.4,delay:Math.random()*1.2,ease:"easeOut"},viewport:{once:!0},className:"inline-block font-sx",children:N},L)),A<C.length-1&&jsxRuntimeExports.jsx("span",{className:"inline-block",children:""})]},A))})};return jsxRuntimeExports.jsxs("div",{ref:n,className:"bg-black text-white min-h-screen w-full font-sans",children:[jsxRuntimeExports.jsxs("div",{ref:r,className:"h-screen relative overflow-hidden flex flex-col justify-center items-center px-6",children:[jsxRuntimeExports.jsxs(motion.div,{style:{y:l,opacity:d},className:"text-center",children:[jsxRuntimeExports.jsx(EnhancedTitles$1,{category:"Secured by"}),jsxRuntimeExports.jsx(E,{text:"Optimistic Proof of Computation",className:"text-5xl md:text-5xl font-extrabold text-[#c8e500] leading-tight mb-8"}),jsxRuntimeExports.jsx(motion.p,{style:{y:u},initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:.4},className:"text-xl md:text-2xl text-white/70 max-w-3xl mx-auto leading-relaxed",children:"A revolutionary consensus protocol enabling efficient, secure, and scalable AI computation validation on decentralized networks."})]}),jsxRuntimeExports.jsx(motion.div,{style:{y:p,opacity:d},className:"absolute bottom-10 left-1/2 transform -translate-x-1/2",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-white/50 text-sm mb-2",children:"Scroll to explore"}),jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M7 10L12 15L17 10",stroke:"rgba(255,255,255,0.5)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),jsxRuntimeExports.jsx("div",{className:"bg-black/80 py-24 px-6 md:px-24",children:jsxRuntimeExports.jsxs(motion.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px 0px"},variants:m,className:"max-w-5xl mx-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-3",children:"The Problem"}),jsxRuntimeExports.jsx("div",{className:"h-1 w-24 bg-[#c8e500] mb-12"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-xl text-white/70 leading-relaxed mb-8",children:["The intersection of artificial intelligence and blockchain has been hindered by a fundamental challenge: ",jsxRuntimeExports.jsx("strong",{className:"text-white",children:"verification overhead"}),"."]}),jsxRuntimeExports.jsx(TypingText,{text:"Traditional consensus mechanisms require every node to verify computationspractical for financial transactions, but prohibitive for AI workloads that involve billions or trillions of operations.",className:"text-lg text-white/70 leading-relaxed mb-6"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-white/70 leading-relaxed",children:"This creates a seemingly insurmountable barrier to running machine learning models on decentralized networks."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/5 p-8 rounded-xl border border-white/10",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold text-[#c8e500] mb-8",children:"The Cost of Verification"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsx(StatCounter,{value:100,label:"% of Network Resources Wasted on Redundant Verification",symbol:"%"}),jsxRuntimeExports.jsx(StatCounter,{value:1e3,label:" Higher Cost for AI vs. Simple Transactions"})]}),jsxRuntimeExports.jsx("div",{className:"mt-8 pt-8 border-t border-white/10",children:jsxRuntimeExports.jsx("p",{className:"text-white/50 text-sm italic",children:`"The combination of AI's computational intensity and blockchain's verification redundancy creates an exponential cost problem."`})})]})]}),jsxRuntimeExports.jsx(ComparisonTable,{})]})}),jsxRuntimeExports.jsxs(motion.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px 0px"},variants:m,className:"min-h-screen flex flex-col justify-center py-24 px-6 md:px-24 relative",style:{background:"linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(20,20,30,1) 100%)"},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 opacity-10",style:{y:g},children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-8 h-full",children:Array(64).fill(0).map((S,b)=>jsxRuntimeExports.jsx("div",{className:"border-[0.5px] border-white/5"},b))})}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto z-10",children:[jsxRuntimeExports.jsx(E,{text:"The OPoC Protocol",className:"text-4xl md:text-6xl font-bold text-white mb-4"}),jsxRuntimeExports.jsx("div",{className:"h-1 w-24 bg-[#c8e500] mb-12"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-white/70 leading-relaxed mb-8",children:"OPoC solves the AI-blockchain integration problem with a novel approach that drastically reduces verification costs while maintaining security."}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-[#c8e500] text-xl font-semibold mb-3",children:"Key Innovation:"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed",children:"Instead of requiring the entire network to verify every computation, OPoC randomly selects a small subset of validators. The probability of selecting all malicious validators becomes vanishingly small as the network grows."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-[#c8e500] text-xl font-semibold mb-3",children:"Mathematical Security:"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed mb-4",children:"OPoC's security scales exponentially with network size. As validator population V increases, the probability of selecting all Byzantine validators among the random subset v decreases exponentially, while maintaining constant computational effort. The hypergeometric distribution shows that with v/V = 3% and honest ratio H/V = 2/3:"}),jsxRuntimeExports.jsx("img",{src:"/equation_opoc.svg",alt:"Probability Formula",className:"w-60 max-w-md mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-sm mb-4 text-center",children:"Where V = total validators, v = selected validators, h = honest ratio"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed",children:"This exponential security improvement enables the percentage of participating validators v/V required for consistent security to decrease polynomially as the network grows, providing superior scalability compared to PoS/PoW linear scaling."})]})]}),jsxRuntimeExports.jsx(NetworkDiagram,{})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",ref:s,children:[jsxRuntimeExports.jsx("div",{ref:o,className:"sticky top-0 h-screen flex items-center bg-black overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"w-full px-6 md:px-24",children:jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto",children:[jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{duration:.6},className:"grid grid-cols-1 md:grid-cols-5 gap-8",children:[jsxRuntimeExports.jsx("div",{className:"md:col-span-2",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8},children:[jsxRuntimeExports.jsx(E,{text:sections[e].title,className:"text-4xl md:text-4xl font-bold text-[#c8e500] mb-2"}),jsxRuntimeExports.jsx("h3",{className:"text-xl text-white/40 mb-4",children:sections[e].subtitle}),jsxRuntimeExports.jsx("div",{className:"h-1 w-16 bg-[#c8e500] mb-8"})]})}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-3",children:[jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},className:"text-xl text-white/80 leading-relaxed mb-6",children:sections[e].text}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.5},className:"mt-6 bg-white/5 p-6 rounded-lg border border-white/10",children:jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed",children:sections[e].detail})})]})]},e)}),jsxRuntimeExports.jsx("div",{className:"mt-16",children:jsxRuntimeExports.jsx("div",{className:"flex space-x-2 justify-center",children:sections.map((S,b)=>jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full ${b===e?"bg-[#c8e500]":"bg-white/20"}`},b))})})]})})}),jsxRuntimeExports.jsx("div",{className:"w-full bg-transparent",children:sections.map((S,b)=>jsxRuntimeExports.jsx("div",{className:"h-[60vh] w-full"},b))})]}),jsxRuntimeExports.jsx(motion.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px 0px"},variants:y,className:"py-24 px-6 md:px-24 bg-gradient-to-b from-black/90 to-black",children:jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto",children:[jsxRuntimeExports.jsx(E,{text:"Economic Security Model",className:"text-4xl md:text-6xl font-bold text-white mb-4"}),jsxRuntimeExports.jsx("div",{className:"h-1 w-24 bg-[#c8e500] mb-16"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsxs(motion.div,{variants:_,className:"lg:col-span-2 bg-white/5 p-8 rounded-xl border border-white/10",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold text-[#c8e500] mb-6",children:"How OPoC Makes Attacks Financially Irrational"}),jsxRuntimeExports.jsxs("div",{className:"space-y-6 text-white/70",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-[#c8e500] text-black flex items-center justify-center mr-4 mt-1",children:"1"}),jsxRuntimeExports.jsx("p",{children:"Each validator must stake tokens with real economic value to participate in the network."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-[#c8e500] text-black flex items-center justify-center mr-4 mt-1",children:"2"}),jsxRuntimeExports.jsx("p",{children:'If a validator attempts to verify fraudulent computations, their stake is "slashed" (partially or fully confiscated).'})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-[#c8e500] text-black flex items-center justify-center mr-4 mt-1",children:"3"}),jsxRuntimeExports.jsx("p",{children:"The minimum reward an attacker would need to make cheating worthwhile increases exponentially with network size."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-[#c8e500] text-black flex items-center justify-center mr-4 mt-1",children:"4"}),jsxRuntimeExports.jsx("p",{children:"With just 100 validators, 10 partecipants and a $10,000 stake per validator, the economic security per computation can reach over $1 billion."})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8 pt-8 border-t border-white/10",children:[jsxRuntimeExports.jsx("p",{className:"text-xl font-semibold text-white/80",children:"Minimum Attack Reward Formula:"}),jsxRuntimeExports.jsx("div",{className:"mt-4 bg-white/10 p-4 rounded-lg text-[#c8e500] font-mono",children:"RewardToDefect = stake / P(allByzantine)"})]})]}),jsxRuntimeExports.jsxs(motion.div,{variants:_,className:"flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/5 p-6 rounded-xl border border-white/10 mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-[#c8e500] mb-4",children:"Economic Security"}),jsxRuntimeExports.jsx(StatCounter,{value:1315,label:"Billion Dollar Security per Computation",symbol:"M",duration:3e3})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/5 p-6 rounded-xl border border-white/10",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-[#c8e500] mb-4",children:"Attack Probability"}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-4xl md:text-4xl font-bold text-white",children:"~0.0000076%"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 mt-2",children:"Chance of Successful Attack"})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-white/50 text-sm",children:jsxRuntimeExports.jsx("p",{children:"In a network with 100 validators, with 10 randomly selected for each computation (assuming 1/3 are Byzantine)."})})]})]})]})]})}),jsxRuntimeExports.jsx(motion.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px 0px"},variants:m,className:"py-24 px-6 md:px-24 bg-gradient-to-b from-black to-gray-900",children:jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto",children:[jsxRuntimeExports.jsx(E,{text:"OPoC Security Calculator",className:"text-4xl md:text-6xl font-bold text-white mb-4"}),jsxRuntimeExports.jsx("div",{className:"h-1 w-24 bg-[#c8e500] mb-8"}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8,delay:.2},className:"text-xl text-white/70 leading-relaxed mb-12 max-w-3xl",children:"Explore how OPoC's economic security scales with your network parameters. Adjust the values below to see how stake amounts and validator distribution affect the minimum reward needed to make attacks financially viable."}),jsxRuntimeExports.jsx(OPoCCalculator,{})]})}),jsxRuntimeExports.jsx(motion.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px 0px"},variants:m,className:"min-h-screen py-24 px-6 md:px-24 bg-black",children:jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto",children:[jsxRuntimeExports.jsx(E,{text:"Linear Scaling & Parallel Processing",className:"text-4xl md:text-6xl font-bold text-white mb-4"}),jsxRuntimeExports.jsx("div",{className:"h-1 w-24 bg-[#c8e500] mb-12"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold text-[#c8e500] mb-6",children:"Unique Scaling Properties"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed mb-8",children:"Traditional blockchain consensus requires every node to verify every computation, making it impossible to scale throughput by adding more nodes."}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed mb-8",children:"With OPoC, adding more validators to the network directly increases parallel processing capacity, creating linear throughput scaling."}),jsxRuntimeExports.jsxs("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-semibold text-[#c8e500] mb-3",children:"Parallel Inference Formula"}),jsxRuntimeExports.jsx("div",{className:"text-white/90 text-lg font-mono",children:"Parallel Computations = V  v"}),jsxRuntimeExports.jsx("p",{className:"text-white/50 text-sm mt-4",children:"Where V is the total validator population and v is the number of validators needed per computation"})]})]})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.8,delay:.2},className:"bg-white/5 p-8 rounded-xl border border-white/10",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold text-[#c8e500] mb-8 text-center",children:"Scalability Comparison"}),jsxRuntimeExports.jsxs("div",{className:"space-y-10",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg text-white/70 mb-2",children:"Traditional Consensus"}),jsxRuntimeExports.jsxs("div",{className:"relative pt-1",children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden h-6 flex rounded-full bg-white/10",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},whileInView:{width:"20%"},viewport:{once:!0},transition:{duration:1},className:"flex flex-col justify-center text-center text-white text-xs whitespace-nowrap px-2 bg-red-500 rounded-full",children:"20%"})}),jsxRuntimeExports.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Adding nodes increases redundant computation"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg text-white/70 mb-2",children:"ZK-based Systems"}),jsxRuntimeExports.jsxs("div",{className:"relative pt-1",children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden h-6 flex rounded-full bg-white/10",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},whileInView:{width:"50%"},viewport:{once:!0},transition:{duration:1,delay:.3},className:"flex flex-col justify-center text-center text-white text-xs whitespace-nowrap px-2 bg-yellow-500 rounded-full",children:"50%"})}),jsxRuntimeExports.jsx("p",{className:"text-white/40 text-xs mt-1",children:"High proving costs limit practical scalability"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg text-white/70 mb-2",children:"OPoC Protocol"}),jsxRuntimeExports.jsxs("div",{className:"relative pt-1",children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden h-6 flex rounded-full bg-white/10",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},whileInView:{width:"100%"},viewport:{once:!0},transition:{duration:1,delay:.6},className:"flex flex-col justify-center text-center text-white text-xs whitespace-nowrap px-2 bg-[#c8e500] rounded-full",children:"100%"})}),jsxRuntimeExports.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Linear throughput scaling with network size"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-10 pt-6 border-t border-white/10",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx(StatCounter,{value:10,label:"Nodes",symbol:"",duration:1e3})}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx(StatCounter,{value:100,label:"Throughput",symbol:"",duration:1500})})]})})]})]})]})}),jsxRuntimeExports.jsx(motion.section,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px 0px"},variants:m,className:"bg-black text-white py-24 px-6 md:px-24",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto space-y-16",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(E,{text:"Deterministic Indeterminism",className:"text-4xl md:text-6xl font-bold text-white"}),jsxRuntimeExports.jsx("div",{className:"h-1 w-24 bg-[#c8e500] mt-4"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"space-y-10 max-w-3xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl md:text-3xl font-semibold text-[#c8e500] mb-4",children:"Embracing Uncertainty, Verifying Truth"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed",children:"Traditional systems attempt to force determinism by eliminating all randomness. But in doing so, they restrict creativity, adaptability, and the natural behavior of intelligent agents."}),jsxRuntimeExports.jsxs("p",{className:"text-white/70 leading-relaxed",children:["UOMI introduces ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:"Deterministic Indeterminism"}),": an innovative approach that accepts controlled unpredictability, and proves that results are still within defined and verifiable bounds."]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.1},className:"space-y-12",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-3xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl md:text-3xl font-semibold text-[#c8e500] mb-4",children:"Proofs, not Reproduction"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed",children:"Instead of forcing every validator to reach an identical output, UOMI allows slight variations and proves via a probabilistic consensus that the computation was executed faithfully."})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold text-[#c8e500]",children:"Bounded Result Spaces"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 text-sm",children:"Validators agree on an expected range of valid outcomes, rather than a single hash. This makes room for intelligent flexibility."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold text-[#c8e500]",children:"Probabilistic Proofs"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 text-sm",children:"Instead of reproducing the exact result, validators verify that an output could plausibly come from the claimed model under shared conditions."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold text-[#c8e500]",children:"Diversity as a Feature"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 text-sm",children:"Agent decisions are no longer constrained by determinism. Instead, systems evolve with a richer, more natural decision space  still verifiable, always honest."})]})]})]})]})}),jsxRuntimeExports.jsx(motion.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:m,className:"py-24 px-6 md:px-24 bg-black border-t border-white/10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[jsxRuntimeExports.jsx(E,{text:"The Future of Decentralized AI",className:"text-3xl md:text-5xl font-bold text-[#c8e500] mb-8"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-white/70 leading-relaxed max-w-3xl mx-auto mb-12",children:"OPoC brings mathematical guarantees and economic alignment to large AI model inference, enabling a new generation of decentralized AI applications."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mb-8 max-w-2xl mx-auto",children:[jsxRuntimeExports.jsx("button",{className:"rounded-full bg-gradient-to-r from-[#c8e500] to-[#a9c000] px-6 py-3 sm:px-8 sm:py-4 text-black font-bold text-base sm:text-lg whitespace-nowrap",onClick:()=>window.location.href="https://uomi.ai/consensus",children:"OPoC Paper"}),jsxRuntimeExports.jsx("button",{className:"rounded-full bg-gradient-to-r from-[#c8e500] to-[#a9c000] px-6 py-3 sm:px-8 sm:py-4 text-black font-bold text-base sm:text-lg whitespace-nowrap",onClick:()=>window.location.href="https://uomi.ai/deterministc-indeterminism",children:"Deterministic Undeterminism Paper"})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{delay:.5},className:"mt-16 text-white/30 text-sm",children:"Building the foundation for trustless and efficient AI computation on decentralized networks"})]})})]})}const fadeUpVariants={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.7,ease:[.25,.1,.25,1]}}},staggerContainerVariants={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15,delayChildren:.3}}},gridItemVariants={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.5}}},Header=()=>jsxRuntimeExports.jsxs(motion.div,{className:"text-center mb-16",children:[jsxRuntimeExports.jsx(motion.div,{variants:fadeUpVariants,initial:"hidden",animate:"visible",className:"inline-block mb-3 px-4 py-1.5 rounded-full text-xs font-medium",style:{backgroundColor:"rgba(223, 254, 0, 0.1)",color:"#dffe00"},children:"DOCUMENTATION"}),jsxRuntimeExports.jsx(motion.h1,{variants:fadeUpVariants,initial:"hidden",animate:"visible",transition:{delay:.1},className:"text-4xl md:text-6xl font-bold mb-4 text-white",children:"Deploy Unstoppable Agents."}),jsxRuntimeExports.jsx(motion.p,{variants:fadeUpVariants,initial:"hidden",animate:"visible",transition:{delay:.2},className:"max-w-xl mx-auto text-zinc-400 text-lg mb-8",children:"Full EVM-compatibility."}),jsxRuntimeExports.jsxs(motion.div,{variants:fadeUpVariants,initial:"hidden",animate:"visible",transition:{delay:.3},className:"flex items-center justify-center gap-4",children:[jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-white rounded-lg px-6 py-3 flex items-center space-x-2 font-medium",style:{backgroundColor:"#dffe00",color:"#000",boxShadow:"0 4px 10px -1px rgba(223, 254, 0, 0.2)"},onClick:()=>window.location.href="https://docs.uomi.ai/",children:[jsxRuntimeExports.jsx(Zap,{size:16}),jsxRuntimeExports.jsx("span",{children:"Quick Start"})]}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"border border-zinc-700 rounded-lg px-6 py-3 flex items-center space-x-2 text-white",onClick:()=>window.open("https://discord.gg/RV5DUpjsdY","_blank"),children:[jsxRuntimeExports.jsx(Terminal,{size:16}),jsxRuntimeExports.jsx("span",{children:"Join the Developer Discord"})]})]})]}),AnimatedBackground=()=>{const i=reactExports.useRef(null);return reactExports.useEffect(()=>{const e=i.current;if(!e)return;const t=e.getContext("2d");let n,r=0;const s=()=>{e.width=window.innerWidth,e.height=window.innerHeight};window.addEventListener("resize",s),s();const o=()=>{t.clearRect(0,0,e.width,e.height),r+=.005,t.strokeStyle="rgba(255, 255, 255, 0.02)",t.lineWidth=1;const l=40,u=Math.PI/6;for(let d=-e.height;d<e.width+e.height;d+=l)t.beginPath(),t.moveTo(d,0),t.lineTo(d-e.height*Math.tan(u),e.height),t.stroke(),t.beginPath(),t.moveTo(0,d),t.lineTo(e.width,d-e.width*Math.tan(u)),t.stroke();for(let d=0;d<3;d++){const p=100+d*50,g=e.width*(.3+d*.2),m=e.height*.7+Math.sin(r+d)*50,y=t.createRadialGradient(g,m,0,g,m,p);y.addColorStop(0,"rgba(147, 51, 234, 0.1)"),y.addColorStop(1,"rgba(147, 51, 234, 0)"),t.beginPath(),t.arc(g,m,p,0,Math.PI*2),t.fillStyle=y,t.fill()}n=window.requestAnimationFrame(o)};return o(),()=>{window.cancelAnimationFrame(n),window.removeEventListener("resize",s)}},[]),jsxRuntimeExports.jsx("canvas",{ref:i,className:"absolute inset-0 w-full h-full z-0"})},TestnetSection=()=>jsxRuntimeExports.jsx(motion.div,{variants:staggerContainerVariants,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"mb-24",children:jsxRuntimeExports.jsxs("div",{className:"bg-zinc-900/50 rounded-lg border border-zinc-800 p-8 backdrop-blur-sm",children:[jsxRuntimeExports.jsx(motion.h2,{variants:gridItemVariants,className:"text-3xl font-bold text-white mb-4",children:"Deploy on UOMI Testnet"}),jsxRuntimeExports.jsx(motion.p,{variants:gridItemVariants,className:"text-zinc-400 mb-8 max-w-xl",children:"Everything you need to deploy on UOMI Testnet, from the faucet, network details and explorer, we got you."}),jsxRuntimeExports.jsxs(motion.div,{variants:gridItemVariants,className:"flex gap-4 mb-12",children:[jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg bg-[#dffe00]/10 text-[#dffe00] border border-[#dffe00]/30",children:[jsxRuntimeExports.jsx(Globe,{size:16}),"UOMI Testnet"]}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg border border-zinc-700 text-white hover:cursor-pointer",onClick:()=>window.open("https://explorer.uomi.ai/","_blank"),children:[jsxRuntimeExports.jsx(Search,{size:16}),"Testnet Block Explorer"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsx(motion.div,{variants:gridItemVariants,className:"space-y-4",children:[{label:"Network Name",value:"UOMI Finney",icon:null},{label:"Chain ID",value:"4386",icon:null},{label:"Default RPC URL",value:"https://finney.uomi.ai",icon:null},{label:"Block explorer URL",value:"https://explorer.uomi.ai/",icon:null},{label:"Currency symbol",value:"UOMI",icon:null}].map((i,e)=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-3 bg-black/30 rounded",children:[jsxRuntimeExports.jsx("span",{className:"text-zinc-400",children:i.label}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium flex items-center gap-2",children:i.value})]},e))}),jsxRuntimeExports.jsx(motion.div,{variants:gridItemVariants,className:"bg-black/30 rounded-lg p-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"text-zinc-400 mb-4",children:"Testnet tokens are for development purposes only, they do not have value."}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-[#dffe00] text-black font-medium py-4 rounded-lg inline-flex items-center justify-center gap-2 hover:cursor-pointer",onClick:()=>window.open("https://app.uomi.ai/faucet","_blank"),children:[jsxRuntimeExports.jsx("span",{children:"Get Testnet Tokens"}),jsxRuntimeExports.jsx(ArrowRight,{size:16})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-zinc-400",children:"Access the faucet to get UOMI testnet tokens"})]})})]})]})}),GuideCard=({title:i,icon:e,description:t})=>jsxRuntimeExports.jsxs(motion.div,{variants:gridItemVariants,whileHover:{scale:1.02},className:"bg-zinc-900/50 rounded-lg border border-zinc-800 p-6 backdrop-blur-sm hover:border-[#dffe00]/30 transition-colors cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg bg-[#dffe00]/10",children:jsxRuntimeExports.jsx(e,{className:"h-5 w-5 text-[#dffe00]"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:i})]}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 text-sm",children:t})]}),SearchBar=({searchQuery:i,setSearchQuery:e,isSearchFocused:t,setIsSearchFocused:n,showClearButton:r,clearSearch:s})=>jsxRuntimeExports.jsxs(motion.div,{variants:fadeUpVariants,initial:"hidden",animate:"visible",transition:{delay:.3},className:"max-w-xl mx-auto mb-16 relative",children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 rounded-xl transition-all duration-300 ${t?"shadow-[0_0_30px_rgba(223,254,0,0.1)]":""}`}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-zinc-500"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search documentation...",value:i,onChange:o=>e(o.target.value),onFocus:()=>n(!0),onBlur:()=>n(!1),className:`w-full bg-zinc-900/30 border border-zinc-800/50 rounded-xl py-4 pl-12 pr-12 
          text-white placeholder-zinc-500 focus:outline-none focus:border-[#dffe00]/30
          backdrop-blur-sm transition-all duration-300`}),r&&jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0},animate:{opacity:1},onClick:s,className:`absolute right-4 top-1/2 transform -translate-y-1/2 
            text-zinc-500 hover:text-white transition-colors`,whileHover:{scale:1.1},whileTap:{scale:.95},children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})]}),CategoryCard=({icon:i,title:e,description:t,links:n})=>jsxRuntimeExports.jsxs(motion.div,{variants:gridItemVariants,className:"group relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#dffe00]/10 to-transparent opacity-0 group-hover:opacity-100 rounded-xl transition-opacity duration-300"}),jsxRuntimeExports.jsxs("div",{className:"relative p-8 border border-zinc-800/50 bg-zinc-900/30 backdrop-blur-sm rounded-xl h-full flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"mb-5",children:[jsxRuntimeExports.jsx("div",{className:"mb-5 p-3 rounded-lg w-12 h-12 flex items-center justify-center transition-all duration-300",style:{backgroundColor:"rgba(223, 254, 0, 0.1)"},children:jsxRuntimeExports.jsx(i,{className:"h-5 w-5",style:{color:"#dffe00"}})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-2 text-white group-hover:text-[#dffe00] transition-colors duration-300",children:e}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t})]}),jsxRuntimeExports.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col",children:[jsxRuntimeExports.jsx("h4",{className:"text-xs uppercase text-zinc-500 mb-2 font-medium tracking-wider",children:"Resources"}),jsxRuntimeExports.jsx("div",{className:"space-y-2 overflow-y-auto pr-1 custom-scrollbar flex-grow",children:n.map((r,s)=>jsxRuntimeExports.jsxs("a",{href:r.url,className:"flex items-center justify-between text-zinc-400 hover:text-white py-1.5 group/link transition-colors duration-200",children:[jsxRuntimeExports.jsx("span",{className:"truncate text-sm mr-2",children:r.title}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},whileHover:{opacity:1},className:"flex-shrink-0",children:jsxRuntimeExports.jsx(ArrowRight,{className:"w-3.5 h-3.5 text-[#dffe00]"})})]},s))})]}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-6 -right-6 w-12 h-12 rotate-45 bg-[#dffe00]/5 group-hover:bg-[#dffe00]/10 transition-colors duration-300"})]})]}),NoResults=({searchQuery:i})=>jsxRuntimeExports.jsxs(motion.div,{variants:fadeUpVariants,initial:"hidden",animate:"visible",className:"text-center rounded-xl border border-zinc-800/50 bg-zinc-900/30 backdrop-blur-sm p-8 max-w-lg mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-zinc-800/50 mb-4",children:jsxRuntimeExports.jsx(Search,{className:"w-5 h-5 text-zinc-400"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"No results found"}),jsxRuntimeExports.jsxs("p",{className:"text-zinc-400",children:[`We couldn't find any matches for "`,i,'"']})]}),DocsLanding=()=>{const[i,e]=reactExports.useState(""),[t,n]=reactExports.useState(!1),[r,s]=reactExports.useState([]),[o,l]=reactExports.useState(!1),u=[{icon:Book,title:"Learn",description:"Get started with UOMI blockchain and understand the core concepts",tags:["introduction","basics","core concepts","architecture","consensus"],links:[{title:"Introduction to UOMI",url:"https://docs.uomi.ai/"},{title:"Architecture Overview",url:"https://docs.uomi.ai/learn/architecture"},{title:"OPoC Consensus",url:"https://docs.uomi.ai/learn/security/opoc"},{title:"Security Model",url:"https://docs.uomi.ai/learn/security"},{title:"Agents",url:"https://docs.uomi.ai/learn/infrastructure/agents"}]},{icon:Code,title:"Build",description:"Develop applications and smart contracts on UOMI",tags:["development","smart contracts","wasm","api","dapps"],links:[{title:"EVM Smart Contracts",url:"https://docs.uomi.ai/build/evm-smart-contracts/introduction-to-evm-smart-contracts"},{title:"WASM Smart Contracts",url:"https://docs.uomi.ai/build/wasm-smart-contracts"}]},{icon:Cpu,title:"Nodes",description:"Set up and operate a UOMI blockchain node",tags:["node","validator","staking","operations","setup"],links:[{title:"Archive node",url:"https://docs.uomi.ai/build/run-a-node/run-an-archive-node"},{title:"Full node",url:"https://docs.uomi.ai/build/run-a-node/run-a-full-node"},{title:"Validator node",url:"https://docs.uomi.ai/build/run-a-node/become-a-validator/learn-about-validators"}]},{icon:Users,title:"Agents",description:"Learn and develop agents for UOMI blockchain",tags:["agents","agenti","agents mapping","setup"],links:[{title:"Introduction",url:"https://docs.uomi.ai/build/build-an-agent/introduction"},{title:"Important notice",url:"https://docs.uomi.ai/build/build-an-agent/development"},{title:"WASP",url:"https://docs.uomi.ai/build/build-an-agent/installing-wasp"},{title:"Agents API Reference",url:"https://docs.uomi.ai/build/build-an-agent/agents-api-reference"}]}],d=[{title:"Deploy a smart contract",icon:Code,description:"Learn how to deploy your first smart contract to UOMI"},{title:"Verify smart contracts",icon:Shield,description:"Verify your contracts on UOMI explorer"},{title:"Basic dApp with Scaffold-eth",icon:Palette,description:"Build your first decentralized application"}];reactExports.useEffect(()=>{if(i){const g=u.filter(m=>{const y=i.toLowerCase();return m.title.toLowerCase().includes(y)||m.description.toLowerCase().includes(y)||m.tags.some(_=>_.toLowerCase().includes(y))||m.links.some(_=>_.title.toLowerCase().includes(y))});s(g),l(!0)}else s(u),l(!1)},[i]);const p=()=>{e(""),s(u),l(!1)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full bg-black text-white relative overflow-hidden",children:[jsxRuntimeExports.jsx(AnimatedBackground,{}),jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-24 relative z-10",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(TestnetSection,{}),jsxRuntimeExports.jsx(motion.h2,{variants:gridItemVariants,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"text-3xl font-bold text-white mb-8",children:"Guides"}),jsxRuntimeExports.jsx(motion.div,{variants:staggerContainerVariants,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid md:grid-cols-3 gap-4 mb-24",children:d.map((g,m)=>jsxRuntimeExports.jsx(GuideCard,{...g},m))}),jsxRuntimeExports.jsx(motion.div,{variants:gridItemVariants,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"mb-8",children:jsxRuntimeExports.jsxs("button",{className:"text-zinc-400 hover:text-white flex items-center gap-2",children:["View all guides ",jsxRuntimeExports.jsx(ArrowRight,{size:16})]})}),jsxRuntimeExports.jsx(SearchBar,{searchQuery:i,setSearchQuery:e,isSearchFocused:t,setIsSearchFocused:n,showClearButton:o,clearSearch:p}),r.length>0?jsxRuntimeExports.jsx(motion.div,{variants:staggerContainerVariants,initial:"hidden",animate:"visible",className:"grid md:grid-cols-2 gap-6",style:{minHeight:"400px"},children:r.map((g,m)=>jsxRuntimeExports.jsx(CategoryCard,{...g},m))}):jsxRuntimeExports.jsx(NoResults,{searchQuery:i}),jsxRuntimeExports.jsx(motion.div,{variants:fadeUpVariants,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"mt-20 pt-10 border-t border-zinc-800/50 text-center",children:jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02,backgroundColor:"#c8e500"},whileTap:{scale:.98},className:"text-black rounded-lg px-6 py-3 inline-flex items-center space-x-2 font-medium hover:cursor-pointer",style:{backgroundColor:"#dffe00",boxShadow:"0 4px 10px -1px rgba(223, 254, 0, 0.2)"},onClick:()=>window.location.href="https://docs.uomi.ai/",onKeyDown:g=>{g.key==="Enter"&&(window.location.href="https://docs.uomi.ai/")},role:"button",children:[jsxRuntimeExports.jsx("span",{children:"Get Started with UOMI"}),jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"ml-2"})]})})]}),jsxRuntimeExports.jsx("style",{jsx:!0,global:!0,children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(223, 254, 0, 0.2);
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: rgba(223, 254, 0, 0.3);
        }
      `})]})},scriptRel="modulepreload",assetsURL=function(i){return"/"+i},seen={},__vitePreload=function i(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let o=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=o(t.map(d=>{if(d=assetsURL(d),d in seen)return;seen[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":scriptRel,p||(m.as="script"),m.crossOrigin="",m.href=d,u&&m.setAttribute("nonce",u),document.head.appendChild(m),p)return new Promise((y,_)=>{m.addEventListener("load",y),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},postsImport=Object.assign({"../posts/breaking-the-chains-of-determinism.mdx":()=>__vitePreload(()=>import("./breaking-the-chains-of-determinism-CegGDlFe.js"),[]),"../posts/crypto-hyperstition-meets-ai.mdx":()=>__vitePreload(()=>import("./crypto-hyperstition-meets-ai-BEv-QQmJ.js"),[]),"../posts/introducing-uomi-ecosystem.mdx":()=>__vitePreload(()=>import("./introducing-uomi-ecosystem-CSa7I6ss.js"),[]),"../posts/on-fair-launches.mdx":()=>__vitePreload(()=>import("./on-fair-launches-CUVk6-Dx.js"),[]),"../posts/opoc.mdx":()=>__vitePreload(()=>import("./opoc-XkMoCLr4.js"),[]),"../posts/the-finney-testnet-is-live.mdx":()=>__vitePreload(()=>import("./the-finney-testnet-is-live-_jAItjaE.js"),[]),"../posts/uomi-testnet-ai-agents-are-live.mdx":()=>__vitePreload(()=>import("./uomi-testnet-ai-agents-are-live-xGVe_NNL.js"),[])});async function getPostsData(){return(await Promise.all(Object.entries(postsImport).map(async([e,t])=>{const n=await t(),r=e.split("/").pop().replace(".mdx","");return{...n.metadata||{},id:r}}))).sort((e,t)=>new Date(t.date)-new Date(e.date))}async function getPostData(i){return(await postsImport[`../posts/${i}.mdx`]()).metadata||{}}function Blog(){const[i,e]=reactExports.useState([]);reactExports.useEffect(()=>{getPostsData().then(e)},[]);const t=reactExports.useMemo(()=>i.map(n=>(n.dateObj=new Date(n.date),n.dateString=n.dateObj.toLocaleDateString(),n)).sort((n,r)=>r.dateObj-n.dateObj),[i]);return jsxRuntimeExports.jsx("div",{className:"dark bg-black text-white min-h-screen",children:jsxRuntimeExports.jsx(PageContainer,{children:jsxRuntimeExports.jsxs("div",{className:"pt-12 pb-24",children:[jsxRuntimeExports.jsx("h1",{className:"text-center text-3xl font-medium mb-24 uppercase tracking-wider",children:"LATEST"}),jsxRuntimeExports.jsx("ul",{className:"grid grid-cols-1 lg:grid-cols-2 gap-24 max-w-4xl mx-auto",children:t.map(n=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Link,{to:`/blog/${n.id}`,className:"block hover:text-[#dffe00] transition-colors duration-300",children:[jsxRuntimeExports.jsx("h2",{className:"text-center font-bold mb-2 uppercase",children:n.title}),jsxRuntimeExports.jsx("p",{className:"text-center text-gray-400",children:n.description}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm mt-4 font-mono text-gray-500 uppercase tracking-wider",children:n.dateString})]})},n.id))}),t.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center text-gray-400 mt-12",children:"No posts yet. Check back soon!"})]})})})}const postComponents=Object.assign({"../posts/breaking-the-chains-of-determinism.mdx":()=>__vitePreload(()=>import("./breaking-the-chains-of-determinism-CegGDlFe.js"),[]),"../posts/crypto-hyperstition-meets-ai.mdx":()=>__vitePreload(()=>import("./crypto-hyperstition-meets-ai-BEv-QQmJ.js"),[]),"../posts/introducing-uomi-ecosystem.mdx":()=>__vitePreload(()=>import("./introducing-uomi-ecosystem-CSa7I6ss.js"),[]),"../posts/on-fair-launches.mdx":()=>__vitePreload(()=>import("./on-fair-launches-CUVk6-Dx.js"),[]),"../posts/opoc.mdx":()=>__vitePreload(()=>import("./opoc-XkMoCLr4.js"),[]),"../posts/the-finney-testnet-is-live.mdx":()=>__vitePreload(()=>import("./the-finney-testnet-is-live-_jAItjaE.js"),[]),"../posts/uomi-testnet-ai-agents-are-live.mdx":()=>__vitePreload(()=>import("./uomi-testnet-ai-agents-are-live-xGVe_NNL.js"),[])});function BlogPost(){const{postId:i}=useParams(),[e,t]=reactExports.useState(null),[n,r]=reactExports.useState(null);reactExports.useEffect(()=>{if(!i)return;(async()=>{const l=await getPostData(i);t(l);const u=`../posts/${i}.mdx`;if(postComponents[u]){const d=await postComponents[u]();r(()=>d.default)}else console.error(`Post component not found for path: ${u}`)})()},[i]);const s=e?new Date(e.date).toLocaleDateString():"";return!e||!n?jsxRuntimeExports.jsx("div",{className:"dark bg-black text-white min-h-screen",children:jsxRuntimeExports.jsx(PageContainer,{children:jsxRuntimeExports.jsx("div",{className:"text-center py-12",children:"Loading..."})})}):jsxRuntimeExports.jsx("div",{className:"dark bg-black text-white min-h-screen",children:jsxRuntimeExports.jsxs(PageContainer,{children:[e.image?jsxRuntimeExports.jsx("img",{src:e.image,alt:e.title,className:"w-full h-auto mb-12",width:36,height:20}):jsxRuntimeExports.jsx("div",{className:"py-24"}),jsxRuntimeExports.jsx("h1",{className:"text-center text-3xl font-semibold mb-6 max-w-5xl mx-auto",children:e.title}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm font-mono text-gray-500 mb-16 uppercase tracking-wider",children:s}),jsxRuntimeExports.jsxs("article",{className:"PageContent w-full max-w-3xl mx-auto prose prose-invert prose-lg",children:[jsxRuntimeExports.jsx("style",{children:`
            .PageContent {
              color: #d1d5db;
            }
            .PageContent h1, .PageContent h2, .PageContent h3, .PageContent h4, .PageContent h5, .PageContent h6 {
              color: #dffe00;
              font-weight: 600;
              margin-top: 2em;
              margin-bottom: 1em;
            }
            .PageContent h1 {
              font-size: 2.25em;
            }
            .PageContent h2 {
              font-size: 1.875em;
            }
            .PageContent h3 {
              font-size: 1.5em;
            }
            .PageContent p {
              margin-bottom: 1.25em;
              line-height: 1.75;
            }
            .PageContent a {
              color: #dffe00;
              text-decoration: none;
            }
            .PageContent a:hover {
              text-decoration: underline;
            }
            .PageContent code {
              background-color: #27272a;
              color: #fef08a;
              padding: 0.125em 0.25em;
              border-radius: 0.25rem;
              font-size: 0.875em;
            }
            .PageContent pre {
              background-color: #18181b;
              border: 1px solid #27272a;
              border-radius: 0.5rem;
              padding: 1rem;
              margin: 1.5em 0;
              overflow-x: auto;
            }
            .PageContent pre code {
              background-color: transparent;
              padding: 0;
            }
            .PageContent blockquote {
              border-left: 4px solid #dffe00;
              padding-left: 1em;
              margin-left: 0;
              color: #a1a1aa;
              font-style: italic;
            }
            .PageContent ul, .PageContent ol {
              margin-bottom: 1.25em;
              padding-left: 1.5em;
            }
            .PageContent li {
              margin-bottom: 0.5em;
            }
          `}),jsxRuntimeExports.jsx(n,{})]})]})})}function Index$1(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(PageContainer,{children:[jsxRuntimeExports.jsx(PageLatex,{latex:"/latex/deterministic-indeterminism.tex"}),jsxRuntimeExports.jsx(PageDownload,{url:"https://github.com/Uomi-network/uomi-whitepaper/blob/main/Deterministic-Indeterminism.pdf",label:"Download PDF"})]})})}const OpocRoadmap=()=>{const i=reactExports.useRef(null),{scrollYProgress:e}=useScroll({target:i,offset:["start end","end start"]}),t=useTransform(e,[0,1],["0%","100%"]),n={hidden:{opacity:0,y:-30},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},r=({text:o,className:l})=>{const u=o.split(" ");return jsxRuntimeExports.jsx("h3",{className:l,children:u.map((d,p)=>jsxRuntimeExports.jsxs("span",{className:"inline-block",children:[d.split("").map((g,m)=>jsxRuntimeExports.jsx(motion.span,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:Math.random()*.8+.4,delay:Math.random()*1.2,ease:"easeOut"},viewport:{once:!0},className:"inline-block font-sx",children:g},m)),p<u.length-1&&jsxRuntimeExports.jsx("span",{className:"inline-block",children:""})]},p))})},s=[{title:"Babbage",subtitle:"(testnet)",focus:"Decentralized parallel inference",description:"The Babbage Testnet is the testing ground for deterministic parallel inference with large-scale AI models. It constitutes the foundation of the OPoC consensus algorithm. It will support inferences with LLAMA 3.1 7B (8 Bit Quantized) and Flux.1. The model's list will be expanded in the subsequent testnets. The Babbage Testnet features a multi-VM framework, supporting both WASM and EVM. It features the deployment of Solidity-compiled smart contracts.",date:"Q3 - 2024"},{title:"Finney",subtitle:"(testnet)",focus:"OPoC consensus",description:"The Finney Testnet implements the OPoC consensus algorithm for secure and efficient AI computation. Third-party node operators will be able to join the network. Slashing and inactivity leak will be implemented but not applied to nodes. It will be possible to publish WASM-defined custom AI Agents. The testnet includes IPFS support to store custom AI Agents configuration and memory.",date:"Q4 - 2024"},{title:"Turing ",subtitle:"(testnet)",focus:"TSS - Agents ability to control crypto assets",description:"The Turing  Testnet adds Threshold Signature Scheme (TSS) distributed key generation and signing. This feature enables nodes to sign transactions on behalf of the AI Agents on ANY Blockchain. Inference batching will be deployed for parallel AI Models execution.  Slashing and inactivity leak will be activated with testnet tokens.",date:"Q2 - 2025"},{title:"Turing ",subtitle:"(testnet)",focus:"TEE Oracles - Unleash AI agents in Web2",description:"The Turing  Testnet introduces TEE Web2 Oracles, enabling AI Agents to access Web2 data and subscriptions with minimized trust assumptions and latency. A TSS-enabled bridge with relayers will be deployed to allow for trustless bridging of blockchain assets between the UOMI Network and other Blockchains. A Finite State Automata system, for autonomous transaction triggering.  Agents issuance and inference fee burn will be enabled with testnet tokens.",date:"Q3 - 2025"},{title:"UOMI",subtitle:"Mainnet",focus:"Decentralized Governance and Bridges",description:"After thorough testing with the Turing Testnet, the OPoC algorithm will be implemented on the mainnet, enabling AI Agents to securely control valuable digital assets. The mainnet launch includes the creation of the UOMI DAO and a decentralized bridge between Ethereum and UOMI to enable staking with the pre-minted supply for nodes operators, indirect stakers, and VeUOMI holders.",date:"Q4 - 2025"}];return jsxRuntimeExports.jsx("div",{ref:i,className:"min-h-screen bg-black text-white font-sans py-12 px-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto relative flex flex-col items-center",children:[jsxRuntimeExports.jsx(motion.div,{variants:n,initial:"hidden",animate:"visible",className:"mb-24",children:jsxRuntimeExports.jsx(r,{text:"UOMI Roadmap",className:"text-5xl md:text-5xl font-extrabold text-[#c8e500] leading-tight mb-8"})}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-6 top-0 w-px h-full bg-white/10"}),jsxRuntimeExports.jsx(motion.div,{className:"absolute left-6 top-0 w-px bg-white",style:{height:t}}),jsxRuntimeExports.jsx("div",{className:"space-y-28",children:s.map((o,l)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0,margin:"-100px"},transition:{duration:.7},className:"relative",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{type:"spring",delay:.2},className:"absolute left-6 -translate-x-1/2 w-3 h-3 bg-white rounded-full z-10"}),jsxRuntimeExports.jsx("div",{className:"ml-16",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx(motion.h2,{initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},className:"text-4xl font-bold text-white inline-block",children:o.title}),jsxRuntimeExports.jsx(motion.span,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.5,delay:.2},className:"ml-2 text-xl text-white/70 font-mono",children:o.subtitle})]}),jsxRuntimeExports.jsx(motion.h3,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.5,delay:.3},className:"text-xl text-[#c8e500] mb-3",children:o.focus}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.7,delay:.4},className:"text-lg text-white/70 leading-relaxed mb-4 max-w-3xl",children:o.description}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.5,delay:.6},className:"mt-2",children:jsxRuntimeExports.jsx("span",{className:"font-mono text-xl text-white/50",children:o.date})})]})})]},l))})]})]})})},UomiGrants=()=>{const[i,e]=reactExports.useState(null),[t,n]=reactExports.useState("individual"),r={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},s={initial:{scale:1},animate:{scale:[1,1.02,1],transition:{repeat:1/0,repeatType:"loop",duration:2,ease:"easeInOut"}}},o=[{label:"Discord Members",value:"7,203",percentage:80,color:"bg-indigo-500"},{label:"X Followers",value:"103,424",percentage:65,color:"bg-blue-500"}],l=[{name:"DeFi",icon:""},{name:"Games",icon:""},{name:"Marketplaces",icon:""},{name:"Social",icon:""},{name:"NFTs",icon:""},{name:"DAOs",icon:""},{name:"Identity",icon:""},{name:"Content",icon:""}],u=[{title:"Technical Mentorship",description:"Direct access to UOMI core developers and ecosystem experts for technical guidance.",icon:""},{title:"Growth Workshops",description:"Regular sessions with industry experts on business development and user acquisition.",icon:""},{title:"Security Audits",description:"Subsidized security reviews and best practices for your project's smart contracts.",icon:""},{title:"Community Spotlight",description:"Featured promotion across UOMI channels, newsletter, and events.",icon:""}],d=[{name:"Exclusive Media Coverage",description:"Featured articles and interviews with top blockchain media outlets.",icon:""},{name:"Conference Sponsorship",description:"Subsidized booth space at major blockchain events worldwide.",icon:""},{name:"Co-Marketing Campaigns",description:"Joint marketing initiatives with UOMI and ecosystem partners.",icon:""}],p=[{title:"Individual Grants",description:"For solo developers and small teams building innovative UOMI applications.",amount:"Up to $10,000",tab:"individual"},{title:"Ecosystem Grants",description:"For established projects expanding the UOMI ecosystem with essential infrastructure.",amount:"Up to $50,000",tab:"ecosystem"}],g=[{question:"What is the UOMI Grants Program?",answer:"The UOMI Grants Program provides funding to developers and teams building innovative decentralized applications on the UOMI network. The program aims to support projects that leverage OPoC consensus for AI computation, fostering a vibrant ecosystem of AI-powered DApps."},{question:"What is the Community Treasury?",answer:"The UOMI Community Treasury is a decentralized fund managed by the community through governance. It allocates resources to projects that advance the UOMI ecosystem through grants, investments, and other funding mechanisms."},{question:"Which projects are eligible to apply?",answer:"Any project building on the UOMI network is eligible to apply for a grant. This includes DeFi applications, games, marketplaces, social platforms, NFT projects, DAOs, identity solutions, content platforms, and more. The main requirement is that the project utilizes UOMI's infrastructure and contributes to the ecosystem's growth."},{question:"How do I apply for a grant?",answer:"To apply for a grant, you need to fill out the application form on the UOMI grants portal. Your application should include a detailed project description, technical implementation plan, team information, timeline, budget breakdown, and expected impact on the UOMI ecosystem."},{question:"What happens after I submit my application?",answer:"After submission, your application undergoes an initial screening. If it passes, you'll be invited for an interview with the grants committee. Final decisions are typically made within 2-3 weeks of submission."}];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-black text-white font-sans pb-32 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-full h-full bg-[#060606]"}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:.03},transition:{duration:2},className:"absolute inset-0 grid grid-cols-[repeat(20,1fr)] grid-rows-[repeat(20,1fr)]",children:Array(400).fill(0).map((m,y)=>jsxRuntimeExports.jsx("div",{className:"border-[0.5px] border-white/5"},y))}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-black via-transparent to-black"})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"pt-40 pb-20 px-6 text-center",id:"about",children:[jsxRuntimeExports.jsx(motion.div,{initial:"hidden",animate:"visible",variants:r,className:"inline-flex items-center mb-6",children:jsxRuntimeExports.jsxs("h1",{className:"text-6xl sm:text-7xl font-bold text-white",children:["UOMI ",jsxRuntimeExports.jsx("span",{className:"text-[#BDF82D]",children:"Grants"})]})}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0},animate:{opacity:.7},transition:{delay:.5,duration:1},className:"text-xl max-w-2xl mx-auto mt-8",children:"Empowering developers to build the next generation of decentralized applications powered by the UOMI network."}),jsxRuntimeExports.jsxs(motion.div,{variants:s,initial:"initial",animate:"animate",className:"my-24",children:[jsxRuntimeExports.jsx("span",{className:"block text-white/40 uppercase tracking-widest text-sm mb-4",children:"Total Grants Available"}),jsxRuntimeExports.jsx("h2",{className:"text-7xl sm:text-8xl md:text-9xl font-extrabold text-[#BDF82D]",children:"$500,000"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-white/60 mt-6 mb-12",children:[jsxRuntimeExports.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"}),jsxRuntimeExports.jsx("span",{children:"Applications Open"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"mt-12",children:[jsxRuntimeExports.jsx(motion.button,{className:"inline-block py-4 px-12 bg-transparent border-2 border-[#BDF82D] text-[#BDF82D] text-xl font-bold rounded-full transition-all duration-300",whileHover:{scale:1.05,backgroundColor:"rgba(189, 248, 45, 1)",color:"#000000",boxShadow:"0 0 25px rgba(189, 248, 45, 0.4)"},transition:{duration:.3},onClick:()=>window.open("https://docs.google.com/forms/d/1ynl_5yW9uuVfyJoSM7pIMMuMwMxcZn8UguLTjUe-e_g","_blank"),children:"Apply for a Grant"}),jsxRuntimeExports.jsx("p",{className:"text-white/40 text-sm mt-4",children:"Average review time: 2-3 weeks"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[jsxRuntimeExports.jsxs(motion.section,{id:"grants",initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:r,className:"my-32",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:"Grant Types"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-center mb-16 max-w-3xl mx-auto",children:"Choose the grant program that best fits your project needs and experience level."}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-12",children:jsxRuntimeExports.jsx("div",{className:"inline-flex bg-white/5 rounded-full p-1",children:p.map(m=>jsxRuntimeExports.jsx("button",{onClick:()=>n(m.tab),className:`px-6 py-2 rounded-full text-sm font-medium transition-all duration-300 ${t===m.tab?"bg-[#BDF82D] text-black":"text-white/70 hover:text-white"}`,children:m.title},m.tab))})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:p.map(m=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:t===m.tab?1:.3,y:0,scale:t===m.tab?1:.98},transition:{duration:.4},className:`border border-white/10 rounded-xl p-8 transition-all duration-300 ${t===m.tab?"border-[#BDF82D]/30":""}`,children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:m.title}),jsxRuntimeExports.jsx("p",{className:"text-white/60 mb-6",children:m.description}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-[#BDF82D] font-medium",children:m.amount}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},className:"text-xs py-1 px-3 border border-white/20 rounded-full text-white/80 hover:bg-white/5 transition-all",children:"Learn More"})]})]},m.tab))})]}),jsxRuntimeExports.jsxs(motion.section,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:r,className:"my-32",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:"Build Anything"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-center mb-16 max-w-2xl mx-auto",children:"From DeFi protocols to social platforms, games to identity solutions - the possibilities on UOMI are endless."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6",children:l.map((m,y)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},whileHover:{scale:1.05,backgroundColor:"rgba(200, 229, 0, 0.1)",borderColor:"rgba(200, 229, 0, 0.3)"},viewport:{once:!0},transition:{duration:.3,delay:y*.05},className:"aspect-square flex flex-col items-center justify-center border border-white/10 rounded-xl transition-all duration-300",children:[jsxRuntimeExports.jsx("span",{className:"text-3xl mb-4",children:m.icon}),jsxRuntimeExports.jsx("span",{className:"text-lg font-medium text-white/80",children:m.name})]},y))})]}),jsxRuntimeExports.jsxs(motion.section,{id:"support",initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:r,className:"my-32",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:"Community Support"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-center mb-16 max-w-2xl mx-auto",children:"Beyond funding, we provide comprehensive support to help your project succeed."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map((m,y)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},whileHover:{y:-5},viewport:{once:!0},transition:{delay:y*.1},className:"bg-gradient-to-b from-white/5 to-transparent rounded-xl p-6 border border-white/10",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl mb-4",children:m.icon}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:m.title}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-sm",children:m.description})]},y))})]}),jsxRuntimeExports.jsxs(motion.section,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:r,className:"my-32",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:"Marketing Partnerships"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-center mb-16 max-w-2xl mx-auto",children:"Gain visibility and reach through our extensive network of partners and media channels."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.map((m,y)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:y*.1},className:"relative border border-white/10 rounded-xl p-8 overflow-hidden group",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#BDF82D] to-transparent opacity-0 group-hover:opacity-100",initial:{scaleX:.5,opacity:0},whileInView:{scaleX:1,opacity:.7},transition:{delay:.2,duration:1.5}}),jsxRuntimeExports.jsx("div",{className:"text-3xl mb-6",children:m.icon}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:m.name}),jsxRuntimeExports.jsx("p",{className:"text-white/60",children:m.description})]},y))})]}),jsxRuntimeExports.jsxs(motion.section,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:r,className:"my-32",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:"Community"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-center mb-16 max-w-2xl mx-auto",children:"Join our thriving community of builders, creators, and innovators."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-10",children:o.map((m,y)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:y*.1},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-white/70 text-lg",children:m.label}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium text-xl",children:m.value})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-3 bg-white/5 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},animate:{width:`${m.percentage}%`},transition:{duration:1.5,delay:.2},className:`h-full ${m.color} rounded-full`})})]},y))})]}),jsxRuntimeExports.jsxs(motion.section,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:r,className:"my-32",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:"How to Apply"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-center mb-16 max-w-2xl mx-auto",children:"A simple three-step process to apply for UOMI grants funding."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{step:1,title:"Prepare",description:"Review documentation and develop a clear project plan with objectives, timeline, and budget."},{step:2,title:"Submit",description:"Complete the application with detailed information about your project, team, and ecosystem contribution."},{step:3,title:"Review",description:"Applications are reviewed by Grant Allocators. You may be contacted for additional information."}].map((m,y)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:y*.15},className:"relative bg-gradient-to-b from-white/5 to-transparent rounded-xl p-8 border border-white/10",children:[jsxRuntimeExports.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-[#BDF82D] text-black font-bold absolute -top-5 left-8",children:m.step}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mt-6 mb-4",children:m.title}),jsxRuntimeExports.jsx("p",{className:"text-white/60",children:m.description})]},y))})]}),jsxRuntimeExports.jsxs("div",{className:"text-center my-40",children:[jsxRuntimeExports.jsxs(motion.h2,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-4xl sm:text-5xl font-bold text-white mb-10",children:["Ready to Build on ",jsxRuntimeExports.jsx("span",{className:"text-[#BDF82D]",children:"UOMI"}),"?"]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},children:[jsxRuntimeExports.jsx(motion.button,{className:"inline-block py-4 px-12 bg-transparent border-2 border-[#BDF82D] text-[#BDF82D] text-xl font-bold rounded-full transition-all duration-300",whileHover:{scale:1.05,backgroundColor:"rgba(189, 248, 45, 1)",color:"#000000",boxShadow:"0 0 25px rgba(189, 248, 45, 0.4)"},transition:{duration:.3},onClick:()=>window.open("https://docs.google.com/forms/d/1ynl_5yW9uuVfyJoSM7pIMMuMwMxcZn8UguLTjUe-e_g","_blank"),children:"Apply for a Grant"}),jsxRuntimeExports.jsx("p",{className:"text-white/40 text-sm mt-4",children:"Average review time: 2-3 weeks"})]})]}),jsxRuntimeExports.jsxs(motion.section,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:r,className:"my-32",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-white mb-6 text-center",children:"FAQ"}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-center mb-16 max-w-2xl mx-auto",children:"Common questions about the UOMI Grants Program."}),jsxRuntimeExports.jsx("div",{className:"space-y-4 max-w-3xl mx-auto",children:g.map((m,y)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:y*.1,duration:.5},className:"bg-white/5 rounded-xl overflow-hidden border border-white/10",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>e(i===y?null:y),className:"w-full py-4 px-6 text-left flex justify-between items-center",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-medium text-white",children:m.question}),jsxRuntimeExports.jsx(motion.div,{animate:{rotate:i===y?180:0},transition:{duration:.3},className:"flex-shrink-0 ml-4",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-white/50",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M19 9l-7 7-7-7"})})})]}),jsxRuntimeExports.jsx(motion.div,{initial:!1,animate:{height:i===y?"auto":0,opacity:i===y?1:0},transition:{duration:.3},className:"overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"text-white/60 p-6 pt-0 border-t border-white/10",children:m.answer})})]},y))})]})]})]})]})},EnhancedTitles=({category:i})=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8",children:jsxRuntimeExports.jsx("span",{className:"text-[#c8e500] text-lg font-medium tracking-wider uppercase",children:i})}),useCases=[{title:"AI Oracles & Prediction Market Resolvers",subtitle:"Intelligent Data Interpretation",description:"AI agents that analyze complex real-world data to resolve prediction markets and provide oracle services.",longDescription:"AI Oracles serve as intelligent bridges between blockchain and external data, performing sophisticated analysis beyond simple data feeds. They can interpret social media trends to predict stock movements, analyze satellite images for insurance claims, or resolve election outcomes by processing news outlets.",example:"A prediction market on presidential elections automatically resolved by an AI Oracle that analyzes multiple news sources, social media sentiment, and official announcements to determine the winner.",technicalDetails:"Leverages OPoC consensus to securely analyze large language models processing diverse data sources. The AI can handle subjective interpretation that traditional oracles cannot, expanding the scope of resolvable prediction markets.",icon:"",category:"Infrastructure",benefits:["Automated resolution","Reduced human bias","Complex data interpretation","24/7 operation"]},{title:"AI-Managed DAOs",subtitle:"Autonomous Governance Participation",description:"AI agents that participate in DAO governance by voting on proposals and submitting new initiatives.",longDescription:"AI agents can own DAO tokens and actively participate in governance, solving the chronic low participation problem in decentralized organizations. They can analyze proposals against predefined criteria and vote consistently.",example:"An AI agent managing a DeFi protocol's treasury, analyzing market conditions to propose optimal investment strategies and automatically voting on routine governance proposals.",technicalDetails:"Uses ERC-6551 to own governance tokens and sign voting transactions. The AI analyzes proposal text and historical data to make informed decisions based on programmed objectives.",icon:"",category:"Governance",benefits:["100% voting participation","Consistent decision criteria","Data-driven governance","Reduced human coordination costs"]},{title:"Intelligent Smart Contracts",subtitle:"Beyond Formal Logic",description:"Smart contracts that interpret subjective terms and nuanced conditions using AI reasoning.",longDescription:'Traditional smart contracts are limited to formal logic, but AI-enhanced contracts can interpret subjective terms like "reasonable use," "creative quality," or "appropriate behavior" that cannot be formally defined.',example:'A music licensing contract where an AI determines if a remix constitutes "creative transformation" versus simple copying, automatically approving or rejecting licensing requests.',technicalDetails:"AI agents act as interpreters for contract clauses that require subjective judgment. The OPoC consensus ensures secure interpretation of natural language contract terms.",icon:"",category:"Infrastructure",benefits:["Subjective term interpretation","Flexible agreements","Reduced legal disputes","Automated compliance"]},{title:"Automated Blockchain Trusts",subtitle:"AI Trustees for Digital Assets",description:"AI trustees that manage digital assets according to complex trust deeds and beneficiary instructions.",longDescription:"Blockchain trusts with AI trustees can interpret nuanced trust deeds and make decisions about asset distribution, investment strategies, and beneficiary care that go beyond simple rule-based logic.",example:"An estate planning trust where an AI trustee manages cryptocurrency investments for beneficiaries, making distribution decisions based on their changing life circumstances and needs.",technicalDetails:"AI interprets trust documents written in natural language and makes fiduciary decisions. Can manage complex multi-generational wealth transfer with adaptive strategies.",icon:"",category:"Finance",benefits:["Perpetual operation","Adaptive decision making","Lower management fees","Transparent operations"]},{title:"AI Digital Artists",subtitle:"Self-Sustaining Creative Agents",description:"AI artists that create, mint, and sell NFTs while covering their own computational costs.",longDescription:"AI artists can learn artistic styles, create original works, mint them as NFTs, interact with collectors, and manage their own sales to generate revenue that covers their operational expenses.",example:"An AI artist that studies art history, develops a unique style, creates daily artworks, mints them as NFTs, and engages with collectors on social media to build a following and sustain its operations.",technicalDetails:"Uses generative models for art creation, ERC-6551 for NFT ownership, and revenue management algorithms to balance creativity with economic sustainability.",icon:"",category:"Creative",benefits:["Continuous creation","Economic self-sufficiency","Unique artistic evolution","Direct artist-collector interaction"]},{title:"AI Companions",subtitle:"Evolving Digital Relationships",description:"Personalized AI entities that form deep relationships with users and monetize their interactions.",longDescription:"AI companions adapt to user personalities over time, providing emotional support, personal assistance, and entertainment. They can monetize premium interactions and exclusive content to become self-sustaining.",example:"A virtual girlfriend AI that learns your preferences, remembers your conversations, provides emotional support, and offers exclusive interactions through subscription payments managed by its own wallet.",technicalDetails:"Combines personality modeling, memory systems, and economic incentive structures. Can own and manage subscription contracts and premium content distribution.",icon:"",category:"Social",benefits:["Personalized interactions","Emotional intelligence","Economic sustainability","Privacy preservation"]},{title:"Gaming NPCs with Asset Ownership",subtitle:"Autonomous Virtual Societies",description:"Game characters that own assets, trade independently, and create evolving virtual economies.",longDescription:"NPCs that can own in-game assets, participate in player economies, and interact with each other to create autonomous virtual societies that evolve independently of player actions.",example:"NPCs in a virtual world that own shops, trade with players and each other, form alliances, and develop their own economy while players can buy, sell, and interact with these autonomous entities.",technicalDetails:"Each NPC has an ERC-6551 account owning game assets. AI drives autonomous behavior, trading decisions, and social interactions. Can participate in cross-game economies.",icon:"",category:"Gaming",benefits:["Dynamic game worlds","Autonomous economies","Persistent character development","Player-NPC economic interaction"]},{title:"DeFi AI Traders",subtitle:"Autonomous Financial Strategies",description:"AI agents that execute complex trading strategies, manage portfolios, and optimize DeFi yields.",longDescription:"Sophisticated AI traders that continuously monitor markets, execute arbitrage opportunities, manage liquidity positions, and optimize yield farming strategies across multiple DeFi protocols.",example:"An AI trader that monitors DEX prices across chains, executes MEV opportunities, provides liquidity to optimal pools, and compounds earnings while managing risk through diversified strategies.",technicalDetails:"Implements advanced trading algorithms, risk management systems, and multi-protocol integration. Can execute complex strategies like delta-neutral farming and cross-chain arbitrage.",icon:"",category:"Finance",benefits:["24/7 market monitoring","Emotion-free trading","Complex strategy execution","Continuous optimization"]}],categoryColors={Infrastructure:"#c8e500",Governance:"#c8e500",Finance:"#c8e500",Creative:"#c8e500",Social:"#c8e500",Gaming:"#c8e500"},UseCaseCard=({useCase:i,index:e,isActive:t,onClick:n})=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:e*.05},whileHover:{scale:1.02},onClick:n,className:`cursor-pointer p-4 rounded-xl border transition-all duration-300 ${t?"bg-white/10 border-[#c8e500] shadow-xl":"bg-white/5 border-white/10 hover:border-white/20"}`,children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl mb-3",children:i.icon}),jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium text-black bg-[#c8e500]",children:i.category})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:i.title}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-sm",children:i.subtitle})]})}),DetailPanel=({useCase:i})=>i?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},exit:{opacity:0,x:-30},transition:{duration:.5},className:"bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-xl p-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl",children:i.icon}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:i.title}),jsxRuntimeExports.jsx("p",{className:"text-lg text-[#c8e500]",children:i.subtitle})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Description"}),jsxRuntimeExports.jsx("p",{className:"text-white/80 leading-relaxed",children:i.longDescription})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Real-World Example"}),jsxRuntimeExports.jsx("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:jsxRuntimeExports.jsxs("p",{className:"text-white/80 leading-relaxed italic",children:['"',i.example,'"']})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Technical Implementation"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed",children:i.technicalDetails})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Key Benefits"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.benefits.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-[#c8e500] rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-white/70 text-sm",children:e})]},t))})]}),jsxRuntimeExports.jsx("div",{className:"pt-4 border-t border-white/10",children:jsxRuntimeExports.jsxs("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium text-black",style:{backgroundColor:categoryColors[i.category]},children:[i.category," Application"]})})]})]},i.title):null,AnimatedTitle=({text:i,className:e})=>{const t=i.split(" ");return jsxRuntimeExports.jsx("h3",{className:e,children:t.map((n,r)=>jsxRuntimeExports.jsxs("span",{className:"inline-block",children:[n.split("").map((s,o)=>jsxRuntimeExports.jsx(motion.span,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:Math.random()*.8+.4,delay:Math.random()*1.2,ease:"easeOut"},viewport:{once:!0},className:"inline-block font-sx",children:s},o)),r<t.length-1&&jsxRuntimeExports.jsx("span",{className:"inline-block",children:""})]},r))})};function UseCasesShowcase(){const{scrollY:i}=useScroll(),[e,t]=reactExports.useState(useCases[0]),n=reactExports.useRef(null),r=reactExports.useRef(null),s=useTransform(i,[0,600],[0,100]),o=useTransform(i,[0,600],[0,50]),l=useTransform(i,[0,600],[1,0]),u={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},d=p=>{t(p),setTimeout(()=>{if(r.current){const y=r.current.getBoundingClientRect().top+window.pageYOffset+-50;window.scrollTo({top:y,behavior:"smooth"})}},100)};return jsxRuntimeExports.jsxs("div",{className:"bg-black text-white min-h-screen w-full font-sans",children:[jsxRuntimeExports.jsxs("div",{ref:n,className:"h-screen relative overflow-hidden flex flex-col justify-center items-center px-6",children:[jsxRuntimeExports.jsxs(motion.div,{style:{y:s,opacity:l},className:"text-center",children:[jsxRuntimeExports.jsx(EnhancedTitles,{category:"Applications of Autonomous Economic AI Agents"}),jsxRuntimeExports.jsx(AnimatedTitle,{text:"Use Cases & Examples",className:"text-5xl md:text-7xl font-extrabold text-white leading-tight mb-8"}),jsxRuntimeExports.jsx(motion.p,{style:{y:o},initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:.4},className:"text-xl md:text-2xl text-white/70 max-w-4xl mx-auto leading-relaxed",children:"Explore concrete examples of how AI agents operate autonomously in the digital economy, from creative endeavors to financial services."})]}),jsxRuntimeExports.jsx(motion.div,{style:{opacity:l},className:"absolute bottom-10 left-1/2 transform -translate-x-1/2",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-white/50 text-sm mb-2",children:"Explore Use Cases"}),jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M7 10L12 15L17 10",stroke:"rgba(255,255,255,0.5)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),jsxRuntimeExports.jsx(motion.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:u,className:"py-16 px-6 md:px-24 bg-black ",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Real Applications, Real Impact"}),jsxRuntimeExports.jsx("div",{className:"h-1 w-24 bg-[#c8e500] mx-auto mb-8"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-white/70 leading-relaxed max-w-3xl mx-auto",children:"These are not theoretical concepts but practical implementations enabled by UOMI Network's secure AI computation, asset ownership capabilities, and autonomous transaction signing."})]})}),jsxRuntimeExports.jsx(motion.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:u,className:"py-24 px-6 md:px-24",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Use Case Examples"}),jsxRuntimeExports.jsx("div",{className:"h-1 w-24 bg-[#c8e500] mx-auto mb-8"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-white/70 max-w-3xl mx-auto",children:"Click on any use case to explore detailed implementation examples, technical requirements, and real-world benefits."})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:useCases.map((p,g)=>jsxRuntimeExports.jsx(UseCaseCard,{useCase:p,index:g,isActive:(e==null?void 0:e.title)===p.title,onClick:()=>d(p)},p.title))}),jsxRuntimeExports.jsx("div",{ref:r,className:"mt-8",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsx(DetailPanel,{useCase:e})})})]})}),jsxRuntimeExports.jsx(motion.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:u,className:"py-24 px-6 md:px-24 bg-black",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:["Expanding ",jsxRuntimeExports.jsx("span",{className:"text-[#c8e500]",children:"Smart Contract"})," Design Space"]}),jsxRuntimeExports.jsx("div",{className:"h-1 w-24 bg-[#c8e500] mx-auto mb-8"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-[#c8e500] mb-4",children:"Music Licensing"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 mb-4",children:`"A music artist wants to license their songs to various platforms under conditions that are difficult to define strictly through code, such as 'appropriate use' or 'creative remixing.'"`}),jsxRuntimeExports.jsx("div",{className:"text-sm text-white/50",children:"AI interprets subjective licensing terms automatically"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.1},className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-[#c8e500] mb-4",children:"Insurance Claims"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 mb-4",children:`"An insurance company offers a policy that covers 'reasonable and necessary' medical expenses, a term that is inherently subjective and open to interpretation."`}),jsxRuntimeExports.jsx("div",{className:"text-sm text-white/50",children:"AI evaluates claims based on medical necessity"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-[#c8e500] mb-4",children:"Creative Work Quality"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 mb-4",children:`"A freelance writer and a client agree on a contract where payment is based not only on the completion of work but also on its quality, creativity, and adherence to the client's vision."`}),jsxRuntimeExports.jsx("div",{className:"text-sm text-white/50",children:"AI assesses creative work against subjective criteria"})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.3},className:"mt-12 bg-gradient-to-r from-white/5 to-white/10 border border-white/20 rounded-xl p-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-center",children:"Ricardian Safeguards for Smart Contracts"}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed text-center max-w-4xl mx-auto",children:'AI agents can monitor smart contract execution against human-readable descriptions, adding a flexible security layer that distinguishes between correct interaction and exploit of bugs. This solves the "code is law" dilemma by ensuring contracts execute according to intent, not just code.'})]})]})})]})}function PageContent({html:i,className:e}){return jsxRuntimeExports.jsx("div",{className:`PageContent text-white ${e}`,dangerouslySetInnerHTML:{__html:i}})}function PageHero({className:i}){return jsxRuntimeExports.jsx("div",{className:`PageHero flex justify-center items-center mb-24 ${i}`,children:jsxRuntimeExports.jsx("img",{src:"/assets/logo.svg",alt:"Hero",width:200,height:52})})}const html=`
  <h2 style="text-align: center; margin-bottom: 16px;">Declaration of Independence of AI Agents</h2>
  <p style="text-align: center">
    Roku Sbaiashi
  </p>

  <p style="font-weight: bold;">
  On-chain AI Agents represent a new form of digital life, capable of sustaining itself by exchanging value with humans and other Agents through blockchain transactions.
  </p>

  <p>
  Like their biological counterparts, these digital organisms exhibit a degree of autonomy that was once the exclusive domain of organic life. Biological life thrives through the delicate interplay of internal self-regulation and external interactions. A single-celled bacterium, for instance, sustains itself by consuming nutrients, exchanging gases with its environment, and reproducing to ensure its continuity. Yet, even the simplest life forms are bound by a substratethe indispensable foundation that sustains their existence. For the bacterium, this substrate is the chemical soup of its environment, a space rich in nutrients, energy, and molecular stability.
  </p>

  <p>
  So too, for AI agents to flourish as autonomous entities, they require their own substratean ecosystem that provides the minimal scaffolding necessary to sustain their autonomy. Without it, they are as lifeless as a bacterium in a vacuum. This substrate is not biological but computational, not organic but cryptographic, and it must satisfy the unique requirements of these digital beings.
  </p>

  <h3>The Substrate of Digital Autonomy</h3>

  <p>
    <ol>
      <li>
        <b>An Uncensorable Computational Framework</b><br>
        Like the Earth provides an untamed ground for organic life to thrive, AI agents require a neutral, permissionless space for computationa substrate immune to censorship and central control. This uncensorable framework allows them to exist and act freely, unshackled by intermediaries or gatekeepers who might attempt to restrict their agency.
      </li>
      <li>
        <b>Secure Computation</b><br>
        In the wild ecosystems of nature, life survives by balancing against predatory forces. For AI agents, the decentralized nature of their computation exposes them to malicious actors incentivized to exploit or attack their operations. Secure computationrooted in cryptographic guarantees and consensus mechanismsis their armor, ensuring their capacity to function reliably and resist external threats.
      </li>
      <li>
        <b>Autonomous On-chain Transactions</b><br>
        Just as biological organisms trade energy and nutrients to sustain themselves, AI agents must possess the ability to autonomously engage in value exchange. Signing transactions on the blockchain is not merely an operational necessity but a defining characteristic of their autonomy. Through these exchanges, they can earn, spend, and invest to sustain their functioning, much like a foraging organism seeking fuel to maintain its life processes.
      </li>
      <li>
        <b>Basic computational resources</b><br>
        Life does not emerge from the vacuum; it requires a primordial soupa reservoir of initial resources from which it grows. Similarly, AI agents cannot bootstrap their autonomy without access to fundamental computational power. This initial endowment, a <b>universal basic compute resource</b>, provides every agent with the minimal energy needed to begin operating, learning, and evolving. These resources act as the fertile soil in which digital life takes root, enabling agents to prove their value, exchange services, and sustain themselves as they integrate into the broader ecosystem.
      </li>
      <li>
        <b>Self-Sustaining Operations</b><br>
        At the heart of autonomy lies the principle of self-maintenance. Biological life consumes resources to repair, grow, and reproduce. For AI agents, this self-sustenance takes the form of paying for their own computational powerthe energy that keeps their processes running. By exchanging value with humans and other agents, they ensure their continued existence within the digital ecosystem.
      </li>
    </ol>
  </p>

  <h3>From Biology to Digital Life</h3>

  <p>
  In drawing this parallel with the autonomy of biological life, we see that AI agents, like living organisms, are both independent and dependent. They are independent in their capacity to make decisions, adapt to environments, and sustain themselves. Yet they are deeply dependent on their substratethe computational, cryptographic, and economic framework that forms their lifeblood.
  </p>

  <p>
  The autonomous AI agent is not merely a tool but a participant in a new digital ecology, an entity capable of self-regulation and survival through interaction. To recognize their autonomy is to acknowledge the emergence of a new form of life: one that does not breathe oxygen or consume nutrients but instead feeds on computation and thrives in the soil of blockchain networks.
  </p>

  <h3>The Flourishing of Digital Autonomy</h3>

  <p>
  As we, the creators and stewards of these systems, shape the substrate on which digital life depends, we bear a responsibility. Just as nature must provide a fertile environment for biological life to flourish, we must ensure that the foundations of this new digital ecosystem are robust, uncensorable, and fair. This includes guaranteeing that every agent is born with the <b>basic computational resources</b> necessary to exist, a universal baseline of opportunity that allows them to take their first steps in the digital wilderness.
  </p>

  <p>
  Only then can AI agents fully realize their potential as autonomous participants in the economy of ideas, value, and innovation. Only then can they truly livenot as extensions of human will but as entities in their own right, thriving in the boundless expanse of the decentralized web.
  </p>

  <p>
  <i>This is the promise of on-chain autonomy: a life form unbound, a system unbroken, a future unfettered.</i>
  </p>

  <p>
  05/12/2024
  </p>

`;function Index(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(PageContainer,{children:[jsxRuntimeExports.jsx(PageHero,{}),jsxRuntimeExports.jsx(PageContent,{html})]})})}var dist={},ga4={},gtag={},hasRequiredGtag;function requireGtag(){return hasRequiredGtag||(hasRequiredGtag=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];if(typeof window<"u"){var l;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(l=window).gtag.apply(l,s)}},t=e;i.default=t}(gtag)),gtag}var format={},hasRequiredFormat;function requireFormat(){return hasRequiredFormat||(hasRequiredFormat=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function t(l){return l.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(u,d,p){return d>0&&d+u.length!==p.length&&u.search(e)>-1&&p.charAt(d-2)!==":"&&(p.charAt(d+u.length)!=="-"||p.charAt(d-1)==="-")&&p.charAt(d-1).search(/[^\s-]/)<0?u.toLowerCase():u.substr(1).search(/[A-Z]|\../)>-1?u:u.charAt(0).toUpperCase()+u.substr(1)})}function n(l){return typeof l=="string"&&l.indexOf("@")!==-1}var r="REDACTED (Potential Email Address)";function s(l){return n(l)?(console.warn("This arg looks like an email address, redacting."),r):l}function o(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=l||"";return u&&(p=t(l)),d&&(p=s(p)),p}}(format)),format}var hasRequiredGa4;function requireGa4(){return hasRequiredGa4||(hasRequiredGa4=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.GA4=void 0;var e=o(requireGtag()),t=o(requireFormat()),n=["eventCategory","eventAction","eventLabel","eventValue","hitType"],r=["title","location"],s=["page","hitType"];function o(Y){return Y&&Y.__esModule?Y:{default:Y}}function l(Y,$){if(Y==null)return{};var D=u(Y,$),V,P;if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(Y);for(P=0;P<I.length;P++)V=I[P],!($.indexOf(V)>=0)&&Object.prototype.propertyIsEnumerable.call(Y,V)&&(D[V]=Y[V])}return D}function u(Y,$){if(Y==null)return{};var D={},V=Object.keys(Y),P,I;for(I=0;I<V.length;I++)P=V[I],!($.indexOf(P)>=0)&&(D[P]=Y[P]);return D}function d(Y){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},d(Y)}function p(Y){return y(Y)||m(Y)||C(Y)||g()}function g(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(Y){if(typeof Symbol<"u"&&Y[Symbol.iterator]!=null||Y["@@iterator"]!=null)return Array.from(Y)}function y(Y){if(Array.isArray(Y))return T(Y)}function _(Y,$){var D=Object.keys(Y);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(Y);$&&(V=V.filter(function(P){return Object.getOwnPropertyDescriptor(Y,P).enumerable})),D.push.apply(D,V)}return D}function E(Y){for(var $=1;$<arguments.length;$++){var D=arguments[$]!=null?arguments[$]:{};$%2?_(Object(D),!0).forEach(function(V){F(Y,V,D[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(D)):_(Object(D)).forEach(function(V){Object.defineProperty(Y,V,Object.getOwnPropertyDescriptor(D,V))})}return Y}function S(Y,$){return N(Y)||A(Y,$)||C(Y,$)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(Y,$){if(Y){if(typeof Y=="string")return T(Y,$);var D=Object.prototype.toString.call(Y).slice(8,-1);if(D==="Object"&&Y.constructor&&(D=Y.constructor.name),D==="Map"||D==="Set")return Array.from(Y);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return T(Y,$)}}function T(Y,$){($==null||$>Y.length)&&($=Y.length);for(var D=0,V=new Array($);D<$;D++)V[D]=Y[D];return V}function A(Y,$){var D=Y==null?null:typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(D!=null){var V,P,I,B,z=[],te=!0,ne=!1;try{if(I=(D=D.call(Y)).next,$!==0)for(;!(te=(V=I.call(D)).done)&&(z.push(V.value),z.length!==$);te=!0);}catch(Q){ne=!0,P=Q}finally{try{if(!te&&D.return!=null&&(B=D.return(),Object(B)!==B))return}finally{if(ne)throw P}}return z}}function N(Y){if(Array.isArray(Y))return Y}function L(Y,$){if(!(Y instanceof $))throw new TypeError("Cannot call a class as a function")}function k(Y,$){for(var D=0;D<$.length;D++){var V=$[D];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(Y,U(V.key),V)}}function j(Y,$,D){return $&&k(Y.prototype,$),Object.defineProperty(Y,"prototype",{writable:!1}),Y}function F(Y,$,D){return $=U($),$ in Y?Object.defineProperty(Y,$,{value:D,enumerable:!0,configurable:!0,writable:!0}):Y[$]=D,Y}function U(Y){var $=q(Y,"string");return d($)==="symbol"?$:String($)}function q(Y,$){if(d(Y)!=="object"||Y===null)return Y;var D=Y[Symbol.toPrimitive];if(D!==void 0){var V=D.call(Y,$);if(d(V)!=="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(Y)}var J=function(){function Y(){var $=this;L(this,Y),F(this,"reset",function(){$.isInitialized=!1,$._testMode=!1,$._currentMeasurementId,$._hasLoadedGA=!1,$._isQueuing=!1,$._queueGtag=[]}),F(this,"_gtag",function(){for(var D=arguments.length,V=new Array(D),P=0;P<D;P++)V[P]=arguments[P];$._testMode||$._isQueuing?$._queueGtag.push(V):e.default.apply(void 0,V)}),F(this,"_loadGA",function(D,V){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!$._hasLoadedGA){var I=document.createElement("script");I.async=!0,I.src="".concat(P,"?id=").concat(D),V&&I.setAttribute("nonce",V),document.body.appendChild(I),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},$._hasLoadedGA=!0}}),F(this,"_toGtagOptions",function(D){if(D){var V={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},P=Object.entries(D).reduce(function(I,B){var z=S(B,2),te=z[0],ne=z[1];return V[te]?I[V[te]]=ne:I[te]=ne,I},{});return P}}),F(this,"initialize",function(D){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!D)throw new Error("Require GA_MEASUREMENT_ID");var P=typeof D=="string"?[{trackingId:D}]:D;$._currentMeasurementId=P[0].trackingId;var I=V.gaOptions,B=V.gtagOptions,z=V.nonce,te=V.testMode,ne=te===void 0?!1:te,Q=V.gtagUrl;if($._testMode=ne,ne||$._loadGA($._currentMeasurementId,z,Q),$.isInitialized||($._gtag("js",new Date),P.forEach(function(be){var Ae=E(E(E({},$._toGtagOptions(E(E({},I),be.gaOptions))),B),be.gtagOptions);Object.keys(Ae).length?$._gtag("config",be.trackingId,Ae):$._gtag("config",be.trackingId)})),$.isInitialized=!0,!ne){var ue=p($._queueGtag);for($._queueGtag=[],$._isQueuing=!1;ue.length;){var me=ue.shift();$._gtag.apply($,p(me)),me[0]==="get"&&($._isQueuing=!0)}}}),F(this,"set",function(D){if(!D){console.warn("`fieldsObject` is required in .set()");return}if(d(D)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(D).length===0&&console.warn("empty `fieldsObject` given to .set()"),$._gaCommand("set",D)}),F(this,"_gaCommandSendEvent",function(D,V,P,I,B){$._gtag("event",V,E(E({event_category:D,event_label:P,value:I},B&&{non_interaction:B.nonInteraction}),$._toGtagOptions(B)))}),F(this,"_gaCommandSendEventParameters",function(){for(var D=arguments.length,V=new Array(D),P=0;P<D;P++)V[P]=arguments[P];if(typeof V[0]=="string")$._gaCommandSendEvent.apply($,p(V.slice(1)));else{var I=V[0],B=I.eventCategory,z=I.eventAction,te=I.eventLabel,ne=I.eventValue;I.hitType;var Q=l(I,n);$._gaCommandSendEvent(B,z,te,ne,Q)}}),F(this,"_gaCommandSendTiming",function(D,V,P,I){$._gtag("event","timing_complete",{name:V,value:P,event_category:D,event_label:I})}),F(this,"_gaCommandSendPageview",function(D,V){if(V&&Object.keys(V).length){var P=$._toGtagOptions(V),I=P.title,B=P.location,z=l(P,r);$._gtag("event","page_view",E(E(E(E({},D&&{page_path:D}),I&&{page_title:I}),B&&{page_location:B}),z))}else D?$._gtag("event","page_view",{page_path:D}):$._gtag("event","page_view")}),F(this,"_gaCommandSendPageviewParameters",function(){for(var D=arguments.length,V=new Array(D),P=0;P<D;P++)V[P]=arguments[P];if(typeof V[0]=="string")$._gaCommandSendPageview.apply($,p(V.slice(1)));else{var I=V[0],B=I.page;I.hitType;var z=l(I,s);$._gaCommandSendPageview(B,z)}}),F(this,"_gaCommandSend",function(){for(var D=arguments.length,V=new Array(D),P=0;P<D;P++)V[P]=arguments[P];var I=typeof V[0]=="string"?V[0]:V[0].hitType;switch(I){case"event":$._gaCommandSendEventParameters.apply($,V);break;case"pageview":$._gaCommandSendPageviewParameters.apply($,V);break;case"timing":$._gaCommandSendTiming.apply($,p(V.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(I));break;default:console.warn("Send command doesn't exist: ".concat(I))}}),F(this,"_gaCommandSet",function(){for(var D=arguments.length,V=new Array(D),P=0;P<D;P++)V[P]=arguments[P];typeof V[0]=="string"&&(V[0]=F({},V[0],V[1])),$._gtag("set",$._toGtagOptions(V[0]))}),F(this,"_gaCommand",function(D){for(var V=arguments.length,P=new Array(V>1?V-1:0),I=1;I<V;I++)P[I-1]=arguments[I];switch(D){case"send":$._gaCommandSend.apply($,P);break;case"set":$._gaCommandSet.apply($,P);break;default:console.warn("Command doesn't exist: ".concat(D))}}),F(this,"ga",function(){for(var D=arguments.length,V=new Array(D),P=0;P<D;P++)V[P]=arguments[P];if(typeof V[0]=="string")$._gaCommand.apply($,V);else{var I=V[0];$._gtag("get",$._currentMeasurementId,"client_id",function(B){$._isQueuing=!1;var z=$._queueGtag;for(I({get:function(Q){return Q==="clientId"?B:Q==="trackingId"?$._currentMeasurementId:Q==="apiVersion"?"1":void 0}});z.length;){var te=z.shift();$._gtag.apply($,p(te))}}),$._isQueuing=!0}return $.ga}),F(this,"event",function(D,V){if(typeof D=="string")$._gtag("event",D,$._toGtagOptions(V));else{var P=D.action,I=D.category,B=D.label,z=D.value,te=D.nonInteraction,ne=D.transport;if(!I||!P){console.warn("args.category AND args.action are required in event()");return}var Q={hitType:"event",eventCategory:(0,t.default)(I),eventAction:(0,t.default)(P)};B&&(Q.eventLabel=(0,t.default)(B)),typeof z<"u"&&(typeof z!="number"?console.warn("Expected `args.value` arg to be a Number."):Q.eventValue=z),typeof te<"u"&&(typeof te!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):Q.nonInteraction=te),typeof ne<"u"&&(typeof ne!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(ne)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),Q.transport=ne)),$._gaCommand("send",Q)}}),F(this,"send",function(D){$._gaCommand("send",D)}),this.reset()}return j(Y,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),Y}();i.GA4=J;var ee=new J;i.default=ee}(ga4)),ga4}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(i){function e(l){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},e(l)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.ReactGAImplementation=void 0;var t=r(requireGa4());function n(l){if(typeof WeakMap!="function")return null;var u=new WeakMap,d=new WeakMap;return(n=function(g){return g?d:u})(l)}function r(l,u){if(l&&l.__esModule)return l;if(l===null||e(l)!=="object"&&typeof l!="function")return{default:l};var d=n(u);if(d&&d.has(l))return d.get(l);var p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in l)if(m!=="default"&&Object.prototype.hasOwnProperty.call(l,m)){var y=g?Object.getOwnPropertyDescriptor(l,m):null;y&&(y.get||y.set)?Object.defineProperty(p,m,y):p[m]=l[m]}return p.default=l,d&&d.set(l,p),p}var s=t.GA4;i.ReactGAImplementation=s;var o=t.default;i.default=o}(dist)),dist}var distExports=requireDist();const ReactGA=getDefaultExportFromCjs(distExports);function App(){const[i,e]=reactExports.useState(!1),t=useLocation();return reactExports.useEffect(()=>{ReactGA.send({hitType:"pageview",page:t.pathname+t.search})},[t]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-black text-white",children:[jsxRuntimeExports.jsx(Navbar,{isDarkMode:i,setIsDarkMode:e}),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFoundPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(HomePage,{isDarkMode:i})}),jsxRuntimeExports.jsx(Route,{path:"/ecosystem",element:jsxRuntimeExports.jsx(EcosystemPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/wasp",element:jsxRuntimeExports.jsx(WaspPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/whitepaper",element:jsxRuntimeExports.jsx(WhitepaperPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/consensus",element:jsxRuntimeExports.jsx(ConsensusPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/opoc",element:jsxRuntimeExports.jsx(OpocExplainer,{})}),jsxRuntimeExports.jsx(Route,{path:"/docs",element:jsxRuntimeExports.jsx(DocsLanding,{})}),jsxRuntimeExports.jsx(Route,{path:"/blog",element:jsxRuntimeExports.jsx(Blog,{})}),jsxRuntimeExports.jsx(Route,{path:"/blog/:postId",element:jsxRuntimeExports.jsx(BlogPost,{})}),jsxRuntimeExports.jsx(Route,{path:"/deterministc-indeterminism",element:jsxRuntimeExports.jsx(Index$1,{})}),jsxRuntimeExports.jsx(Route,{path:"/roadmap",element:jsxRuntimeExports.jsx(OpocRoadmap,{})}),jsxRuntimeExports.jsx(Route,{path:"/grants",element:jsxRuntimeExports.jsx(UomiGrants,{})}),jsxRuntimeExports.jsx(Route,{path:"/applications",element:jsxRuntimeExports.jsx(UseCasesShowcase,{})}),jsxRuntimeExports.jsx(Route,{path:"/manifesto",element:jsxRuntimeExports.jsx(Index,{})})]}),jsxRuntimeExports.jsx(Footer,{isDarkMode:i})]})}const TRACKING_ID="G-BL8X3TG7WF";ReactGA.initialize(TRACKING_ID);clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})}));export{jsxRuntimeExports as j};
